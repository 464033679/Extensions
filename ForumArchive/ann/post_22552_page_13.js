[{"Owner":"Nockawa","Date":"2017-02-22T01:49:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk people_co_ it took times_co_ sweat_co_ blood and tears (yeah_co_ that much)_co_ but I _lt_strong_gt_refactored the positioning engine_lt_/strong_gt_ of Canvas2D !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhy? Because it was bugged_co_ the margin/padding wasn_t_t considered when the primitive was inside another one that were autoSized (without explicit width/height). AutoSize wasn_t_t working as expected and there was a bunch of little annoying bugs here and there.... And the code was messy (well_co_ I_t_m not sure I improved on this_co_ but well...).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA simple example would be the Canvas Profile Info_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_let canvas _eq_ new ScreenSpaceCanvas2D(this.scene_co_ {\n    id_dd_ _qt_ProfileInfoCanvas_qt__co_ cachingStrategy_dd_ Canvas2D.CACHESTRATEGY_DONTCACHE_co_ children_dd_\n    [\n        new Rectangle2D({\n            id_dd_ _qt_ProfileBorder_qt__co_ border_dd_ _qt_#FFFFFFFF_qt__co_ borderThickness_dd_ 2_co_ roundRadius_dd_ 5_co_ fill_dd_ _qt_#C04040C0_qt__co_ marginAlignment_dd_ _qt_h_dd_ left_co_ v_dd_ top_qt__co_ margin_dd_ _qt_10_qt__co_ padding_dd_ _qt_10_qt__co_ children_dd_\n            [\n                new Text2D(_qt_Stats_qt__co_ { id_dd_ _qt_ProfileInfoText_qt__co_ marginAlignment_dd_ _qt_h_dd_ left_co_ v_dd_ top_qt__co_ fontName_dd_ _qt_12pt Lucida Console_qt__co_ fontSignedDistanceField_dd_ true })\n            ]\n        })\n\n    ]\n})_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tYou can now do such thing with a good reliability_co_ I mean the Rectangle is aligned on the top/left of the window away from 10 pixels (the margin)_co_ the content of the rect (which is the text) will have a padding of 10_co_ so there will be 10 pixels around the text. Thing is_co_ there_t_s no size set for the Rect! Because we want to fit the Rect from the Text and the marging_co_ padding and also the space took by the rounded Radius of the rect. So now I correctly compute all of this_co_ when the Text is changing_co_ I compute its size_co_ then I compute its layoutBoundingInfo object which is the area it takes for the layout and I_t_ll do the same for the Rect_co_ where the padding_co_ rounded border will be considered. It may not sound like it is_co_ but it_t_s was really hard to achieve because there_t_s code re entrance everywhere_co_ a child may needs the size of where it can be positioned to compute its own size_co_ but this size is sometime also determine by the child (and its siblings) itself_co_ so well...not easy.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m also now supporting scale with positioning_co_ request by _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8420_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/_qt_ rel_eq__qt__qt__gt_@royibernthal_lt_/a_gt_ it may not fully work because I didn_t_t test is thouroughly but the code base is here and it_t_s only a matter of tweaks now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8420_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/_qt_ rel_eq__qt__qt__gt_@royibernthal_lt_/a_gt_ I think you can try the new preview for your project_co_ the alignment should work better_co_ but you will report me issues concerning the propagation of the Scale_co_ so please let me know what_t_s not working so I can take a look and fix it asap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17014_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/_qt_ rel_eq__qt__qt__gt_@MasterK_lt_/a_gt_ You should try this with you current project_co_ the designSize should work again_co_ if it_t_s not the case I_t_ll take a look. I have other reports from _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/?do_eq_hovercard_qt_ data-mentionid_eq__qt_25416_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/_qt_ rel_eq__qt__qt__gt_@TMTH_lt_/a_gt_ about bugs on this matter_co_ I_t_ll take a look at all of this starting tomorrow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere_t_s a new preview build available_co_ ready for you to shot all the regressions_co_ I honestly hope there will be as few as possible_co_ because I_t_ve spent a really big amount of time to check everything I could check again_co_ but I couldn_t_t check your code_co_ so please_co_ do it for me.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat_t_s next?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve many little bug fixes and enhancements to do_co_ there are all reported here_dd_ _lt_a href_eq__qt_https_dd_//trello.com/b/eKMKhCFc/canvas2d_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//trello.com/b/eKMKhCFc/canvas2d_lt_/a_gt_ and I_t_ll start on it tomorrow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny regressions will be treated as absolute priority.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll also take a look at _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ GridLayoutPanel tomorrow_co_ there will maybe need some changes...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOnce all of this is done I sill have the Geometry clipping feature to code_co_ and I think I_t_ll also code the parent/child change feature.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen a little break will be done on C2D.... with a minimum of maintenance of course... So I can resume the work on the GUI Lib and I think I_t_m about to _lt_strong_gt_finally_lt_/strong_gt_ have the foundations to make a good one!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MasterK","Date":"2017-02-22T02:01:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_ It looks you did a hard fight with bugs. great ! I_t_ll update and try it when things not too much.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd my current version of c2d has a problem for long_dd_ set primitave levelVisible _eq_ false. and do some change to it_co_ when canvas use Cache Strategy_co_ it will throw gii is null or other error on next display frame. I dont make case. but lots of cases of our project show this problem. So lots of our UI panel need to delete canvas and recreate again.  Just let you known about this.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-02-22T03:06:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_164406_qt_ data-ipsquote-contentid_eq__qt_22552_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1487728899_qt_ data-ipsquote-userid_eq__qt_17014_qt_ data-ipsquote-username_eq__qt_MasterK_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ MasterK said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_ It looks you did a hard fight with bugs. great ! I_t_ll update and try it when things not too much.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tAnd my current version of c2d has a problem for long_dd_ set primitave levelVisible _eq_ false. and do some change to it_co_ when canvas use Cache Strategy_co_ it will throw gii is null or other error on next display frame. I dont make case. but lots of cases of our project show this problem. So lots of our UI panel need to delete canvas and recreate again.  Just let you known about this.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tCan you elaborate a bit more? Is it something like_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1) use the CANVASLEVEL cached strategy\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2) hide a primitive by setting its levelVisible _eq_ false\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3) change the primitive position/size or any other attribute\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen an error is thrown next frame.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs that it?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MasterK","Date":"2017-02-22T03:10:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat_t_s it. But i tried to make a simple case and failed. don_t_t know if there is other issue effect.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut all error caused by primitive levelVisble_eq_false.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand dispose a hidden primitive may cause it too. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-02-28T20:28:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello people_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere_t_s a new preview of Canvas2D and the PG is updated. What_t_s new lately...well_co_ bug fixing and improvements!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_1. Text Rendering_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tI_t_ve improved the way characters are generated and stored in the FontTexture. It should be more reliable now_co_ I_t_ve also finally introduced the concept of Text Baseline_co_ and that will be useful in the near future for Text2D_co_ to make sure the text is always correctly aligned vertically\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tI_t_ve improved the support of the BMFont files at the request of _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/?do_eq_hovercard_qt_ data-mentionid_eq__qt_25416_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/_qt_ rel_eq__qt__qt__gt_@TMTH_lt_/a_gt_ I can know display font generated with the BMFont software_co_ well_co_ at least the ones I tried.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tI_t_m still experimenting improvements of Text2D rendering at the request of _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24953_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/_qt_ rel_eq__qt__qt__gt_@jschwuch_lt_/a_gt_ and also previous people_co_ I hope to solve it soon.\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\t_lt_strong_gt_2. Device Pixel Ratio_lt_/strong_gt__lt_br /_gt_\n\tWell_co_ I had it on my todo list for a long time and now it_t_s done_co_ if you run a Canvas2D on a mobile device with a DPR &gt_sm_ 1_co_ the size will be identical to a DPR 1 equivalent. You can use Chome debugging _qt_device toolbar_qt_ to play with it and you_t_ll see it works. I_t_ve also fixed the bug of the SceneOptimizer that was changing the HardwareScalingLevel which caused the canvas to double in size...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_b_gt_3. Scale and DesignSize_lt_/b_gt__lt_br /_gt_\n\tIt has been a long fight and I hope it_t_s over...I_t_ve changed the way DesignSize is managed_co_ it_t_s no longer stored in the Canvas2D Scale property but in an internal one_co_ so it should be more stable/reliable for now._lt_br /_gt_\n\tScaling through hierarchy wasn_t_t working so well lately_co_ I made some regression trying to improve things. I can say now that I_t_ve stabilized things and the scaling work as it should be. I guess I have to check with _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8420_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/_qt_ rel_eq__qt__qt__gt_@royibernthal_lt_/a_gt_ if his project still require some work for me_co_ but I_t_m confident I can make it work if there_t_s still some little bugs\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_What_t_s Next!?_lt_/strong_gt__lt_br /_gt_\n\tI will follow the many remark/advises of _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/28689-canvas2d-origin-and-positioning-system/_qt_ rel_eq__qt__qt__gt_this thread_lt_/a_gt_ to make positioning working with scale/rotation_co_ I think I know what to do_co_ but I can_t_t guaranty it will be the unique solution_co_ I hope._lt_br /_gt_\n\tI_t_m finishing text improvement then I switch to this final task before resume what I was supposed to work on _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tCanvas2D is getting more and more reliable_co_ the many input/bug reports from everybody and especially _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/?do_eq_hovercard_qt_ data-mentionid_eq__qt_25416_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/_qt_ rel_eq__qt__qt__gt_@TMTH_lt_/a_gt_ lately pushed me in this direction_co_ I know I still have some improvement to make on the caching system_co_ but well...it will wait a bit! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tGive me some feedback_co_ remember_co_ if you have issue_co_ post a new question mentioning me!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-03-08T15:18:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt_t_s Christmas time! Well_co_ almost!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have few presents_co_ I worked hard to deliver them_co_ before speaking about everything that was made in the latest preview (_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/dist/preview%20release/canvas2D_qt_ rel_eq__qt_external nofollow_qt__gt_available here_lt_/a_gt_) I would like to speak about text rendering! So this post is only about that! _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24953_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/_qt_ rel_eq__qt__qt__gt_@jschwuch_lt_/a_gt_ and other should be happy about it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_What was wrong until now_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tTo construct the FontTexture texture_co_ I use a HTMLCanvas to render each character into it_co_ then copy the result back in the texture. The JS API would tell you about the width of a character (which is not always accurate by the way_co_ the number it returned it sometimes smaller than what is really rendered_co_ wtf...)_co_ but it_t_s not giving you neither the height or the baseline. And these are two values very important when you do text rendering. I finally have the piece of code that find them.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tI discovered that the center of a pixel for a HTMLCanvas 2D Context was 0.5_co_0.5 and not 0_co_0_co_ so far I was rendering everything aligned to half a pixel....not the best way to have a great quality_co_ specially for the small font!\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tDuring rendering I was using bilinear filtering and the ALPHA_COMBINE blending mode (except for Signed Distance Field which doesn_t_t require blending). Turned out that things were a bit complicate than this_co_ that_t_s why _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24953_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/_qt_ rel_eq__qt__qt__gt_@jschwuch_lt_/a_gt_ had the bug about white font over white text\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tHere_t_s a screenshot of _qt_before and after_qt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58c016ad643a7_RtfnW7K1.png.83a516fcab9b6fdc7cfd1f8cfd2b62d1.png_qt_ data-fileid_eq__qt_11914_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11914_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58c016ae923ae_RtfnW7K1.thumb.png.b2071e738d4ede2477e443ce3c3e36b7.png_qt_ alt_eq__qt_58c016ae923ae_RtfnW7K1.thumb.png.b2071e738d4ede2477e443ce3c3e36b7.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tClearly_co_ things improved!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_So what is the deal now?_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tDuring the writing of a char into the FontTexture_co_ I do a pass to compute the pixels in Premultiplied Alpha_co_ the RGB pixels are computed with their alpha and I store everything. Then I use the (debugged_co_ thanks _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt_) ALPHA_PREMULTIPLIED blend mode of Babylon.js to render the text_co_ the quality is improving because the antialised pixels (you see_co_ the grey pixels on the left pictures) are now correctly blended with the background color.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tAnother thing_co_ during the development of Text Rendering I switched many time between bilinear and nearest texture filtering_co_ now I know why_dd_ there_t_s not a right choice of filtering_co_ it depends on the situation\n\t\t_lt_ul_gt__lt_li_gt_\n\t\t\t\tIf your text is rendered in a Screen Space Canvas2D_co_ then nearest filtering has to be chose if your text is rendered with a scale of 1. Using bilinear filtering would lead to a blurry text for small fonts_co_ like the picture below. To compensate this issue you can choose to render the text using the fontSupersample setting_co_ the size being double internally_co_ the bilinear filtering produce a more accurate result. Note that bilinear filtering should be also chose if the text is rendered with a bigger scale\n\t\t\t_lt_/li_gt_\n\t\t_lt_/ul_gt__lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11915_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58c01af6bd793_6Np5TBi1.png.db7f0e328c05e650ee6a2c92b6b164ec.png_qt_ alt_eq__qt_58c01af6bd793_6Np5TBi1.png.db7f0e328c05e650ee6a2c92b6b164ec.png_qt_ /_gt__lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tIf your text is rendered in a World Space Canvas2D_co_ then the bilinear filtering should be always used_co_ if you_t_re dealing with a small sized font_co_ use the superSample settings. Below are two WSC with bilinear filtering on top and nearest on bottom for the _qt_World Space Canvas_qt_ text\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11916_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58c01d4024a92_VnOIBGU1.png.23e4c324b3f19d47ce1ab591c81199e9.png_qt_ alt_eq__qt_58c01d4024a92_VnOIBGU1.png.23e4c324b3f19d47ce1ab591c81199e9.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_What should you do?_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ nothing special in pretty much all the cases_co_ because even if there_t_s a useBilinearFiltering setting for Text2D if you don_t_t set it I will take nearest filtering for SSC and bilinear for WSC. You can choose to override this behavior by setting the value to true or false. Remember than this conversation is about non SDF mode_co_ if you_t_re using Signed Distance Field you won_t_t have to worry about texture filtering (because it has to be bi/trilinear).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Are we there_co_ finally?_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ almost! There_t_s one more thing left to be done to have a pretty decent text rendering and that would be considering the font_t_s baseline while centering/positioning the Text2D primitive. Today it_t_s not the case and you can see on the green buttons above there_t_s more space below than above_co_ it_t_s because I center the Text2D with the font_t_s height and it_t_s not what should be done_co_ a small offset should be applied to consider the baseline.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDon_t_t remember_co_ Signed Distance Field is your friend! No blending_co_ no transparency_co_ very fast rendering and good rendering quality in WSC.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58c01f4e58a64_8Pz0Neg1.png.ec173134c53aed2eee9b3c67528a987d.png_qt_ data-fileid_eq__qt_11917_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11917_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58c01f4e75e2e_8Pz0Neg1.thumb.png.9102df80a6c46148bee6258423c9e7b2.png_qt_ alt_eq__qt_58c01f4e75e2e_8Pz0Neg1.thumb.png.9102df80a6c46148bee6258423c9e7b2.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-03-08T16:23:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ it_t_s time to talk about the latest preview. You can find the _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/issues/1824_qt_ rel_eq__qt_external nofollow_qt__gt_git issue here_lt_/a_gt_. Some topics about the issues it solved _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/28294-primitivealignment-mechanics-is-broken-when-using-canvas-design-size/_qt_ rel_eq__qt__qt__gt_here_lt_/a_gt_ and _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/28689-canvas2d-origin-and-positioning-system/_qt_ rel_eq__qt__qt__gt_there_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll try to be as short as possible. Some people wanted the scale and rotation to be considered when the positioning engine was involved (i.e. when you use margin/marginAlignment) and also with the DesignSize on_co_ I have thought about this quite a lot and came up with the answer that it could be done if the origin property was ignored. So I programmed a lot to make this happens_co_ it_t_s not trivial and I_t_ve made more tests and fixes than coding the feature to make sure it would be the most stable/compatible with the previous code as possible. I_t_ve tested everything I could including a Canvas with DesignSize_co_ containing a Group with a Scale of 2 which contain a zooming/rotation primitive (also scaled by 2) aligned to the right/top corner of the group with a margin. I could resize the whole window_co_ everything working fine. I_t_ll do some doc soon and share some PG too.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/?do_eq_hovercard_qt_ data-mentionid_eq__qt_25416_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/25416-tmth/_qt_ rel_eq__qt__qt__gt_@TMTH_lt_/a_gt_ and _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8420_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/_qt_ rel_eq__qt__qt__gt_@royibernthal_lt_/a_gt_ that is for you_co_ if you still have issues_co_ contact me directly_co_ I_t_ll try to solve them. _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17014_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/_qt_ rel_eq__qt__qt__gt_@MasterK_lt_/a_gt_ whenever you can find some time to test it_co_ tell me what you think about it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve tested so much that I found a lot of little bugs_co_ I took the time to fix them all_co_ I wanted this release to be the most stable as possible. I don_t_t intend to touch this part of the code unless there_t_s bug fixing to do_co_ from now on I_t_ll think _lt_strong_gt_very carefully_lt_/strong_gt_ about adding a feature involved in this part of the code.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis development came with additional ones_dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tText rendering was improved_co_ as explained in the post above.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tI_t_m very proud of the little _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/canvas2D/src/Tools/babylon.c2dlogging.ts_qt_ rel_eq__qt_external nofollow_qt__gt_logging system_lt_/a_gt_ I made to log the many methods called during the positioning of a prim_co_ that was useful for debugging. This system has the major benefit to waste no cpu time when it_t_s turned off (which is the case by default). To turn it on you have to set _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/dist/preview%20release/canvas2D/babylon.canvas2d.js#L899_qt_ rel_eq__qt_external nofollow_qt__gt_this variable_lt_/a_gt_ to true and reload the web page. FYI I use a feature of (the infamous) TypeScript called Decorator to overload the method/properties that should log info to output text in the console_co_ before/after their call. If you are curious about what is output_co_ take a look at the file attached.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tThere_t_s a new setting you can use during the creation of primitive_dd_ alignToPixel. When true the primitive will be aligned to the render target_t_s pixel_co_ which mean if you position a Rect2D to 10.5_co_10.5 it will be rendered at the 10_co_10 position avoiding an antialiasing. I had to code this because the positioning engine no longer round the computed positions of the primitives_co_ because it_t_s dangerous when scale is involved. The only primitive that force this setting to true is the Text2D one_co_ otherwise the text rendering quality is not very good.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tThere_t_s a small breaking change in the constructor of the BitmapFontTexture class. The class was introduced in this beta of babylon.js_co_ I figured I could change it before the official release_co_ you_t_ll see that it_t_s no big deal_co_ there_t_s one more argument before the onLoad one_co_ called premultipliedAlpha_co_ because now the FontTextureBase class support the usePremultipliedAlpha property (which is used by the Text2D to select the adapted blending mode).\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tI_t_ve added in the Canvas2D profiling windows the time taken by the rendering of the Canvas2D...Go figure why I didn_t_t do this before...\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tI_t_ve made several optimizations_co_ caching more stuffs and also...avoiding some methods to be called more than once...no comment...\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tWell_co_ that_t_s it! Try it_co_ it should be better_co_ if it_t_s not (because I_t_m always too cautious)_co_ I_t_ll help and fix asap. But I do hope it_t_s a stable release.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll update documentation soon and include new PG to demonstrate the new features.\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_11919_qt__gt_log.txt_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-03-09T10:29:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMe again_co_ after a long silence_co_ I have a lot of things to say! _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWith the help of _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard_qt_ data-mentionid_eq__qt_10310_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt__gt_@RaananW_lt_/a_gt_ I just did a refactoring I planned for quite some time now_dd_ dropping the Matrix class for a new Matrix2D one!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerformances are critical to me in Canvas2D and the use of the Matrix class were not the best fit for a 2D Engine. This class stores a 4x4 matrix_co_ 16 floats_co_ and use them all for the various operations._lt_br /_gt_\n\tA 2D Engine has no care of Rotation around X or Y and doesn_t_t know about Z values and don_t_t use projection matrices. And this is a big deal because we can switch from 4x4 to 2x3. In theory it_t_s a 3x3 matrix_co_ but the last column is always equal to [0_co_0_co_1] so there_t_s no point to store these values and the computations are greatly reduces when we assume these values.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe result is quite impressive_co_ I wouldn_t_t think it would be that much_co_ I guess it_t_s a testament to the high performance of the rest of the code of Canvas2D (heavily relying on caches)_co_ one of my local test which is like _lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#OWCCR%238_qt_ rel_eq__qt_external nofollow_qt__gt_this PG_lt_/a_gt_ which is rotation 50 prim inside a rotating group was about 9ms of rendering time in Internet Explorer (yeah_co_ the crappiest JS browser_co_ ideal for perf optmizations) to 5.5. So Matrix operations were a big deal of the whole rendering process (when you move/rotate the prim of course). On Chrome I switched from 1.5ms to 1.2... Well_co_ I_t_ll take it! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_The consequences for you my friends_dd_ there_t_s a price to pay!_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBreaaaaaking changes_co_ I no longer expose Matrix related properties_co_ but Matrix2D. I don_t_t know if you all use the few properties that are concerned_co_ I think it_t_s unlikely_co_ but well_co_ you_t_ll tell me. But I think it_t_s a good move for the 3.0 of Babylon.js.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat_t_s all!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"davrous","Date":"2017-03-09T10:49:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWow. Awesome job _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_. Perf are really impressive!!!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-03-11T17:43:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve made a little update to reflect various feedback_co_ from _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17014_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/_qt_ rel_eq__qt__qt__gt_@MasterK_lt_/a_gt_ and _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8420_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/_qt_ rel_eq__qt__qt__gt_@royibernthal_lt_/a_gt_ mainly_co_ you can see the _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/1878_qt_ rel_eq__qt_external nofollow_qt__gt_PR here_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBasically here how things are working now for setting the position/x/y properties_dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tif you don_t_t use the positioning engine (no margin involved) you can use position/x/y to set an absolute position (well_co_ relative to the parent_t_s reference of frame)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tBefore this change if you tried to set position/x/y while positioning was involved I would issue a warning message in the console telling you that you shouldn_t_t do that because it wouldn_t_t make sense_co_ so I_t_ve changed that because some people don_t_t look at the console message... _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8420_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8420-royibernthal/_qt_ rel_eq__qt__qt__gt_@royibernthal_lt_/a_gt_ is you read this _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_ _lt_br /_gt_\n\t\tNow things will be more like _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17014_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17014-masterk/_qt_ rel_eq__qt__qt__gt_@MasterK_lt_/a_gt_ wanted them to be_dd_ it will set the margin value (in pixel) considering the alignment_dd_\n\t\t_lt_ul_gt__lt_li_gt_\n\t\t\t\tif there_t_s a left/center/stretch horizontal alignment_dd_ it will set the marginLeftPixel\n\t\t\t_lt_/li_gt_\n\t\t\t_lt_li_gt_\n\t\t\t\tif there_t_s a right horizontal alignment_dd_ it will set the marginRightPixel\n\t\t\t_lt_/li_gt_\n\t\t\t_lt_li_gt_\n\t\t\t\tif there_t_s a bottom/center/stretch vertical alignment_dd_ it will set the marginBottomPixel\n\t\t\t_lt_/li_gt_\n\t\t\t_lt_li_gt_\n\t\t\t\tif there_t_s a top vertical alignment_dd_ is will set the marginTopPixel\n\t\t\t_lt_/li_gt_\n\t\t_lt_/ul_gt__lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tI wait you feedback on this_dd_ is it a good thing or not_co_ I want to here from you_co_ please do in this thread_co_ I won_t_t get mad_dd_ promise! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Tell if it_t_s a good thing_co_ if you rather liked the way it were before or if you_t_d like me to throw an exception when using position/x/y.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve included new method to set the margin/marginAlignment and padding from a string value_co_ you have to use the setMargin_co_ setMarginAlignment and setPadding method_co_ all taking a string which accept a format identical to the construction of the primitive.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2017-03-11T22:16:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m pro throwing an exception as you already know _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ I think what you did could end up being even more confusing and harder to debug than a soft warning message_co_ especially in complex cases.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe new shortcuts sound good though.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MasterK","Date":"2017-03-13T02:01:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYeah. Follow me is right...\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]