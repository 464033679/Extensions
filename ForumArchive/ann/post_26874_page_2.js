[{"Owner":"BitOfGold","Date":"2016-12-23T14:03:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/12544-ozrocker/?do_eq_hovercard_qt_ data-mentionid_eq__qt_12544_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/12544-ozrocker/_qt_ rel_eq__qt__qt__gt_@ozRocker_lt_/a_gt__dd__lt_br /_gt_\n\tI recommend this_co_ about spatial partitioning (grid based message filtering) _dd__lt_br /_gt__lt_a href_eq__qt_https_dd_//davidwalsh.name/3d-websockets_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//davidwalsh.name/3d-websockets_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-12-23T23:31:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_156509_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1482501790_qt_ data-ipsquote-userid_eq__qt_7708_qt_ data-ipsquote-username_eq__qt_BitOfGold_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t9 hours ago_co_ BitOfGold said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/12544-ozrocker/?do_eq_hovercard_qt_ data-mentionid_eq__qt_12544_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/12544-ozrocker/_qt_ rel_eq__qt__qt__gt_@ozRocker_lt_/a_gt__dd__lt_br /_gt_\n\t\t\tI recommend this_co_ about spatial partitioning (grid based message filtering) _dd__lt_br /_gt__lt_a href_eq__qt_https_dd_//davidwalsh.name/3d-websockets_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//davidwalsh.name/3d-websockets_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tok_co_ neat!  Now I know I was on the right track with the grid.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt got really complicated though cos I was trying to deal with objects that were spanning 2 grid cells and also caching grid cells so players wouldn_t_t have to keep checking what_t_s in the grid cell when they move around unless the cell has been marked as _qt_dirty_qt_.  But if grids are the way to go_co_ I_t_ll investigate it further. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-12-24T14:25:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30-endel/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30-endel/_qt_ rel_eq__qt__qt__gt_@endel_lt_/a_gt_ that server seems pretty so far cool. I am not sure if I am using it the right way_co_ but it_t_s definable fun to play around with. _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ I have to admit that I never really used typescript before. Locally everything runs fine_co_ though. Now I wanted to deploy it to heroku to see how that works out... well_co_ somehow it didn_t_t... here comes the error log. Problem seems to be that _qt_tsc_dd_ not found_qt_ when compiling the server with _qt_npm install --prefix server &amp_sm_&amp_sm_ tsc -p server_qt_ ... any hint what I am doing wrong?\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_-----&gt_sm_ Node.js app detected\n-----&gt_sm_ Creating runtime environment\n       \n       NPM_CONFIG_LOGLEVEL_eq_error\n       NPM_CONFIG_PRODUCTION_eq_true\n       NODE_ENV_eq_production\n       NODE_MODULES_CACHE_eq_true\n-----&gt_sm_ Installing binaries\n       engines.node (package.json)_dd_  6.9.1\n       engines.npm (package.json)_dd_   unspecified (use default)\n       \n       Downloading and installing node 6.9.1...\n       Using default npm version_dd_ 3.10.8\n-----&gt_sm_ Restoring cache\n       Skipping cache restore (new runtime signature)\n-----&gt_sm_ Building dependencies\n       Installing node modules (package.json)\n       \n       &gt_sm_ babylonjs-colyseus@1.0.0 install /tmp/build_1f4a07a7597ab37694579564c70a41a7\n       &gt_sm_ npm run compile-server &amp_sm_&amp_sm_ npm run compile-client\n       \n       \n       &gt_sm_ babylonjs-colyseus@1.0.0 compile-server /tmp/build_1f4a07a7597ab37694579564c70a41a7\n       &gt_sm_ npm install --prefix server &amp_sm_&amp_sm_ tsc -p server\n       \n       babylonjs-colyseus-server@1.0.0 /tmp/build_1f4a07a7597ab37694579564c70a41a7/server\n       ├── @types/cors@0.0.33\n       ├─┬ @types/express@4.0.34\n       │ ├── @types/express-serve-static-core@4.0.39\n       │ └─┬ @types/serve-static@1.7.31\n       │   └── @types/mime@0.0.29\n       ├── @types/node@6.0.53\n       ├── @types/shortid@0.0.28\n       ├─┬ colyseus@0.4.4\n       │ ├── @types/fossil-delta@0.2.2\n       │ ├── @types/mocha@2.2.34\n       │ ├── @types/msgpack-lite@0.1.1\n       │ ├── @types/ws@0.0.35\n       │ ├─┬ clock-timer.js@1.1.4\n       │ │ └── clock.js@1.1.5\n       │ ├── fossil-delta@0.2.5\n       │ ├─┬ msgpack-lite@0.1.26\n       │ │ ├── event-lite@0.1.1\n       │ │ ├── ieee754@1.1.8\n       │ │ ├── int64-buffer@0.1.9\n       │ │ └── isarray@1.0.0\n       │ ├─┬ timeframe@0.3.5\n       │ │ └── harmony-proxy@1.0.1\n       │ └─┬ ws@1.1.1\n       │   ├── options@0.0.6\n       │   └── ultron@1.0.2\n       ├─┬ cors@2.8.1\n       │ └── vary@1.1.0\n       ├─┬ express@4.14.0\n       │ ├─┬ accepts@1.3.3\n       │ │ ├─┬ mime-types@2.1.13\n       │ │ │ └── mime-db@1.25.0\n       │ │ └── negotiator@0.6.1\n       │ ├── array-flatten@1.1.1\n       │ ├── content-disposition@0.5.1\n       │ ├── content-type@1.0.2\n       │ ├── cookie@0.3.1\n       │ ├── cookie-signature@1.0.6\n       │ ├─┬ debug@2.2.0\n       │ │ └── ms@0.7.1\n       │ ├── depd@1.1.0\n       │ ├── encodeurl@1.0.1\n       │ ├── escape-html@1.0.3\n       │ ├── etag@1.7.0\n       │ ├─┬ finalhandler@0.5.0\n       │ │ ├── statuses@1.3.1\n       │ │ └── unpipe@1.0.0\n       │ ├── fresh@0.3.0\n       │ ├── merge-descriptors@1.0.1\n       │ ├── methods@1.1.2\n       │ ├─┬ on-finished@2.3.0\n       │ │ └── ee-first@1.1.1\n       │ ├── parseurl@1.3.1\n       │ ├── path-to-regexp@0.1.7\n       │ ├─┬ proxy-addr@1.1.2\n       │ │ ├── forwarded@0.1.0\n       │ │ └── ipaddr.js@1.1.1\n       │ ├── qs@6.2.0\n       │ ├── range-parser@1.2.0\n       │ ├─┬ send@0.14.1\n       │ │ ├── destroy@1.0.4\n       │ │ ├─┬ http-errors@1.5.1\n       │ │ │ ├── inherits@2.0.3\n       │ │ │ └── setprototypeof@1.0.2\n       │ │ └── mime@1.3.4\n       │ ├── serve-static@1.11.1\n       │ ├─┬ type-is@1.6.14\n       │ │ └── media-typer@0.3.0\n       │ └── utils-merge@1.0.0\n       └── shortid@2.2.6\n       \n       sh_dd_ 1_dd_ tsc_dd_ not found\n       \n       npm ERR! Linux 3.13.0-105-generic\n       npm ERR! argv _qt_/tmp/build_1f4a07a7597ab37694579564c70a41a7/.heroku/node/bin/node_qt_ _qt_/tmp/build_1f4a07a7597ab37694579564c70a41a7/.heroku/node/bin/npm_qt_ _qt_run_qt_ _qt_compile-server_qt_\n       npm ERR! node v6.9.1\n       npm ERR! npm  v3.10.8\n       npm ERR! file sh\n       npm ERR! code ELIFECYCLE\n       npm ERR! errno ENOENT\n       npm ERR! syscall spawn\n       npm ERR! babylonjs-colyseus@1.0.0 compile-server_dd_ `npm install --prefix server &amp_sm_&amp_sm_ tsc -p server`\n       npm ERR! spawn ENOENT\n       npm ERR!\n       npm ERR! Failed at the babylonjs-colyseus@1.0.0 compile-server script _t_npm install --prefix server &amp_sm_&amp_sm_ tsc -p server_t_.\n       npm ERR! Make sure you have the latest version of node.js and npm installed.\n       npm ERR! If you do_co_ this is most likely a problem with the babylonjs-colyseus package_co_\n       npm ERR! not with npm itself.\n       npm ERR! Tell the author that this fails on your system_dd_\n       npm ERR!     npm install --prefix server &amp_sm_&amp_sm_ tsc -p server\n       npm ERR! You can get information on how to open an issue for this project with_dd_\n       npm ERR!     npm bugs babylonjs-colyseus\n       npm ERR! Or if that isn_t_t available_co_ you can get their info via_dd_\n       npm ERR!     npm owner ls babylonjs-colyseus\n       npm ERR! There is likely additional logging output above.\n       \n       npm ERR! Please include the following file with any support request_dd_\n       npm ERR!     /tmp/build_1f4a07a7597ab37694579564c70a41a7/npm-debug.log\n       \n       npm ERR! Linux 3.13.0-105-generic\n       npm ERR! argv _qt_/tmp/build_1f4a07a7597ab37694579564c70a41a7/.heroku/node/bin/node_qt_ _qt_/tmp/build_1f4a07a7597ab37694579564c70a41a7/.heroku/node/bin/npm_qt_ _qt_install_qt_ _qt_--unsafe-perm_qt_ _qt_--userconfig_qt_ _qt_/tmp/build_1f4a07a7597ab37694579564c70a41a7/.npmrc_qt_\n       npm ERR! node v6.9.1\n       npm ERR! npm  v3.10.8\n       npm ERR! code ELIFECYCLE\n       npm ERR! babylonjs-colyseus@1.0.0 install_dd_ `npm run compile-server &amp_sm_&amp_sm_ npm run compile-client`\n       npm ERR! Exit status 1\n       npm ERR!\n       npm ERR! Failed at the babylonjs-colyseus@1.0.0 install script _t_npm run compile-server &amp_sm_&amp_sm_ npm run compile-client_t_.\n       npm ERR! Make sure you have the latest version of node.js and npm installed.\n       npm ERR! If you do_co_ this is most likely a problem with the babylonjs-colyseus package_co_\n       npm ERR! not with npm itself.\n       npm ERR! Tell the author that this fails on your system_dd_\n       npm ERR!     npm run compile-server &amp_sm_&amp_sm_ npm run compile-client\n       npm ERR! You can get information on how to open an issue for this project with_dd_\n       npm ERR!     npm bugs babylonjs-colyseus\n       npm ERR! Or if that isn_t_t available_co_ you can get their info via_dd_\n       npm ERR!     npm owner ls babylonjs-colyseus\n       npm ERR! There is likely additional logging output above.\n       \n       npm ERR! Please include the following file with any support request_dd_\n       npm ERR!     /tmp/build_1f4a07a7597ab37694579564c70a41a7/npm-debug.log\n-----&gt_sm_ Build failed\n       \n       We_t_re sorry this build is failing! You can troubleshoot common issues here_dd_\n       https_dd_//devcenter.heroku.com/articles/troubleshooting-node-deploys\n       \n       If you_t_re stuck_co_ please submit a ticket so we can help_dd_\n       https_dd_//help.heroku.com/\n       \n       Love_co_\n       Heroku\n       \n !     Push rejected_co_ failed to compile Node.js app.\n !     Push failed_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-12-24T14:55:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_156433_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1482436498_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 22/12/2016 at 8_dd_54 PM_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYeah! teams! just what I like to hear.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22713_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/_qt_ rel_eq__qt__qt__gt_@Raggar_lt_/a_gt_ - you are not the first one facing this issue. There are a lot of resources about it (_lt_a href_eq__qt_http_dd_//www.gamedonia.com/blog/lag-compensation-techniques-for-multiplayer-games-in-realtime_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.gamedonia.com/blog/lag-compensation-techniques-for-multiplayer-games-in-realtime_lt_/a_gt_ for example). Timeframe_co_ the project you linked to_co_ is integrated in _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30-endel/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30-endel/_qt_ rel_eq__qt__qt__gt_@endel_lt_/a_gt__t_s server implementation_co_ so I would recommend giving it a try.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tMy 2 cents - don_t_t overcrowd the network channel. Send only what_t_s needed_co_ do whatever you can on the server. Limit the number of players in a single game_co_ or have very strong servers _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ one of the two.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI remember reading an article about slither.io _co_ which have around 600 players in each world. This do nothing new - compensate for lag using calculations on the server and estimations to your next point. If you play the game with network throttling you can actually see how they correct your position\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYeah_co_ but so far I haven_t_t found an article mentioning how it is implemented. As I wrote_co_ I_t_m unsure as how to _t_rewind_t_ the state server-side. But I guess it comes down to some testing_co_ as it would anyways.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have had a look at his server_co_ as well as GarageServer.io. Problem is_co_ I_t_ll have to use my own socket implementation_co_ as I have WebRTC running and handled in Node.js on my server. Player creation_co_ settings etc. are still done using sockets.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried a few ways of creating an authoritative server using Cannon.js both client- and server-side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1) Using Gabriel Gambetta_t_s example_dd_  _lt_a href_eq__qt_http_dd_//www.gabrielgambetta.com/fpm_live.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.gabrielgambetta.com/fpm_live.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2) On every input_co_ I save the position of my physics body_co_ then when I receive the position of the physics body according to the server_co_ as well as the input sequence number associated to this position_co_ I calculate the difference_co_ and move the client body to the new position_co_ there by making sure the client is in the right position. This one brought my some stange issues_co_ and doesn_t_t work the way I thought it would.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3) Interpolating the client position(slowly) towards the server position_co_ so no matter your latency_co_ you will be slightly off. This works decently_co_ but there are some issues with the exchange between the client and the server_co_ so if I qucikly press left_co_ right_co_ left_co_ it gets crazy out of sync.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo far the best option seems to be 1. This way I can use deltas for rotational data_co_ and it automatically takes care of packet loss too_co_ although it send quite a bit more info_co_ and there fore bigger packets.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe big issue with this solution is_co_ that it applies units to the position_co_ instead of using Cannon.js_t_ own velocity. This might cause some issues_co_ but still works a lot better than the other methods I tried out.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt uses delta time to calculate the distance_co_ so it is consistant across different frame rates. Speed Can be cheated this way_co_ but it_t_s just a matter of applying some speed check server-side_co_ as you would if you sent positions instead of inputs.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother thing is the rays. In Cannon.js it takes an ariginating point_co_ and a target point_co_ so I_t_ll either have to calculate these using Babylon.js_co_ and send them to the server. Or somehow calculate the target point on the server_co_ using Cannon.js and the rotation/direction of the player. The last one can only be cheated using traditional aimbots_co_ but I have no idea how to implement it. _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"endel","Date":"2016-12-24T17:35:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/12304-iiceman/?do_eq_hovercard_qt_ data-mentionid_eq__qt_12304_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/12304-iiceman/_qt_ rel_eq__qt__qt__gt_@iiceman_lt_/a_gt_ hey! this issue _lt_a href_eq__qt_https_dd_//github.com/endel/babylonjs-multiplayer-boilerplate/issues/1#issuecomment-266203854_qt_ rel_eq__qt_external nofollow_qt__gt_has been reported already_lt_/a_gt__co_ you just need to set NPM_CONFIG_PRODUCTION environment variable to false on Heroku._lt_br /_gt__lt_strong_gt_EDIT_dd__lt_/strong_gt_ If you want to try out the client v0.6.0 alpha_co_ I_t_ve recently added a new feature that simplifies listening to changes coming from the server_dd_ _lt_a href_eq__qt_https_dd_//github.com/gamestdio/colyseus.js#listening-to-room-state-change_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/gamestdio/colyseus.js#listening-to-room-state-change_lt_/a_gt_ The boilerplate is using v0.5.x that doesn_t_t have it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22713_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/_qt_ rel_eq__qt__qt__gt_@Raggar_lt_/a_gt_ about client prediction_co_ it very much depends on the experience you want your players to have. Sometimes_co_ simply interpolating values in the client is enough. _lt_a href_eq__qt_http_dd_//wilds.io/_qt_ rel_eq__qt_external nofollow_qt__gt_wilds.io_lt_/a_gt_ just interpolate player_t_s positions_co_ for example. Getting slightly out of sync is not really a big deal when it doesn_t_t influence the gameplay directly. If every player is kinda delayed_co_ nobody will ever be ahead in time. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor really fast objects then it might make sense to apply some sort of client-side prediction. So I_t_d recommend evaluating the kind of objects you have_co_ and which ones really makes sense to apply prediction or not. Cheers!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-12-24T23:24:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNice_co_ thanks for the quick feedback! Worked like a charm_dd_ _lt_a href_eq__qt_https_dd_//fierce-castle-80313.herokuapp.com/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//fierce-castle-80313.herokuapp.com/_lt_/a_gt_ (join with two clients to see the other one moving). doesnt use any prediction..just lerping... but looks smooth to me and seems to respond quite nicely. I_t_ll play around with it a bit more when I have time.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-12-26T13:11:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30-endel/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30-endel/_qt_ rel_eq__qt__qt__gt_@endel_lt_/a_gt_ I have updated the client... but haven_t_t really tried the new state change listener since I still have the feeling that I don_t_t use it the right way. If I want to tell the server and all the clients that one client did something..like moving_co_ what method do I use and how are the other clients supposed to listen? Right now I am doing that for sending data_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_setInterval(function () {\n\tif(\n\t\tprevCamPositon instanceof BABYLON.Vector3 &amp_sm_&amp_sm_\n\t\t(prevCamPositon.x !_eq__eq_ camera.position.x ||\n\t\tprevCamPositon.y !_eq__eq_ camera.position.y ||\n\t\tprevCamPositon.z !_eq__eq_ camera.position.z)\n\t) {\n\t\tprevCamPositon _eq_ camera.position.clone()_sm_\n\t\tconsole.log(room.state)_sm_\n\t\troom.send({\n\t\t\ttype_dd_ _t_position_t__co_\n\t\t\tposition_dd_ camera.position\n\t\t})_sm_\n\t}\n}_co_ 100)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAnd that for receiving data (updating target position of other clients but not my own - and then doing a lerp in the registerBeforeRender to smoothly transition to that target position)_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_room.onData.add(function (data) {\n\t// check if the server told me my client id\n\tif(data.hasOwnProperty(_t_type_t_) &amp_sm_&amp_sm_ data.type _eq__eq__eq_ _t_myClientId_t_){\n\t\tmyClientId _eq_ data.clientId\n\t}\n\n\t// check if server said something about a position update\n\tif(data.hasOwnProperty(_t_type_t_) &amp_sm_&amp_sm_ data.type _eq__eq__eq_ _t_position_t_ &amp_sm_&amp_sm_ data.clientId !_eq__eq_ myClientId) {\n\t\tif (players.hasOwnProperty(data.clientId) _eq__eq__eq_ false) {\n\t\t\tplayers[data.clientId] _eq_ BABYLON.MeshBuilder.CreateSphere(data.clientId_co_ {diameter_dd_ 1}_co_ scene)_sm_\n\t\t}\n\t\tplayers[data.clientId].targetPosition _eq_ new BABYLON.Vector3(data.position.x_co_ data.position.y_co_ data.position.z)_sm_\n\t}\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"endel","Date":"2016-12-26T21:16:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/12304-iiceman/?do_eq_hovercard_qt_ data-mentionid_eq__qt_12304_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/12304-iiceman/_qt_ rel_eq__qt__qt__gt_@iiceman_lt_/a_gt_ hey! alright. I see you_t_re using your client_t_s data and trying to replicate it to all clients. Depending on the kind of game you_t_re making_co_ this could be fine - it_t_s very likely_co_ though_co_ that all clients will be seeing a completely different state of the game. Ideally_co_ you should only send the _lt_strong_gt_action_lt_/strong_gt_ the clients are trying to perform to the server_co_ validate and then process them on the server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor position update_co_ the clients should send the command _qt_move forward_qt__co_ for example. And then the server calculates it based on the data it already has_co_ and updates the room state. When the room state is changed_co_ the changes will be broadcasted to all clients - and only then the entity will actually move.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn authoritative server implementations like this_co_ it_t_s important to never trust the client. Most of the game loop will be implemented on the server (movements_co_ collisions_co_ actions_co_ etc)_co_ even though some of them can be present in the client as well as some sort of prediction when it_t_s necessary.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe clients are usually just a dumb representation of the data coming from the server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope this helps_co_ and please let me know if you have any questions regarding the usage of Colyseus _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Cheers and happy holidays! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-12-26T22:59:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay... got it_co_ thanks for the explaination... makes sense indeed_co_ but makes things a lot more complicated at the same time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis means for example that I should not actually use the Babylon controls for the camera. I would have to re-implement the camera movement with its inertia and everything on the server side. Same goes for collisions detection with my level architecture. I don_t_t even know how to implement a simple ray casting on the server side...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis leads to the questions_dd_ is there a way that I can use those function from BabylonJs on the node server? I mean I don_t_t have a canvas... can I still somehow create scene and simulate everything on the server side?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAbout Colyseus itself... probably still a lot of questions... I think I have to look at more examples and try things out before I can actually put my thoughts into understandable questions_co_ but I_t_ll let you know when I am there _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-12-30T12:06:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_156616_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1482600950_qt_ data-ipsquote-userid_eq__qt_30_qt_ data-ipsquote-username_eq__qt_endel_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 24/12/2016 at 6_dd_35 PM_co_ endel said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22713_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/_qt_ rel_eq__qt__qt__gt_@Raggar_lt_/a_gt_ about client prediction_co_ it very much depends on the experience you want your players to have. Sometimes_co_ simply interpolating values in the client is enough. _lt_a href_eq__qt_http_dd_//wilds.io/_qt_ rel_eq__qt_external nofollow_qt__gt_wilds.io_lt_/a_gt_ just interpolate player_t_s positions_co_ for example. Getting slightly out of sync is not really a big deal when it doesn_t_t influence the gameplay directly. If every player is kinda delayed_co_ nobody will ever be ahead in time. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tFor really fast objects then it might make sense to apply some sort of client-side prediction. So I_t_d recommend evaluating the kind of objects you have_co_ and which ones really makes sense to apply prediction or not. Cheers!\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAs what I_t_m doing is nothing more than a generic FPS(so far)_co_ it is crucial that the positions are as accurate as possible at any times.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I were to make_co_ as an example_co_ a racing game_co_ I think interpolating the client position to the server_t_s would be perfectly fine.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-01-02T15:23:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey people!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHappy new year!!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am happy this thread is up and running.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWas wondering how your progress is. Anyone care to share what was already done and what is still not implemented? I think it will motivate all of us to know that the others are also still stuck on designing the login menu.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will start_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am building a turn-by-turn game_co_ based on angular.js and a real-time database (so far I am using firebase but I am considering moving to a self-hosted server). So far I have implemented the ability to create a game room_co_ join a game_co_ and see the list of games available_co_ as well as a simple login mechanism and the ability to upload your own avatar. As it is a turn-by-turn game_co_ I have implemented the progress-updater_co_ that receives events from other players and (for now) notifies the user that something was done. This works rather well. The entire thing is written in TypeScript.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tApart from canvas initialization and general tests I have not yet implemented anything with babylon.js . And my design abilities are far from perfect_co_ so the entire thing still looks like a demo hacked in 5 minutes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ this is me. So little time_co_ so much to do.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow about you?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-03T12:06:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell. So far_co_ I_t_ve chosen to go with interpolation to correct the positions of clients_co_ and if I speed up the velocity according to the latency of the client_co_ I seem to get a decent result. Very decent actually.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy problem as of now is_co_ that_dd_\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_156604_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1482591304_qt_ data-ipsquote-userid_eq__qt_22713_qt_ data-ipsquote-username_eq__qt_Raggar_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 24/12/2016 at 3_dd_55 PM_co_ Raggar said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t3) Interpolating the client position(slowly) towards the server position_co_ so no matter your latency_co_ you will be slightly off. This works decently_co_ but there are some issues with the exchange between the client and the server_co_ so _lt_strong_gt_if I qucikly press left_co_ right_co_ left_co_ it gets crazy out of sync_lt_/strong_gt_.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThis only happens in the multiplayer version of my code. In the test version_co_ it only happens rarely_co_ and not as severly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe two pieces of code are almost identical_co_ but this somehow happens without me knowing why _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAnd since they are so similar_co_ it_t_s hard to debug_co_ so I might just have to redo the multiplayer part bit by bit_co_ while constantly testing for the issue.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jpdev","Date":"2017-01-06T14:00:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_157254_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1483370584_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 1/2/2017 at 4_dd_23 PM_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHey people!\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t[...]\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tWas wondering how your progress is. Anyone care to share what was already done and what is still not implemented? I think it will motivate all of us to know that the others are also still stuck on designing the login menu.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t[...]\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tHow about you?\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI am happy to say I am still on it_co_ and here is my latest update_dd_\n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/27183-babylonjs-25-challange-jppresents-progress-blog-update-06012017/?do_eq_embed&amp_sm_comment_eq_157867&amp_sm_embedComment_eq_157867&amp_sm_embedDo_eq_findComment#comment-157867_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-07T13:40:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve the multiplayer part working_co_ prediction and correction of server state_co_ some of it based on latency so it looks better and more smooth.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNext step is interpolation of the game states from the server. I_t_m not quite sure how to implement this_co_ but I_t_m thinking about using delta time to calculate the lerp percentage to make it frame independent.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen when a new state is received from the server_co_ I snap to the previous state_co_ and uses the delta time to calculate the lerp. If I send the state to the clients 20 times each second_co_ and have ~60 fps_co_ I_t_ll use the ~17ms to get a value like .03 or point .05 depending on what looks the best.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo far I only send the client_t_s ping once every second_co_ and I_t_m planning to use this update to send a full state_co_ and then the remaining 19 to only send deltas. Whenever a client sends input_co_ they should send the last acknowledged full state_co_ and deltas are then then based on this state_co_ so packet losses won_t_t mess too much with the accuracy of the states. Right now_co_ I send all clients_t_ states 20 times a second_co_ but I_t_ll have to only send changed states_co_ too. But that shouldn_t_t take more than a few minutes to implement. Same thing goes with input. If neither rotation nor input has changed_co_ no need to send any.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe reason I mention packet loss is_co_ that I am planning to use WebRTC. I have a little test with it successfully running on Node.js as well as in the browser. I_t_ll just have to test whether I can_co_ in a stable way_co_ habe 2 dataChannels for each client_co_ one reliable and ordered and one unreliable and unordered. Otherwise I_t_ll have to implement reliability myself_co_ with retransmissions of packets and acknowledgments. I would prefer the first option_co_ though.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2 other issues I have are_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst_co_ right now I send 1 state for every client_co_ 20 times a second. With_co_ let_t_s say 10 clients_co_ that_t_s 10 states * 20 frames * 10 players * every second. That sounds like a lot_co_ so I_t_ll have to send updates in arrays_co_ and maybe split these array into smaller arrays_co_ depending on the sizes of the states_co_ as well as the player count_co_ as to not enforce MTU-fragmentation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe other one is_co_ that I_t_m sending inputs every frame_co_ that_t_s_co_ when everything runs smooth_co_ 60 times a second. I think this sounds like a lot_co_ too. But I_t_m afraid there is no way around it_co_ as the input applies velocities_co_ and because of that_co_ can_t_t just be applied at any time. It has to be as quickly as possible_co_ to get the most accurate results. I guess I could just send the inputs_co_ at most_co_ 20 or 30 times per second_co_ and suffer a bit from inaccuracy. But as this is the only data that i so far send from the client to the server_co_ I_t_m not too worried about it_co_ yet. Same goes with deltas. I_t_m not planning on sending deltas for rotations at this point_co_ but I might have to at some point.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-13T16:53:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tInterpolation of the other players now look smooth and right.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not too happy with the correction of the clients own player_co_ after applying some _t_only send when state has changed_t_ on the server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor now_co_ I_t_ll revert back to the old way of doing it_co_ as I guess this is more important to test_co_ as it will show how many players can actually be active and playing at once.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ at some point_co_ I can go back and give it a try again. I_t_m not quite sure where the issue happens_co_ as the functions are pretty much the same_co_ but somehow creates very different results. The first way is very accurate_co_ the second one seems to make it randomly inaccurate some times.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs there are some differences between the API of WebRTC and Socket.io_co_ the next step will be to implement the DataChannels_co_ then test and find a suitable solution to the reliable/unreliable problem with either my own implementation or multiple channels.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen comes delta compression_co_ which I have an idea how to implement_co_ based on every player_t_s own acknowledged state_co_ as I_t_ll have to send every state to every single connected player.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gugis","Date":"2017-01-16T22:15:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHere_t_s prototype of vehicular combat game I am working on right now_dd_ _lt_a href_eq__qt_https_dd_//cdn.rawgit.com/Gugis/test/09d5d0bb/ok.webm_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//cdn.rawgit.com/Gugis/test/09d5d0bb/ok.webm_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-22T00:23:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tEhh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI got server-side hitboxes properly working_co_ using 3 boxes to simplify intersection checking.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe problem I_t_m facing right now is_co_ that after changing from sockets to WebRTC_co_ I have some weird issues I can_t_t really figure out how to fix.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen one player joins_co_ everything runs smooth and perfectly as it did with sockets_co_ but as soon as another player joins_co_ the accuracy slowly gets worse. Then_co_ with any additional player_co_ it only gets worse. I tried with big and small packets_co_ but it doesn_t_t make any difference. The functions handling the interpolation of both the local player_co_ as well as the remote players run at about 0-2ms_co_ so this isn_t_t the bottleneck either.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have checked and double-checked my code many times_co_ but everything should simply work as it did before the switch._lt_br /_gt_\n\tThis is starting to give me quite a headache _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-23T15:46:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tStupid me.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor every frame in my network loop (20/sec)_co_ I create an array of the positions of every single player connected to the server_co_ and sends it to_co_ again_co_ every player connected to the server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat I did was create said array OUTSIDE of the _t_for loop_t_ handling every single player_co_ this resulted in the array containing duplicates of every players state.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo instead of an array looking like this (Simplified and made realable)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t[{playerID_dd_ 1_co_ position_dd_ 1}_co_ {playerID_dd_ 2_co_ position_dd_ 0}]_co_ the array would be_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t[{playerID_dd_ 1_co_ position_dd_ 1}_co_ {playerID_dd_ 2_co_ position_dd_ 0}_co_ {playerID_dd_ 1_co_ position_dd_ 1}_co_ {playerID_dd_ 2_co_ position_dd_ 0}]_co_ and of course increasing with the number of connections.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis was fixed by initiating the array inside the loop.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow I can have 5 players connected before the speed of the player object starts to get affected. Something else to investigate I guess _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tRight now_co_ I_t_m sending player inputs every frame_co_  at 60/sec_co_ which I would like to cut down to ~30/sec to save bandwidth_co_ but still keep it as accurate as possible. I will have to change the implementation_co_ so that only inputs that have changed will be sent_co_ but this early I like to assume that every player will be doing everything he can at any time. I tested the server_t_s received packets_co_ and 4 players summed up to just about the right amount of packets(4 * 60/sec).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-25T22:32:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIf someone has an idea of how to debug the following issue_co_ please let me know.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI send input to the server 30 times/second(96 bytes) from each and every player connected.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ with 5 players that is 150 updates/sec_co_ which the server handles pretty decently.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ when adding additional players_co_ the server doesn_t_t receive the right amount of updates_co_ but cuts off about 5-10 updates each second_co_ with every additional player.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe updates seem to drop randomly by every player_co_ so all players are affected. This happens whether I_t_m running the server locally_co_ or whether I_t_m running it on my OVH VPS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m afraid it might be an issue with electron-webrtc_co_ but I_t_m not sure how to troubleshoot this_co_ other than making a simple project and do some tests. Which I_t_ll do as soon as I got time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny ideas?_lt_br /_gt__lt_br /_gt_\n\tEDIT_dd__lt_br /_gt_\n\tI have some good and some bad news.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe good news_dd_ Running 13+ concurrent connections with datachannels runs smoothly_co_ and correctly receives all my packets_co_ made up of objects very similar to my game in structure and size.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe bad news_dd_ This means there is something in my game project slowing down either the datachannels or the loop counting incoming packets.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNothing obvious_co_ though. So I guess I_t_ll have to do some trial and error _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-01-26T06:53:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_156451_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1482449104_qt_ data-ipsquote-userid_eq__qt_12544_qt_ data-ipsquote-username_eq__qt_ozRocker_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 12/22/2016 at 3_dd_25 PM_co_ ozRocker said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI also got stuck on the messaging system.  If there are 30 people running around far away from eachother_co_ I don_t_t want all movement messages from all 30 people going to everyone.  This would clog up the network.  I tried to create a grid-like system where only players within 2 grid cells away would be notified of movement.  It got really complicated and I couldn_t_t find any info on this so I gave up.  But I_t_m sure in large multiplayer worlds there is some kind of streamlining going on with message broadcasts.  I doubt World of Warcraft would broadcast the actions of every single item and player to everyone connected.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tOnly to those on the same channel_co_ channels were split up into areas or regions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tyour gonna have loss not matter what do to different client responses times.  That_t_s why narrowing down the packet communcation to as limited as a scope as possible is important. But in reality if your sever is fast enough there is nothing stoping 1000+ people from being on a single channel with minimal loss. Some guys will get the short stick though just because their packets will resolve slower and the effect of which would be negated because some other users information already superceded it\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tedit...\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti hope this was not too far of a dig out of the past_co_ but I was reading this thread and that was the last post I got to_co_ I did not realize so much more was talked about so my response may be moot.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2017-01-26T07:27:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_160951_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1485413583_qt_ data-ipsquote-userid_eq__qt_19199_qt_ data-ipsquote-username_eq__qt_Pryme8_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t23 minutes ago_co_ Pryme8 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tOnly to those on the same channel_co_ channels were split up into areas or regions.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tyour gonna have loss not matter what do to different client responses times.  That_t_s why narrowing down the packet communcation to as limited as a scope as possible is important. But in reality if your sever is fast enough there is nothing stoping 1000+ people from being on a single channel with minimal loss. Some guys will get the short stick though just because their packets will resolve slower and the effect of which would be negated because some other users information already superceded it\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tedit...\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\ti hope this was not too far of a dig out of the past_co_ but I was reading this thread and that was the last post I got to_co_ I did not realize so much more was talked about so my response may be moot.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI_t_m glad someone actually responded to this _t_cos I still don_t_t know how to solve it.  With regions I didn_t_t want an avatar to be at the edge of a region and see nothing_co_ then walk 5 pixels forward then suddenly everything in the new region appears.  So what I did was to hide objects/avatars that are 2 regions away.  Then I was trying to cope with objects that lie across multiple regions_co_ then figure out ways to update an avatar_t_s region cache when something moves in a hidden region.  The code got messy and I felt like I was adding more and more exceptions for special cases.  There_t_s gotta be that one magic article out there that explains how people do this _t_cos its a common problem.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jpdev","Date":"2017-01-28T08:20:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_153988_qt_ data-ipsquote-contentid_eq__qt_26874_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1481109934_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 12/7/2016 at 0_dd_25 PM_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYou guys have time _lt_u_gt_until the 28th of February_lt_/u_gt_! Which is a long time. \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tIt_t_s not anymore...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDidn_t_t manage to do much on my project this week. Only one month to go.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ I guess we need to _lt_em_gt_chaaaaarge_lt_/em_gt_ to the finish line... \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_chargenow.gif_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//jppresents.net/static/files/images/chargenow.gif_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_10px_sm__qt__gt_(A very good use of the limited project time is to make gifs for stupid puns...)_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-29T10:33:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo way I_t_m gonna make it _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI still consider myself heavily in the testing phase.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn my initial WebRTC testing_co_ I found that having a socket connection sending data didn_t_t affect the dataChannel_co_ however_co_ it does seem to induce some packet loss now_co_ one way or another.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI did a full implementation of WebRTC_co_ so only the handshake was done using the socket connection_co_ but it stopped working at some point. Time to start using git? _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIf I run multiple windows of my game_co_ the framerate drops to ~40_co_ even as my scene is very simple. Some profiling is needed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can now have 10 concurrent clients before it starts to hang_co_ and give inaccurate results for the prediction. I_t_m not sure where the issue is_co_ as the server seems to recieve the updates_co_ it seems to send the states_co_ and the clients all seem to receive the states. But again_co_ some profiling might help_co_ especially on the server-side_co_ which I haven_t_t tried before_co_ but according to some Google searches_co_ should be possible.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-01-30T15:05:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDeadlines are always a pain! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI had a few personal reasons for delaying the work on my game_co_ but I think I will make it to my own (...) deadline. But! If anyone needs more time_co_ just let me know here. It will be a shame if some of you need a few more days and that would be a reason not submitting the game.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ keep on working_co_ let me know what_t_s up_co_ be well_co_ and may the Schwartz be with you.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-02-02T16:47:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat_t_s why when entering things like this time is a valuable asset as well_co_ and you gotta pick a scope that can be accomplished in the time frame.  Sad I could not join you guys for this round just a little to budy these days... maybe the next one.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/12544-ozrocker/?do_eq_hovercard_qt_ data-mentionid_eq__qt_12544_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/12544-ozrocker/_qt_ rel_eq__qt__qt__gt_@ozRocker_lt_/a_gt_ If I see an article with that info about channels Ill link it up for you.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]