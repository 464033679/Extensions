[{"Owner":"AlbertTJames","Date":"2017-01-08T15:39:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have 4 sprite2D buttons in an array. They are the only visible sprites on a canvas_co_ but not the only one (several with opacity 0).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I dispose of 3 among the 4 everything is fine.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_elements2D.levelButtons[0].dispose()_sm_\nelements2D.levelButtons[1].dispose()_sm_\n// elements2D.levelButtons[2].dispose()_sm_\nelements2D.levelButtons[3].dispose()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut if I dispose of all of them webGL throws a warning on a couple of render() - i_t_d say around 100 engine.render(). During those render any call to add primitives is not taken into account_co_ resulting in a slight delay. Then_co_ without any reason the warnings stop and calls to render and modify sprite are taking into account and rendered.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_babylon.2.5.max.js_dd_7685 WebGL_dd_ INVALID_OPERATION_dd_ drawElements_dd_ no buffer is bound to enabled attribute\nEngine.draw @ babylon.2.5.max.js_dd_7685\nRectangle2DRenderCache.render @ babylon.2.5.canvas2d.max.js_dd_8864\nGroup2D._renderTransparentData @ babylon.2.5.canvas2d.max.js_dd_8415\nGroup2D._groupRender @ babylon.2.5.canvas2d.max.js_dd_8287\nCanvas2D._render @ babylon.2.5.canvas2d.max.js_dd_13009\n(anonymous) @ babylon.2.5.canvas2d.max.js_dd_11954\nObservable.notifyObservers @ babylon.2.5.max.js_dd_3605\nScene.render @ babylon.2.5.max.js_dd_18697\n(anonymous) @ catch-the-wolf-mri.js_dd_653\nEngine._renderLoop @ babylon.2.5.max.js_dd_7166\nrequestAnimationFrame (async)\nTools.QueueNewFrame @ babylon.2.5.max.js_dd_4878\nEngine._renderLoop @ babylon.2.5.max.js_dd_7173\nrequestAnimationFrame (async)\nTools.QueueNewFrame @ babylon.2.5.max.js_dd_4878\nEngine._renderLoop @ babylon.2.5.max.js_dd_7173\nrequestAnimationFrame (async)\nTools.QueueNewFrame @ babylon.2.5.max.js_dd_4878\nEngine._renderLoop @ babylon.2.5.max.js_dd_7173\nrequestAnimationFrame (async)\nTools.QueueNewFrame @ babylon.2.5.max.js_dd_4878\nEngine._renderLoop @ babylon.2.5.max.js_dd_7173_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI have no idea where it is coming from. It is not due to the fact that they are in an array_co_ if I add another unrelated button to the scene I can dispose of the four rect without warning.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is my function creating the button_co_ but I am not sure it is coming from that_co_ I sometime had the same behavior when using dispose() in other contexts.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var addButton _eq_ function (stateManager _eq_ mandatory()_co_ options _eq_ null) {\n    return new Promise(function (resolve_co_ reject) {\n      if (typeof stateManager._parent.parentTaskObject _eq__eq__eq_ _qt_undefined_qt_) {\n        throw new Error(_qt_stateManager.addButton_dd_ stateManager._parent.parentTaskObject is undefined_qt_)_sm_\n      }\n\n      var baseOptions _eq_ {\n        id_dd_ _qt_button_qt_ + stateManager.timeInMs_co_\n        text_dd_ _qt_text_qt__co_\n        x_dd_ 50_co_\n        y_dd_ 50_co_\n        width_dd_ 100_co_\n        height_dd_ 50_co_\n        fill_dd_ BABYLON.Canvas2D.GetSolidColorBrush(new BABYLON.Color4(0.8_co_ 0.8_co_ 0.8_co_ 1))_co_\n        clickEventData_dd_ null_co_\n        fontName_dd_ _qt_30pt Arial_qt__co_\n        baseOpacity_dd_ 0.8_co_\n        hoverOpacity_dd_ 1\n      }_sm_\n\n      options _eq_ _.extend(baseOptions_co_ options)_sm_\n\n      var elements2D _eq_ stateManager.getGlobal(_qt_elements2D_qt_)_sm_\n      var canvas _eq_ elements2D.canvas_sm_\n\n      // create button and add to canvas \n      var buttonRect _eq_ new BABYLON.Rectangle2D({\n        parent_dd_ canvas_co_\n        id_dd_ options.id_co_\n        x_dd_ options.x_co_\n        y_dd_ options.y_co_\n        width_dd_ options.width_co_\n        height_dd_ options.height_co_\n        fill_dd_ options.fill_co_\n        roundRadius_dd_ 0_co_\n        children_dd_ [\n          new BABYLON.Text2D(options.text_co_ {\n            fontName_dd_ options.fontName_co_\n            marginVAlignment_dd_ _qt_v_dd_ center_qt__co_\n            marginHAlignment_dd_ 3\n          })\n        ]\n      })_sm_\n\n      buttonRect.opacity _eq_ options.baseOpacity_sm_\n\n      // Add an observable for hovering\n      buttonRect.pointerEventObservable.add(function (d_co_ s) {\n        buttonRect.opacity _eq_ options.hoverOpacity_sm_\n      }_co_ BABYLON.PrimitivePointerInfo.PointerOver)_sm_\n\n      buttonRect.pointerEventObservable.add(function (d_co_ s) {\n        buttonRect.opacity _eq_ options.baseOpacity_sm_\n      }_co_ BABYLON.PrimitivePointerInfo.PointerOut)_sm_\n\n      // Add an observable for clicking\n      if ((options.clickEventData !_eq__eq_ null) &amp_sm_&amp_sm_ (options.clickEventData.constructor _eq__eq__eq_ EventData)) {\n        buttonRect.pointerEventObservable.add(function (d_co_ s) {\n\n          options.clickEventData.happenedAt _eq_ stateManager.timeInMs_sm_\n          options.clickEventData.data.button _eq_ buttonRect_sm_\n\n          stateManager.addEvent(options.clickEventData)_sm_\n        }_co_ BABYLON.PrimitivePointerInfo.PointerUp)_sm_\n      }\n\n      resolve(buttonRect)_sm_\n    })_sm_\n  }_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tDid that happen to someone else ? Any clue ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo circumvent the problem I create a 1*1 pixel button with opacity 0 at position 0_co_0 and that allows me to dispose() all the real buttons without error.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks !\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"AlbertTJames","Date":"2017-01-09T08:02:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tSorry ..Wrong subforum ! \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-01-18T15:29:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe best thing to do in such case is create a playground that reproduces the issue.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBy the way_co_ you can set levelVisible _eq_ false to hide a given primitive_co_ setting its opacity to 0 will unfortunately...still render it... while levelVisible won_t_t.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"AlbertTJames","Date":"2017-01-18T16:53:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I tried several possible things to reproduce the warning.. but I can_t_t. Maybe it is the fact that PG is using 2.6 alpha_co_ maybe because I did not correctly infer the origin of the error weither it be due to other parts of my code or some weird combination of the assets Im using in my scene or i dont know...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyways! If you see that error one day_co_ keep me posted ! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHere is the playground with some heavy button creation functions _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#GKBEH%2336_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#GKBEH#36_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]