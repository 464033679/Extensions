[{"Owner":"tomer","Date":"2018-07-12T23:58:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen using _qt_usePercentageCloserFiltering_qt_ on Samsung S8+ (Android 8.0.0) I get _qt_Unable to compile effect_qt_ after that any texture that can receive shadows doesn_t_t work_co_ reproduce with the doc_t_s playground (_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#B48X7G%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#B48X7G#1_lt_/a_gt_)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny temporary workaround will be appreciated!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI the following stack trace_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_babylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Uniforms_dd_  world_co_ view_co_ viewProjection_co_ vEyePosition_co_ vLightsType_co_ vAmbientColor_co_ vDiffuseColor_co_ vSpecularColor_co_ vEmissiveColor_co_ vFogInfos_co_ vFogColor_co_ pointSize_co_ vDiffuseInfos_co_ vAmbientInfos_co_ vOpacityInfos_co_ vReflectionInfos_co_ vEmissiveInfos_co_ vSpecularInfos_co_ vBumpInfos_co_ vLightmapInfos_co_ vRefractionInfos_co_ mBones_co_ vClipPlane_co_ diffuseMatrix_co_ ambientMatrix_co_ opacityMatrix_co_ reflectionMatrix_co_ emissiveMatrix_co_ specularMatrix_co_ bumpMatrix_co_ normalMatrix_co_ lightmapMatrix_co_ refractionMatrix_co_ diffuseLeftColor_co_ diffuseRightColor_co_ opacityParts_co_ reflectionLeftColor_co_ reflectionRightColor_co_ emissiveLeftColor_co_ emissiveRightColor_co_ refractionLeftColor_co_ refractionRightColor_co_ vReflectionPosition_co_ vReflectionSize_co_ logarithmicDepthConstant_co_ vTangentSpaceParams_co_ alphaCutOff_co_ vLightData0_co_ vLightDiffuse0_co_ vLightSpecular0_co_ vLightDirection0_co_ vLightGround0_co_ lightMatrix0_co_ shadowsInfo0_co_ depthValues0_co_ diffuseSampler_co_ ambientSampler_co_ opacitySampler_co_ reflectionCubeSampler_co_ reflection2DSampler_co_ emissiveSampler_co_ specularSampler_co_ bumpSampler_co_ lightmapSampler_co_ refractionCubeSampler_co_ refraction2DSampler_co_ shadowSampler0_co_ depthSampler0\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Attributes_dd_  position_co_ normal_co_ uv\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Error_dd_ 0_dd_89_dd_ S0032_dd_ no default precision defined for parameter _t_webgl_4aeb46af4241331f_t_\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Trying next fallback.\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Unable to compile effect_dd_\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Uniforms_dd_  world_co_ view_co_ viewProjection_co_ vEyePosition_co_ vLightsType_co_ vAmbientColor_co_ vDiffuseColor_co_ vSpecularColor_co_ vEmissiveColor_co_ vFogInfos_co_ vFogColor_co_ pointSize_co_ vDiffuseInfos_co_ vAmbientInfos_co_ vOpacityInfos_co_ vReflectionInfos_co_ vEmissiveInfos_co_ vSpecularInfos_co_ vBumpInfos_co_ vLightmapInfos_co_ vRefractionInfos_co_ mBones_co_ vClipPlane_co_ diffuseMatrix_co_ ambientMatrix_co_ opacityMatrix_co_ reflectionMatrix_co_ emissiveMatrix_co_ specularMatrix_co_ bumpMatrix_co_ normalMatrix_co_ lightmapMatrix_co_ refractionMatrix_co_ diffuseLeftColor_co_ diffuseRightColor_co_ opacityParts_co_ reflectionLeftColor_co_ reflectionRightColor_co_ emissiveLeftColor_co_ emissiveRightColor_co_ refractionLeftColor_co_ refractionRightColor_co_ vReflectionPosition_co_ vReflectionSize_co_ logarithmicDepthConstant_co_ vTangentSpaceParams_co_ alphaCutOff_co_ vLightData0_co_ vLightDiffuse0_co_ vLightSpecular0_co_ vLightDirection0_co_ vLightGround0_co_ lightMatrix0_co_ shadowsInfo0_co_ depthValues0_co_ diffuseSampler_co_ ambientSampler_co_ opacitySampler_co_ reflectionCubeSampler_co_ reflection2DSampler_co_ emissiveSampler_co_ specularSampler_co_ bumpSampler_co_ lightmapSampler_co_ refractionCubeSampler_co_ refraction2DSampler_co_ shadowSampler0_co_ depthSampler0\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Attributes_dd_  position_co_ normal_co_ uv\nt._ErrorEnabled @ babylon.js_dd_4\nbabylon.js_dd_4 BJS - [02_dd_50_dd_41]_dd_ Error_dd_ 0_dd_83_dd_ S0032_dd_ no default precision defined for parameter _t_webgl_4aeb46af4241331f_t_\nt._ErrorEnabled @ babylon.js_dd_4_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThanks_co_ Tomer.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-07-13T00_dd_08_dd_37Z_t_ title_eq__t_07/13/2018 12_dd_08  AM_t_ data-short_eq__t_Jul 13_t__gt_July 13_lt_/time_gt_ by tomer_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-07-13T15:31:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ unfortunately this is a driver issue and we cannot fix it. The percentage closer filtering requires a functional webgl2 driver and this is not the case on android 8 (depending on the device)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOnly workaround is to turn this filter off and use another one _lt_span_gt__lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt__gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"tomer","Date":"2018-07-13T16:55:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCan I somehow detect if percentage﻿ ﻿closer﻿ filter﻿﻿ing﻿ is supported?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCause from what I saw it_t_s the balance between quality and performance?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(It also reproduce on s9 and note 5)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ If I may suggest update the documentation about that _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks again!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-07-13T17_dd_25_dd_15Z_t_ title_eq__t_07/13/2018 05_dd_25  PM_t_ data-short_eq__t_Jul 13_t__gt_July 13_lt_/time_gt_ by tomer_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-07-13T18:28:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthis is a transient bug. Not all devices have it_co_ so it is tough to document.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can always add a callback on your material.onError and turn off the filter if there is a compilation error\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"tomer","Date":"2018-07-15T12:51:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks a lot for your help_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbut how can I do it? if the exception already occurred and I turn it off I need a way to re-render the entire scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is no way of knowing that this filter is not supported by the browser before trying to render it? and if so_co_ maybe throw an error but still render the material (but without shadows?)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCause since I last comment I saw more and more unsupported devices which makes me think of using a different shadow filter even tough this one looks so much better and the performance is great!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAre you sure it depends on the Android version? cause I saw the filter working on devices with Android 6.0 but don_t_t work on brand new devices with Android 8.0 (and 7.0)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTomer\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-07-17T15:51:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe filter depends on a really simple webgl2 feature but this feature is not well supported on Android _lt_span_gt__lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt__gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Regarding how to deal with the problem_dd_ add a callback to material.onError and in the callback just turn off the filter on the shadowGenerator. This will force the material to recompile_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]