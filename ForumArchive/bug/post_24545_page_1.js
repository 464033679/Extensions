[{"Owner":"PeapBoy","Date":"2016-08-17T17:48:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys !_lt_br /_gt__lt_br /_gt_\n\tI just spotted what I think is a bug (or rather a compatibility issue)._lt_br /_gt_\n\tHere is a *very* simple PG _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#27DV4V%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#27DV4V#6_lt_/a_gt__lt_br /_gt_\n\tIt only prints the depth map on a plane._lt_br /_gt__lt_br /_gt_\n\tHere is a screenshot of the PG with Chrome 52 on Windows 7 _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image ipsAttachLink_left_qt_ data-fileid_eq__qt_9082_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_08/depth_issue_windows.png.01e1567705e362081b15f3b7e47c727a.png_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_float_dd_left_sm__qt__gt__lt_img alt_eq__qt_depth_issue_windows.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_9082_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_08/depth_issue_windows.thumb.png.aabf30be02ba01e9918ae8d2c8cbb02e.png_qt_ style_eq__qt_width_dd_612px_sm_height_dd_300px_sm__qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt__lt_br /_gt_\n\tHere is a screenshot of the PG with Safari on an Ipad (iOS 9.2.1) _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image ipsAttachLink_left_qt_ data-fileid_eq__qt_9083_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_08/depth_issue_apple.png.f339818854a79e77017cfdf46f1f0d71.png_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_float_dd_left_sm__qt__gt__lt_img alt_eq__qt_depth_issue_apple.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_9083_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_08/depth_issue_apple.thumb.png.da0f224c10da09f64ff57df48f520eed.png_qt_ style_eq__qt_width_dd_454px_sm_height_dd_300px_sm__qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt__lt_br /_gt_\n\tAs you can see_co_ no depth map with Apple_co_ the plane is totally black (or gray with the light here). Maybe are you aware of this issue ? (do I hope too much ? _lt_img alt_eq__qt_^_^_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_happy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/happy@2x.png 2x_qt_ title_eq__qt_^_^_qt_ width_eq__qt_20_qt_ /_gt_)_lt_br /_gt_\n\tIs there a WebGL restriction I don_t_t know with Apple ?_lt_br /_gt__lt_br /_gt_\n\tI had the chance to run the PG on different Macs and iPhones (different versions also)_co_ and the issue appears on every Apple device. I don_t_t own any Apple devices but I can make tests at work if you need them._lt_br /_gt__lt_br /_gt__lt_br /_gt_\n\tI would be glad to help if I can. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt__lt_br /_gt__lt_br /_gt_\n\tPS_dd_ I make some tests and it looks like a simple render target texture with a shader material which computes the depth could work. And it seems like the RTT of the depthRenderer has a lot of different properties than the basic RTT I made.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Kesshi","Date":"2016-08-17T18:18:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThe DepthRenderer uses a float texture and IOS does not support rendering into a float texture._lt_br /_gt_\n\tMaybe a fallback could be added here to use a half_float or integer texture instead.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2016-08-17T22:48:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Kesshi !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt seems so obvious when you answer so quickly... Thank you. _lt_img alt_eq__qt_^_^_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_happy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/happy@2x.png 2x_qt_ title_eq__qt_^_^_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI have absolutely no experience with Apple_co_ so I_t_m just discovering the existence of differences like this one. Sorry if it_t_s annoying.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll play with texture type tomorrow and see what happens. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt__lt_br /_gt_\n\t[EDIT] You were totally right. Replacing float type by unsigned integer type resolved the issue._lt_br /_gt__lt_br /_gt_\n\tThank you a lot. _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-08-19T14:21:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello peapBoy_co_ you could even think about contributing your changes back to Babylon.js _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor isntance we can just add a parameter here to specify the depth texture format_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/2a0c505951937132e926d2375c6ca28d39b19365/src/babylon.scene.ts#L2435_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/2a0c505951937132e926d2375c6ca28d39b19365/src/babylon.scene.ts#L2435_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2016-08-19T14:55:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHi Deltakosh_co__lt_br /_gt__lt_br /_gt_\n\tIn fact_co_ I never contributed to any project on github so I don_t_t really know how to do it. But there is a first time for everything._lt_br /_gt_\n\tBut you_t_re right_co_ an optional _qt_type_qt_ parameter could be added there_co_ and we could then check in DepthRenderer constructor if it_t_s undefined or not with TEXTURETYPE_FLOAT set by default.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-08-25T15:25:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYou_t_ll see.. It is fun to contribute and you will be proud of you. Helping others is always a pleasure_dd_)\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]