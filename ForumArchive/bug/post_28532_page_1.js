[{"Owner":"BeanstalkBlue","Date":"2017-02-19T00:07:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tRunning the instance Demo both from the babylonjs.com website and locally_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI see potential FPS in debug overlay showing ~60 FPS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tActual FPS is ~15 FPS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tested this in both Chrome and Firefox on both Linux and OSX.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried removing various parts of the code. Reducing instance count to 10_co_ removing collision tests from all objects. The FPS rises somewhat but the problem persists.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried checking out the v2.5.0 tag in case something in latest was causing the problem. The problem persists.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think this may be due to BabylonJS depending soley on requestAnimationFrame for update/draw logic (which creates several problems actually_co_ but I created a separate post to address that). I assume there must be something wrong in the update logic_co_ but I am new to BabylonJS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs anyone else seeing a low FPS number on the babylon website?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee attached screenshot where render and frame are only 5ms and 8ms (potential FPS is 128) yet FPS is only 40!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_11706_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_02/babylon-fps-bug.png.54171f16751c62e866c9a087bb92447e.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_babylon-fps-bug.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11706_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_02/babylon-fps-bug.thumb.png.bf8bd77511742edc413a765d217d0727.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-02-19T15:08:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI am at 60FPS on all demos. May be your GPU or CPU is not powerful enough. _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BeanstalkBlue","Date":"2017-02-19T15:14:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo_co_ see the screenshot.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFPS is 40 but potential FPS is 128. Update/draw are not being called as often as they should. It_t_s a bug.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the screenshot Frame time is only 7.8ms. That implies 128 FPS is possible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ this is a Skylake core i7 machine_co_ it_t_s fast enough to do 100 draw calls with no texturing or shadows as per the screenshot (haha).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-02-19T15:44:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou had to have 60FPS which is the max of the render loop. On my PC_co_ I_t_m a 60 on all demo_co_ so I do not think there_t_s a bug with Babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe your computer is using a lot of processes going on and actually slowing down.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BeanstalkBlue","Date":"2017-02-19T16:00:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo. You are missing the point.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe your browser with requestAnimationFrame is providing the correct timing to Babylon and in my browser it is not.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just tested on another computer (a Macbook Air) using Chrome. Using debug overlay I turned off features until the stats show less than 6ms per update/draw. So FPS should be at 60 (debug stats show potential FPS is 150).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis has nothing to do with computer speed or processes in background. Stats prove that FPS could be at 60 if babylon was calling render often enough_co_ but it isn_t_t. There is a bug somewhere.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs it possible for me to override update/draw timing logic in Babylon without modifying/recompiling babylon?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-02-19T16:18:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tMaybe you are right.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BeanstalkBlue","Date":"2017-02-19T16:26:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSee screenshot attached to this post_co_ this one makes it more obvious.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRendering a black screen. Potential FPS is 1100+. Actual FPS only 24 FPS _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_02/babylon-fps-bug-2.png.600393cb796f54a388d2a3c0bb5b91d1.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_11709_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_02/babylon-fps-bug-2.thumb.png.3b41bb46869fd64aca74b6dafd7b5c41.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_babylon-fps-bug-2.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2017-02-19T17:49:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tsomething is clearly wrong_co_ but i_t_m not sure it_t_s babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis is on a intel i5 4670K 3.40 GHz &amp_sm_ Nvidia GTX 760 2GB_co_ with several other heavy programs running in the background..\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_02/babylonJs_Demo.png.61b0ef53100c100b95bcad7b965b982e.png_qt_ data-fileid_eq__qt_11710_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11710_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_02/babylonJs_Demo.thumb.png.bf7eaf202dd901057908d937b72f0b07.png_qt_ alt_eq__qt_babylonJs_Demo.thumb.png.bf7eaf202dd901057908d937b72f0b07.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"davrous","Date":"2017-02-21T15:14:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is not a problem related to requestAnimationFrame. requestAnimationFrame is definitely the way to go to manage the render loop. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe potential FPS is based on the time we need to render the frame. If you_t_re rendering a frame below 16ms_co_ this means you could potentially display more than 60fps if the browser and/or the screen support it. Which is the case for WebVR for instance allowing to go up to 90fps. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tStill_co_ if the real FPS displayed is inferior to the potential FPS_co_ this means that your GPU could draw more stuff but you_t_re CPU bound. The computation done on the CPU side to update the scene (mainly matrix computations) is taking more than 16 ms which explains that your FPS is below 60 fps.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou shouldn_t_t misinterpret the values we provided in the debug info. To conclude_co_ if the potential FPS &gt_sm_ FPS and FPS &lt_sm_ 60_co_ this means that you_t_re CPU limited. I_t_m sharing a bit how to check that in this article_dd_ _lt_a href_eq__qt_https_dd_//www.davrous.com/2014/02/19/coding4fun-tutorial-creating-a-3d-webgl-procedural-qrcode-maze-with-babylon-js/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.davrous.com/2014/02/19/coding4fun-tutorial-creating-a-3d-webgl-procedural-qrcode-maze-with-babylon-js/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTry to use F12 of your browser to measure the performance. You should see that the JavaScript part is taking much of the time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDavid\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]