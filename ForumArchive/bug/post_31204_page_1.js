[{"Owner":"JCPalmer","Date":"2017-06-21T19:21:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI am using the fire material with my own textures.  I was getting a complaint about shadows with the production and the preview BJS_co_ but it was working.  I put the preview version of fire in and the vertex shader fails over and over.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BJS - [15_dd_08_dd_28]_dd_ Error_dd_ ERROR_dd_ 0_dd_102_dd_ _t_uv_t_ _dd_ undeclared identifier \nERROR_dd_ 0_dd_102_dd_ _t_assign_t_ _dd_  cannot convert from _t_float_t_ to _t_out highp 2-component vector of float_t_\nERROR_dd_ 0_dd_124_dd_ _t_x_t_ _dd_  field selection requires structure_co_ vector_co_ or interface block on left hand side \nERROR_dd_ 0_dd_125_dd_ _t_y_t_ _dd_  field selection requires structure_co_ vector_co_ or interface block on left hand side \nERROR_dd_ 0_dd_126_dd_ _t_x_t_ _dd_  field selection requires structure_co_ vector_co_ or interface block on left hand side \nERROR_dd_ 0_dd_127_dd_ _t_y_t_ _dd_  field selection requires structure_co_ vector_co_ or interface block on left hand side \nERROR_dd_ 0_dd_128_dd_ _t_x_t_ _dd_  field selection requires structure_co_ vector_co_ or interface block on left hand side \nERROR_dd_ 0_dd_129_dd_ _t_y_t_ _dd_  field selection requires structure_co_ vector_co_ or interface block on left hand side _lt_/code_gt__lt_/pre_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BJS - [15_dd_08_dd_28]_dd_ Vertex shader_dd_ fire\n1\t#version 300 es\n2\t#define DIFFUSE\n3\t#define ALPHATEST\n4\t#define BonesPerMesh 20\n5\t#define NUM_BONE_INFLUENCERS 4\n6\t\n7\tprecision highp float_sm_\n8\t\n9\tin vec3 position_sm_\n10\t#ifdef UV1\n11\tin vec2 uv_sm_\n12\t#endif\n13\t#ifdef UV2\n14\tin vec2 uv2_sm_\n15\t#endif\n16\t#ifdef VERTEXCOLOR\n17\tin vec4 color_sm_\n18\t#endif\n19\t#if NUM_BONE_INFLUENCERS&gt_sm_0\n20\tuniform mat4 mBones[BonesPerMesh]_sm_\n21\tin vec4 matricesIndices_sm_\n22\tin vec4 matricesWeights_sm_\n23\t#if NUM_BONE_INFLUENCERS&gt_sm_4\n24\tin vec4 matricesIndicesExtra_sm_\n25\tin vec4 matricesWeightsExtra_sm_\n26\t#endif\n27\t#endif\n28\t\n29\t#ifdef INSTANCES\n30\tin vec4 world0_sm_\n31\tin vec4 world1_sm_\n32\tin vec4 world2_sm_\n33\tin vec4 world3_sm_\n34\t#else\n35\tuniform mat4 world_sm_\n36\t#endif\n37\tuniform mat4 view_sm_\n38\tuniform mat4 viewProjection_sm_\n39\t#ifdef DIFFUSE\n40\tout vec2 vDiffuseUV_sm_\n41\t#endif\n42\t#ifdef POINTSIZE\n43\tuniform float pointSize_sm_\n44\t#endif\n45\t\n46\tout vec3 vPositionW_sm_\n47\t#ifdef VERTEXCOLOR\n48\tout vec4 vColor_sm_\n49\t#endif\n50\t#ifdef CLIPPLANE\n51\tuniform vec4 vClipPlane_sm_\n52\tout float fClipDistance_sm_\n53\t#endif\n54\t#ifdef FOG\n55\tout vec3 vFogDistance_sm_\n56\t#endif\n57\t\n58\tuniform float time_sm_\n59\tuniform float speed_sm_\n60\t#ifdef DIFFUSE\n61\tout vec2 vDistortionCoords1_sm_\n62\tout vec2 vDistortionCoords2_sm_\n63\tout vec2 vDistortionCoords3_sm_\n64\t#endif\n65\tvoid main(void) {\n66\t#ifdef INSTANCES\n67\tmat4 finalWorld_eq_mat4(world0_co_world1_co_world2_co_world3)_sm_\n68\t#else\n69\tmat4 finalWorld_eq_world_sm_\n70\t#endif\n71\t#if NUM_BONE_INFLUENCERS&gt_sm_0\n72\tmat4 influence_sm_\n73\tinfluence_eq_mBones[int(matricesIndices[0])]*matricesWeights[0]_sm_\n74\t#if NUM_BONE_INFLUENCERS&gt_sm_1\n75\tinfluence+_eq_mBones[int(matricesIndices[1])]*matricesWeights[1]_sm_\n76\t#endif \n77\t#if NUM_BONE_INFLUENCERS&gt_sm_2\n78\tinfluence+_eq_mBones[int(matricesIndices[2])]*matricesWeights[2]_sm_\n79\t#endif \n80\t#if NUM_BONE_INFLUENCERS&gt_sm_3\n81\tinfluence+_eq_mBones[int(matricesIndices[3])]*matricesWeights[3]_sm_\n82\t#endif \n83\t#if NUM_BONE_INFLUENCERS&gt_sm_4\n84\tinfluence+_eq_mBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0]_sm_\n85\t#endif \n86\t#if NUM_BONE_INFLUENCERS&gt_sm_5\n87\tinfluence+_eq_mBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1]_sm_\n88\t#endif \n89\t#if NUM_BONE_INFLUENCERS&gt_sm_6\n90\tinfluence+_eq_mBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2]_sm_\n91\t#endif \n92\t#if NUM_BONE_INFLUENCERS&gt_sm_7\n93\tinfluence+_eq_mBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3]_sm_\n94\t#endif \n95\tfinalWorld_eq_finalWorld*influence_sm_\n96\t#endif\n97\tgl_Position_eq_viewProjection*finalWorld*vec4(position_co_1.0)_sm_\n98\tvec4 worldPos_eq_finalWorld*vec4(position_co_1.0)_sm_\n99\tvPositionW_eq_vec3(worldPos)_sm_\n100\t\n101\t#ifdef DIFFUSE\n102\tvDiffuseUV_eq_uv_sm_\n103\tvDiffuseUV.y-_eq_0.2_sm_\n104\t#endif\n105\t\n106\t#ifdef CLIPPLANE\n107\tfClipDistance_eq_dot(worldPos_co_vClipPlane)_sm_\n108\t#endif\n109\t\n110\t#ifdef FOG\n111\tvFogDistance_eq_(view*worldPos).xyz_sm_\n112\t#endif\n113\t\n114\t#ifdef VERTEXCOLOR\n115\tvColor_eq_color_sm_\n116\t#endif\n117\t\n118\t#ifdef POINTSIZE\n119\tgl_PointSize_eq_pointSize_sm_\n120\t#endif\n121\t#ifdef DIFFUSE\n122\t\n123\tvec3 layerSpeed_eq_vec3(-0.2_co_-0.52_co_-0.1)*speed_sm_\n124\tvDistortionCoords1.x_eq_uv.x_sm_\n125\tvDistortionCoords1.y_eq_uv.y+layerSpeed.x*time/1000.0_sm_\n126\tvDistortionCoords2.x_eq_uv.x_sm_\n127\tvDistortionCoords2.y_eq_uv.y+layerSpeed.y*time/1000.0_sm_\n128\tvDistortionCoords3.x_eq_uv.x_sm_\n129\tvDistortionCoords3.y_eq_uv.y+layerSpeed.z*time/1000.0_sm_\n130\t#endif\n131\t}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-06-21T20:04:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tPing _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-06-21T20:32:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tLooking at it_co_ uv is only declare when  UV! is defined_co_ but the 102 line section which references is only included when DIFFUSE is defined.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-06-22T06:08:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAre you using the latest version from the materialsLibrary with the latest of BJS. I thought I had it fixed there at the same time as the shadow changes.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-06-22T14:26:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI thought I was_co_ since I Fetched / Merged yesterday_co_ then go t this from preview.  I did again just now to be sure_co_ it still happens. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI should note I have 2 uses in the same scene.  One is a camp fire which works.  The 2nd_co_ a temporary effect when a mesh appears_co_ does not.  I did check that the mesh being applied to has UV_co_ and it does.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAm beginning to update my scenes to 3.0.  Things are running really rough.  Will try to resolve others so this is the only problem.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-06-22T15:50:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\toki i ll take a look today thx\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-06-22T16:41:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI_t_ve just checked it and it works for me in the mat lib\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-06-22T20:17:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIf it helps_co_ the creation which causes the problem is published here_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Extensions/blob/master/QueuedInterpolation/src/entrances/FireEntrance.ts#L51_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Extensions/blob/master/QueuedInterpolation/src/entrances/FireEntrance.ts#L51_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-06-23T05:45:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI can not reproduce it either _dd_-( Could you create a PG_co_ I looked at your code and it does not seem that different from the mat lib.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-06-27T16:38:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI can even get this to work as a FireEntrance in other scenes.  Will try to isolate_co_ soon.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-06-27T18:10:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tcool thx.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-07-26T20:02:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt__co_ I found it.  UV was not defined on a child mesh.  If you look at the link above_co_ I was setting the fire material to the mesh and all the children.  Well_co_ the normal material for a child did not require UV.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI fixed it for my case &amp_sm_ verified the problem by just adding a UV.  This might have been what happened back in 2.5.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-07-26T20:29:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tMade a preliminary PG_co_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#E8S5VZ_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#E8S5VZ_lt_/a_gt__co_ but it did not cause the compile failure.  Maybe because PG is 3.1.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-08-01T02:43:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI am happy it is not directly related to the material but more to an Edge Case and well done for tracking it down _dd_-) We ll keep looking at it and fix it if we repro easily.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]