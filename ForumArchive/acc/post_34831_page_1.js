[{"Owner":"Amarth2Estel","Date":"2018-01-02T13:07:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHi everybody_co_ and Happy New Year ! _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt__lt_br /_gt_\n\tI_t_ve been working with BJS for several months now and I have been able to solve every problem I encountered by reading docs and posts on this forum_co_ thanks to you_co_ community_co_ so Thank You._lt_br /_gt__lt_br /_gt_\n\tHowever_co_ I never manage to find a complete solution for one problem that I am going to expose now._lt_br /_gt__lt_br /_gt_\n\tConsidering the pointLight shadows demo _dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#LYCSQ%2312_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#LYCSQ#12_lt_/a_gt__lt_br /_gt_\n\tIf the container is also casting shadows_co_ then a weird effect occurs _dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#LYCSQ%23333_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#LYCSQ#333_lt_/a_gt__lt_br /_gt_\n\tI believe it_t_s because the container is_lt_em_gt_ self-shadowing._lt_/em_gt_ I read about _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/babylon101/shadows_qt_ rel_eq__qt_external nofollow_qt__gt_Close Exponential Shadow Map_lt_/a_gt_ and its additional parameters so I tried and It solved to problem for the demo scene _dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#LYCSQ%23334_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#LYCSQ#334_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tI need to use BJS to display a scene for which geometries are computed server-side. Next PG shows the kind of results I currently get._lt_br /_gt_\n\tThis is a corridor in a L shape with a pointLight in one side. _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/index.html#EHE2DW%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/index.html#EHE2DW#2_lt_/a_gt__lt_br /_gt_\n\tI would like both the scene illumination to be proper and the shadow of the wall casted on the floor. I tried to play with parameters (shadowM[in/ax]Z_co_ bias etc..) but I cannot manage to find a correct configuration. Moreover_co_ because scenes I need to display are always different_co_ I can not use tricks like _qt_in this configuration_co_ do not receive shadows on the wall_co_ or do not make the floor cast shadows (I may render differents floors/levels)_qt_._lt_br /_gt_\n\tDo you have any idea of what I am doing wrong ?_lt_br /_gt__lt_br /_gt_\n\tI thank you for your answers.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-01-02T18:49:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello and welcome in the shadows hell _sm_D\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe try to add all possible tools to help on creating simple and accurate shadows but because we are fighting against math precision_co_ the fight is tough!\n_lt_/p_gt_\n\n_lt_p_gt_\n\there are some advises that COULD help_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t* Try to keep everything within a 1x1x1 cube. Close ESM shadow works almost flawlessly in this case\n_lt_/p_gt_\n\n_lt_p_gt_\n\t* To reduce shadow acne_co_ you can try to play with bias (the problem is that this value is clearly scene dependent)_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/index.html#EHE2DW#3_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/index.html#EHE2DW#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t* Try to reduce the depthScale to the barely minimum value_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/index.html#EHE2DW#4_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/index.html#EHE2DW#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll these ideas tend to focus one single objective_dd_ Getting more precision\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Amarth2Estel","Date":"2018-01-03T08:01:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello DK ! Thanks for your answer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI understand very well the constant fight to find balance between accuracy_co_ computation weight and the ease of use ! And congratulations for it by the way ! I find shadows easy to set up with directionnal light - which may be enough in most cases -_co_ I only encountered issues with point light !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will try to adapt my scenes following your advices.  I didn_t_t know about the property _lt_strong_gt_depthScale_lt_/strong_gt_ of the ShadowGenerator_co_ but it seems to be exactly what I need. _lt_br /_gt_\n\tIn order to fit my scene in an unit cube_co_ I may add a TransformNode at root of the meshes tree to scale entire scene. Is there a more elegant way to do it ? (scene bounding box is known)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you again\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-01-03T19:09:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNope this is the best option _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]