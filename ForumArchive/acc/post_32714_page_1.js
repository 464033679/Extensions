[{"Owner":"Steak","Date":"2017-09-02T10:01:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPlayground DEMO_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#Z88Q4W%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#Z88Q4W#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis is my first post in this forum. I started with bjs a few weeks ago and I love it! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI played around with the tutorials and while creating a small project I detected an issue with collision detection (intersects.Mesh).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe sphere_t_s in my demo have different colors_co_ representing their life count. In my example I want to detect the life of an object when being hit by the ShotCylinder and reduce the LifeCount by 1.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow when I hit the object in my console it decreases the life constantly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow can I stop the life from dropping ? (Maybe stop the collision_co_ I only need the detection once) It seems like the collision seems to survive the dipose().\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe someone could help me. Hope my code readable_co_ I am not a professional coder _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ please keep that in mind!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHave a great day !  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tNils\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-05T22:28:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Steak!  Welcome to the forum... good to have you with us.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#Z88Q4W%2315_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#Z88Q4W#15_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhelp... 13 versions and 6 hours later_co_ I have accomplished nothing.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Ain_t_t I quite the helper?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tQuite a drastic re-coding.  I turned off the sphere animations (coming at the camera)... and I just made a single sphere... which appears on-screen after about 5 seconds.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake a shot at it.  Our _qt_shot_qt_ (shotCylinder) heads-out on an intercept trajectory... and when it hits... it just keeps-on intersecting_co_ constantly_co_ no matter what I try to do.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOpen console.   Tune your editor to lines 156-159 area.  After the intersect... I try lines 157-159_co_ to STOP the intersecting after the first one.  No joy!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice line 160.  It used to be a shot.dispose()_co_ but I decided to change to a shot.setEnabled(false).  I thought it was a good idea_co_ but doing that makes the shot quit flying towards the sphere.  Not sure why THAT is happening_co_ either.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSO_co_ I made a mess of Steak_t_s #2 playground_co_ and I solved nothing.  hmm.  I_t_ll keep thinking and testing... but... let_t_s beg for help from others_co_ too.  (beg_co_ beg_co_ beg)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tStopping in the middle of intersections has NEVER been a good thing to do_co_ and that hasn_t_t changed.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Darn.  What are we missing_co_ here?  *scratch scratch*\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI remember a time... when another user had a similar problem.  It was caused by the animation not being _qt_stopped_qt_.  It was still running... being constantly positioned at the final keyframe.  hmm.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-06T00:10:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay...  _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#Z88Q4W%2318_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#Z88Q4W#18_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(open console_co_ wait 5 secs for enemy to appear_co_ then SHOOT!)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYay.  Yes_co_ it was the shot animation... still running... at its last keyframe.  That was keeping it _qt_stuck_qt_ in intersection.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 99 - create a global-ish var called shotAnim.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 133... make shotAnim contain a value.  I believe it is a BJS _qt_Animat_lt_strong_gt_ABLE_lt_/strong_gt__qt_-type object.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 150... stop the animation (after it intersects).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 151... now that the animation is stopped_co_ the shot mesh can be positioned OUT-OF intersection status.  I move it to the camera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am still having problems with shot.setEnabled(false) [line 152]... and shot.setEnabled(true) [line 107].\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy thoughts are... pre-make 10 _qt_shot_qt_ objects_co_ and store them in _qt_shots_qt_ array.  Then just enable/disable them (and start their flight animations) as wanted.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEach shot now _qt_carries_qt_ its .targetMesh WITH it.  So... the shots can be _qt_fire and forget_qt_... and likely_co_ there are options for having all 10 shots in-flight at the same time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd... yeah... the same _qt_stop the animation_qt_ issue... will need to be considered when the spheres (enemies) turn-on THEIR animation (flying towards the camera).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut... meantime_co_ we have progress!  YAY!!!  It_t_s Miller Time!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Steak","Date":"2017-09-07T11:23:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you for your inspiration I figured it out! It was due to an issue with registerBeforeRender.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBy using an Observable _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ (Line _dd_ 169)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlayground_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#Z88Q4W%2319_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#Z88Q4W#19_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tReally apprectiate the help of an infamous member of the babylon community like you are _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThanks @Wingnut\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Steak","Date":"2017-09-07T11:42:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIs it possible to move the camera and change the spheres animation to head in the direction of the adjusted camera position ?_lt_img alt_eq__qt__dd_huh_dd__qt_ data-emoticon_eq__qt__qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_huh.png_qt_ title_eq__qt__dd_huh_dd__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI tried requiring the meshes I want to update by using the scene variable_co_ but it does not really work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#Z88Q4W%2319_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d6594_sm_font-size_dd_14px_sm__qt__gt_https_dd_//playground.babylonjs.com/#Z88Q4W#19_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-07T13:54:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Steak_co_ thx for the nice words_co_ and I_t_m glad you are making good progress.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBJS animations are created with a thing called _qt_interpolation_qt_.  Essentially_co_ it is a _qt_sequence_qt_ of actions_co_ based upon a _qt_run_qt_ of time.  Unfortunately_co_ it is _qt_grown_qt_ just before an animation starts_co_ and it is not super-easy to adjust that sequence... _qt_live_qt_ (on-the-fly)_co_ dynamically.  What would be needed... is a NEW animation installed on each inbound-to-camera sphere... after every camera re-positioning (while a sphere is inbound toward camera).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut there_t_s another way.  Say goodbye to BJS Animation system_co_ and hello to Steak_t_s Smart-Spheres Incorporated.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  What if there was a function on each enemy sphere... that gets _qt_polled_qt_ (runned) once per frame?  ALL smart-sphere-class mesh... have this function.  The first line of that function... might be... if (!this.isFlying) return_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf it falls thru THAT line... then guess what?  Yep.  _lt_em_gt_this.lookAt(camera.position)_lt_/em_gt__sm_  then _lt_em_gt_this.translate(axis.z_co_ seekStep)_sm_  (that_t_s pseudo code_co_ not actual code_co_ but actual code is similar).  _lt_/em_gt_The spheres have on-board _qt_chase-the-camera_qt_ software. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Cooooool.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe same can be done WITHOUT extending/adding-funcs-to...the mesh class.  Just put an _lt_em_gt_updateSpheres()_lt_/em_gt_ call inside the beforeRender loop... and inside updateSpheres()_co_ you QUICKLY iterate thru all enemySpheres[] array_co_ re-target all isFlying spheres to aim at camera_co_ move them all one _qt_step_qt_ towards the camera_co_ check if it intersected (with an invisible mesh parented to camera?)... and then return... quickly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOur particles systems work this way.  They have an _qt_update_qt_ function that is runned just as fast as possible... and it iterates-through each active particle_co_ and moves each a LITTLE BIT along its trajectory path.  It also checks the particle age to see if it is time to recycle it_co_ and it also checks if an in-flight color change is needed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn your _lt_em_gt_updateSphereTargetAndPositionAndCheckForIntersect()_lt_/em_gt_ func_co_ you will do just that.  Re-aim the flight path_co_ move down that flight path one step_co_ and check for intersect with camera (with an invisible mesh parented to camera).  If intersect... you know... move shot to someplace out-of-intersection_co_ make it .visibility _eq_ 0 or setEnabled(false) or even dispose if necessary.  If not disposing_co_ set its .isFlying to false... of course.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPolling the enemy_t_s ammo box.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_   Each frame_co_ look thru the ammo box_co_ find out which bullets/spheres are in-flight... make sure they are aimed at camera_co_ and move them one-step towards camera.  Check for intersection_co_ do business as needed_co_ then get the hell out of there.  You are working inside the renderloop and want to finish REAL QUICK so the framework can get back to rendering.  But_co_ I think you will be pleasantly surprised at HOW MUCH WORK can get done inside an _qt_updatePerFrame_qt_ function.  Our particle system can update 100_co_000 particles per frame_co_ and still do some yawning.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ does this give you any ideas?  Perhaps use the same system for YOUR smartShots AND enemy smartSpheres?  What if your shots also re-aimed (every frame) if the enemy sphere started zig-zagging_co_ while inbound? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSmartShots_co_ and SmartEnemies...  both extensions of SteakMesh class_co_ which is an extension of BJS Mesh or AbstractMesh class.  That would ROCK!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think extending/overloading mesh class --- into being Steak_t_s Camera-Seeking Intersect-Testing Enemy Class... (smart mesh) would be the most fun.  Also_co_ they would be very re-usable from game to game.  Yum.  Seekers!  oooooooo (scary).  Stay tuned.  Others may have better ideas.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]