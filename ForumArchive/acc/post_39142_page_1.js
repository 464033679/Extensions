[{"Owner":"MinZe","Date":"2018-07-28T22:43:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ I want to do an internal reflection shader_co_ and I need to check two things_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. Check if with a given point_co_ vector and maximum distance there is a face of my geometry in which the vector intersects with.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. the face_t_s normal.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a way to do this?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-07-29T05:20:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t#1. _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/babylon101/raycasts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/babylon101/raycasts_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var ray _eq_ new BABYLON.Ray(origin_co_ direction_co_ length)_sm_\nvar hit _eq_ scene.pickWithRay(ray)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tYou may need to do a multipick_co_ if you want to go past meshes occluding.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#2.  I think you need to use the hit.faceId to get the normal of the face.  The normal of the hit is_co_ I think_co_ for the ray.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var normal _eq_ pickInfo.getNormal(...)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tedit_dd_ Welcome to the forum!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MinZe","Date":"2018-07-29T11:58:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks_co_ but I wanted to say in the shader_co_ I already know how to to a raycast using babylon_t_s code.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-07-29T15:14:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve only used the reflection probe_dd__lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//doc.babylonjs.com/how_to/how_to_use_reflection_probes_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/how_to/how_to_use_reflection_probes_lt_/a_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tThat_t_s generating a reflection cube map texture.  With just a point_co_ vector_co_ and normal (reflection angle) - you still need to account for other light sources and shadows as well. There are some shader gurus in the forum_co_ but it would be helpful if you had a playground.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nabroski","Date":"2018-07-29T15:18:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tso i_t_m also not sure what is going on with this engine_co_ take this as a template to go further _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#6LGN7K%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#6LGN7K#1 _lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti think _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/13038-nasimiasl/?do_eq_hovercard_qt_ data-mentionid_eq__qt_13038_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/13038-nasimiasl/_qt_ rel_eq__qt__qt__gt_@NasimiAsl_lt_/a_gt_ is the expert here.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MinZe","Date":"2018-07-29T15:27:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks! generating a cubemap in realtime it_t_s something that I needed too!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor the intersection with geometry_co_ I think that If I pass the array of the geometry to the shader I can calculate the intersection between a point with a vector and a plane.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut If someone knows any method to do it_co_ feel free to post it_co_ as It_t_s gonna help for sure.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2018-07-29T15:52:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thi _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_just for start challenge  you wanna make something like diamond? or infinity self mirror?_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MinZe","Date":"2018-07-29T17:21:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_223510_qt_ data-ipsquote-contentid_eq__qt_39142_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1532879558_qt_ data-ipsquote-userid_eq__qt_13038_qt_ data-ipsquote-username_eq__qt_NasimiAsl_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ NasimiAsl said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\thi _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ _lt_/span_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_span_gt_just for start challenge  you wanna make something like diamond? or infinity self mirror?_lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tMore like a diamond\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2018-07-29T20:24:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tfor step 1 _dd_ i just can make fake inner reflect ( i don_t_t calculate inner position for yet )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tso i use this pic\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_9px_sm__qt__gt__lt_img alt_eq__qt_XmwL004.png_qt_ class_eq__qt_ipsImage_qt_ height_eq__qt_600_qt_ src_eq__qt_https_dd_//i.imgur.com/XmwL004.png_qt_ width_eq__qt_1000_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_12px_sm__qt__gt_** if we can make some  real image from inside and make dark and white face ( calculate by normal direction )   we can close to real_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_12px_sm__qt__gt_for step 2 _dd_ make refract from this pic_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_12px_sm__qt__gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#7AIII8%2345_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#7AIII8#45_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_12px_sm__qt__gt_step 3 _dd_ make reflect from last refract ( like 2 reflect  notice in real diamond we have infinity reflact but we do just some level)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#7AIII8%2346_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#7AIII8#46_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_12px_sm__qt__gt_step 4 _dd_ broke refract with  last result and use main environment map _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_12px_sm__qt__gt__lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#7AIII8%2347_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#7AIII8#47_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_19432_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_07/sdfsdfsdfs.jpeg.de8213b94e3ddf76e4e7d5c6d72c0ef3.jpeg_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_sdfsdfsdfs.thumb.jpeg.f35a723e914146283e400ea51439246e.jpeg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19432_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_07/sdfsdfsdfs.thumb.jpeg.f35a723e914146283e400ea51439246e.jpeg_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tit is starter solution for make diamond  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tadd specular reflect \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#7AIII8%2348_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#7AIII8#48_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MinZe","Date":"2018-07-30T00:07:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tit_t_s good enough to have until I_t_ve done the shader.  thanks for the help _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_07/image.png.b2494b81d2f83953ef74bff4043e97ec.png_qt_ data-fileid_eq__qt_19434_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19434_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_07/image.thumb.png.75baef88f69183c72fb2a05bf0aa1b64.png_qt_ alt_eq__qt_image.thumb.png.75baef88f69183c72fb2a05bf0aa1b64.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]