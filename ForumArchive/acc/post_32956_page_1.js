[{"Owner":"MackeyK24","Date":"2017-09-16T20:37:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey guys... Well this time I need a Babylon equivalent function of the Unity Vector3.RotateTowards_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_Vector3.RotateTowards\n_eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_\npublic static Vector3 RotateTowards(Vector3 current_co_ Vector3 target_co_ float maxRadiansDelta_co_ float maxMagnitudeDelta)_sm_\n\nDescription\n_eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_\nRotates a vector current towards target.\n\nThe current vector will be rotated round toward the target direction by an angle of maxRadiansDelta_co_ although it will land exactly on the target rather than overshoot. \nIf the magnitudes of current and target are different then the magnitude of the result will be linearly interpolated during the rotation. \nIf a negative value is used for maxRadiansDelta_co_ the vector will rotate away from target/ until it is pointing in exactly the opposite direction_co_ then stop.\n\n\nUsage\n_eq__eq__eq__eq__eq__eq_\nusing UnityEngine_sm_\nusing System.Collections_sm_\n\npublic class ExampleClass _dd_ MonoBehaviour {\n    public Transform target_sm_\n    public float speed_sm_\n    void Update() {\n        Vector3 targetDir _eq_ target.position - transform.position_sm_\n        float step _eq_ speed * Time.deltaTime_sm_\n\n        Vector3 newDir _eq_ Vector3.RotateTowards(transform.forward_co_ targetDir_co_ step_co_ 0.0F)_sm_\n        \n        Debug.DrawRay(transform.position_co_ newDir_co_ Color.red)_sm_\n        transform.rotation _eq_ Quaternion.LookRotation(newDir)_sm_\n    }\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI have something similar inlace I use to _t_LookAt_t_ for a mesh... but I need to be able to do this on a vector itself_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_public lookAt(position_dd_BABYLON.Vector3_co_ slerp_dd_number _eq_ 0.0_co_ yawCor?_dd_ number_co_ pitchCor?_dd_ number_co_ rollCor?_dd_ number_co_ space?_dd_ BABYLON.Space)_dd_BABYLON.AbstractMesh {\n    var result_dd_BABYLON.AbstractMesh _eq_ null_sm_\n    if (this._owned !_eq_ null) {\n        if (this._owned.rotationQuaternion _eq__eq_ null) this._owned.rotationQuaternion _eq_ BABYLON.Quaternion.RotationYawPitchRoll(this._owned.rotation.y_co_ this._owned.rotation.x_co_ this._owned.rotation.z)_sm_\n        if (this.slerpIdentity !_eq_ null &amp_sm_&amp_sm_ slerp &gt_sm_ 0.0) this.slerpIdentity.copyFrom(this._owned.rotationQuaternion)_sm_\n        result _eq_ this._owned.lookAt(position_co_ yawCor_co_ pitchCor_co_ rollCor_co_ space)_sm_\n        if (this.slerpIdentity !_eq_ null &amp_sm_&amp_sm_ slerp &gt_sm_ 0.0) BABYLON.Quaternion.SlerpToRef(this.slerpIdentity_co_ this._owned.rotationQuaternion_co_ slerp_co_ this._owned.rotationQuaternion)\n    }\n    return result_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAnyways I need to add a Vector Helper function to Rotate a Vector toward a target direction overtime (or slerping I guess)...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ ... Any thoughts _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI am basically trying to handle _t_Basic Movement And Rotation_t_ for a character (not even animated ... Just plain ol movement)...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSince I ONLY have unity as a source (I don_t_t have ANY access to any Babylon Source or samples that really go into the WHOLE character movement).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGranted there a plenty of playgrounds with a guy moving ... but nothing that really outlines all the steps you need to make a full character ... Walking_co_ running jumping etc...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUnless you already know how to do all stuff in Babylon  you gotta learn somewhere... So I have no choice but to use the _t_Unity Tutorials_t_ on how you do stuff like move things around_co_ animations etc... So I don_t_t mean to ask so many _qt_HOW DO YOU DO THIS IN BABYLON_qt_ questions based from unity snippets _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI am basically trying to get my guy to move FORWARD from the direction I am facing... if I just try use horizontal and vertical values for the movement vector_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.moveVector.x _eq_ this.horizontalInput_sm_\nthis.moveVector.y _eq_ 0.0_sm_\nthis.moveVector.z _eq_ this.verticalInput_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tand I am actually rotated a bit... the guy still goes (world forward I guess).. It should go strait ahead to the direction I am facing when pressing forward... But it kinda of faces the direction I wanna go but still GLIDES to the direction I was going before I slightly rotated it... Anyways all the unity examples for basic movement take into account\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe mesh(transform) Forward and Right Direction...  SCALE those by vert and horz input (magnitude) and ADD those to together to get _t_targetDirection_t_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTHEN rotate the current moveDirection using Vector3.RotateTowards to the targetDirection over time... What I got so far...But need an Implementation of Vector3.RotateTowards\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (this._isCharacterGrounded _eq__eq__eq_ true) {\n    var deltaTime_dd_number _eq_ this.manager.deltaTime_sm_\n    var transformForward_dd_BABYLON.Vector3 _eq_ BABYLON.Vector3.Forward()_sm_\n    transformForward.scaleInPlace(this.verticalInput)_sm_\n\n    var transformRight_dd_BABYLON.Vector3 _eq_ BABYLON.Vector3.Right()_sm_\n    transformRight.scaleInPlace(this.horizontalInput)_sm_\n\n    var targetDirection_dd_BABYLON.Vector3 _eq_ transformForward.add(transformRight)_sm_\n\n    this.moveDirection _eq_ Vector3.RotateTowards(this.moveDirection_co_ targetDirection_co_ 200 * BABYLON.Constants.Deg2Rad * deltaTime_co_ 1000)_sm_\n    this.moveDirection.y _eq_ 0.0_sm_\n\n    this.moveVector _eq_ this.moveDirection.scale(deltaTime * 2)_sm_\n    this.moveVector.y _eq_ 0.0_sm_\n\n    if (targetDirection !_eq_ BABYLON.Vector3.Zero()) {\n        this.character.lookAtPosition(this.moveDirection_co_ 0.2)_sm_\n    }                    \n\n    //this.moveVector.x _eq_ this.horizontalInput_sm_\n    //this.moveVector.y _eq_ 0.0_sm_\n    //this.moveVector.z _eq_ this.verticalInput_sm_\n\n    this.manager.transformDirectionToRef(this.mesh_co_ this.moveVector_co_ this.moveVector)_sm_\n    if (this.moveVector.length() &gt_sm_ 1.0) BABYLON.Vector3.NormalizeToRef(this.moveVector_co_ this.moveVector)_sm_\n    this.moveVector.scaleInPlace(this.moveSpeed * BABYLON.Constants.VelocityFactor)_sm_\n\n   // Note_dd_ Uses imposter.setLinearVelocity(this.moveVector)_sm_\n   this.character.move(this.moveVector)_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2017-09-16T22:26:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think I still need a RotateTowards equivalent function... But I think my angle movement has to do with the cannons physics imposter not being able to move at that precise angle (say 30degress)... unless I am using setLinearVelocity wrong... Dunno... But I change to use move with mesh.position and it goes perfectly strait and the angle I am facing... What up with that... anybody know ???\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-17T04:44:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi M.  Not sure if this is the correct way_co_ but I_t_ll show it anyway.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s visit the physics-active white box in the middle of the flying bobsled.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#PBVEM%23160_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#PBVEM#160_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe main active keys here... are SHIFTED arrows along-with SHIFTED page-up/down (to translate)_co_ and CONTROL arrows along-with CONTROL page-up/down (to rotate).  It uses micro-pulsings_co_ so you hold-down these keys for a few seconds... to get the bobsled moving.  All-Stop is not working at this time_co_ so reload to get the bobsled stopped_co_ or impulse it to a stop.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo the point_dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t1.  Hold control and tap/hold pageUP or pageDOWN... to get a Y-axis (yaw) rotation started._lt_br /_gt_\n\t2.  While rotation is still happening_co_ hold shift and tap/hold up/down arrows._lt_br /_gt_\n\t(Try to alternate shift UP and DOWN arrows to move the flyer forward and backward in small amounts.)_lt_br /_gt_\n\t3.  Notice that_co_ no matter the rotation of the bobsled... shifted up-arrow ALWAYS moves the bobsled local +z.  The bobsled ALWAYS knows its _qt_forward_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNext_co_ lets look at the +z translation func in lines 131-143.  Borrow this func for your movePlayerForward func.  Looks pretty standard except for one thing... the call to doTransformPerFlyerQuat() in line 137.  The magic func is at line 158... and you should borrow that_co_ too_co_ and rename it to doTransformPerMeshQuat(). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe _qt_forward_qt_ of the bobsled... is based upon its .rotationQuaternion.  Deltakosh gave me that special and helpful function... to make this happen.  With the help of these two funcs_co_ I think you can get your player to +z thrust/impulse exactly _qt_forward_qt_ direction_co_ no matter what.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know if it is _qt_the best way_qt__co_ but it has sure worked well for the flyer.  You can control-pageUp/pageDown the flyer into a serious yaw-spin_co_ or ANY spin... and it never loses track of its _qt_forward_qt_.  transPositiveZ() never gets confused_co_ nor do any of the other translation funcs.  They all _qt_honor_qt_ (take into consideration)the .rotationQuaternion in determining WHAT IS forward/backward_co_ left/right_co_ or up/down.  Perhaps this will help your tests.  I hope so.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2017-09-17T07:54:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHoly Shit _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ ...thats what you gotta do to move with _t_AppyImpuse_t_ and NOT directly setting the Linear Velocity... Wow... I am gonna have to study whats going there... But thanks for code... I can at least take at look at whats going on there... So its not just simple as _t_SetPosition_t_ to this or add _t_this_t_ to velocity ... Looks like some work needs to be done use physics as your movement...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust to clarify... Using mesh.position.addInPlace(moveVector) IS WRONG and I should not be moving something that has a physics state with .position but use _t_Impulse_t_ instead ???\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-17T13:56:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo_co_ no... you can use setLinearVelocity instead of applyImpulse... not a problem.  They_t_re pretty much interchangeable_co_ other than applyImpulse allows adjustment of the contact point on the mesh.  I just DIDN_t_T use setLinearVelocity in MY mover. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI used dual-impulses for turning instead of setAngularVelocity_co_ too.  Either way_co_ works.  The main thing is the transform func.  Its returned value can be used for impulse or setLinearVelocity.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlus_co_ I didn_t_t say anything was WRONG.  Somebody once said that it might be wise to use a joint between the mover and the moved.   No reason to freak.  I just told what I heard_co_ and showed you what I once used in a project.  *shrug* \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI sure didn_t_t mean to cause you any dismay.  I_t_m not a killer programmer.  Sorry.  Just trying to help in some little way. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut it is my lame opinion that .rotateTowards is not an appropriate func for vector3_t_s or Quaternions.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2017-09-17T16:48:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ ... Thanks for info _t_Wingy_t_...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am not freaking out... Holy shit was cause the complexity you had to go thru just for movement ... That all... Not freaking out _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAlso... As Always I really appreciate your help/response and showing me ANY code samples. Thanks for that _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]