[{"Owner":"kurhlaa","Date":"2018-03-07T21:14:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve got info that both setting all meshes as active and calling _lt_strong_gt_freezeActiveMeshes()_lt_/strong_gt_ should improve the performance_co_ because it turns off some expensive calculations. So I tried to implement this feature.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut in my case_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. If I only call _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt_ for all meshes - DebugLayer shows smaller potential FPS_co_ by ~100. Should it be like that? I have &lt_sm_100 meshes_co_ nothing very complex. Maybe disabling detecting visible meshes enables some other expensive calculations?!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen I thought that freezing should help with that. But that gave me 2 more problems _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. If I use _lt_strong_gt_AssetsManager_lt_/strong_gt_ -&gt_sm_ _lt_strong_gt_addMeshTask_lt_/strong_gt_ -&gt_sm_ _lt_strong_gt_loader.onFinish()_lt_/strong_gt_ -&gt_sm_ _lt_strong_gt_scene.freezeActiveMeshes()_lt_/strong_gt_ I get an error_dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_TypeError_dd_ Cannot read property _t_0_t_ of undefined\n    at t.isInFrustum (babylon.js_dd_8)\n    at t.isInFrustum (babylon.js_dd_8)\n    at r.i.isInFrustum (babylon.js_dd_9)\n    at r.isInFrustum (babylon.js_dd_15)\n    at i._evaluateActiveMeshes (babylon.js_dd_13)\n    at i.freezeActiveMeshes (babylon.js_dd_13)\n    at i.Game.loader.onFinish (index.js_dd_64)\n    at i._decreaseWaitingTasksCount (babylon.js_dd_48)\n    at i (babylon.js_dd_48)\n    at i.e.onDoneCallback (babylon.js_dd_48)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tWhat does it mean? In my example - _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#MPS90E%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#MPS90E#6_lt_/a_gt_ - try to uncomment _lt_strong_gt_Line 28_lt_/strong_gt_ to get the same error. I was hoping to freeze active meshes right after they all were loaded.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. If I put _lt_strong_gt_scene.freezeActiveMeshes()_lt_/strong_gt_ somewhere later - all my actions are disabled/removed_co_ nothing happens when one mesh intersects some other_co_ creation of decals also disappears_co_ particleSystem also doesn_t_t work. Some kind of _qt_freeze the world_qt_. Example with intersections only - _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#MPS90E%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#MPS90E#6_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou see a moving red mesh - when it exits from yellow mesh - _qt_intersection_qt_ should appear in the console. But after the first time _lt_strong_gt_scene.freezeActiveMeshes()_lt_/strong_gt_ is called and nothing is printed out any more. If you comment out the line 93 - every iteration prints _qt_intersection_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you please explain what am I doing wrong in these 3 questions and how to fix them? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-08T17:23:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. It depends on your computer. Having 100 meshes could be a lot as every mesh needs to compute world matrix and check frustum clipping. You can try to use F12 profiler to understand where the CPU is mostly used\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. This is a stupid bug. I_t_ll make sure to fix it for the next commit\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. When the scene is frozen_co_ the entire evaluation loop is skipped_co_ this means that_dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t- Intersections are no more computed_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.scene.ts#L3318_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.scene.ts#L3318_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- Particles are not processed_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.scene.ts#L3347_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.scene.ts#L3347_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDecals should work though.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn you case it will be better to use mesh.freeze() and mesh.alwaysSelectAsActiveMesh _eq_ true to only skip world matrix computation and frustum culling\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kurhlaa","Date":"2018-03-08T21:50:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_ with 2. and 3. no more questions. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you give more info about 1. ? When it increases FPS and when decreases? I_t_ve just tried to use Chromium profiling tools_co_ I_t_m not an expert in such things_co_ but with _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt_ and without I have more or less the same % numbers for the functions _lt_strong_gt__evaluateActiveMeshes_lt_/strong_gt_ and _lt_strong_gt_i.computeWorldMatrix_lt_/strong_gt_. Top CPU users are mostly functions with _qt_render_qt_ in their names_co_ it doesn_t_t give me more debug info. If I disable detecting active meshes with _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt_ - shouldn_t_t percentage numbers for these 2 functions become close to 0 ? That would give a higher FPS_co_ but I get lower.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso I haven_t_t found a function _lt_strong_gt_mesh.freeze()_lt_/strong_gt_ - PG says _lt_strong_gt_TypeError_dd_ scene.getMeshByName(...).freeze is not a function_lt_/strong_gt_. What is a correct name?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vorion","Date":"2018-03-09T02:35:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think he meant mesh.freezeWorldMatrix(). The function freeze() is only used for materials_co_ as far as I know. You can find some info here_dd_ _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/how_to/optimizing_your_scene_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/how_to/optimizing_your_scene_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-09T16:55:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes lol thanks _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/29610-vorion/?do_eq_hovercard_qt_ data-mentionid_eq__qt_29610_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/29610-vorion/_qt_ rel_eq__qt__qt__gt_@Vorion_lt_/a_gt__co_ I_t_m getting old\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/29483-kurhlaa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_29483_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/29483-kurhlaa/_qt_ rel_eq__qt__qt__gt_@kurhlaa_lt_/a_gt_do you mind sharing your scene somewhere? (with a reference to babylon.max.js for debugging purposes)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kurhlaa","Date":"2018-03-10T16:43:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ I_t_ve learned to use a free hosting 000webhostapp.com for you _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve prepared a demo with 3 variations. DebugLayer included. While trying to move to the same position and watching in the same direction somewhere to the right I get_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_1. _lt_/strong_gt_Slowest - _lt_a href_eq__qt_https_dd_//bjsdemo.000webhostapp.com/slowest/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//bjsdemo.000webhostapp.com/slowest/_lt_/a_gt_ -  Potential FPS ~300-400_co_ _lt_span style_eq__qt_color_dd_#2ecc71_sm__qt__gt_with_lt_/span_gt_ _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt__sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_2. _lt_/strong_gt_Medium - _lt_a href_eq__qt_https_dd_//bjsdemo.000webhostapp.com/medium/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//bjsdemo.000webhostapp.com/medium/_lt_/a_gt_ - Potential FPS ~400-500_co_ _lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_without_lt_/span_gt_ _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt__sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_3. _lt_/strong_gt_Fastest -  _lt_a href_eq__qt_https_dd_//bjsdemo.000webhostapp.com/fastest/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//bjsdemo.000webhostapp.com/fastest/_lt_/a_gt_ -    Potential FPS ~500-700_co_ _lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_without_lt_/span_gt_ _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt__sm_ and _lt_span style_eq__qt_color_dd_#2ecc71_sm__qt__gt_with_lt_/span_gt_ _lt_strong_gt_mesh.freezeWorldMatrix()_sm_ meshes.material.freeze()_lt_/strong_gt__sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_  _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_.. lines 117-119._lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPartly I understand why _lt_strong_gt_Nr. 3. _lt_/strong_gt_is the fastest out of this examples_co__lt_strong_gt_ mesh.freezeWorldMatrix()_lt_/strong_gt_ and _lt_strong_gt_material.freeze()_lt_/strong_gt_ really help. The strange thing is with the difference between _lt_strong_gt_Nr.1_lt_/strong_gt_ and _lt_strong_gt_Nr.2_lt_/strong_gt_. I believe _lt_strong_gt_alwaysSelectAsActiveMesh_lt_/strong_gt_ should improve the FPS even more_co_ somehow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_  _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_P.S. Hosting provider says _qt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d4051_sm_font-size_dd_11.9px_sm__qt__gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_Your website will be sleeping for 1 hour from 22_dd_00 to 23_dd_00 every day your local time (GMT +2)_lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/span_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__qt_ - funny _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_ please don_t_t be surprised if this demo is somewhen down. _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-13T00:39:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe small difference between 11 and 2 is because getWorldMatrix is low in the Call tree\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/image.png.c1a912dcd4efdebc26a53379f3878a7a.png_qt_ data-fileid_eq__qt_17449_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17449_qt_ data-unique_eq__qt_daf0rhpnw_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/image.thumb.png.a79970186c832e1bcd63bca09edcfb10.png_qt_ alt_eq__qt_image.png_qt__gt__lt_/a_gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_o_1c8ebu5t11r2jjp715acu49337b_qt_ data-unique_eq__qt_a43g7e9si_qt_ src_eq__qt__qt_ alt_eq__qt__qt__gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbased on this call tree_co_  you should probably consider using instances or reducing the number of different materials to get more FPS\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]