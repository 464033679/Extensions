[{"Owner":"timetocode","Date":"2018-11-24T13:08:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m having some issues rotating a bone while any other animations are playing. No rotation occurs until I stop/disable all of the animations that involve the same skeleton.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor example this code will rotate the torso_co_  but only if the animations aren_t_t playing.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_       scene.registerBeforeRender(() _eq_&gt_sm_ {\n           skeleton.bones[1].rotate(BABYLON.Axis.Y_co_ 0.01_co_ BABYLON.Space.LOCAL)\n       })\n\n...\n\n\n       var idleAnim _eq_ scene.beginAnimation(skeleton_co_ 0_co_ 89_co_ false)_sm_ // set to true to stop rotation_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#IQN716%2338_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#IQN716#38_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt may seem like it is because the animation has a conflicting position for the bone but I_t_m pretty sure that isn_t_t why. I_t_ve made a separate model that only has animated legs_co_ and I can_t_t turn its head bone while the legs are moving.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt does appear to be possible though_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#11BH6Z%2392_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#11BH6Z#92_lt_/a_gt_  This pg dates back to before babylon had bone.rotate() and it does everything manually via linear alg.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny idea what I_t_m doing wrong?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-11-25T04:34:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo I think I_t_ve approximately isolated this behavior.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbone.rotate(...) has no effect on a mesh that is experiencing an animation_co_ I_t_m not sure if this is a bug .\n_lt_/p_gt_\n\n_lt_p_gt_\n\tExample_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#11BH6Z%23377_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#11BH6Z#377_lt_/a_gt_ this guy_t_s head should be spinning around_co_ but it won_t_t rotate unless the animation is stopped.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCode like this does work though_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var initMat _eq_ skeleton.bones[7].getLocalMatrix().clone()_sm_\nscene.beginAnimation(skeletons[0]_co_ 0_co_ 100_co_ true_co_ 1.0)_sm_\n    \nvar angle _eq_ 0_sm_\n    \nscene.registerBeforeRender(function () {\n        \n        var mat _eq_ skeleton.bones[7].getLocalMatrix().copyFrom(initMat)_sm_\n        mat.multiplyToRef(BABYLON.Matrix.RotationX(angle)_co_ mat)_sm_\n    \n        angle +_eq_ .01_sm_\n    \n        skeleton.bones[7].markAsDirty()_sm_        \n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAnd here_t_s a PG showing rotation of a torso (using the above technique) while two blended animations are playing... which amazing that it all works together!! _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#IQN716%2339_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#IQN716#39_lt_/a_gt_ Is this intentional that this works? I ask only because depending which bone is rotated_co_ it_t_ll bug out and the character will sink into the ground. But rotating the first couple torso/vertebrae bones and the head bone produce the desired effect.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy problem is that even with this technique nothing happens to my models. If any animation is playing_co_ then I cannot control the torso or hip bone. I_t_ve tried starting/stopping my animation and its as if my character is in two entirely different states. When the animation is playing all I can see is the animation. When the animation ends my guy_t_s body parts are spinning. Maybe I_t_ve just done something inappropriate with the bones of my rig_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_21187_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.de14cf2bea795ba23d3d9539aed912f1.png_qt_ alt_eq__qt_image.png.de14cf2bea795ba23d3d9539aed912f1.png_qt_ /_gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_21186_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.c6c16a03351e8586541f0a6b736120d2.png_qt_ alt_eq__qt_image.png.c6c16a03351e8586541f0a6b736120d2.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere_t_s a nesting of bones such that _lt_strong_gt_root_lt_/strong_gt_ moves the whole mesh_co_ _lt_strong_gt_upper_lt_/strong_gt_ moves just the torso+arms_co_ _lt_strong_gt_lower _lt_/strong_gt_moves the pelvis and legs. I thought this would be ideal for a first person shooter where the hips face the direction being traveled in while the torso faces the direction being aimed in. But maybe these nested bone relationships aren_t_t okay? I_t_m going to make a new post asking for some model samples so I can learn more.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2018-11-25T18:18:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tUse setRotation instead.  Rotate will rotate the bone from its current location_co_ so playing an animation at the same time is likely to cause issues \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]