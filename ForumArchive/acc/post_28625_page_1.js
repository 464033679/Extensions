[{"Owner":"George3D","Date":"2017-02-22T17:01:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have this Code to move a player (3rd person) forward and backward_co_ with the arrow keys left-right I can rotate the Player_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (key _eq__eq_ 37)  // left\n    android.rotation.y -_eq_ Math.PI/2_sm_\nif (key _eq__eq_ 38)  // foreward\n    android.position.z +_eq_ 0.5_sm_\nif (key _eq__eq_ 39)  // right\n    android.rotation.y +_eq_ Math.PI/2_sm_\nif (key _eq__eq_ 40)  // backward\n    android.position.z -_eq_ 0.5_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut after a rotation the facing direction is wrong. How can I correct this?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-02-22T18:02:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tsee _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.abstractMesh.ts#L653_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.abstractMesh.ts#L653_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"George3D","Date":"2017-02-23T10:59:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tSorry_co_ but if you mean _qt_movePOV_qt_ it doesn_t_t work_dd_ the player is still moving sideways after turning (rotating) left or right.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-02-23T12:47:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_164532_qt_ data-ipsquote-contentid_eq__qt_28625_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1487782862_qt_ data-ipsquote-userid_eq__qt_25388_qt_ data-ipsquote-username_eq__qt_George3D_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t19 hours ago_co_ George3D said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tBut after a rotation the facing direction is wrong. How can I correct this?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThis is because position is set using the WORLD axes. So even though your android will have turned from North (z) to East (x) position.z will still move the android north. You need to move the android using its LOCAL axes. This can be done using translate rather than position_co_ however be warned that following a rotation the LOCAL axes will only rotate after the world matrix for the android has been computed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the following PG   _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1ZMJQV%2338_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1ZMJQV#38_lt_/a_gt_   see the difference when line 40 is commented out or not.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (key _eq__eq_ 37) { // left \n    android.rotation.y -_eq_ Math.PI/2_sm_\n    android.computeWorldMatrix(true)_sm_\n} \nif (key _eq__eq_ 38) // forward \n    android.translate(BABYLON.Axis.Z_co_ 0.5_co_ BABYLON.Space.LOCAL)_sm__sm_ \nif (key _eq__eq_ 39) { // right \n    android.rotation.y +_eq_ Math.PI/2_sm_ \n    android.computeWorldMatrix(true)_sm_\n}\nif (key _eq__eq_ 40) // backward \n    android.translate(BABYLON.Axis.Z_co_ -0.5_co_ BABYLON.Space.LOCAL)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tA suggestion for future questions - even if your project is too complex for a playground and (as in this case) you have identified a small problem then use a playground to reproduce the problem. For example just use a cuboid for the android and put in the code to move it with the keys. You are then much more likely to get a faster response as people can see what is happening and check out that their suggestions actually work for you.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood luck in your project.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMore on rotations (in spite of page address) in the guide _lt_a href_eq__qt_http_dd_//babylonjsguide.github.io/basics/Position_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjsguide.github.io/basics/Position_lt_/a_gt_ and also follow further reading\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-02-23T13:23:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think it_t_s simply because the model is facing in the wrong direction by default.  You can fix this in your 3D modelling application or you can do something like this when your model loads_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#20RYWV%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#20RYWV#0_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"George3D","Date":"2017-02-23T13:37:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_div_gt_\n\t@JohnK_dd_ Thank you for the detailed information. I tried it and it works fine. But meanwhile I found another solution with sin and cos_dd_\n_lt_/div_gt_\n\n_lt_div_gt_\n\t_lt_pre_gt_\n_lt_code_gt_var xDiff _eq_ 0.5 * Math.sin(android.rotation.y)_sm_\nvar zDiff _eq_ 0.5 * Math.cos(android.rotation.y)_sm_ \nif (key _eq__eq_ 37)  // left around\n   android.rotation.y -_eq_ Math.PI/4_sm_\nif (key _eq__eq_ 38)  {  // forward\n   android.position.x +_eq_ xDiff_sm_\n   android.position.z +_eq_ zDiff_sm_\n}\nif (key _eq__eq_ 39)  // right around\n   android.rotation.y +_eq_ Math.PI/4_sm_\nif (key _eq__eq_ 40)  {  // backward\n   android.position.x -_eq_ xDiff_sm_\n   android.position.z -_eq_ zDiff_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n\t_lt_p_gt_\n\t\t@adam_dd_ My model (_eq_ android) is facing in the right direction. That was not my problem but the rotation.\n\t_lt_/p_gt_\n\n\t_lt_p_gt_\n\t\t \n\t_lt_/p_gt_\n_lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]