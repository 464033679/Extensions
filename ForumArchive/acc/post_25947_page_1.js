[{"Owner":"aWeirdo","Date":"2016-10-22T14:45:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi all_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI know it isn_t_t really babylon related_co_ but there are a lot of smart guys around so i believe it to be worth a try and ask _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt__lt_br /_gt_\n\tI have been working on &amp_sm_ testing some area calculations_co_ mainly for finding meshes within a certain select area_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tthink _qt_area of effect_qt_ game abilities.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tExamples_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor a square area_co__lt_br /_gt_\n\tI simply use two vector3_t_s_co_ one containing minX_co_ minZ and the other one containing maxX and maxZ_co__lt_br /_gt_\n\tthus creating a virtual square which you can use to check if any meshes are found within it._lt_br /_gt_\n\tResulting in a very lightweight &amp_sm_ simple solution. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor a circular area_co__lt_br /_gt_\n\tI use a starting middel point of the circle (x &amp_sm_ z position)_co_ and a pre-set radius/distance value and then i calculate &amp_sm_ check distance to meshes and select all meshes which are valid and in-range_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut now to the issue at hand_co_ _lt_br /_gt__lt_br /_gt_\n\tFinding a _lt_strong_gt_cone_lt_/strong_gt_ area_sm_ _lt_br /_gt_\n\tBasicly_co_ a small select part of a circle area_co_ calculated depending on a player_t_s rotation.y_co_ a pre-set radius/distance value and a pre-set _qt_width_qt_ value.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tVisualization_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt__qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_o_1avmb5do6f6s27q1lcv12ch1g2ba_qt_ src_eq__qt__qt_ /_gt__lt_img alt_eq__qt_ConeArea.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_9948_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_10/ConeArea.png.29146110fc08b0b22a4518b4bd9ad336.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo in the above visualization_co_ if a mesh was found within the cone area shown in the _qt_width_qt_ illustration_co_ it should be a hit_co_ but if it was outside the defined area_co_ it should be ignored_co_ even if the mesh is within the circles radius..\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow would you go about doing this? \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have setup a PG containing the basic circular calculations_co_ _lt_br /_gt__lt_span style_eq__qt_color_dd_#a9a9a9_sm__qt__gt_(open browser console for code feeback)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KMFW6%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KMFW6#5_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI appreciate any help &amp_sm_ ideas..\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-10-23T10:34:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhen I get a chance I will create a PG to test my idea of checking if point is inside cone (actually being pedantic I think you mean sector as you seem to be working with a circle not a sphere).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAm attaching a method for checking if a point is inside the minor sector of a circle given that it is already inside the circle.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_10006_qt_ data-fileid_eq__qt_10006_qt_ rel_eq__qt__qt__gt_Inside a Sector.pdf_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you are working inside a sphere and you do mean a cone then life gets much more complicated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT pdf file corrected to give a calculation that works.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2016-10-23T11:56:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_ _lt_br /_gt_\n\tThanks for the reply_co_ and the pdf_co_ nice read._lt_br /_gt_\n\tIf you look at my PG_co_ the sphere is actually just the mesh i_t_m trying to select. (check console for logs)_lt_br /_gt__lt_br /_gt_\n\tThe idea of it is to have a basic function to call and handle all targeting of cone_t_d attack _qt_abilities_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t I found this code online_sm_ _lt_a href_eq__qt_https_dd_//jsfiddle.net/5c5uvav3/1/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//jsfiddle.net/5c5uvav3/1/_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tBut it is using start and end _qt_sector_t_s_qt_ so i_t_m struggling how to edit it into using an angle to determine the cone size instead.(i know i wrote _qt_width_qt_ in my post above_co_ but it seemed simpler to use angles)_lt_br /_gt__lt_br /_gt_\n\tSo basicly_sm_ _lt_br /_gt_\n\tThe cone_t_s direction around the _qt_caster_t_s_qt_ position should be based on the caster_t_s rotation.y_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand then if lets say the cone should be 15* Degrees wide (about 0.261 rotation units if my math is right)_co_ out of the circles 360* Degrees_co_ the cone should be centered on the rotation.y (e.g. offset by 7.5* Degrees)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope i make sense _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#808080_sm__qt__gt_Edit_sm__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#808080_sm__qt__gt_Updated PG_co_ it still only contains circular calculations_co_ but i added a box to represent the point of which the cone is _qt_fired_qt_ from._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-10-23T12:27:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI would get the dot product of the normalized cone vector to the normalized vector between the cone and the other object.  If you get .5 or below then it is 45 degrees or below (.333 _eq__eq_ 30 degrees_co_ .1 _eq__eq_ 9 degrees).  Only do that though if the objects are close enough to hit.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-10-23T14:28:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tBut it is using start and end _qt_sector_t_s_qt_ so i_t_m struggling how to edit it into using an angle to determine the cone size instead.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tKnowing the start and end lines will give you start and end vectors in the direction of these lines from the centre of the circle. You can find the angle from their dot product and as they are both in xz plane the sign of the y component of their cross product will tell you which is the start line and which is the end line.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-10-25T09:02:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17943-aweirdo/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17943_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17943-aweirdo/_qt_ rel_eq__qt__qt__gt_@aWeirdo_lt_/a_gt_ glad to see you solved your problem. I couldn_t_t stop playing with the 2D version and  found that my original calculation only worked in some cases and so carried on playing around. Now there is a version that will check to see if the given point is inside a sector in 2D.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#Z3FUC%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#Z3FUC#2_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2016-10-25T20:09:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_ &amp_sm_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you both for your suggestions._lt_br /_gt_\n\tI completely forgot to update the PG_co_ when i marked the topic as solved _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt__lt_br /_gt_\n\tHere_t_s my working sample\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KMFW6%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KMFW6#12_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]