[{"Owner":"jerome","Date":"2016-04-25T04:38:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WCDZS%2320_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WCDZS#20_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 45 _dd_ isAlwaysVisible _eq__eq_ always selected as active_co_ so no more frustum test_co_ so more speed  (60 fps here)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs the SPS is a mesh_co_ you can then use the LOD to improve the perfs when the distance increases. Maybe the flat shaded cylinders would then run at 60 fps also with LOD when displaying the whole mesh (I removed the flat shading because this added a lot of vertices to each tile)\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhat do you mean by replacing some tiles ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tactually_co_ you can modify some tiles _dd_ changing color_co_ uv_co_ position_co_ scaling_co_ rotation_co_ and even vertex positions_co_ but not the number of vertices_co_ of any particle when you want.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsetParticles() iterates_co_ each call_co_ on the whole particle pool unless you specify that you want to alter only some given particles for performance reasons by using setParticles(start_co_ end). example _dd_ setParticles(20000_co_ 20000) would update the sps geometry by applying only the change passed to the particle at index 20000 and then would update the global mesh according to this little change\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you want say remove a particle (you can_t_t actually remove it because it_t_s a part of the whole geometry)_co_ you could just remove it either from the user view (scale it to zero or move it to an invisble part of the space_co_ or hide it in another bigger particle)_co_ either from the logic _dd_ manage a side pool of pre-built invisible tiles (any shapes you want_co_ same way than before _dd_ scaled to zero_co_ or positioned in a invisible part of the space_co_ etc) and push or pull the wanted tiles to add or to remove to your terrain from this side pool.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn other terms_co_ have a bigger SPS than the visible terrain with pre-generated needed particles for a further use.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn short_co_ the SPS is only a mesh so one geometry. You can update this geometry at will by mixing or kneadind it. But if you need to remove or add some vertices_co_ I_t_m afraid the mesh is to be rebuilt from scratch... what is the case for any WebGL instance actually because the VBO passed from the CPU to the GPU won_t_t have the same size.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t[EDIT] little test without LOD but with some usual optimizers (freezeWorldMatrix_co_ freeze material and freeze normals if the light wouldn_t_t hae any importance) and flat shaded cylinders _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WCDZS%2321_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WCDZS#21_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\talmost 3 millions vertices though... arrg\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-04-25T06:53:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tSounds promising_co_ I_t_ll give it a try as soon as I have time! Thanks for all the help guys! I just rotated the cylinders to make the grid look nice again_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WCDZS%2326_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WCDZS#26_lt_/a_gt__lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-04-25T08:16:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WCDZS%2328_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WCDZS#28_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI update here only the particles from 15000 to 20000 each 20 frames\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-04-25T08:56:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThat looks pretty cool _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ Well_co_ the idea is some kind of terra forming_co_ changing forst into gras_co_ gras into dirt_co_ dirt into wheat fields. I think that could work since I only change the color and the decorations on the tile. I don_t_t plan on changing mountains into flat tiles or the other way around. I_t_ll have to try it out and see how it goes. I need to find a good (free) node.js hosting service so I can show you guys _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-04-25T11:47:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tif you want to change each particle texture_co_ you can with the property uvs _dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/Solid_Particle_System#uvs_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/overviews/Solid_Particle_System#uvs_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tImagine you_t_ve got a single image file containing each style of decoration_co_ like a sprite atlas. This image will be the global sps material texture.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen you can choose what parts of the image to assign to each particle. This can be updated at will also _sm_-)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tKnowing all this_co_ remember that the SPS is only one of the solution to design an updatable terrain. There are also the instances or other voxel approaches like Fenomas explained once. There is no magic bullet_co_ each approach has its pro and cons according to your own need.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-06-04T10:44:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSooo.. I finally had some time and mood to take another shot at this... looking good so far_co_ 200x200 tiles with constant 60fps on my pc. I create several SPS_co_ one for each terrain type and one additional for the tree decorations (I also simplified that tree model to save some performance here). It takes a while to load with the huge map but my final maps might not be that big. I still have to check the performance when picking tiles and how long it takes to rebuild the SPSs when a player is converting from one tile type to another. If rebuiding everything is too slow I might use multiple chunks for each terrain type instead of putting everything into one SPS. But still have to play around with things. Just wanted to keep you guys updated. Thanks again for helping me out with all your suggestions. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHere are two early footage screenshots that show the size of a test map_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_06/tlt_200x200_tiles_with_SPS_1.JPG.6ed5cf2311a25c46bddfade4c18789a1.JPG_qt_ data-fileid_eq__qt_7974_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img alt_eq__qt_tlt_200x200_tiles_with_SPS_1.JPG_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_7974_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_06/tlt_200x200_tiles_with_SPS_1.thumb.JPG.dd0666d32af68d4bb072469d2c182448.JPG_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_06/tlt_200x200_tiles_with_SPS_2.JPG.5efff6842bdf2b5e63abf469c23c2c14.JPG_qt_ data-fileid_eq__qt_7975_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img alt_eq__qt_tlt_200x200_tiles_with_SPS_2.JPG_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_7975_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_06/tlt_200x200_tiles_with_SPS_2.thumb.JPG.a10085916d838722093ee06dff5e3f0a.JPG_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-06-04T13:27:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tseems really great _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIf not everything is pickable_co_ you can have a not pickable SPS beside a pickable one. Unpickable SPS are obviously faster.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAbout particle update_co_ have you checked this recent post _dd_ \n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/22924-uv-values-and-solid-particles/?do_eq_embed&amp_sm_embedComment_eq_131069&amp_sm_embedDo_eq_findComment_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]