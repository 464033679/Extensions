[{"Owner":"Seba","Date":"2018-08-07T18:22:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello Babylon community_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have troubles to understand how to switch from quaternion to euler angles and vice versa.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt_First problem_lt_span_gt__dd__lt_/span_gt__lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I apply a rotation to a cube on axe X which should be a 90 degrees (when the face facing us get on the top) I get a value above 130 degrees from my convertion (quaternion to euler).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSecond problem_dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I go over 140 degree on axe X_co_ axes Y and Z are changed! However I_t_m just playing with X axe.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAm I missing something?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere a playground_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7QNRN2%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#7QNRN2#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPress the key _t_a_t_ to rotate on the axe X and watch the console to see the euler angles convert from radian to degrees.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tKeys mapping_dd_\n_lt_/p_gt_\n\n_lt_ul_gt_\n\t_lt_li_gt_\n\t\tkeys _t_a_t_ and _t_d_t_ for rotation on X\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tkeys _t_w_t_ and _t_s_t_ for rotation on Y\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tkeys _t_q_t_ and _t_e_t_ for rotation on Z\n\t_lt_/li_gt_\n_lt_/ul_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-08-07T19:47:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou have probably already read this but in case you have not _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/resources/rotation_conventions_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/resources/rotation_conventions_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Seba","Date":"2018-08-07T20:52:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey JohnK thank for your answer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYes I did read this article but I still don_t_t understand why when you rotate above 90 degrees on axe X all axis are changed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI did a mistake in code when converting radian to degrees which fix problem 1.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo for my second problem if I apply a rotation of 91 degrees like below _lt_span_gt__dd__lt_/span_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_mesh.rotationQuaternion _eq_ BABYLON.Quaternion.RotationYawPitchRoll(\n\t0_co_\n\t(91 * Math.PI) / 180_co_ // 91 degrees convert to rad\n\t0\n)_sm_\nvar euler _eq_ quaternion.toEulerAngles()_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_div style_eq__qt_background-color_dd_#fffffe_sm_color_dd_#000000_sm_font-size_dd_14px_sm__qt__gt_\n\t_lt_p_gt_\n\t\tI get thi following results_dd_\n\t_lt_/p_gt_\n\n\t_lt_ul_gt_\n\t\t_lt_li_gt_\n\t\t\teuler.x _eq_ 89 degrees_co_ but should be 91\n\t\t_lt_/li_gt_\n\t\t_lt_li_gt_\n\t\t\teuler.y _eq_ 180 degrees_co_ but should be 0\n\t\t_lt_/li_gt_\n\t\t_lt_li_gt_\n\t\t\teuler.z _eq_ 180 degrees_co_ but should be 0\n\t\t_lt_/li_gt_\n\t_lt_/ul_gt_\n\n\t_lt_p_gt_\n\t\tHere an updated version of my playground_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#7QNRN2%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#7QNRN2#2_lt_/a_gt_\n\t_lt_/p_gt_\n\n\t_lt_p_gt_\n\t\tpress key _t_a_t_ gonna rotate 91 degrees on axe X and show the results in the console\n\t_lt_/p_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Seba","Date":"2018-08-07T20:57:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAnd for more informations if I do same on the others axis.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo if I rotate 91 degrees  or whatever on axis Y and Z.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI do get back the good results from quaternion.toEulerAngles()\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-08-08T08:53:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/31610-seba/?do_eq_hovercard_qt_ data-mentionid_eq__qt_31610_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/31610-seba/_qt_ rel_eq__qt__qt__gt_@Seba_lt_/a_gt_ and welcome to the forum from me.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_224402_qt_ data-ipsquote-contentid_eq__qt_39316_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1533675136_qt_ data-ipsquote-userid_eq__qt_31610_qt_ data-ipsquote-username_eq__qt_Seba_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t11 hours ago_co_ Seba said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI still don_t_t understand why when you rotate above 90 degrees on axe X all axis are changed_lt_span_gt_﻿_lt_/span_gt_.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tIt is because converting from quaternion to Euler Angles is not done using a 1 to 1 mapping.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake the simple equation y _eq_ x_lt_sup_gt_2_lt_/sup_gt_ _co_ this is not 1 to 1 since both 2 and -2 lead to the same result_co_ the function Math.sqrt(4) has to be written to give a result and the convention calculate and return the positive square root is used.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is the same with rotations.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake this cube ( all rotations given in degrees)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19529_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot1.jpg.d3060dd50e080fdf39566ecabbfeda10.jpg_qt_ alt_eq__qt_rot1.jpg.d3060dd50e080fdf39566ecabbfeda10.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand rotate using the Euler Angles (0_co_ 0_co_ 90) to give\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19530_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot2.jpg.6005ddd5f1878f2520fbcadc02147cf9.jpg_qt_ alt_eq__qt_rot2.jpg.6005ddd5f1878f2520fbcadc02147cf9.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tStarting with the same cube\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19529_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot1.jpg.d3060dd50e080fdf39566ecabbfeda10.jpg_qt_ alt_eq__qt_rot1.jpg.d3060dd50e080fdf39566ecabbfeda10.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\trotate using the Euler Angles (180_co_ 180_co_ 270)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfirst rotate 180 about the local Y axis\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19531_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot3.jpg.231221b172abf8e30f4ffa3599f77ab0.jpg_qt_ alt_eq__qt_rot3.jpg.231221b172abf8e30f4ffa3599f77ab0.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfollowed by a rotation of 180 about the local X axis to give\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19532_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot4.jpg.a9133bf3013a3858e43332f1322ec592.jpg_qt_ alt_eq__qt_rot4.jpg.a9133bf3013a3858e43332f1322ec592.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand finally a rotation of 270 about the local Z axis to give\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19530_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot2.jpg.6005ddd5f1878f2520fbcadc02147cf9.jpg_qt_ alt_eq__qt_rot2.jpg.6005ddd5f1878f2520fbcadc02147cf9.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo the Euler angles (0_co_ 0_co_ 90) and (180_co_ 180_co_ 270) give the same orientation to the box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tReversing this says given the that this box _lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19529_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot1.jpg.d3060dd50e080fdf39566ecabbfeda10.jpg_qt_ alt_eq__qt_rot1.jpg.d3060dd50e080fdf39566ecabbfeda10.jpg_qt_ /_gt_ was rotated to this orientation_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19530_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_08/rot2.jpg.6005ddd5f1878f2520fbcadc02147cf9.jpg_qt_ alt_eq__qt_rot2.jpg.6005ddd5f1878f2520fbcadc02147cf9.jpg_qt_ /_gt_ what are the Euler angles that produce this orientation? As there are more than one answer any algorithm to find the Euler angles must use some convention to produce a result.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs you can see from this playground _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1ST43U%2374_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1ST43U#74_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyour Euler angles of (91_co_ 0_co_ 0) and (89_co_ 180_co_ 180) produce the same orientation and it just happens that the convention used by the toEulerAngles function produces the second result.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope all is now explained.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Seba","Date":"2018-08-08T14:28:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk got it!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot for this clear explanation.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]