[{"Owner":"ozRocker","Date":"2016-05-05T05:22:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have some players that are rigged but have no animations and I have a master animation file.  I am cloning those animations to each new player as they appear in the scene.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m using this kind of code to transfer the animation_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\tthis.mesh.skeleton _eq_ Assets.animator.skeleton.clone(JSON.idx)_sm_\n\tthis.mesh.skeleton.copyAnimationRange(Assets.animator.skeleton_co_ _qt_Idle_qt_)_sm_\n\tthis.mesh.skeleton.copyAnimationRange(Assets.animator.skeleton_co_ _qt_Walk_qt_)_sm_\n\tthis.mesh.skeleton.copyAnimationRange(Assets.animator.skeleton_co_ _qt_Run_qt_)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_qt_Assets.animator_qt_ is the mesh with the master animations.  _qt_this.mesh_qt_ is the new player.  This process works fine but I_t_m having a problem with one player in particular.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I apply the run animation from the master into my player in Blender it looks like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//www.punkoffice.com/downloads/good_arm.jpg_qt_ alt_eq__qt_good_arm.jpg_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut in my Babylon.js scene it looks like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//www.punkoffice.com/downloads/funny_arm.jpg_qt_ alt_eq__qt_funny_arm.jpg_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIt looks like something has happened to the bone weighting on the arm.  Does anyone know how to fix this?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-05-05T09:49:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tMake sure you don_t_t have any positions or scaling that has not been applied to your model in Blender.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-05T10:22:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_127395_qt_ data-ipsquote-contentid_eq__qt_22366_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462441763_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t31 minutes ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tMake sure you don_t_t have any positions or scaling that has not been applied to your model in Blender.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYep_co_ got that sorted.  I apply position and scale to mesh and armature after I_t_ve done the process of clearing parent and re-parenting.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-05-05T11:01:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_d try clearing all the vertex groups when re-parenting (remove parent_co_ clear all vertex groups_co_ then parent).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you post a screenshot with the skeleton viewer turned on in the BJS debugger?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-05T11:32:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_127401_qt_ data-ipsquote-contentid_eq__qt_22366_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462446107_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t29 minutes ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI_t_d try clearing all the vertex groups when re-parenting (remove parent_co_ clear all vertex groups_co_ then parent).\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tCan you post a screenshot with the skeleton viewer turned on in the BJS debugger?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tOk_co_ I cleared out the vertex groups before re-parenting but the end result was the same.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s the skeleton from the debugger_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//www.punkoffice.com/downloads/skeleton.jpg_qt_ alt_eq__qt_skeleton.jpg_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-05-05T11:55:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhen you re-parented did you also check that rotation_co_ location_co_ and scale had been applied to the skeleton too?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI had a similar issue with one of my models.  Looked fine in Blender_co_ but in BJS the skeleton did not line up with the mesh.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-05T12:32:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_127405_qt_ data-ipsquote-contentid_eq__qt_22366_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462449334_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t34 minutes ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tWhen you re-parented did you also check that rotation_co_ location_co_ and scale had been applied to the skeleton too?\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI had a similar issue with one of my models.  Looked fine in Blender_co_ but in BJS the skeleton did not line up with the mesh.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYep_co_ always making sure I apply the transformations.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI made a playground where I have the exported babylonjs file but I bundled the animations with the mesh_co_ instead of cloning and copying and the funny arm problem went away.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IGIDN_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IGIDN_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll create another playground with the cloning to see if I can replicate the problem\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(Ignore the skipping frames for now.  That happens with all my exports and I don_t_t know how to get rid of it _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt_  )\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-05T12:52:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI fixed it!! Thanks Adam for your help _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#29TMFL_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#29TMFL_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can see the problem in the playground here.  I shouldn_t_t be copying the skeleton of the animator.  When I get rid of that line it works properly\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-05-05T14:42:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI see errors in the console when I comment out line 29.  Maybe that isn_t_t what you were referring to. \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-05T14:58:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_127430_qt_ data-ipsquote-contentid_eq__qt_22366_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462459339_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t14 minutes ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI see errors in the console when I comment out line 29.  Maybe that isn_t_t what you were referring to. \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI don_t_t know what_t_s going on there.  I just ignored it _t_cos it doesn_t_t happen on my server. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]