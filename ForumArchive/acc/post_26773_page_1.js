[{"Owner":"Nakul SOlanki","Date":"2016-12-02T16:02:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am trying to create a new interface for my home automation project. The Idea is to have a 3d model of the house and show the status of the actual lights by highlighting virtual lights in the 3d house. Later this can be used to highlight floors whenever a motion sensor for a room is triggered.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor this I created a scene in blender. The scene has two point lights and one hemi light and i use the BABYLON.ScreenLoader to load the entire scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt looks like this when the lights are on\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_10493_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/5840e88a6d6f1_LightsOn.png.0ee4a87f618be3c1b048881583ec7ccc.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_Lights On.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_10493_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/5840e88abf0a9_LightsOn.thumb.png.f4104c2132d2616f4c083640af9a9598.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd like this when the lights are off.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_10492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/5840e7be6f9a0_LightsOff.png.94aeeb93c883cbcf0fda664d27070f7f.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_Lights Off.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_10492_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/5840e7bec01b0_LightsOff.thumb.png.a0a90bb59ea0f18d372bf7c3b05d104b.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe problem is that even though the walls are opaque_co_ when the light is on it passes through the walls. I have highlighted the area with Red rectangles.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny idea_co_ why this is happening? or what should i do differently to avoid this?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-12-02T16:35:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ you are looking for light occlusions and unfortunately this is not supported\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you plan to move your lights dynamically? If no_co_ I highly recommend using lightmaps \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nakul SOlanki","Date":"2016-12-02T16:38:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThanks for the quick response. No I do not plan to move the lights dynamically. I will try lightmaps.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-12-02T17:08:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24669-nakul-solanki/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24669_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24669-nakul-solanki/_qt_ rel_eq__qt__qt__gt_@Nakul SOlanki_lt_/a_gt_ Hi - and welcome to the forum _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHere is a solution that I use - see image below. The scene as you see it shows a house layout which has multiple rooms - in fact in the complete model 9 rooms and 10 lights but for ease of explanation I have hidden some of the interior.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo an explanation. the layout has an outside wall (red) in its own layer. The inside wall for each room each have their own layer (Room1-Room8 in the Layer manager) . You can add any furniture for each room into the appropriate layer. Now each room has a light in the same layer (Room 8 is chosen and its light in the image). Now for each light before export I check the box _lt_u_gt__qt_This Layer Only_qt_ _lt_/u_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEach light then only illuminates the meshes in its layer - the inside wall and furniture. The _qt_Range_qt_ of the light can also limit illumination.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works quite well. If you need more info just ask. It is better than baking out lightmaps as you might change a room_t_s content which would involve baking a new lightmap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/house1.png.576a827ff6b50d20bf27497f110aa66d.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_10497_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/house1.png.576a827ff6b50d20bf27497f110aa66d.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_house1.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nakul SOlanki","Date":"2016-12-03T03:36:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the response _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_gryff. I link this approach better as I will not have to regenerate light maps if i add new furniture to_lt_/span_gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_o_1b31c18266q6o8p1300jpp1cj1c_qt_ src_eq__qt__qt_ alt_eq__qt__qt_ /_gt__lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_ any room. I tried the _qt_This Layer Only_qt_ approach but I was not able to make it work. Reducing the distance and marking the Sphere checkbox seems to reduce the effect of light but it still treats walls as transparent.  If i render the scene in Blender it renders as expected i.e. light from one layer doesn_t_t cross over to the other layer_co_ but when i export the whole scene to BABYLON the light crosses layers._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_In your example above do you export each item individually or do you export the whole scene?_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_Blender_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/58423d9e553b6_SeperateLayersBlender.png.19749b57c4cbb6348e8d36ee35cbbfc0.png_qt_ data-fileid_eq__qt_10507_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_10507_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/58423d9ea1263_SeperateLayersBlender.thumb.png.3e28d9cac4483ab7d0b840ca478164df.png_qt_ alt_eq__qt_Seperate Layers Blender.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBABYLON_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/58423d9b22f8e_SeperateLayersBabylon.png.6ed09de627658059637742c0a303445c.png_qt_ data-fileid_eq__qt_10506_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_10506_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/58423d9bd46f3_SeperateLayersBabylon.thumb.png.4daf6221e47b7963590c67151bb50960.png_qt_ alt_eq__qt_Seperate Layers Babylon.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]