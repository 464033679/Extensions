[{"Owner":"Numa","Date":"2017-02-17T00:11:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi there_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter loading my mesh I apply a translation/rotation to the verts so I need to recompute the normals if I want the lighting to be accurate.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever it causes the normals to not be smoothed_co_ am I doing it wrong?\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.Mesh.prototype.recomputeNormals _eq_ function ()\n{\n    var normals _eq_ []_sm_\n    var positions _eq_ this.getVerticesData(BABYLON.VertexBuffer.PositionKind)_sm_\n    normals _eq_ this.getVerticesData(BABYLON.VertexBuffer.NormalKind)_sm_\n    BABYLON.VertexData.ComputeNormals(positions_co_ this.getIndices()_co_ normals)_sm_\n    this.setVerticesData(BABYLON.VertexBuffer.NormalKind_co_ normals)_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tbefore recomputing the normals_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_90498dad97.png_qt_ class_eq__qt_ipsImage_qt_ height_eq__qt_604_qt_ src_eq__qt_https_dd_//puu.sh/u6k5A/90498dad97.png_qt_ width_eq__qt_1000_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_17f6603f9a.png_qt_ class_eq__qt_ipsImage_qt_ height_eq__qt_639_qt_ src_eq__qt_https_dd_//puu.sh/u6k8z/17f6603f9a.png_qt_ width_eq__qt_1000_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tthanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-02-17T08:59:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tDo you need to translate/rotate individual vertices rather than the mesh?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Numa","Date":"2017-02-18T01:45:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes I think I do.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI move submeshes around in my application based on external data and it_t_s all contingent on each submesh having its origin at the center of its bounding box. However when I load a model_co_ all submeshes have their origin at the center of the model (0_co_ 0_co_ 0) so I move the verts so that the center of the bounding box is 0_co_0_co_0_co_ then I translate the mesh back to where it was. I use _lt_strong_gt_object.bakeTransformIntoVertices()_sm__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_e08fa2c2b2.png_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_https_dd_//puu.sh/u834O/e08fa2c2b2.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a better way to achieve that? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not sure why I would lose the smoothing after recalculating_co_ I move the whole thing at once_co_ verts have the same relative positions.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-02-18T03:40:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt looks like you might need to change the pivot point of your mesh.   Try using mesh.setPivotPoint_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/88931762d8200d6d74a7bbbc4e49673994ed6b82/src/Mesh/babylon.abstractMesh.ts#L1555_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/88931762d8200d6d74a7bbbc4e49673994ed6b82/src/Mesh/babylon.abstractMesh.ts#L1555_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Numa","Date":"2017-02-18T06:00:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI just realized the problem is not at all what I thought it was_co_ I will make a new post. Sorry about that_co_ feel free to delete!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-02-18T13:11:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFor those of you following_co_ this issue continues here_dd_\n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/28508-optimize_with_uv-causes-un-smoothed-normals-after-recomputing/?do_eq_embed_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]