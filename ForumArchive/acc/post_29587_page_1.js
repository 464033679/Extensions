[{"Owner":"FelipeBaltazar","Date":"2017-04-06T13:55:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need to export my objects to obj. I found an example that I could adapt. But I can not incorporate the position of the object in the scene. Any idea?_lt_br /_gt_\n\tnote_dd_ I_t_m a beginner***_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.Mesh.prototype.exportOBJ _eq_ function() {\n    var output_eq_[]_sm_\n    output.push(_qt_mtllib savedFile.mtl_qt_)_sm_\n    for(var i2 _eq_ 0_sm_ i2&lt_sm_ selectedItems.length_sm_ i2++)\n    {\n        output.push(_qt_g object_qt_+i2)_sm_\n        output.push(_qt_o object__qt_+i2)_sm_\n        output.push(_qt_usemtl material_qt_+i2)_sm_\n        var g _eq_ window[selectedItem[i2]].geometry_sm_\n        console.log(selectedItem[i2])_sm_\n        trunkVerts _eq_ g.getVerticesData(_t_position_t_)_sm_\n        trunkNormals _eq_ g.getVerticesData(_t_normal_t_)_sm_\n        trunkUV _eq_ g.getVerticesData(_t_uv_t_)_sm_\n        trunkFaces _eq_ g.getIndices()_sm_\n\n        for(var i_eq_0_sm_i&lt_sm_trunkVerts.length_sm_i+_eq_3){\n            output.push(_qt_v _qt_+trunkVerts[i]+_qt_ _qt_+trunkVerts[i+1]+_qt_ _qt_+trunkVerts[i+2])_sm_\n        }\n        for(i_eq_0_sm_i&lt_sm_trunkNormals.length_sm_i+_eq_3){\n            output.push(_qt_vn _qt_+trunkNormals[i]+_qt_ _qt_+trunkNormals[i+1]+_qt_ _qt_+trunkNormals[i+2])_sm_\n        }\n        for(i_eq_0_sm_i&lt_sm_trunkUV.length_sm_i+_eq_2){\n            output.push(_qt_vt _qt_+trunkUV[i]+_qt_ _qt_+trunkUV[i+1])_sm_\n        }\n        \n        for(i_eq_0_sm_i&lt_sm_trunkFaces.length_sm_i+_eq_3) {\n            output.push(\n                _qt_f _qt_+(trunkFaces[i+2]+1)+_qt_/_qt_+(trunkFaces[i+2]+1)+_qt_/_qt_+(trunkFaces[i+2]+1)+\n                _qt_ _qt_+(trunkFaces[i+1]+1)+_qt_/_qt_+(trunkFaces[i+1]+1)+_qt_/_qt_+(trunkFaces[i+1]+1)+\n                _qt_ _qt_+(trunkFaces[i]+1)+_qt_/_qt_+(trunkFaces[i]+1)+_qt_/_qt_+(trunkFaces[i]+1)\n            )_sm_\n        }\n        \n    }\n    var text _eq_ output.join(_qt_\\n_qt_)_sm_\n    var fileBlob_sm_\n    try{\n        fileBlob_eq_new Blob([text])_sm_      \n    }catch(e){\n        var blobBuilder_eq_window.BlobBuilder || window.MozBlobBuilder || window.WebKitBlobBuilder_sm_\n        var bb_eq_new blobBuilder()_sm_       \n        bb.append([text])_sm_\n        fileBlob_eq_bb.getBlob()_sm_\n    }\n    var URL_eq_window.URL || window.webkitURL_sm_\n    var link_eq_URL.createObjectURL(fileBlob)_sm_\n    return link_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-04-06T18:56:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey\n_lt_/p_gt_\n\n_lt_p_gt_\n\tdid you see this_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/dist/preview%20release/serializers_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/dist/preview release/serializers_lt_/a_gt_ ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe already provide an exporter for obj\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-12T18:26:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi!_lt_br /_gt_\n\tThanks for reply!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#212121_sm__qt__gt_I used this code to inspire me_co_ but the world position is wrong._lt_/span_gt__lt_br /_gt_\n\thow can i incorporate this? using matrix maybe?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BitOfGold","Date":"2017-04-13T07:19:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOBJ always contain world coordinates._lt_br /_gt_\n\tThe obj exporter does not take into account the position of the mesh._lt_br /_gt__lt_br /_gt_\n\tYou can bake a translation into vertices position like this_dd__lt_br /_gt__lt_br /_gt_\n\tvar matrix _eq_ BABYLON.Matrix.Translation(mesh.position.x_co_mesh.position.y_co_mesh.position.z)_sm__lt_br /_gt_\n\tmesh.bakeTransformIntoVertices(matrix)_sm__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-13T12:11:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWorked fine!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#212121_sm__qt__gt_This is what I needed. Thanks!_lt_/span_gt__lt_br /_gt__lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jschwuch","Date":"2017-04-13T13:37:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ is this documented anywhere? And can I export a whole scene to .obj or another format so I can get the my scene from babylon to Blender? This would be great! \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-04-13T16:26:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tUnfortunately_co_ obj are only meshes (so no light_co_ no camera_co_ etc..) \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jschwuch","Date":"2017-04-18T06:40:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tBut I could export all meshes of my scene to one obj file without merging them? That would be great for rendering my scenes in blender and giving the renders to customers. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-04-18T16:29:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI don_t_t know to be fair _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ But you can try if this is supported by obj file format\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t(I guess it is not but it is worth trying)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BitOfGold","Date":"2017-04-18T18:22:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI think it is possible_lt_br /_gt__lt_a href_eq__qt_https_dd_//www.gamedev.net/topic/563768-multiple-objects-in-a-obj/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.gamedev.net/topic/563768-multiple-objects-in-a-obj/_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-18T22:50:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI did this in my example. _qt_Selecteditems_qt_ is an array of meshes. But I still have problems with the indexes of the faces.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_170023_qt_ data-ipsquote-contentid_eq__qt_29587_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1491486933_qt_ data-ipsquote-userid_eq__qt_26450_qt_ data-ipsquote-username_eq__qt_FelipeBaltazar_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 06/04/2017 at 10_dd_55 AM_co_ FelipeBaltazar said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHello!\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI need to export my objects to obj. I found an example that I could adapt. But I can not incorporate the position of the object in the scene. Any idea?_lt_br /_gt_\n\t\t\tnote_dd_ I_t_m a beginner***_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t_lt_pre_gt_\n\n_lt_code_gt_BABYLON.Mesh.prototype.exportOBJ _eq_ _lt_span_gt_function_lt_/span_gt_() {\n    _lt_span_gt_var_lt_/span_gt_ output_eq_[]_sm_\n    output.push(_lt_span_gt__qt_mtllib savedFile.mtl_qt__lt_/span_gt_)_sm_\n    _lt_span_gt_for_lt_/span_gt_(_lt_span_gt_var_lt_/span_gt_ i2 _eq_ _lt_span_gt_0_lt_/span_gt__sm_ i2&lt_sm_ selectedItems.length_sm_ i2++)\n    {\n        output.push(_lt_span_gt__qt_g object_qt__lt_/span_gt_+i2)_sm_\n        output.push(_lt_span_gt__qt_o object__qt__lt_/span_gt_+i2)_sm_\n        output.push(_lt_span_gt__qt_usemtl material_qt__lt_/span_gt_+i2)_sm_\n        _lt_span_gt_var_lt_/span_gt_ g _eq_ selectedItem[i2].geometry_sm_\n        \n        trunkVerts _eq_ g.getVerticesData(_lt_span_gt__t_position_t__lt_/span_gt_)_sm_\n        trunkNormals _eq_ g.getVerticesData(_lt_span_gt__t_normal_t__lt_/span_gt_)_sm_\n        trunkUV _eq_ g.getVerticesData(_lt_span_gt__t_uv_t__lt_/span_gt_)_sm_\n        trunkFaces _eq_ g.getIndices()_sm_\n\n        _lt_span_gt_for_lt_/span_gt_(_lt_span_gt_var_lt_/span_gt_ i_eq__lt_span_gt_0_lt_/span_gt__sm_i&lt_sm_trunkVerts.length_sm_i+_eq__lt_span_gt_3_lt_/span_gt_){\n            output.push(_lt_span_gt__qt_v _qt__lt_/span_gt_+trunkVerts[i]+_lt_span_gt__qt_ _qt__lt_/span_gt_+trunkVerts[i+_lt_span_gt_1_lt_/span_gt_]+_lt_span_gt__qt_ _qt__lt_/span_gt_+trunkVerts[i+_lt_span_gt_2_lt_/span_gt_])_sm_\n        }\n        _lt_span_gt_for_lt_/span_gt_(i_eq__lt_span_gt_0_lt_/span_gt__sm_i&lt_sm_trunkNormals.length_sm_i+_eq__lt_span_gt_3_lt_/span_gt_){\n            output.push(_lt_span_gt__qt_vn _qt__lt_/span_gt_+trunkNormals[i]+_lt_span_gt__qt_ _qt__lt_/span_gt_+trunkNormals[i+_lt_span_gt_1_lt_/span_gt_]+_lt_span_gt__qt_ _qt__lt_/span_gt_+trunkNormals[i+_lt_span_gt_2_lt_/span_gt_])_sm_\n        }\n        _lt_span_gt_for_lt_/span_gt_(i_eq__lt_span_gt_0_lt_/span_gt__sm_i&lt_sm_trunkUV.length_sm_i+_eq__lt_span_gt_2_lt_/span_gt_){\n            output.push(_lt_span_gt__qt_vt _qt__lt_/span_gt_+trunkUV[i]+_lt_span_gt__qt_ _qt__lt_/span_gt_+trunkUV[i+_lt_span_gt_1_lt_/span_gt_])_sm_\n        }\n        \n        _lt_span_gt_for_lt_/span_gt_(i_eq__lt_span_gt_0_lt_/span_gt__sm_i&lt_sm_trunkFaces.length_sm_i+_eq__lt_span_gt_3_lt_/span_gt_) {\n            output.push(\n                _lt_span_gt__qt_f _qt__lt_/span_gt_+(trunkFaces[i+_lt_span_gt_2_lt_/span_gt_]+_lt_span_gt_1_lt_/span_gt_)+_lt_span_gt__qt_/_qt__lt_/span_gt_+(trunkFaces[i+_lt_span_gt_2_lt_/span_gt_]+_lt_span_gt_1_lt_/span_gt_)+_lt_span_gt__qt_/_qt__lt_/span_gt_+(trunkFaces[i+_lt_span_gt_2_lt_/span_gt_]+_lt_span_gt_1_lt_/span_gt_)+\n                _lt_span_gt__qt_ _qt__lt_/span_gt_+(trunkFaces[i+_lt_span_gt_1_lt_/span_gt_]+_lt_span_gt_1_lt_/span_gt_)+_lt_span_gt__qt_/_qt__lt_/span_gt_+(trunkFaces[i+_lt_span_gt_1_lt_/span_gt_]+_lt_span_gt_1_lt_/span_gt_)+_lt_span_gt__qt_/_qt__lt_/span_gt_+(trunkFaces[i+_lt_span_gt_1_lt_/span_gt_]+_lt_span_gt_1_lt_/span_gt_)+\n                _lt_span_gt__qt_ _qt__lt_/span_gt_+(trunkFaces[i]+_lt_span_gt_1_lt_/span_gt_)+_lt_span_gt__qt_/_qt__lt_/span_gt_+(trunkFaces[i]+_lt_span_gt_1_lt_/span_gt_)+_lt_span_gt__qt_/_qt__lt_/span_gt_+(trunkFaces[i]+_lt_span_gt_1_lt_/span_gt_)\n            )_sm_\n        }\n        \n    }\n    _lt_span_gt_var_lt_/span_gt_ text _eq_ output.join(_lt_span_gt__qt_\\n_qt__lt_/span_gt_)_sm_\n    _lt_span_gt_var_lt_/span_gt_ fileBlob_sm_\n    _lt_span_gt_try_lt_/span_gt_{\n        fileBlob_eq__lt_span_gt_new_lt_/span_gt_ Blob([text])_sm_      \n    }_lt_span_gt_catch_lt_/span_gt_(e){\n        _lt_span_gt_var_lt_/span_gt_ blobBuilder_eq__lt_span_gt_window_lt_/span_gt_.BlobBuilder || _lt_span_gt_window_lt_/span_gt_.MozBlobBuilder || _lt_span_gt_window_lt_/span_gt_.WebKitBlobBuilder_sm_\n        _lt_span_gt_var_lt_/span_gt_ bb_eq__lt_span_gt_new_lt_/span_gt_ blobBuilder()_sm_       \n        bb.append([text])_sm_\n        fileBlob_eq_bb.getBlob()_sm_\n    }\n    _lt_span_gt_var_lt_/span_gt_ URL_eq__lt_span_gt_window_lt_/span_gt_.URL || _lt_span_gt_window_lt_/span_gt_.webkitURL_sm_\n    _lt_span_gt_var_lt_/span_gt_ link_eq_URL.createObjectURL(fileBlob)_sm_\n    _lt_span_gt_return_lt_/span_gt_ link_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_br /_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jschwuch","Date":"2017-04-19T16:22:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThx! _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/26450-felipebaltazar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_26450_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/26450-felipebaltazar/_qt_ rel_eq__qt__qt__gt_@FelipeBaltazar_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis was a great point to start at. I changed some things because I_t_m abusing BJS when it comes to worldMatrices (I_t_m setting them directly) so this code exports as if transform where baked into the vertices. I also fixed the problems with the indices. Problem was_co_ that obj doesn_t_t start counting from 1 again when a new object begins_co_ so we have to keep track of how many vertices we already exported.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s my version_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_function exportOBJ(selectedItems) {\n    var output _eq_ []_sm_\n    output.push(_qt_mtllib savedFile.mtl_qt_)_sm_\n    var v _eq_ 1_sm_\n    for (var j _eq_ 0_sm_ j &lt_sm_ selectedItems.length_sm_ j++) {\n        if (selectedItems[j].isEnabled() &amp_sm_&amp_sm_ selectedItems[j].material &amp_sm_&amp_sm_ selectedItems[j].material.alpha &amp_sm_&amp_sm_ selectedItems[j].visibility) {\n            output.push(_qt_g object_qt_ + j)_sm_\n            output.push(_qt_o object__qt_ + j)_sm_\n            output.push(_qt_usemtl _qt_ + selectedItems[j].material.id)_sm_\n            var g _eq_ selectedItems[j].geometry_sm_\n            var rotM _eq_ selectedItems[j]._worldMatrix.clone()_sm_\n            rotM.m[12] _eq_ 0_sm_\n            rotM.m[13] _eq_ 0_sm_\n            rotM.m[14] _eq_ 0_sm_\n            trunkVerts _eq_ g.getVerticesData(_t_position_t_)_sm_\n            trunkNormals _eq_ g.getVerticesData(_t_normal_t_)_sm_\n            trunkUV _eq_ g.getVerticesData(_t_uv_t_)_sm_\n            trunkFaces _eq_ g.getIndices()_sm_\n            var curV _eq_ 0_sm_\n            for (var i _eq_ 0_sm_ i &lt_sm_ trunkVerts.length_sm_ i +_eq_ 3) {\n                var vert _eq_ new V3(trunkVerts[i]_co_ trunkVerts[i + 1]_co_ trunkVerts[i + 2])_sm_\n                vert _eq_ V3.TransformCoordinates(vert_co_ selectedItems[j]._worldMatrix)_sm_\n                output.push(_qt_v _qt_ + vert.x + _qt_ _qt_ + vert.y + _qt_ _qt_ + vert.z)_sm_\n                curV++_sm_\n            }\n            if (trunkNormals) {\n                for (var i _eq_ 0_sm_ i &lt_sm_ trunkNormals.length_sm_ i +_eq_ 3) {\n                    var vert _eq_ new V3(trunkNormals[i]_co_ trunkNormals[i + 1]_co_ trunkNormals[i + 2])_sm_\n                    vert _eq_ V3.TransformCoordinates(vert_co_ rotM)_sm_\n                    output.push(_qt_vn _qt_ + vert.x + _qt_ _qt_ + vert.y + _qt_ _qt_ + vert.z)_sm_\n                }\n            }\n            if (trunkUV) {\n                for (var i _eq_ 0_sm_ i &lt_sm_ trunkUV.length_sm_ i +_eq_ 2) {\n                    output.push(_qt_vt _qt_ + trunkUV[i] + _qt_ _qt_ + trunkUV[i + 1])_sm_\n                }\n            }\n\n            for (var i _eq_ 0_sm_ i &lt_sm_ trunkFaces.length_sm_ i +_eq_ 3) {\n                if (!(trunkFaces[i] _eq__eq_ undefined) &amp_sm_&amp_sm_ !(trunkFaces[i + 1] _eq__eq_ undefined) &amp_sm_&amp_sm_ !(trunkFaces[i + 2] _eq__eq_ undefined)) {\n                    output.push(\n                        _qt_f _qt_ + (parseInt(trunkFaces[i]) + v) + _qt_ _qt_ + (parseInt(trunkFaces[i + 1]) + v) + _qt_ _qt_ + (parseInt(trunkFaces[i + 2]) + v)\n                    )_sm_\n                }\n            }\n            v +_eq_ curV_sm_\n\n        }\n    }\n    var text _eq_ output.join(_qt_\\n_qt_)_sm_\n    var fileBlob_sm_\n    try {\n        fileBlob _eq_ new Blob([text])_sm_\n    } catch (e) {\n        var blobBuilder _eq_ window.BlobBuilder || window.MozBlobBuilder || window.WebKitBlobBuilder_sm_\n        var bb _eq_ new blobBuilder()_sm_\n        bb.append([text])_sm_\n        fileBlob _eq_ bb.getBlob()_sm_\n    }\n    var URL _eq_ window.URL || window.webkitURL_sm_\n    var link _eq_ URL.createObjectURL(fileBlob)_sm_\n    return link_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tOh_co_ and I_t_m only exporting visible meshes with material and material.alpha !_eq_ 0 because I need this. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBig thx to everyone for pointing me in the right direction _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-20T02:09:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24953_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/_qt_ rel_eq__qt__qt__gt_@jschwuch_lt_/a_gt_ great!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDammit! I forget that detail on indices loop. My bad!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou applied the global position with mesh matrix.... \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_What is the difference of your example and the _qt_bake_qt_ of babylon?_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_var matrix _eq_ BABYLON.Matrix.Translation(mesh.position.x_co_mesh.position.y_co_mesh.position.z)_sm__lt_/span_gt__lt_br style_eq__qt_color_dd_#272a34_sm__qt_ /_gt__lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_mesh.bakeTransformIntoVertices(matrix)_sm__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThx\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jschwuch","Date":"2017-04-20T07:18:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi! The bake of bjs applies the transformations you set to the vertices. So you change the meshes. Additionally the baking seems to update the worldMatrix from the rotations and translations set on the mesh. But because i never set rotation and translation in my project but the world Matrix directly the baking doesn_t_t work for me. If you_t_re ok with changing your meshes you can instead use the baking. It just doesn_t_t work out for me _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-20T12:02:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24953_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/_qt_ rel_eq__qt__qt__gt_@jschwuch_lt_/a_gt_ Woa!_lt_br /_gt_\n\tThat_t_s great!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis was exactly what I needed!_lt_br /_gt_\n\tI_t_ll work on the materials now!_lt_br /_gt_\n\tThe _qt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/dist/preview%20release/serializers/babylon.objSerializer.js_qt_ rel_eq__qt_external nofollow_qt__gt_babylon.objSerializer.js_lt_/a_gt__qt_ already has this_co_ but not for more than one mesh._lt_br /_gt__lt_br /_gt_\n\tThank you very much for the explanations!_lt_br /_gt__lt_br /_gt_\n\tpart of code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_//Exports the material(s) of a mesh in .MTL file format (text)\n        OBJExport.MTL _eq_ function (mesh) {\n            var output _eq_ []_sm_\n            var m _eq_ mesh.material_sm_\n            output.push(_qt_newmtl mat1_qt_)_sm_\n            output.push(_qt_  Ns _qt_ + m.specularPower.toFixed(4))_sm_\n            output.push(_qt_  Ni 1.5000_qt_)_sm_\n            output.push(_qt_  d _qt_ + m.alpha.toFixed(4))_sm_\n            output.push(_qt_  Tr 0.0000_qt_)_sm_\n            output.push(_qt_  Tf 1.0000 1.0000 1.0000_qt_)_sm_\n            output.push(_qt_  illum 2_qt_)_sm_\n            output.push(_qt_  Ka _qt_ + m.ambientColor.r.toFixed(4) + _qt_ _qt_ + m.ambientColor.g.toFixed(4) + _qt_ _qt_ + m.ambientColor.b.toFixed(4))_sm_\n            output.push(_qt_  Kd _qt_ + m.diffuseColor.r.toFixed(4) + _qt_ _qt_ + m.diffuseColor.g.toFixed(4) + _qt_ _qt_ + m.diffuseColor.b.toFixed(4))_sm_\n            output.push(_qt_  Ks _qt_ + m.specularColor.r.toFixed(4) + _qt_ _qt_ + m.specularColor.g.toFixed(4) + _qt_ _qt_ + m.specularColor.b.toFixed(4))_sm_\n            output.push(_qt_  Ke _qt_ + m.emissiveColor.r.toFixed(4) + _qt_ _qt_ + m.emissiveColor.g.toFixed(4) + _qt_ _qt_ + m.emissiveColor.b.toFixed(4))_sm_\n            //TODO_dd_ uv scale_co_ offset_co_ wrap\n            //TODO_dd_ UV mirrored in Blender? second UV channel? lightMap? reflection textures?\n            var uvscale _eq_ _qt__qt__sm_\n            if (m.ambientTexture) {\n                output.push(_qt_  map_Ka _qt_ + uvscale + m.ambientTexture.name)_sm_\n            }\n            if (m.diffuseTexture) {\n                output.push(_qt_  map_Kd _qt_ + uvscale + m.diffuseTexture.name)_sm_\n                //TODO_dd_ alpha testing_co_ opacity in diffuse texture alpha channel (diffuseTexture.hasAlpha -&gt_sm_ map_d)\n            }\n            if (m.specularTexture) {\n                output.push(_qt_  map_Ks _qt_ + uvscale + m.specularTexture.name)_sm_\n                /* TODO_dd_ glossiness _eq_ specular highlight component is in alpha channel of specularTexture. (???)\n                if (m.useGlossinessFromSpecularMapAlpha)  {\n                    output.push(_qt_  map_Ns _qt_+uvscale + m.specularTexture.name)_sm_\n                }\n                */\n            }\n            /* TODO_dd_ emissive texture not in .MAT format (???)\n            if (m.emissiveTexture) {\n                output.push(_qt_  map_d _qt_+uvscale+m.emissiveTexture.name)_sm_\n            }\n            */\n            if (m.bumpTexture) {\n                output.push(_qt_  map_bump -imfchan z _qt_ + uvscale + m.bumpTexture.name)_sm_\n            }\n            if (m.opacityTexture) {\n                output.push(_qt_  map_d _qt_ + uvscale + m.opacityTexture.name)_sm_\n            }\n            var text _eq_ output.join(_qt_\\n_qt_)_sm_\n            return (text)_sm_\n        }_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-04-20T17:44:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDo you want to contribute it back to the repo?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLike here_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/serializers/src/OBJ_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/serializers/src/OBJ_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-24T17:09:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__lt_br /_gt_\n\tDone!_lt_br /_gt_\n\tBut_co_ i_lt_span style_eq__qt_color_dd_#212121_sm__qt__gt_ have not solved the materials yet_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#212121_sm__qt__gt__lt_a href_eq__qt_https_dd_//github.com/felipebaltazar/Babylon.js/blob/b683beced1e42b907d67581d9e0b916a4d01b969/serializers/src/OBJ/babylon.objSerializer.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/felipebaltazar/Babylon.js/blob/b683beced1e42b907d67581d9e0b916a4d01b969/serializers/src/OBJ/babylon.objSerializer.ts_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-04-24T23:23:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWe need to cleanup code and tabs a bit _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jschwuch","Date":"2017-04-25T07:10:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/26450-felipebaltazar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_26450_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/26450-felipebaltazar/_qt_ rel_eq__qt__qt__gt_@FelipeBaltazar_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI really think we shouldn_t_t modify the meshes when exporting the scene as I don_t_t think people expect this to happen. Maybe we could add a flag if the function should bake the vertices or calculate the coordinates from worldMatrix defaulting to calculating the coordinates. I would be highly irritated if my meshes change when exporting a scene and it could cause major problems for people who build their meshes from scratch. _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-25T11:42:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__lt_br /_gt_\n\tsorry... im a complete newbie in development (in english too... sorry again)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#212121_sm__qt__gt__lt_a href_eq__qt_https_dd_//github.com/felipebaltazar/Babylon.js/blob/8efbe08b024f13017330ade4e993ff325e860caf/serializers/src/OBJ/babylon.objSerializer.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/felipebaltazar/Babylon.js/blob/8efbe08b024f13017330ade4e993ff325e860caf/serializers/src/OBJ/babylon.objSerializer.ts_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24953_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24953-jschwuch/_qt_ rel_eq__qt__qt__gt_@jschwuch_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#212121_sm__qt__gt_You are absolutely right! I made this option_co_ _qt_selectable_qt_. globalposition define this. _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_public static OBJ(mesh_dd_ Mesh[]_co_ materials?_dd_ boolean_co_ matlibname?_dd_ string_co_ globalposition?_dd_boolean)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIn your scene_co_ yours meshes will remain normal._lt_br /_gt__lt_br /_gt_\n\tBecause this_dd__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var lastMatrix _eq_ BABYLON.Matrix.Translation(-(mesh[j].position.x)_co_-(mesh[j].position.y)_co_-(mesh[j].position.z))_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI bring back de original matrix..._lt_br /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_         if(globalposition){\n          mesh.bakeTransformIntoVertices(lastMatrix)_sm_\n         }_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt__lt_br /_gt_\n\tthks everyone\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"damian2taylor","Date":"2017-04-26T16:34:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey guys_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve been working on a .obj file exporter for a few weeks_co_ a while after getting started with BabylonJS at my new company. I took inspiration from the current babylon.objSerializer.js file_co_ but I haven_t_t focused on materials for now. My version also works on a full scene (that contains an array of meshes)_co_ not on a single mesh! Actually_co_ I am trying to develop a robust serializer that could adapt to any kind of .obj file_co_ as its structure is not always correctly followed by graphic designers.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/26450-felipebaltazar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_26450_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/26450-felipebaltazar/_qt_ rel_eq__qt__qt__gt_@FelipeBaltazar_lt_/a_gt__co_ I corrected your code here_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_OBJExport.OBJ _eq_ function (scene_co_ materials_co_ matlibname) {\n    var output _eq_ []_sm_\n    var sceneMeshes _eq_ scene.meshes_sm_\n    var v _eq_ 1_sm_\n\n    if (materials) {\n        if (!matlibname) {\n            matlibname _eq_ _t_mat_t__sm_\n        }\n        output.push(_qt_mtllib _qt_ + matlibname + _qt_.mtl_qt_)_sm_\n    }\n\n    // Loop on each mesh of meshes array and extract their info\n    for (var j _eq_ 0_sm_ j &lt_sm_ sceneMeshes.length_sm_ j++) {\n        var m _eq_ sceneMeshes[j]_sm_\n\n        // Go to next lap if the subMesh is not defined\n        if (m.subMeshes _eq__eq_ undefined) continue_sm_\n\n        output.push(_qt_g gr_qt_ + j)_sm_\n        if (materials) {\n            output.push(_qt_usemtl _qt_ + matlibname)_sm_\n        }\n\n        // Translate current mesh so that its global position is taken into account when exported\n        var newMatrix _eq_ BABYLON.Matrix.Translation(m.position.x_co_ m.position.y_co_ m.position.z)_sm_\n        m.bakeTransformIntoVertices(newMatrix)_sm_ // CAUTION_dd_ this function doesn_t_t work (no error) if meshes[j].subMeshes is undefined!\n\n        var meshPositions _eq_ m.getVerticesData(_t_position_t_)_sm_\n        var meshNormals _eq_ m.getVerticesData(_t_normal_t_)_sm_\n        var meshUvs _eq_ m.getVerticesData(_t_uv_t_)_sm_\n        var meshIndices _eq_ m.getIndices()_sm_\n        curV _eq_ 0_sm_\n\n        // The mesh is reset to its initial position for avoiding problems\n        var lastMatrix _eq_ BABYLON.Matrix.Translation(-(m.position.x)_co_ -(m.position.y)_co_ -(m.position.z))_sm_\n        m.bakeTransformIntoVertices(lastMatrix)_sm_\n\n        //TODO_dd_ submeshes (groups)\n        //TODO_dd_ smoothing groups (s 1_co_ s off)_sm_\n\n        // Vertices position_co_ UV coordinates and normal coordinates (of every mesh) writing\n        for (var i _eq_ 0_sm_ i &lt_sm_ meshPositions.length_sm_ i +_eq_ 3) {\n            output.push(_qt_v _qt_ + meshPositions[i] + _qt_ _qt_ + meshPositions[i + 1] + _qt_ _qt_ + meshPositions[i + 2])_sm_\n            curV++_sm_\n        }\n        for (var i _eq_ 0_sm_ i &lt_sm_ meshNormals.length_sm_ i +_eq_ 3) {\n            output.push(_qt_vn _qt_ + meshNormals[i] + _qt_ _qt_ + meshNormals[i + 1] + _qt_ _qt_ + meshNormals[i + 2])_sm_\n        }\n        for (var i _eq_ 0_sm_ i &lt_sm_ meshUvs.length_sm_ i +_eq_ 2) {\n            output.push(_qt_vt _qt_ + meshUvs[i] + _qt_ _qt_ + meshUvs[i + 1])_sm_\n        }\n\n        for (var i _eq_ 0_sm_ i &lt_sm_ meshIndices.length_sm_ i +_eq_ 3) {\n            output.push(\n            _qt_f _qt_ + (meshIndices[i + 2] +  v) + _qt_/_qt_ + (meshIndices[i + 2] + v) + _qt_/_qt_ + (meshIndices[i + 2] + v) +\n            _qt_ _qt_ + (meshIndices[i + 1] + v) + _qt_/_qt_ + (meshIndices[i + 1] + v) + _qt_/_qt_ + (meshIndices[i + 1] + v) +\n            _qt_ _qt_ + (meshIndices[i] + v) + _qt_/_qt_ + (meshIndices[i] + v) + _qt_/_qt_ + (meshIndices[i] + v)\n            )_sm_\n        }\n\n        v +_eq_ curV_sm_\n    }\n    var text _eq_ output.join(_qt_\\n_qt_)_sm_\n    return text_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tWe can do without the _lt_em_gt_g_lt_/em_gt_ geometry_dd_ the vertices data can be accessed directly from the current mesh!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou should also check the structure of a .obj file_co_ it is pretty well detailed here_dd_ _lt_a href_eq__qt_https_dd_//en.wikipedia.org/wiki/Wavefront_.obj_file_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//en.wikipedia.org/wiki/Wavefront_.obj_file_lt_/a_gt_. Normally_co_ there is only one object (o) in a single file. The groups (g) shall be declared after v_co_ vt and vn declarations. They are actually groups of faces (f)_co_ which are usually separated when they are covered in different materials (usemtl).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tActually_co_ I_t_m working right now on an optimized version that takes into account the .obj format specification_co_ specifying that vertices shall be declared only once_co_ even if they appear more than once (in multiple faces or even groups of faces for instance) so that the final .obj file is lighter. I should post it quite soon_co_ I_t_m trying to optimize it right now because it_t_s processing very long arrays_co_ so the loading is much slower!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFinally_co_ I_t_m facing an issue with a .obj file imported with _lt_em_gt_BABYLON.SceneLoader.ImportMesh()_lt_/em_gt_ function. I don_t_t know why_co_ but its first mesh is weird and has no subMesh defined (by default_co_ a mesh_t_s subMesh is defined as the mesh itself). That causes no error in my case but corrupts the exported .obj file when using _lt_em_gt_bakeTransformIntoVertices() _lt_/em_gt_function._lt_br /_gt_\n\tThe problem is precisely located in babylon.max.js_co_ in _lt_em_gt_Mesh.prototype.bakeTransformIntoVertices _eq_ function (transform)_lt_/em_gt_ (l. 19620)_co_ at _lt_em_gt_var_lt_/em_gt__lt_em_gt_ _lt_/em_gt__lt_em_gt_submeshes_lt_/em_gt__lt_em_gt_ _eq_ _lt_strong_gt_this.subMeshes_lt_/strong_gt_.splice(0)_sm__lt_/em_gt_ declaration.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease don_t_t hesitate to comment_co_ improve and integrate my solution. I_t_d like to contribute on GitHub but I_t_m kinda new to it. My ID is the same as in this forum!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tPS_dd_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ shouldn_t_t we write_lt_em_gt_ getVerticesData.PositionKind_lt_/em_gt_ instead of _lt_em_gt_getVerticesData(_t_position_t_)_lt_/em_gt_? _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_EDIT_dd__lt_/strong_gt_ I_t_m sorry_co_ I just realized the importance of _lt_em_gt_v _lt_/em_gt_and _lt_em_gt_curV _lt_/em_gt_variables! I don_t_t really understand their use_co_ could you help me on this? Commenting the code could be useful. Thanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-04-27T18:16:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tClearly!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-27T20:04:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/26696-damian2taylor/?do_eq_hovercard_qt_ data-mentionid_eq__qt_26696_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/26696-damian2taylor/_qt_ rel_eq__qt__qt__gt_@damian2taylor_lt_/a_gt__lt_br /_gt_\n\tThis is fantastic!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAre great points_co_ congratulations!_lt_br /_gt_\n\tPlease_co_ if you finish part of materials_co_ tell me plz! I_t_m working on it too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"damian2taylor","Date":"2017-04-28T15:32:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve been working on materials_co_ I_t_ve corrected some major bugs_co_ even if there is still much to be done_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_OBJExport.MTL _eq_ function (scene) {\n    var sceneMeshes _eq_ scene.meshes_sm_\n    var output _eq_ []_sm_\n\n    // Loop on each mesh of sceneMeshes array and extract their info\n    for (var j _eq_ 0_sm_ j &lt_sm_ sceneMeshes.length_sm_ j++) {\n        var mesh _eq_ sceneMeshes[j]_sm_\n        if (!mesh.subMeshes) {\n            continue_sm_\n        }\n\n        if (!mesh.material) {\n            //console.warn(_qt_Mesh n°_qt_ + j + _qt_ has no material!_qt_)_sm_\n            continue_sm_\n        }\n\n        var m _eq_ mesh.material_sm_\n\n        // If the current material is not written yet_co_ add it\n        if (output.indexOf(_qt_newmtl _qt_ + m.name) _eq__eq_ -1) // Is m.name enough to distinguish a mesh from another?\n        {\n            output.push(_qt_newmtl _qt_ + m.name)_sm_\n            output.push(_qt_  Ns _qt_ + parseFloat(m.specularPower).toFixed(4))_sm_\n            output.push(_qt_  Ni 1.5000_qt_)_sm_\n            output.push(_qt_  d _qt_ + parseFloat(m.alpha).toFixed(4))_sm_\n            output.push(_qt_  Tr 0.0000_qt_)_sm_\n            output.push(_qt_  Tf 1.0000 1.0000 1.0000_qt_)_sm_\n            output.push(_qt_  illum 2_qt_)_sm_\n            output.push(_qt_  Ka _qt_ + parseFloat(m.ambientColor.r).toFixed(4) + _qt_ _qt_ + parseFloat(m.ambientColor.g).toFixed(4) + _qt_ _qt_ + parseFloat(m.ambientColor.b).toFixed(4))_sm_\n            output.push(_qt_  Kd _qt_ + parseFloat(m.diffuseColor.r).toFixed(4) + _qt_ _qt_ + parseFloat(m.diffuseColor.g).toFixed(4) + _qt_ _qt_ + parseFloat(m.diffuseColor.b).toFixed(4))_sm_\n            output.push(_qt_  Ks _qt_ + parseFloat(m.specularColor.r).toFixed(4) + _qt_ _qt_ + parseFloat(m.specularColor.g).toFixed(4) + _qt_ _qt_ + parseFloat(m.specularColor.b).toFixed(4))_sm_\n            output.push(_qt_  Ke _qt_ + parseFloat(m.emissiveColor.r).toFixed(4) + _qt_ _qt_ + parseFloat(m.emissiveColor.g).toFixed(4) + _qt_ _qt_ + parseFloat(m.emissiveColor.b).toFixed(4))_sm_\n            //TODO_dd_ uv scale_co_ offset_co_ wrap\n            //TODO_dd_ UV mirrored in Blender? second UV channel? lightMap? reflection textures?\n            var uvscale _eq_ _qt__qt__sm_\n            if (m.ambientTexture) {\n                var filename _eq_  m.ambientTexture.name.slice(m.ambientTexture.name.lastIndexOf(_t_/_t_) + 1)_sm_\n                output.push(_qt_  map_Ka _qt_ + uvscale + filename)_sm_\n            }\n            if (m.diffuseTexture) {\n                var filename _eq_  m.diffuseTexture.name.slice(m.diffuseTexture.name.lastIndexOf(_t_/_t_) + 1)_sm_\n                output.push(_qt_  map_Kd _qt_ + uvscale + filename)_sm_\n\n                //TODO_dd_ alpha testing_co_ opacity in diffuse texture alpha channel (diffuseTexture.hasAlpha -&gt_sm_ map_d)\n            }\n            if (m.specularTexture) {\n                var filename _eq_  m.specularTexture.name.slice(m.specularTexture.name.lastIndexOf(_t_/_t_) + 1)_sm_\n                output.push(_qt_  map_Ks _qt_ + uvscale + filename)_sm_\n\n                /* TODO_dd_ glossiness _eq_ specular highlight component is in alpha channel of specularTexture. (???)\n                if (m.useGlossinessFromSpecularMapAlpha)  {\n                    output.push(_qt_  map_Ns _qt_+uvscale + filename)_sm_\n                }\n                */\n            }\n            /* TODO_dd_ emissive texture not in .MAT format (???)\n            if (m.emissiveTexture) {\n                output.push(_qt_  map_d _qt_+uvscale+m.emissiveTexture.name)_sm_\n            }\n            */\n            if (m.bumpTexture) {\n                var filename _eq_  m.bumpTexture.name.slice(m.bumpTexture.name.lastIndexOf(_t_/_t_) + 1)_sm_\n                output.push(_qt_  map_bump -imfchan z _qt_ + uvscale + filename)_sm_\n            }\n            if (m.opacityTexture) {\n                var filename _eq_  m.opacityTexture.name.slice(m.opacityTexture.name.lastIndexOf(_t_/_t_) + 1)_sm_\n                output.push(_qt_  map_d _qt_ + uvscale + filename)_sm_\n            }\n            output.push(_qt_\\n_qt_)_sm_\n        }\n    }\n    var text _eq_ output.join(_qt_\\n_qt_)_sm_\n    return text_sm_\n}_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI also did it for a whole scene in which there are meshes. However_co_ multiple materials can actually be used in a single mesh_co_ meaning that multiple _t_usemtl_t_ instructions can be used in a single group (g). I guess this is where subMeshes and even multi materials come up...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s working pretty well but not for all .obj files. I think it is because of the .obj loader (babylon.objFileLoader.js) that is not working robust enough to support weakly designed .obj files to import. It dosn_t_t handle negative face indices for instance.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAgain_co_ don_t_t hesitate to comment and improve my solution_co_ I_t_m not very experienced with BabylonJS (for now!).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"FelipeBaltazar","Date":"2017-04-29T15:06:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\twow!_lt_br /_gt_\n\tThks!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]