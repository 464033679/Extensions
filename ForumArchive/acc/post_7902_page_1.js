[{"Owner":"yuccai","Date":"2014-07-17T10:03:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello_co__lt_/p_gt__lt_p_gt_I_t_d like to know if there is a method to calculate the position and the rotation from a transform matrix._lt_/p_gt__lt_p_gt_In my case i calculate a transform matrix and i want to apply it to my mesh. I tried mesh.setPivotMatrix but i don_t_t want to move the pivot_co_ i want to move the mesh. So i have to move my mesh with mesh.position and mesh.rotation. It changes the worldmatrix of my mesh and i want this new worldmatrix equal to my transform matrix. That_t_s why the function setWorldMatrix could be the theoretical solution of my issue._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-17T17:06:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_you can just set the mesh._worldMatrix even if this is a bit hacky _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"yuccai","Date":"2014-07-17T19:47:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Well_co_ the worldMatrix has changed but not the mesh position. How is calculate the worldMatrix? I thought it was the matrix who described a mesh position in the world space_co_ that it was the rotation matrix (the product of the 3 Euler angles rotation matrix)_co_ the mesh.position Vector3 as the 4th column_co_a BABYLON.Vector3.Zero() as the 4th row complet with 1 for m[16]._lt_/p_gt__lt_p_gt_If i change the mesh position_co_ the word matrix will change but if i change the world matrix_co_ the mesh position won_t_t change._lt_/p_gt__lt_p_gt_The behaviour of the member mesh._worldMatrix is the same as mesh._pivotMatrix because this is only the value of the matrix that changed_co_ they are no calculation._lt_/p_gt__lt_p_gt_mesh.setPivotMatrix(m) is different that mesh._pivotMatrix _eq_ m_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I made this for test _dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/yuccai/LStwp/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/yuccai/LStwp/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_you can move/rotate your mesh_co_ get the world/pivot matrix_co_ set the world matrix with mesh._wordMatrix _eq_ m_co_ set the pivotMatrix with mesh.setPivotMatrix(m)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-18T16:16:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_WorldMatrix in babylon.js is built from position/rotation/scaling properties_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I do not get what you want to achieve. You need to extract rotation/translation from your matrix? As You mentioned there are ways to do that but babylonjs won_t_t infer position/rotation from a matrix_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"yuccai","Date":"2014-07-18T19:57:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_It is better if i don_t_t need to extract rotation/translation from my matrix_co_ if i could use this matrix like mesh.setPivotMatrix but without moving the pivot. _lt_/p_gt__lt_p_gt_If i apply 1 0 0 0 to my pivot matrix_co_ the mesh position won_t_t changed but we_t_ll see the mesh in (0_co_0_co_5) if its pivot is at its_lt_/p_gt__lt_p_gt_              0 1 0 0                    the center of mass. The problem is that i don_t_t want to change the intrinsic properties of my mesh like _lt_/p_gt__lt_p_gt_              0 0 1 5                    its pivot and if i apply a rotation around y axis_co_ the mesh will rotate around (0_co_0_co_0) and not around itself in (0_co_0_co_5).  _lt_/p_gt__lt_p_gt_              0 0 0 1_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So i can_t_t move directly my mesh from a transform matrix in babylonjs? Do i have to extract rotation/translation ? I tried to convert the rotation matrix into 3 euler angles but this is not precise (gimblal lock). I also tried to convert this matrix rotation into quaternion but it isn_t_t precise too. _lt_/p_gt__lt_p_gt_I_t_ve seen the _lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Helvetica_co_ arial_co_ freesans_co_ clean_co_ sans-serif_co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm__qt__gt_bakeTransformIntoVertices method but i don_t_t understand how it works. Could it solve my problem?_lt_/span_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-19T17:40:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You cannot get both_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Either you set the matrix manually but then position and rotation won_t_t be usable or you have to extract rotation/position_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ANd you are right the bakeTransformIntoVertices could be a great idea_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This function takes your matrix in parameter and update directly the vertices. This will then allow you to keep using position/rotation afterwards_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2014-07-20T21:31:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_There is something I don_t_t understand..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You said that the values for mesh.position and mesh.rotation are the same before and after applying a matrix to _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_mesh.setPivotMatrix_lt_/span_gt__co__lt_/p_gt__lt_p_gt__lt_span style_eq__qt_font-family_dd_arial_co_ helvetica_co_ sans-serif_sm__qt__gt_but the mesh is then drawn elsewhere and the pivot point seems to have moved (if the pivot point was at start_co_ say_co_ in the center of the mesh_co_ after _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_mesh.setPivotMatrix_lt_/span_gt_ the pivot point is elsewhere - you checked this by applying a rotation to the object_co_ which confirm a new pivot point position_lt_/span_gt_ -)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So it seems that _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_mesh.setPivotMatrix_lt_/span_gt_ defines a new location and orientation for the pivot point by changing all vertices coordinates inside the mesh._lt_/p_gt__lt_p_gt_But DK said that _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_bakeTransformIntoVertices_lt_/span_gt_ takes matrix in parameter and update directly the vertices. That sounds similar to me._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_DK_co_ what _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_mesh.setPivotMatrix_lt_/span_gt_ does exactly ? And what_t_s the difference with _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_bakeTransformIntoVertices ?_lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BTW_co_ I_t_m not sure _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_bakeTransformIntoVertices_lt_/span_gt_ will be a usefull solution for this problem since yuccai said he do not want to change the intrinsic properties of his mesh._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Is there no simple way to apply this transform matrix directly to the mesh location and orientation without changing the vertices inside the mesh ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-21T17:13:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__lt_em_gt__qt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_DK_co_ what _lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_mesh.setPivotMatrix_lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_ does exactly ? And what_t_s the difference with _lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_bakeTransformIntoVertices ?_qt__lt_/span_gt__lt_/em_gt__lt_/p_gt__lt_ul_gt__lt_li_gt__lt_em_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_bakeTransformIntoVertices _dd__lt_/span_gt__lt_/em_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_ This function updates the vertices _lt_/span_gt__lt_span_gt_it selves_lt_/span_gt__lt_/li_gt__lt_li_gt__lt_em_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_mesh.setPivotMatrix _dd_ _lt_/span_gt__lt_/em_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_This defines an additional matrix which will be multiplied by worldMatrix. Vertices remains unchanged here_lt_/span_gt__lt_/li_gt__lt_/ul_gt__lt_p_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_Both functions should produce the same visual rendering_lt_/span_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"yuccai","Date":"2014-07-22T14:32:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I tried once more time to change the world matrix and i found this _dd_ there is a visual rendering if the initial mesh position belongs to the camera frustum._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My camera is in ((0_co_0_co_0) position _sm_ (0_co_0_co_0) rotation) and by default the mesh is in (0_co_0_co_0) too. If i change the world matrix_co_ nothing happens but if i put the mesh in (0_co_0_co_1)_co_ the world matrix changes will affect the mesh and we_t_ll see the mesh where it is described in the world matrix. Then if i change the mesh position or rotation_co_ the mesh moves relative to its previous position If i apply mesh.position.z +_eq_ 1_co_ the mesh will be in (0_co_0_co_2)._lt_/p_gt__lt_p_gt_I did the same thing but i put initially the mesh in (0_co_0_co_1000) and (0_co_0_co_1001). In the first case_co_ the mesh belongs to the camera frustum and it moves_co_ in the second case_co_ nothing happens._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Is that behavior normal or not? _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Anyway this method does not solve my problem because the world matrix changes does not effect on the mesh position. That_t_s why i_t_ll extract the Euler angles from the transform matrix._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-22T16:42:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yep this is expected but as I mentioned earlier setting directly the worldMatrix is not supported_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"yuccai","Date":"2014-07-27T22:57:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I find a solution to my issue._lt_/p_gt__lt_p_gt_I use a handler that i move with the method setPivotMatrix but it is the parent of my mesh. Although the handler pivot is still in (0_co_0_co_0)_co_ my mesh pivot is in the same position that the handler absolute position and i_t_ve got the rendering that i wish._lt_/p_gt__lt_p_gt_Thanks for your answers_co_ you_t_ve been helpful  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]