[{"Owner":"Wingnut","Date":"2016-09-12T01:59:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Gang!  I rarely start posts_co_ but I am checking on a slow browser crasher that COULD be a memory leak.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1AVEYO%2336_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1AVEYO#36_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not really qualified to comment on performance and memory issues_co_ but others nearby are quite good at _qt_watching the numbers_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think the numbers are worth watching_co_ here.  I see memory usage continuously increasing and this crashes Firefox after about 30 minutes... on my machine.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks to all investigators. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-09-12T14:30:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think it_t_s cause your beta after 30 mins is a huge number.  Try having the beta roll back to 0 at certain points that do not effect your animation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthats the only thing I could see after a quick glance that would be causing ram to build up_co_ but I_t_m not sure if that would be the cause.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tyeah just looking at it on my phone I think it_t_s your alpha and beta values I_t_m just on my phone but what_t_s its alpha and betas value after 10mins?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T14:46:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI don_t_t know what the issue is_co_ but it is not due to large numbers.  Maybe I don_t_t understand what you_t_re saying_co_ though.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T14:50:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis version doesn_t_t seem to have a memory issue_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1AVEYO%2338_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1AVEYO#38_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T14:52:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNeither does this version_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1AVEYO%2339_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1AVEYO#39_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt seems to have something to do with _qt_makeItUnique_qt_ being set to true for updateVerticesData.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-12T17:03:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks_co_ guys.  I think I_t_m still seeing creap_t_n_t_seep on #38.  I open my Windows performance monitor_co_ and watch the numbers on the _qt_memory_qt_ window... on the row for Firefox.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere are 4 columns I am watching... _lt_em_gt_commit_co_ working Set_co_ Shareable_co_ and Private.  _lt_/em_gt_Shareable is holding steady_co_ but the other 3 are slowly on their way to the moon.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI better submit this before my browser puffs.  Been about 15 mins since I started #38 running.  (Wingy dons his crash helmet and fire suit.)  heh\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbtw_co_ this is not _lt_em_gt_my_lt_/em_gt_ playground... just one I had bookmarked cuz I loved it so much.  I recently put colors on it.  Purrrrdy.  I am collecting a huge pile of great playgrounds (URLs) so I can add them to Temechon_t_s _qt_Cool Playgrounds_qt_ doc... eventually.  Probably need two categories.  Best-Code Playgrounds_co_ and Prettiest Playgrounds.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#38 is still holding well.  After GC (or something)_co_ it pulls its numbers back into shape rather nicely.  Maybe our investigators have been successful!  YAY!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T17:27:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t I_t_m letting 39 run for a few minutes here and have run the chrome dev tools timeline a few times.  The highest I_t_ve seen the memory go is 63MB.  The graph of the timeline goes up and down_co_ but never goes above 63MB.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I run 36_co_ the graph is clearly going up.  Memory is at 74MB in the first 40 seconds_co_ 119MB after the first minute and it continues rising.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll let 39 run for a good 30 minutes and see if it is still steady.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T18:01:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAfter 30 minutes of running #39 on half of my screen_co_ it is at about 37MB.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen makeItUnique is used on #36_co_ there must be a place in the code where the old geometry is still referenced.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-12T18:26:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t38 still running perfect_co_ here_co_ after... a long time.  Thanks for the find!  Well done.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T18:44:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis makeGeometryUnique function seems to solve the issue_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1AVEYO%2343_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1AVEYO#43_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWould there be a reason not to dispose the old geometry?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEdit_dd_ this probably isn_t_t a good fix_co_ because I_t_m think makeGeometryUnique is used when cloning a mesh.  It wouldn_t_t make sense to trash the original geometry.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-14T13:59:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the legwork_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m going to ping _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_... just in case this topic is pertinent to him.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-09-14T15:19:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou know that I read all posts _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve fixed the makeGeometryUnique function!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks guys\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-14T17:03:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_143692_qt_ data-ipsquote-contentid_eq__qt_25118_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1473705865_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 9/12/2016 at 2_dd_44 PM_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tEdit_dd_ this probably isn_t_t a good fix_co_ because I_t_m think makeGeometryUnique is used when cloning a mesh.  It wouldn_t_t make sense to trash the original geometry.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI see that releaseForMesh checks the number of meshes before disposing.  Nice.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/d116cde676ba5e74dfbf25c1349d981a9b94c713/src/Mesh/babylon.geometry.js#L263_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/d116cde676ba5e74dfbf25c1349d981a9b94c713/src/Mesh/babylon.geometry.js#L263_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNext time I_t_ll just submit a PR so that I can get some github cred. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-14T17:31:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_143692_qt_ data-ipsquote-contentid_eq__qt_25118_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1473705865_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 9/12/2016 at 1_dd_44 PM_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tthis probably isn_t_t a good fix\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tIt was _lt_em_gt_that_lt_/em_gt_ comment that made me... umm...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   ...let_t_s just say... the more_co_ the merrier.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAn official invitation to Deltakosh... to join us at this campfire conversation... is... you know... proper diplomatic protocol.  heh\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]