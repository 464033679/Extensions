[{"Owner":"JohnK","Date":"2015-05-13T10:12:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I have been trying to use the extrudeShape method but have found that the original shape I created is rotated 90 degrees anti-clockwise around the Z axis when it is applied._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My example is _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RF9W9%2349_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RF9W9#49_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The shape to be extruded is shown in green._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Is this an issue with extrudeShape or am I missing something?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-05-13T13:11:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_em_gt_tl_sm_dr _dd_ 3D geometry phobics_co_ go away_co_ now !_lt_/em_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This is not really a bug_co_ neither you are missing something _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_The 2D model shape should be done in the xOy plane. You can set it off -1 on z-axis if you want_co_ as you did_co_ it will just report this offset on the extruded shape. This is just a note_co_ nothing to do without your rotation problem._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Well_co_ if I revert your path_co_ I get this _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RF9W9%2350_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RF9W9#50_lt_/a_gt_ what is you expected I guess._lt_/p_gt__lt_p_gt_But you are right_co_ the extrusion in the other direction rotates the shape 90 degrees on the z-axis.... on this very axis only._lt_/p_gt__lt_p_gt_If you had chosen another path_co_ the initial rotation (may we talk about rotation here ?) would have been something else._lt_/p_gt__lt_p_gt_Is there a rule about how to set the path or something for knowing initial rotation ?_lt_/p_gt__lt_p_gt_No._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Because the extruder process doesn_t_t know anything about your path and its direction in space._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It_t_s based on the _lt_a href_eq__qt_http_dd_//babylondoc.azurewebsites.net/page.php?p_eq_25090_qt_ rel_eq__qt_external nofollow_qt__gt_path3D object_lt_/a_gt_._lt_/p_gt__lt_p_gt_So the extruder process _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/Babylon/Math/babylon.math.ts#L3393_qt_ rel_eq__qt_external nofollow_qt__gt_tries initially to set a plane orthogonal_lt_/a_gt_ (*) to the first tangent of your path (right until here ? I_t_m know you are good at maths _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ ) and then to set two arbitrary orthogonal vectors in this plane on the intersection first_tangent/plane._lt_/p_gt__lt_p_gt_These two vectors will be the shape x and y axis reported in this plane._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I could add an extra rule  to force the initial computed vectors to be right the same as world Ox and Oy axis if the user wanted path is Oz._lt_/p_gt__lt_p_gt_But I don_t_t know if it_t_s really worth it because it_t_s really really a specific case._lt_/p_gt__lt_p_gt_I understand it may be confusing because the doc says the extrusion will be along the z-axis.. but don_t_t tell anything about initial rotation (quite complex to explain)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_When I designed path3D_co_ I added an optional parameter called _lt_em_gt_initialVector_lt_/em_gt_ to force the initial rotation (actually the initial normal-to-the-path direction_co_ please read the last path3D doc part)._lt_/p_gt__lt_p_gt_But if I decide to use this parameter with_co_ say (0_co_ 1_co_ 0) to set it _qt_vertical_qt__co_ it will prevent users who want a vertical path to build the underlying path3D (the tangent would be collinear to the normal)._lt_/p_gt__lt_p_gt_So as I can_t_t predict the path I have to let the process to compute its own original vectors in the plane orthogonal to the path._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Another solution would be to add an extra parameter so the user could choose his own _lt_em_gt_initialVector_lt_/em_gt_ value according to his own path._lt_/p_gt__lt_p_gt_I don_t_t know _dd_ yet many parameters in _lt_em_gt_ExtrudeShape()_lt_/em_gt_ method and difficult notion to understand...  BJS is supposed to be simple and powerful._lt_/p_gt__lt_p_gt_Maybe in the _lt_em_gt_ExtrudeShapeCustom()_lt_/em_gt_ then which is for advanced usages ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This explains the behavior so far but doesn_t_t help you._lt_/p_gt__lt_p_gt_Well_co_ the right way to do could be _dd__lt_/p_gt__lt_ul_gt__lt_li_gt_design your shape in the xOy plane_lt_/li_gt__lt_li_gt_design your path_lt_/li_gt__lt_li_gt_extrude_lt_/li_gt__lt_li_gt_if the computed original rotation doesn_t_t fit_co_ then rotate the initial shape instead around the z-axis in the xOy plane_lt_/li_gt__lt_/ul_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Something like (not tested) _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var angle _eq_ your_initial_angle_sm_var matrix _eq_ BABYLON.Matrix.RotationAxis(BABYLON.Axis.Z_co_ angle)_sm_for (var i _eq_ 0_sm_ i &lt_sm_ shape.length_sm_ i++) {  BABYLON.Vector3.TransformCoordinatesToRef(shape[i]_co_ matrix_co_ shape[i])_sm_}_lt_/pre_gt__lt_p_gt_[EDIT]_lt_/p_gt__lt_p_gt_(*) I could change the order the find an arbitrary vector in the plane in path3D also... I_t_m starting along x_co_ but I could start along y as well ..._lt_/p_gt__lt_p_gt_Maybe would it be better as it doesn_t_t impose an initial vector and it will surely give another initial normal_co_ something more likely to a human expectation_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BTW_co_ I_t_m about to implement a lathe method built onto extrusion _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-05-13T13:49:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Waah... marked as answered ? I didn_t_t think all that stuff would be understandable _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_JohnK_co_ extrusion is a part of BJS 2.1 as well as path3D. BJS 2.1 is not yet released._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe I could test/commit another path3D initial normal discovery order. So please don_t_t consider it as fixed yet_co_ it could change... so your initial shape would rotate alone (-/+ 90°) if you use a fresh BJS build _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-05-13T13:58:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_82368_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_14475_qt_ data-ipsquote-username_eq__qt_jerome_qt_ data-cite_eq__qt_jerome_qt_ data-ipsquote-timestamp_eq__qt_1431524988_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Waah... marked as answered ? I didn_t_t think all that stuff would be understandable _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Next time explain in a more abstract way. It was understandable_co_ apparently   _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-05-18T07:17:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I just changed the path3D first normal discovery order _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/517_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/pull/517_lt_/a_gt__lt_/p_gt__lt_p_gt_So if you now extrude along a path close to Z-axis_co_ the shape initial rotation should be quite null._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In other words_co_ the shape model won_t_t be initially rotated when extruded if your path is close to z world axis_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2015-05-19T10:47:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Jerome thank you for your continued work on this. I marked it as solved because you had solved the problem I had asked which was was it me or how the code worked. Since I knew it was how the code worked you had answered my question and thus solved my problem._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What I had not expected_co_ though very pleased that you are doing so_co_ was to take the behaviour as a problem in its own right and set out to solve it._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_To show why I needed my mesh to behave as it should I have include a link to the part of the project I am now working on _lt_a href_eq__qt_http_dd_//www.googledrive.com/host/0By7MbhYpO-G5fnBZWkNLdmlKZFA3TlFScTdYMW1VV3Y0c2tObTFET3NiNFVxVVF5TE5jTmM/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_. This also shows the reason for the offset. Each _t_cubee_t_ must fit to the boundaries of a 60 x 60 x 60 block with local origin at (0_co_ 0_co_ 0).  I simply obtained the expected rotation using_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_.rotation.z _eq_ Math.PI_sm__lt_/pre_gt__lt_p_gt_However I am now having new rotation issues which as they are new I will start a _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/14601-multiple-rotations-not-as-expected/_qt__gt_new post_lt_/a_gt_._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-05-19T12:05:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_very smart project ! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-05-19T12:07:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I_t_m really starting to like this JohnK guy.  Jerome_t_s things are brand new_co_ and_co_ well_co_ I just love the hell out of the guy_co_ because he is exploring a part of webGL... and teaching it to us... fantastically.  And then_co_ JohnK says..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__qt_What I had not expected_co_ though very pleased that you are doing so_co_ was to take the behaviour as a problem in its own right and set out to solve it._qt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What a nice thing to say!  And Jerome EXCELS at this.  I_t_ve thrown quite a bucket of geometry challenges at Jerome_co_ and he kicked butt on every single one of them_co_ and then went on to write systems_co_ with many playgrounds_co_ and great documentation_co_ so we all could learn all the things he knows. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_JohnK_co_ thanks for being a cool forum participant and issue finder_co_ and thanks for petting our heroes.  I hope you can continue to hang around with us and tell us about your projects/hopes.  That new post you did?  Gorgeous!  Wouldn_t_t it be great if ALL forum users asked questions with THAT MUCH prep and great formatting?  Phew.  Excellent.  Is that your axis code?  Its pretty nice.  I like big axes.... easy to see.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I just saw a post from Jerome arrive.  Hi Jerome!  Great work_co_ as always._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2015-05-19T15:29:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Wingnut et al_co_ thought I had better let everyone know that I am not responsible for the axis code - just followed the playground links given under Extensions on this _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/page.php?p_eq_24847_qt_ rel_eq__qt_external nofollow_qt__gt_BJS docs page_lt_/a_gt_ and used the existing code._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My hope is to produce a site that children can use to build up 3D models quickly and easy. Long way to go yet. Here are a couple of parts of the project still under development._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.googledrive.com/host/0By7MbhYpO-G5fjdyWHFjRFU5cFNVa3V2bTZxXy1SZ1JqcGxYZ2FORDlRVWNfdWwyYVFXU2M/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_Lathe_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.googledrive.com/host/0By7MbhYpO-G5fkw0aWV6cXpYR0EyNmU1VUxlRWdHcVRLN3NFU3dnelhsVnRCWEdoSUUzQWs/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_Cubees_lt_/a_gt_ (basic building blocks)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Glad that there are people interested._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]