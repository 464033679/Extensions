[{"Owner":"SneakySnave","Date":"2017-09-21T15:51:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello. I_t_m having an issue creating a skybox with compressed ktx textures.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve followed the instructions _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/tutorials/multi-platform_compressed_textures_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt__co_ and have used the _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/Tools/CompressedTextured_qt_ rel_eq__qt_external nofollow_qt__gt_2 bat scripts_lt_/a_gt_ in conjunction with the PVRTexTool and ASTC tools. Note that I_t_ve used _qt_D_qt_ for developer level quality.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_cd my-directory-with-images\nmake-ktx-batch D\nktx-batch_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThat seems to have correctly generated the compressed files.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_14930_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/59c3dd5f1727b_ScreenShot2017-09-21at10_37_32AM.png.c5eff4cb84e1b978b28f167869c7d4b1.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_59c3dd5fb679c_ScreenShot2017-09-21at10_37_32AM.thumb.png.f81bb3b0cfbcf37dc8168ba834aa040d.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_14930_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/59c3dd5fb679c_ScreenShot2017-09-21at10_37_32AM.thumb.png.f81bb3b0cfbcf37dc8168ba834aa040d.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI then create the default skybox.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var available _eq_ [_t_-astc.ktx_t__co_ _t_-dxt.ktx_t__co_ _t_-pvrtc.ktx_t__co_ _t_-etc2.ktx_t__co_ _t_-etc1.ktx_t_]_sm_\nvar formatUsed _eq_ engine.setTextureFormatToUse(available)_sm_\nconsole.log(formatUsed + _t_ textures_t_)_sm_\n\n...\n\nvar skyboxTexture _eq_ new BABYLON.CubeTexture(_qt_textures/skybox/gradient-sky/SkyGradient_qt__co_ scene)_sm_\nscene.createDefaultSkybox(skyboxTexture)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBased on the console output_co_ it seems to be attempting to load the texture format used _qt_-dxt.ktx_qt_ at my root URL.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_59c3dee7899bd_ScreenShot2017-09-21at10_44_15AM.png.ccf598180c59cfb2e2a153f63960264d.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_14931_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/59c3dee7899bd_ScreenShot2017-09-21at10_44_15AM.png.ccf598180c59cfb2e2a153f63960264d.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m testing in Chrome on a MacBook_co_ but am getting the same error in Firefox and Safari _qt_Error_dd_ Error status_dd_ 404 - Unable to load -dxt.ktx_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny ideas?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for taking the time to read.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-21T16:11:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tDid you make sure to enable .ktx mime type in your wbe server?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SneakySnave","Date":"2017-09-21T16:35:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the lightning quick response_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI believe so. I have this in my mime.types file\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_image/ktx\t\t\t\t\tktx_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-21T16:46:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tso if you go to _lt_a href_eq__qt_http_dd_//localhost_dd_8888/-dxt.ktx_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//localhost_dd_8888/-dxt.ktx_lt_/a_gt_ there is an actual file ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SneakySnave","Date":"2017-09-21T16:52:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNo_co_ there is no file at http_dd_//localhost_dd_8888/-dxt.ktx\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-09-21T19:00:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI never had any cube textures to test.  I just made the same changes I did to 2d textures.  I think the reason might have something to do with that there is no _qt_SkyGradient_qt_ file_co_ maybe try a real file (which will be the fallback) like _qt_SkyGradient_ng.jpg_qt_.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SneakySnave","Date":"2017-09-21T20:40:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the clue! I think I found the problem. It looks like you cannot cascade load separate sides of a cube texture if you_t_re using a compressed texture format.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI followed the call stack from my line _qt_var skyboxTexture _eq_ new BABYLON.CubeTexture(_qt_textures/skybox/gradient-sky/SkyGradient_qt__co_ scene)_sm__qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot using a compressed texture format leads to _lt_u_gt_Engine.prototype.createCubeTexture_lt_/u_gt__co_ and the function call _lt_u_gt_cascadeLoad_lt_/u_gt_ at line 10578 below.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/uncompressed.png.4a112cb253a9b4b434c10226fbe0fb3c.png_qt_ data-fileid_eq__qt_14935_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_14935_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/uncompressed.thumb.png.e31dd84361b8f2349d73b145211ee0cb.png_qt_ alt_eq__qt_uncompressed.thumb.png.e31dd84361b8f2349d73b145211ee0cb.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUsing a ktx texture format leads to _lt_u_gt_Engine.prototype.createCubeTexture_lt_/u_gt__co_ and the function call _lt_span_gt__lt_u_gt_BABYLON.Tools.LoadFile_lt_/u_gt__lt_/span_gt_ at line 10535 below.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/59c421bb6950b_usingktx.png.728dd23889607e8fb80bae9b3d4cddb8.png_qt_ style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt_ data-fileid_eq__qt_14936_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_14936_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_09/59c421bc35009_usingktx.thumb.png.f60cd0aeda1fc874832f054f509c4d4d.png_qt_ alt_eq__qt_59c421bc35009_usingktx.thumb.png.f60cd0aeda1fc874832f054f509c4d4d.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAt line 10528 the rootUrl is changed to the _lt_u_gt_engine.textureFormatInUse_lt_/u_gt__co_ which is _qt_-dxt.ktx_qt_. Then BJS tries to load a file _qt_-dxt.ktx_qt__co_ which doesn_t_t exist.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a reason you cannot load all the sides of a cube texture separately when using a compressed texture format?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-22T18:04:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe basic reason is because it was initially built for dds which can contains cube texture.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCascadeLoad uses html img object to load the faces unfortunately so it is not compatible with ktx\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SneakySnave","Date":"2017-09-23T04:51:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAh_co_ I understand. So if you_t_re going to support multi platform ktx textures in your project_co_ you must also use that for your skybox. You cannot mix and match.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]