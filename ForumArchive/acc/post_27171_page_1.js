[{"Owner":"Peter2","Date":"2016-12-19T13:15:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m looking for the depth information (per pixel) of a camera_t_s view on the scene_dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tdistance\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tposition_dd_ x_co_y_co_z\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tCurrently I_t_m using the scene pick functionality for each pixel_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_for x _eq_ 0 to maxX\n   for y _eq_ 0 to maxY\n      scene.pick(x_co_y_co_null_co_false_co_camera)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThen use the returned PickingInfo_t_s distance and pickedPoint.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a better/faster way to get the depth information_co_ because the above mentioned code takes several seconds.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe via a shader?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2016-12-19T21:05:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou can use the depth renderer for this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//doc.babylonjs.com/tutorials/How_to_use_DepthRenderer_to_get_depth_values_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/tutorials/How_to_use_DepthRenderer_to_get_depth_values_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-20T08:23:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYes_co_ but it does not give me the position.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Luaacro","Date":"2016-12-21T09:26:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tgood question_co_ do you want to use the positions in js side ? Or want to use in a shader like a post-process ?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-21T12:38:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI like to have the information in JS code.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-28T19:12:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI got the depth (via a shader) on a RenderTargetTexture visible on the screen.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut how can I retrieve the depth data from the texture (in JS code)?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a way the walk from 0 to 1 for u and v and get the rgba data?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-12-28T20:57:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thi \n_lt_/p_gt_\n\n_lt_p_gt_\n\ti use this solution before\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhy you need this data _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24900-peter2/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24900_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24900-peter2/_qt_ rel_eq__qt__qt__gt_@Peter2_lt_/a_gt_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-28T21:04:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI like to output the following data to a file_dd_ distance_co_ x_co_ y_co_ z\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat is_co_ for each frame of a camera.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BitOfGold","Date":"2016-12-29T11:47:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAn example function (not tested for depth values_co_ only rgb)_dd_\n_lt_/p_gt_\n\n_lt_pre style_eq__qt_background-color_dd_#002240_sm_color_dd_#ffffff_sm_font-family_dd_Inconsolata_sm__qt__gt_\nrenderTargetTexture_lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#fcff07_sm__qt__gt_onAfterRenderObservable_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#ffdd00_sm__qt__gt_add_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_(_lt_/span_gt__lt_span style_eq__qt_color_dd_#feffff_sm__qt__gt_function _lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_() {  \n_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_   _lt_/span_gt__lt_span style_eq__qt_color_dd_#feffff_sm__qt__gt_var _lt_/span_gt__lt_span style_eq__qt_color_dd_#35d22f_sm__qt__gt_pixels _lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt__eq_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#fcff07_sm__qt__gt_self_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#35d22f_sm_font-weight_dd_bold_sm_font-style_dd_italic_sm__qt__gt_engine_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#ffdd00_sm__qt__gt_readPixels_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_( _lt_/span_gt__lt_span style_eq__qt_color_dd_#258a25_sm__qt__gt_0_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt__co_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#258a25_sm__qt__gt_0_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt__co_ _lt_/span_gt_xsize_lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt__co_ _lt_/span_gt_ysize _lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_)_sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_   _lt_/span_gt__lt_span style_eq__qt_color_dd_#aaa6ab_sm_font-style_dd_italic_sm__qt__gt_//pixels is now a byte array of RGBA values?\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#e01b05_sm__qt__gt_}\n_lt_/span_gt_\n_lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-30T19:06:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYep_co_ that well do it. Thx.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-30T22:43:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNext step is to get the position (the pickedPoint). How to convert the vertex position into gl_FragColor?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Peter2","Date":"2016-12-30T22:48:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI got something like_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tVertexShader_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_varying vec4 vPosition_sm_\n\nvoid main(void) {\n    vec4 pos _eq_ vec4(position_co_ 1.0)_sm_\n    vPosition _eq_ world * pos_sm_ \n\n    gl_Position _eq_ worldViewProjection * pos_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tPixelShader_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_varying vec4 vPosition_sm_\n\nvoid main(void) {\n    gl_FragColor _eq_ vec4(vPosition.xyz / 255.0 + 0.5_co_ 1.0)_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIs this correct?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m losing precision this way I think.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-12-31T05:48:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyou wanna do this?\n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/22471-gpu-picking-system/?do_eq_embed&amp_sm_comment_eq_127901&amp_sm_embedComment_eq_127901&amp_sm_embedDo_eq_findComment#comment-127901_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]