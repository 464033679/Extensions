[{"Owner":"adobeSlash","Date":"2016-04-06T09:25:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everyone !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is my first post here and i_t_m not used to so apologies if I do some begginers mistakes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI look for it in internet but nothing about this error _dd_ TypeError_dd_ undefined is not an object (evaluating _t_s._addPendingData_t_)_lt_br /_gt_\n\tI_t_m just trying to import a mesh into my scene._lt_br /_gt_\n\tThis is my code _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var Ground _eq_ function(x_co_ z_co_ game_co_ scene) {\n  // Call the super class BABYLON.Mesh\n  GameObject.call(this_co_ _qt_ground_qt__co_ game)_sm_\n\nconsole.log(_qt_Adding the ground_qt_)_sm_\n  BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_assets/_qt__co_ _qt_scene.babylon_qt__co_ scene_co_ function (newMeshes_co_ particleSystems) {\n      this _eq_ newMeshes[0]_sm_\n\n      this.isVisible _eq_ true_sm_\n      this.parent _eq_ this_sm_\n      this.shadows.getShadowMap().renderList.push(ground)_sm_\n\n      this.position _eq_ new BABYLON.Vector3(x_co_ 0.75_co_ z)_sm_\n\n      this.receiveShadows _eq_ true_sm_\n\n  })_sm_\nconsole.log(_qt_Ground added_qt_)_sm_\n\n  //console.log(_qt_number of meshes _dd_ _qt_ + game.assets[_t_ground_t_].meshes.length)_sm_\n  //var ground _eq_ game.assets[_t_ground_t_].meshes_sm_\n\n}_sm_\n// Our object is a GameObject\nGround.prototype _eq_ Object.create(GameObject.prototype)_sm_\n// And its constructor is the Ground function described above.\nGround.prototype.constructor _eq_ Ground_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tand my file architecture _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMain Folder_lt_br /_gt_\n\t-- Ground_lt_br /_gt_\n\t-- assets_lt_br /_gt_\n\t  -- scene/babylon_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes someone have information for me ? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you in advance_co_ enjoy your day\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_UPDATE _dd_ _lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve made some changes to my code and i put all my files on a server (cloud foundry_co_ so you guys can see my code _dd_ _lt_a href_eq__qt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/_lt_/a_gt_)_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var Ground _eq_ function(x_co_ z_co_ game_co_ scene) {\n  // Call the super class BABYLON.Mesh\n  GameObject.call(this_co_ _qt_ground_qt__co_ game)_sm_\n\nconsole.log(_qt_Adding the ground_qt_)_sm_\n  BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_assets/_qt__co_ _qt_scene.babylon_qt__co_ scene_co_ function (newMeshes_co_ particleSystems) {\n      this.meshes _eq_ newMeshes[0]_sm_\n\n      this.meshes.isVisible _eq_ true_sm_\n      this.meshes.parent _eq_ this_sm_\n      this.meshes.shadows.getShadowMap().renderList.push(ground)_sm_\n\n      this.meshes.position _eq_ new BABYLON.Vector3(x_co_ 0.75_co_ z)_sm_\n\n      this.meshes.receiveShadows _eq_ true_sm_\n\n  })_sm_\nconsole.log(_qt_Ground added_qt_)_sm_\n\n  //console.log(_qt_number of meshes _dd_ _qt_ + game.assets[_t_ground_t_].meshes.length)_sm_\n  //var ground _eq_ game.assets[_t_ground_t_].meshes_sm_\n\n}_sm_\n// Our object is a GameObject\nGround.prototype _eq_ Object.create(GameObject.prototype)_sm_\n// And its constructor is the Ground function described above.\nGround.prototype.constructor _eq_ Ground_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe error is the same but without the _t_s._t_ _dd_ Uncaught TypeError_dd_ Cannot read property _t__addPendingData_t_ of undefined\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you for you consideration\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_EDIT _dd__lt_/strong_gt__lt_br /_gt__lt_br /_gt_\n\tIf you need it this is the complet file system _dd_ _lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_Block.js                                  636B\nGame.js                                   3.5K\nGameObject.js                             356B\nGround.js                                 927B\nLevel.js                                  1.2K\nPlayer.js                                 4.2K\nassets/                                      -\nindex.html                                704B\njs/                                          -\nlevels.js                                 771B\nold/                                         -\n\ncd assets/\n\nkey.babylon                              47.7K\nkey.babylon.manifest                       78B\nscene.babylon                           163.5K\nscene.babylon.manifest                     79B\nskybox/                                      -\n\ncd ../js\n\nOimo.js                                 302.5K\nbabylon.2.3.js                          948.4K\ncannon.js                               384.2K\nhand-1.3.7.js                            29.6K_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2016-04-06T11_dd_27_dd_28Z_t_ title_eq__t_04/06/2016 11_dd_27  AM_t_ data-short_eq__t_2 yr_t__gt_April 6_co_ 2016_lt_/time_gt_ by adobeSlash_lt_/strong_gt_\n\t\n\t\t_lt_br_gt_more information about the file system\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-06T17:06:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt_t_s not the same post. This one has been edited once more and I_t_ve made some changes in some code you_t_r pointing in your solution. But I don_t_t know why there is two post.. better to close the other one I think. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSO ! I made changes in my code and using yours _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var Ground _eq_ function(x_co_ z_co_ game_co_ scene) { \n      console.log(_qt_Adding the ground_qt_)_sm_\n      BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_assets/_qt__co_ _qt_scene.babylon_qt__co_ scene_co_ function (newMeshes) {\n            this.mesh _eq_ newMeshes[0]_sm_\n            this.mesh.isVisible _eq_ true_sm_      \n            this.mesh.shadows.getShadowMap().renderList.push(this.mesh)_sm_\n            this.mesh.position _eq_ new BABYLON.Vector3(x_co_ 0.75_co_ z)_sm_\n            this.mesh.receiveShadows _eq_ true_sm_\n            console.log(_qt_Ground added_qt_)_sm_\n      })_sm_\n}_sm_\n\n  //console.log(_qt_number of meshes _dd_ _qt_ + game.assets[_t_ground_t_].meshes.length)_sm_\n  //var ground _eq_ game.assets[_t_ground_t_].meshes_sm_\n\n// Our object is a GameObject\nGround.prototype _eq_ Object.create(GameObject.prototype)_sm_\n// And its constructor is the Ground function described above.\nGround.prototype.constructor _eq_ Ground_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut i_t_m still having the same error _dd_ babylon.2.3.js_dd_13 Uncaught TypeError_dd_ Cannot read property _t__addPendingData_t_ of undefined\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs said you can watch it working directly at _dd_ _lt_a href_eq__qt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/_lt_/a_gt_ . Maybe that can help..._lt_br /_gt_\n\tThanks a lot for your consideration !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT _dd_ I tried my file into the babylon sandbox and it can load it.. so the file is correct..\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2016-04-06T17_dd_08_dd_36Z_t_ title_eq__t_04/06/2016 05_dd_08  PM_t_ data-short_eq__t_2 yr_t__gt_April 6_co_ 2016_lt_/time_gt_ by adobeSlash_lt_/strong_gt_\n\t\n\t\t_lt_br_gt_adding information\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-06T18:56:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tSeems like your scene is undefined or not sent to the object. I don_t_t see the code calling the ground object_co_ so I can_t_t really tel you where it went wrong. But this is the scene object for sure.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-06T20:53:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLove you dude !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat_t_s works now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy scene was undefined for some obscure reason.... but now it_t_s ok ! Thank a lot for you time.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T07:13:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSorry about that.. But...\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var Ground _eq_ function(x_co_ z_co_ game_co_ scene) { \n      console.log(_qt_Adding the ground_qt_)_sm_\n      BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_assets/_qt__co_ _qt_scene.babylon_qt__co_ scene_co_ function (newMeshes) {\n            console.log(_qt_I_t_m in_qt_)_sm_\n            this.mesh _eq_ newMeshes[0]_sm_\n            this.mesh.isVisible _eq_ true_sm_      \n            this.mesh.shadows.getShadowMap().renderList.push(this.mesh)_sm_\n            this.mesh.position _eq_ new BABYLON.Vector3(x_co_ 0.75_co_ z)_sm_\n            this.mesh.receiveShadows _eq_ true_sm_\n            console.log(_qt_Ground added _dd_ _qt_ + this.mesh)_sm_\n      })_sm_\n      console.log(_qt_scene info _dd_ _qt_ + scene)_sm_\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIt_t_s never printed _dd_ _qt_ I_t_m in _qt_....\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNo error_co_ nothing... so still not working\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T07:57:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthat is probably due to your manifest. you set offline to true_co_ so it wont load the file from the network and therefore will never call the success_co_ as it is already there.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe it SHOULD call the success_co_ I need to check exactly what is wrong there.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTry changing your manifest (or removing it completely ) and see if it is executed.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T08:01:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for your help ! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tUnfortunately i got the following error if I delete the manifest _dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tbabylon.2.3.js_dd_2 GET _lt_a href_eq__qt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/assets/scene/scene.babylon.manifest?1460015970229_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/assets/scene/scene.babylon.manifest?1460015970229_lt_/a_gt_ 404 (Not Found)_lt_br /_gt__lt_br /_gt_\n\tI tried to use the Loader _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_// All models to load\n  var toLoad _eq_ [\n    {\n      name_dd__qt_ground_qt__co_\n      folder_dd__qt_assets/scene/_qt__co_\n      filename_dd__qt_scene.babylon_qt__co_\n      anims _dd_ []\n    }\n  ]_sm_\n\n  // Creates a loader\n  var loader _eq_  new BABYLON.AssetsManager(this.scene)_sm_\n  loader.loadingUIBackgroundColor _eq_ _qt_#2c2b29_qt__sm_\n\n  var _this _eq_ this_sm_\n  // For each object to load\n  toLoad.forEach(function(tl) {\n    var task _eq_ loader.addMeshTask(tl.name_co_ _qt__qt__co_ tl.folder_co_ tl.filename)_sm_\n    task.onSuccess _eq_ function(t) {\n      // Set all mesh invisible\n      t.loadedMeshes.forEach(function(mesh) {\n        mesh.isVisible _eq_ false_sm_\n      })_sm_\n      // Save it in the asset array\n      _this.assets[t.name] _eq_ {meshes_dd_t.loadedMeshes_co_ anims_dd_tl.anims}_sm_\n    }_sm_\n    task.onTaskError _eq_ function (task) {\n      console.error(_qt_error while loading _qt_ + task.name)_sm_\n    }\n  })_sm_\n\n  loader.onFinish _eq_ function () {\n    console.log(_this.assets)_sm_\n    // Init the game\n    _this._initGame()_sm_\n\n    _this.engine.runRenderLoop(function () {\n      _this.scene.render()_sm_\n    })_sm_\n  }_sm_\n\n  loader.load()_sm_\n\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut if I print the content of _this.assets it still empty ...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T08:44:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI need you experience. But I suppose that it_t_s impossible to call console.log into a callback isn_t_t ? So it can explain why i can_t_t see my debug message...\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T08:47:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthis 404 is not a problem. And yes_co_ you can have console.log inside a callback.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIgnore the manifest error for now_co_ check if it is actually loading the scene file.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T08:51:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_124100_qt_ data-ipsquote-contentid_eq__qt_21742_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1460018872_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t3 minutes ago_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tthis 404 is not a problem. And yes_co_ you can have console.log inside a callback.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tIgnore the manifest error for now_co_ check if it is actually loading the scene file.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tNo nothing is loaded ..._lt_br /_gt_\n\tTo be sure I use the scene debugger and my mesh doesn_t_t appear in the _lt_span style_eq__qt_color_dd_rgb(255_co_255_co_255)_sm_font-family_dd__t_Segoe UI_t__co_ Arial_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_bold_sm_letter-spacing_dd_normal_sm_line-height_dd_normal_sm_text-align_dd_right_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(0_co_0_co_0)_sm__qt__gt_MESHES TREE_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T08:53:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tcheck that the scene file is downloaded correctly. If you want to share a working URL we can all look together. \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T08:56:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_124103_qt_ data-ipsquote-contentid_eq__qt_21742_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1460019230_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tJust now_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tcheck that the scene file is downloaded correctly. If you want to share a working URL we can all look together. \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYou can check this out at _dd_ _lt_a href_eq__qt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//datageneration.apps.eu01.cf.canopy-cloud.com/_lt_/a_gt__lt_br /_gt_\n\tHow can I check if the scene file is correctly loaded ? \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T09:05:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIf the url doesn_t_t work here is a zip file with the source code and assets\n_lt_/p_gt_\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_7199_qt__gt_datageneration.zip_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T09:10:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOk_co_ I think I found the problem. You are trying to use PBMMaterial without including it in your scene. You can try loading the .js file_co_ or move to 2.4_co_ which has PBRMaterial integrated in the framework.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T09:21:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t!!!!!!!!!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works !!_lt_br /_gt__lt_br /_gt_\n\tTo help people understand which part of my code require PBMMaterial ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s look like 2.4 use cannon.js for physics _dd_ BJS - [10_dd_19_dd_15]_dd_ CannonJS is not available. Please make sure you included the js file.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T09:42:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tyou can choose which physics engine to use. default changed_co_ but providing new BABYLON.OimoJSPlugin() as the second param to the enablePhysics function will bring everything back to normal.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T10:08:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tEverything is ok excepted this _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_Player.prototype._rotateTo _eq_ function(s) {\n  // get mesh quaternion\n  var mq _eq_ this.rotationQuaternion_sm_\n  var q _eq_ BABYLON.Quaternion.RotationAxis(BABYLON.Axis.Y_co_ s)_sm_\n  this.rotationQuaternion _eq_ q.multiply(mq)_sm_\n  this.body.body.setQuaternion(this.rotationQuaternion)_sm_\n  this.body.body.sleeping _eq_ false_sm_\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\twas working before.._lt_br /_gt_\n\tI_t_m loading my body like this _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.body _eq_ this.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor_co_ {mass_dd_1_co_ friction_dd_0.9})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIf needed this is the complet code of this class _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var Player _eq_ function (game) {\n  GameObject.call(this_co_ _qt_player_qt__co_ game)_sm_\n\n  var vertexData _eq_ BABYLON.VertexData.CreateSphere(16_co_ 0.75_co_ BABYLON.Mesh.DEFAULTSIDE)_sm_\n\n  // Create the player box\n  //var vertexData _eq_ BABYLON.VertexData.CreateBox(0.5_co_ BABYLON.Mesh.DEFAULTSIDE)_sm_\n  vertexData.applyToMesh(this)_sm_\n\n  this.position.y _eq_ Player.START_HEIGHT_sm_\n\n  this.body _eq_ this.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor_co_ {mass_dd_1_co_ friction_dd_0.9})_sm_\n\n  var _this _eq_ this_sm_\n  this.getScene().registerBeforeRender(function() {\n    if (_this.position.y &lt_sm_ -10) {\n      _this.game.reset()_sm_\n    }\n  })_sm_\n\n  // Two boolean giving the direction (forward/backward)\n  this.directions _eq_ [0_co_0]_sm_\n  // Two boolean giving the rotation (right/left)\n  this.rotations _eq_ [0_co_0]_sm_\n  this.rotationQuaternion _eq_ new BABYLON.Quaternion()_sm_\n  \n  var _this _eq_ this_sm_\n  this.getScene().registerBeforeRender(function() {\n    // Move the player is possible\n    _this.move()_sm_\n    //...\n    // Reset the game if the player position is below 10\n    if (_this.position.y &lt_sm_ -10) {\n      _this.game.reset()_sm_\n    }\n  })_sm_\n  window.addEventListener(_qt_keydown_qt__co_ function(e) {\n    switch (e.keyCode) {\n      case 39_dd_ // right\n        _this.rotations[0] _eq_ 1_sm_\n        break_sm_\n      case 37_dd_ // left\n        _this.rotations[1] _eq_ 1_sm_\n        break_sm_\n      case 38_dd_//bot_dd_\n        _this.directions[0] _eq_ 1_sm_\n        break_sm_\n      case 40_dd_//top_dd_\n        _this.directions[1] _eq_ 1_sm_\n        break_sm_\n    }\n  })_sm_\n  window.addEventListener(_qt_keyup_qt__co_ function(e) {\n    switch (e.keyCode) {\n      case 39_dd_ // right\n      case 37_dd_ // left\n        _this.rotations _eq_ [0_co_0]_sm_\n        break_sm_\n      case 38_dd_//bot_dd_\n      case 40_dd_//top_dd_\n        _this.directions _eq_ [0_co_0]_sm_\n        break_sm_\n    }\n  })_sm_\n}_sm_\nPlayer.START_HEIGHT _eq_ 5_sm_\n\n// Our object is a GameObject\nPlayer.prototype _eq_ Object.create(GameObject.prototype)_sm_\nPlayer.prototype.constructor _eq_ Player_sm_\n\nPlayer.prototype.move _eq_ function() {\n  if (this.directions[0] !_eq_ 0) {\n    this._moveTo(-1)_sm_\n  }\n  if (this.directions[1] !_eq_ 0) {\n    this._moveTo(1)_sm_\n  }\n  if (this.rotations[0]  !_eq_ 0) {\n    this._rotateTo(0.05)_sm_\n  }\n  if (this.rotations[1]  !_eq_ 0) {\n    this._rotateTo(-0.05)_sm_\n  }\n\n}_sm_\n\nPlayer.prototype._moveTo _eq_ function(s) {\n  // Compute the world matrix of the player\n  this.computeWorldMatrix()_sm_\n  // Moving forward along the global z-axis\n  var v _eq_ new BABYLON.Vector3(0_co_0_co_s)_sm_\n  // Get the world matrix\n  var m _eq_ this.getWorldMatrix()_sm_\n  // Transform the global vector into local vector\n  var v2 _eq_ BABYLON.Vector3.TransformCoordinates(v_co_ m)_sm_\n  v2.subtractInPlace(this.position)_sm_\n  v2.normalize().scaleInPlace(0.5)_sm_\n  this.applyImpulse(v2_co_ this.position)_sm_\n  // Add this new vector to the player position\n  //this.position.addInPlace(v2)_sm_\n}_sm_\n\nPlayer.prototype._rotateTo _eq_ function(s) {\n  // get mesh quaternion\n  var mq _eq_ this.rotationQuaternion_sm_\n  var q _eq_ BABYLON.Quaternion.RotationAxis(BABYLON.Axis.Y_co_ s)_sm_\n  this.rotationQuaternion _eq_ q.multiply(mq)_sm_\n  this.body.body.setQuaternion(this.rotationQuaternion)_sm_\n  this.body.body.sleeping _eq_ false_sm_\n}_sm_\n\nPlayer.prototype.reset _eq_ function (pos) {\n\n  //this.position _eq_ pos_sm_\n  //this.position.y _eq_ Player.START_HEIGHT_sm_\n  this.body.resetPosition(pos.x_co_ Player.START_HEIGHT_co_ pos.z)_sm_\n  this.body.resetRotation(0_co_0_co_0)_sm_\n  //this.body.body.linear\n  this.rotations _eq_ [0_co_0]_sm_\n  this.directions _eq_ [0_co_0]_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThe physics is initialized like that _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_scene.enablePhysics(new BABYLON.Vector3(0_co_ -10_co_ 0)_co_ new BABYLON.OimoJSPlugin())_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T10:11:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tway too much code _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIf you want to explain what_t_s wrong and contain it in a single function_co_ or maybe share an exception or a playground_co_ i could help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adobeSlash","Date":"2016-04-07T10:21:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tUnderstood !_lt_br /_gt__lt_br /_gt_\n\tthis two lines _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.body.body.setQuaternion(this.rotationQuaternion)_sm_\nthis.body.body.sleeping _eq_ false_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\twas working good before switching from 2.3 to 2.4_lt_br /_gt__lt_br /_gt_\n\tnow I have the following errors _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_Uncaught TypeError_dd_ Cannot read property _t_setQuaternion_t_ of undefined_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tSo I supposed it_t_s came from the new physics rules... _lt_br /_gt_\n\tMy body is instantiated like that _dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.body _eq_ this.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor_co_ {mass_dd_1_co_ friction_dd_0.9})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-04-07T15:06:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t...\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-07T18:29:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_124128_qt_ data-ipsquote-contentid_eq__qt_21742_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1460024512_qt_ data-ipsquote-userid_eq__qt_20700_qt_ data-ipsquote-username_eq__qt_adobeSlash_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 4/7/2016 at 3_dd_21 AM_co_ adobeSlash said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tthis two lines _dd_ \n\t\t_lt_/p_gt_\n\n\t\t_lt_pre_gt_\n\n_lt_code_gt__lt_span_gt_this_lt_/span_gt_.body.body.setQuaternion(_lt_span_gt_this_lt_/span_gt_.rotationQuaternion)_sm_\n_lt_span_gt_this_lt_/span_gt_.body.body.sleeping _eq_ _lt_span_gt_false_lt_/span_gt__sm__lt_/code_gt__lt_/pre_gt_\n\n\t\t_lt_p_gt_\n\t\t\twas working good before switching from 2.3 to 2.4\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tSo - this is the old architecture and was always knd of a hack (this way of handling things was never an official way using BabylonJS).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat you are doing here is getting the physics body and changing it directly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is now no longer needed. you can get the physicsImpostor of the mesh (if you use the old method it would be mesh.physicsImpostor) and use the wakeUp() method which will wake up the impostor (or_co_ set sleep to false _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo change the quaternion_co_ simply change the mesh_t_s quaternion_co_ Babylon will do the rest. This is described in here - _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/Using_The_Physics_Engine#bidirectional-transformation-linking_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/overviews/Using_The_Physics_Engine#bidirectional-transformation-linking_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]