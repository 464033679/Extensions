[{"Owner":"PeapBoy","Date":"2018-02-01T11:35:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello BJS community ! _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tI just began to understand HDR textures_co_ gamma correction and so on in order to learn how to do IBL._lt_br /_gt_\n\tIn this process_co_ I used BABYLON.HDRCubeTexture to convert my equirectangular HDR texture to a usable environment HDR cubemap_co_ as explained _lt_a href_eq__qt_https_dd_//learnopengl.com/PBR/IBL/Diffuse-irradiance_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_._lt_br /_gt_\n\tThen_co_ I need to apply a convolution on this cubemap to obtain my final irradiance cubemap that I will sample during IBL._lt_br /_gt_\n\t_lt_br /_gt_\n\tTo compute my irradiance cubemap from the environment cubemap_co_ I use a RenderTargetTexture._lt_br /_gt_\n\tUntil there_co_ everything works fine !_lt_br /_gt_\n\t_lt_br /_gt_\n\tIn the above tutorial link_co_ the guy uses OpenGL and doesn_t_t matter about having output color exceeding [0..1] range. It_t_s useful to keep HDR textures until the last step where he will tone map its result._lt_br /_gt_\n\tI learned the hard way that it_t_s not as simple with WebGL._lt_br /_gt_\n\t_lt_br /_gt_\n\tWhen I store color outside [0..1] range and then sample this result in another shader_co_ result has been clamped between [0..1] range._lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//stackoverflow.com/questions/24855256/how-to-output-fragment-values-greater-than-1-in-webgl_qt_ rel_eq__qt_external nofollow_qt__gt_This stackoverflow question_lt_/a_gt_ taught me that not only I need to use a floating point texture but also I have to render to a floating point frame buffer. Or something like that_co_ I never dived into pure WebGL code._lt_br /_gt_\n\tTo render to a floating point frame buffer_co_ I need to enable the _lt_strong_gt_EXT_color_buffer_float_lt_/strong_gt_ extension (only available with WebGL 2)_co_ but it doesn_t_t seem to be enough. I think I also need to configure the framebuffer with pure WebGL code._lt_br /_gt_\n\t_lt_br /_gt_\n\t_lt_em_gt_So_co_ my question is_dd__lt_/em_gt__lt_br /_gt_\n\t_lt_em_gt_Is is yet possible to render color outside [0..1] range using BabylonJS at this time ? How ?_lt_/em_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tIf this not ready yet_co_ I_t_ll normalize and denormalize data at each step of course. But I would love to know if doing it in the ideal way is possible._lt_br /_gt_\n\t_lt_br /_gt_\n\tThank you a lot in advance ! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-02-01T18:17:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGood news_dd_ it is supported _sm_D\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L5458_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L5458_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can just ask bjs to create a float rendertargettexture like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code class_eq__qt_language-javascript_qt__gt_var tex _eq_ new BABYLON.RenderTargetTexture(_qt_depthMap_qt__co_ { width_dd_ 256_co_ height_dd_256 }_co_ scene_co_ false_co_ true_co_ BABYLON.Engine.TEXTURETYPE_FLOAT)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-02-01T19:57:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh my_co_ I have needed to know this forever and just never thought to ask... wow thanks _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22373-peapboy/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22373_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22373-peapboy/_qt_ rel_eq__qt__qt__gt_@PeapBoy_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2018-02-01T20:29:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for quick answer as always ^^\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell I_t_m quite sure that_t_s what I did.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd that_t_s exactly why I was wondering about this range question !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBecause when I sample this renderTargetTexture in the next shader_co_ it has been mysteriously clamped to [0..1] !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut I_t_ll confirm this tomorrow morning when I_t_ll get my computer back. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-02-01T22:25:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLet me know _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso you should try Spector.js to debug your webgl shaders_dd_ _lt_a href_eq__qt_http_dd_//spector.babylonjs.com/_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//spector.babylonjs.com/_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2018-02-02T09:44:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi !_lt_br /_gt_\n\t_lt_br /_gt_\n\tThat_t_s my code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__this._irradianceMap _eq_ new BABYLON.RenderTargetTexture(name_co_ _this._mapSize_co_ _this._scene_co_ false_co_ true_co_ BABYLON.Engine.TEXTURETYPE_FLOAT_co_ true)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tI always use floating point textures when it_t_s possible. I thought it was enough but the above _lt_a href_eq__qt_https_dd_//stackoverflow.com/a/24869829/5053300_qt_ rel_eq__qt_external nofollow_qt__gt_link_lt_/a_gt_ says I also need to configure the frame buffer to expect floating point values or it will clamp the values to [0..1] even if the texture is a floating point texture._lt_br /_gt_\n\tI always thought that the frame buffer data and the final texture were quite the same thing_co_ so I_t_m confused._lt_br /_gt_\n\t_lt_br /_gt_\n\tThough_co_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#GJ3CHS_qt_ rel_eq__qt_external nofollow_qt__gt_this playground_lt_/a_gt_ shows you_t_re right for 2D textures ! HDR values are not clamped ! I_t_ll try to make another PG with cube textures and see if I can reproduce my issue _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ _lt_br /_gt_\n\tFinal BLUE color means values have been clamped. Final GREEN value means values haven_t_t been clamped._lt_br /_gt_\n\t_lt_br /_gt_\n\tI already installed Spector.js extension for a while but I didn_t_t manage to make it work in my apps_co_ I should use it directly in code. (It works great in playground though ^^)_lt_br /_gt_\n\t_lt_br /_gt_\n\t[EDIT]_lt_br /_gt_\n\t_lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#GJ3CHS%2314_qt_ rel_eq__qt_external nofollow_qt__gt_Here is the playground for cube textures !_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s a bit difficult to understand as I copy paste a prototype of my app without removing what is useles for this PG. The only thing to look here is the shaders above which store big values and try to get them back._lt_br /_gt_\n\tFinal BLUE color means values have been clamped. Final GREEN value means values haven_t_t been clamped._lt_br /_gt_\n\tAnd this time_co_ it_t_s blue. _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tI_t_m pretty sure I do something wrong but I don_t_t know what._lt_br /_gt_\n\t_lt_br /_gt_\n\t[EDIT 2]_lt_br /_gt_\n\t_lt_br /_gt_\n\tI just found that my final cube texture has a textureType UNSIGNED_INT instead of FLOAT_co_ even if I specify BABYLON.Engine.TEXTURETYPE_FLOAT in the RenderTargetTexture. I think that_t_s why my values are clamped._lt_br /_gt_\n\t_lt_br /_gt_\n\t[EDIT 3]_lt_br /_gt_\n\t_lt_br /_gt_\n\tIt seems to work when I replace gl.UNSIGNED_BYTE by gl.FLOAT in the BABYLON.Engine.CreateRenderTargetCubeTexture() function. Any reason for having hard coded UNSIGNED_BYTE for cube textures ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-02-02T19:17:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo good reason _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease do a PR to fix that _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ (based on the same model as regular renderTexture)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for the investigation\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2018-02-05T09:00:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI would love to but I can_t_t compile Babylonjs anymore_co_ I have an error every time I run _qt_gulp typescript_qt_... Even when I didn_t_t make any change._lt_br /_gt_\n\tSo it_t_ll will take a little bit longer._lt_br /_gt_\n\t_lt_br /_gt_\n\t[EDIT]_lt_br /_gt_\n\tActually_co_ I don_t_t understand why I can_t_t compile BJS_co_ maybe you_t_ll have any idea?_lt_br /_gt_\n\t_lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/35485-cannot-compile-bjs-source-with-gulp-anymore/_qt_ rel_eq__qt__qt__gt_I opened a question here._lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2018-02-07T13:12:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDone _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/3715_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/pull/3715_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-02-07T17:32:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tjust a tiny update and I_t_ll merge\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthanks a lot!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]