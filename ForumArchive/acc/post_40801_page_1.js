[{"Owner":"chicagobob123","Date":"2018-10-22T22:11:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have been tasked to create a add to a camera some functionality thats in Google Earth(link below). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe basics is you and shift drag  to Yaw around the point you clicked on. Then there is pitch as you move up and down which can be offset from the center. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am using FreeCamera control as was able to get the offcenter yaw but the pitch is kicking my butt.  Hoping one of you math wizards can give me an idea on how to get this to work. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//earth.google.com/web/@38.23556007_co_-86.14125787_co_207.84151084a_co_1446.24993683d_co_35y_co_-51.2030513h_co_4.07157441t_co_0r_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//earth.google.com/web/@38.23556007_co_-86.14125787_co_207.84151084a_co_1446.24993683d_co_35y_co_-51.2030513h_co_4.07157441t_co_0r_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tClick 3D then hit shift on your keyboard and left mouse drag and you can see how the pitch and yaw work.  Thanks for any ideas. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-10-23T15:31:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ can you offer a repro in the PG of your current work? It will be easier for the community to help\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"chicagobob123","Date":"2018-10-23T15:45:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI thought that would the case. I will give it a try. Thanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"sable","Date":"2018-10-24T00:57:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_iframe allowfullscreen_eq__qt__qt_ data-controller_eq__qt_core.front.core.autosizeiframe_qt_ data-embedcontent_eq__qt__qt_ data-embedid_eq__qt_embed2727760345_qt_ scrolling_eq__qt_no_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/39249-arcrotatecamera-zoom-to-mouse-position/?do_eq_embed&amp_sm_comment_eq_224160&amp_sm_embedComment_eq_224160&amp_sm_embedDo_eq_findComment_qt_ style_eq__qt_height_dd_292px_sm_max-width_dd_502px_sm__qt__gt__lt_/iframe_gt_\n_lt_p_gt_\n\tI implemented google map style controls in a pg linked above_co_ and also provided a link to where this (something similar anyway) was used in production (which will give you a better idea as to whether this is the sort control style you_t_re wanting to do).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI modified the ArcRotate camera though_co_ not the Free Camera.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"chicagobob123","Date":"2018-11-05T20:10:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe Arcrotatecamera is close but the people I work with want that pivot and rotate at the point you click on. Basically off center.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am going to look at the Arcrotatecamera code to see what it does. I am currently at a loss because even though all the math seems right the result is wrong. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI took the camera created and offset rotation and simultaneously rotated the view port. That should have worked but alas it does not. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for the look see. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"chicagobob123","Date":"2018-11-06T20:49:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOK in a finally got this placed into Playground.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#NU4F6Y%2389_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#NU4F6Y#89_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHad to learn to program this again. You hit the shift key click and drag the to the right. Whats supposed to happen is in the image below. Like Google Earths shift drag. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat happens is the point does not stay stationary. I just can_t_t figure out why. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/645739273_rotatingviewpoint.png.e3ad9f560d6c991ff1080896d1fc67c2.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_20819_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/645739273_rotatingviewpoint.png.e3ad9f560d6c991ff1080896d1fc67c2.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_rotating viewpoint.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"sable","Date":"2018-11-07T01:00:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#NU4F6Y%2391_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#NU4F6Y#91_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWas just a minor error_co_ assigning the dragPoint.y the pickpoint.y instead of z on line 47.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI added a //change comment to each line I modified from the original pg.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMade _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/ts.html#CZPQAT_qt_ rel_eq__qt_external nofollow_qt__gt_this_lt_/a_gt_ pg from scratch while checking_co_ but prob not too much use to you.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"chicagobob123","Date":"2018-11-07T13:48:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhy did you remove the check to  _lt_span style_eq__qt_color_dd_#008000_sm__qt__gt_offsetX !_eq_ 0 ? _lt_/span_gt_ and I love your 360 fix. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut that seems to have fixed it here yet in the app its not the same.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow have some more digging to do.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNOTE Don_t_t use coordinateSystem.screenCoordinatesToWorldCoordinates(this.scene_co_ evt.clientX_co_ evt.clientY)_sm_ to deliver your pivot point. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow I can move on.  Will add the pivot around the top. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"sable","Date":"2018-11-07T22:00:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI removed the offsetX check as I was finding it jarring for the camera to pan a little sometimes while rotating if the x offset happened to be zero (while the y offset was not).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_Where_t_s the screenCoordinatesToWorldCoordinates function from? It sounds like the start of firing a ray from the camera and then using it to pick a point._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_﻿Regarding picking a pivot point_co_ if you_t_re just dealing with a flat 2d plane_co_ then doing an intersection test against that (BABYLON.Plane) will be a bit cheaper than doing one against a mesh (especially if you_t_re wanting to test on mouse move when dragging to maintain position under the cursor)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_Edit_dd_ Just stumbled across _lt_a href_eq__qt_https_dd_//developer.mozilla.org/en-US/docs/Web/API/MouseEvent/shiftKey_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//developer.mozilla.org/en-US/docs/Web/API/MouseEvent/shiftKey_lt_/a_gt_ which you might also find of use_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-11-08T00_dd_33_dd_59Z_t_ title_eq__t_11/08/2018 12_dd_33  AM_t_ data-short_eq__t_Nov 8_t__gt_November 8_lt_/time_gt_ by sable_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"chicagobob123","Date":"2018-11-13T20:00:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ just wanted to reply real quick.. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for everything.  I thought I had a completed this control today but alas its still not right.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a babylon playgorund for it but don_t_t really want to share until I am ready to ask for specific help or just share the code.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEither way..   Anyway head down working and its close to what they asked for but still a bit broken. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]