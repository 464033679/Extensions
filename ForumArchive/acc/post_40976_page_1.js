[{"Owner":"Valeriob","Date":"2018-10-31T17:49:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti created a Solid Particle System with box shapes_co_ and i was able to get the particle picked by a ray.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would like to draw something (another mesh_co_ with some text probably) on top of the box shape on the face that was picked.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried the following_co_ and i see particle._model._shape_co_ how can i use face.faceId to reconstruct that surface ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks ! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tlet info _eq_ this.scene.pickWithRay(ray)_sm__lt_br /_gt_\n\tlet face _eq_ sps.pickedParticles[info.faceId]_sm__lt_br /_gt_\n\tlet particle _eq_ sps.particles[face.idx]_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tlet someArrayOfPointsToBuildA2dSurface _eq_ someMagicFunction( particle._model._shape_co_ face.faceId)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-11-01T15:05:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPinging _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Wingnut uses moderator perms_dd_  Potential testing playground_dd_  _lt_/span_gt__lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#2FPT1A%23229_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#2FPT1A#229_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-11-03T14:33:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tback\n_lt_/p_gt_\n\n_lt_p_gt_\n\tquick answer _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_the model shape is simply a reference to the geometry of the model used to build the current particle_co_ so I don_t_t think this will help you (this is the geometry of a box in your case)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_a href_eq__qt_http_dd_//doc.babylonjs.com/how_to/solid_particle_system#pickable-particles_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/how_to/solid_particle_system#pickable-particles_lt_/a_gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_If you want to change one face of a given particle_co_ you need to catch the picked particle_co_ what you already know how to do_co_ then to catch the picked facet of this particle (counted in the particle facet pool) with the property ._lt_em_gt_faceId_lt_/em_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_let info _eq_ this.scene.pickWithRay(ray)_sm_            // get the ray pickingInfo_lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_let face _eq_ sps.pickedParticles[info.faceId]_sm_    // get the pickedParticle object in the SPS mesh_lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis object has two properties _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_.idx _dd_ the particle index giving you then the particle in SPS with sps.particles[face.idx]_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_.faceId (same property name than for the previous pickingInfo object) _dd_ the facet number  counted in this particle geometry._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs you built your own SPS_co_ you know then what geometry you used as a model to design each particle_co_ in your case boxes. This second property value will give you what faced of the box is picked on the picked particle_co_ so something between 0 and 11 (a box is 12 triangles). You could then change this particle UVs on the fly to modify the texture. Note this won_t_t be that simple because of the initial UVs of the model. Maybe it_t_s easier to stick a planar quad particle with the wanted texture on the picked box face instead ? \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-11-04T09:35:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_233659_qt_ data-ipsquote-contentid_eq__qt_40976_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1541255595_qt_ data-ipsquote-userid_eq__qt_5453_qt_ data-ipsquote-username_eq__qt_jerome_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t19 hours ago_co_ jerome said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tMaybe it_t_s easier to stick a planar quad particle with the wanted texture on the picked box face instead ?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThx _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_.  Any chance you could use my PG... to teach us HOW to do that? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe one version using a standard plane_co_ and one version with a quad particle?\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_233428_qt_ data-ipsquote-contentid_eq__qt_40976_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1541008141_qt_ data-ipsquote-userid_eq__qt_24854_qt_ data-ipsquote-username_eq__qt_Valeriob_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 10/31/2018 at 12_dd_49 PM_co_ Valeriob said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI would like to draw something (another mesh_co_ with some text probably) on top of the box shape on the face that was picked.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI _lt_em_gt__lt_strong_gt_think_lt_/strong_gt__lt_/em_gt__lt_strong_gt_ _lt_/strong_gt_Valeriob meant to say _qt_on the _lt_strong_gt_side_lt_/strong_gt_ that was picked_qt_.   _qt_Face_qt_ is a gray/wobbly term_co_ at least in the USA.   In real life general conversation_co_ it means _lt_strong_gt_side_lt_/strong_gt_.   In 3D land_co_ it means a triangular section.  _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  For noobs... you can see the TWO triangle _qt_faces_qt_ (facets?) that create the _qt_side_qt_ of a box... by setting _lt_strong_gt_box.material.wireframe _eq_ true_lt_/strong_gt__sm_   Warning_dd_  I don_t_t think wireframe mode is possible on SPS boxes._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJerome... can/would you show us both ADDING and REMOVING the picked-side plane/quad?  Anyone?  (thx)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am also curious about _lt_u_gt_how to parent_lt_/u_gt_ the 0-6 side-covering quads/planes... so it/they transforms (positions_co_ rotates_co_ scales) WITH the selected box particle.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps allow a _qt_grouped_qt_ or _qt_compound_qt_ SPS particle?  The box particle would be made-of 6 standard planes.  It would ACT like a single particle... until picking started.  Then... it would allow picking-per-side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI bet that would be very difficult to do.  It probably needs heavy SPS system mods that will hurt perf.  Crazy ideas... sorry.  _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Maybe it is best NOT to use SPS particles_co_ and instead.... use 6-plane boxes_co_ with planes parented together.  I dunno.  _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_I (and maybe Val) could use more user-friendly PG demos and ideas_co_ please.  Side-selecting on boxes... is a fairly popular webGL activity  (just like color-per-side and texture-per-side is super-popular on meshBuilder boxes). _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Perhaps we could start a _lt_u_gt_new series_lt_/u_gt_ of playgrounds... beginning with that _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#2FPT1A%23229_qt_ rel_eq__qt_external nofollow_qt__gt_#229 demo_lt_/a_gt_ code.  *shrug*  I want to TRY to make this easy/friendly.  (don_t_t we all?)  _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Yet we don_t_t want to slow-down the performance-tweaked particle systems._lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Valeriob","Date":"2018-11-04T13:27:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks everyone !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt__lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard&amp_sm_referrer_eq_http%253A%252F%252Fwww.html5gamedevs.com%252Ftopic%252F40976-how-to-get-a-mesh-face-in-solid-particle-system-with-pickwithray%252F_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ style_eq__qt_background-color_dd_transparent_sm_color_dd_inherit_sm__qt_ title_eq__qt_Go to Wingnut_t_s profile_qt_ rel_eq__qt__qt__gt_Wingnut_lt_/a_gt_ _lt_/strong_gt_ is right_co_ i just wanted to draw some text on the spot of the side of the box picked by the ray. I do not want to modify the sps_co_ i can just draw a surface on top of that cube side (adding a small offset to the direction of the normal).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m experimenting a bit and i copied what babylon.solidParticleSystem.ts  _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt__rebuildParticle does to be able to reconstruct the _qt_side_qt_ picked. Then i crea_lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_ted a custom mesh to draw the surface on those points. It_t_s a lot of work but seems working._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_My problems originate from my inexperience as _lt_/span_gt__lt_strong_gt__lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard&amp_sm_referrer_eq_http%253A%252F%252Fwww.html5gamedevs.com%252Ftopic%252F40976-how-to-get-a-mesh-face-in-solid-particle-system-with-pickwithray%252F_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ style_eq__qt_background-color_dd_transparent_sm_color_dd_inherit_sm__qt_ title_eq__qt_Go to jerome_t_s profile_qt_ rel_eq__qt__qt__gt_jerome_lt_/a_gt_ _lt_/strong_gt_explained _lt_span_gt__dd_ _lt_/span_gt__lt_em_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__qt_.faceId (same property name than for the previous pickingInfo object) _dd_ the facet number  counted in﻿_lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__lt_span_gt_ _lt_/span_gt_this particle geometry._lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_﻿_lt_span_gt_﻿_lt_/span_gt__lt_span_gt_﻿_qt__lt_/span_gt__lt_/span_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo FaceId is indeed a FaceT id_co_ here was my confusion.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20777_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.ee4ea5ca0427ea37d74aa687243b214e.png_qt_ alt_eq__qt_image.png.ee4ea5ca0427ea37d74aa687243b214e.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother solution would be to build the mesh again from the business data_co_ and then apply the texture only on the picked side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tValerio\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-11-04T14:12:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#2FPT1A%23231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#2FPT1A#231_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis is buggy but this is the simple approach _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_- I added a first quad planar particle in the SPS_co_ this particle is invisible by default _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_- when picking a box particle_co_ this box is set as the quad parent_co_ and the quad is set as visible and  located/ rotated in the picked box local space according to its picked side (what is buggy and unfinished in my example_co_ but you can understand the way it works... just identify each box side one by one) _dd_  _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/how_to/createbox_per_face_textures_and_colors_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/how_to/createbox_per_face_textures_and_colors_lt_/a_gt_  )  _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_a href_eq__qt_http_dd_//doc.babylonjs.com/how_to/solid_particle_system#particle-parenting_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/how_to/solid_particle_system#particle-parenting_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]