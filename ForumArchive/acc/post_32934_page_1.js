[{"Owner":"MackeyK24","Date":"2017-09-14T23:32:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey guys I got a situation (fallowing some training material) where I need to multiply and Vector3 * Quaternion... Example_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var direction_dd_BABYLON.Vector3 _eq_ new BABYLON.Vector3(0_co_0_co_-distance)_sm_\nvar rotation_dd_BABYLON.Quaternion _eq_ this.manager.euler(rotaionX_co_ rotaionY_co_ 0.0)_sm_\n\n// Something like this pseudo code below\nvar result_dd_BABYLON.Vector3 _eq_ this.cameraTarget.position + rotation * direction_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow do I do something like this in Babylon ???\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-09-15T00:57:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI thank you can convert the quaternion to a matrix and then use Vector3.transform().\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSkip the quaternion altogether if that is possible.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-09-15T01:35:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI looked again at what you_t_re doing and you are probably going to want to use Vector3.TransformNormal()\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2017-09-15T01:38:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_188886_qt_ data-ipsquote-contentid_eq__qt_32934_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1505439319_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t4 minutes ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI looked again at what you_t_re doing and you are probably going to want to use Vector3.TransformNormal()\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ do you think you format this code to something useful in Babylon and I will make part of a MothTools or something_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt__lt_strong_gt_Edit_dd__lt_/strong_gt__lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t// Something like this pseudo code below\n_lt_/p_gt_\n\n_lt_p_gt_\n\tvar result_dd_BABYLON.Vector3 _eq_ position + (rotation * direction)_sm_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-09-15T02:21:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t   \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var position _eq_ BABYLON.Vector3.Zero()_sm_\nvar direction _eq_ new BABYLON.Vector3(1_co_ 0_co_ 0)_sm_\n\nvar rotation _eq_ BABYLON.Quaternion.RotationYawPitchRoll(Math.PI*.5_co_ 0_co_ 0)_sm_\nvar matrix _eq_ BABYLON.Matrix.Identity()_sm_\nBABYLON.Matrix.FromQuaternionToRef(rotation_co_ matrix)_sm_\n\n\nvar result _eq_ position.add(BABYLON.Vector3.TransformNormal(direction_co_ matrix))_sm_ \n\nconsole.log(result)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2017-09-15T02:39:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_188890_qt_ data-ipsquote-contentid_eq__qt_32934_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1505442115_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t16 minutes ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t   \n\t\t_lt_/p_gt_\n\n\t\t_lt_pre_gt_\n\n_lt_code_gt__lt_span_gt_var_lt_/span_gt_ position _eq_ BABYLON.Vector3.Zero()_sm_\n_lt_span_gt_var_lt_/span_gt_ direction _eq_ _lt_span_gt_new_lt_/span_gt_ BABYLON.Vector3(_lt_span_gt_1_lt_/span_gt__co_ _lt_span_gt_0_lt_/span_gt__co_ _lt_span_gt_0_lt_/span_gt_)_sm_\n\n_lt_span_gt_var_lt_/span_gt_ rotation _eq_ BABYLON.Quaternion.RotationYawPitchRoll(_lt_span_gt_Math_lt_/span_gt_.PI*_lt_span_gt_.5_lt_/span_gt__co_ _lt_span_gt_0_lt_/span_gt__co_ _lt_span_gt_0_lt_/span_gt_)_sm_\n_lt_span_gt_var_lt_/span_gt_ matrix _eq_ BABYLON.Matrix.Identity()_sm_\nBABYLON.Matrix.FromQuaternionToRef(rotation_co_ matrix)_sm_\n\n\n_lt_span_gt_var_lt_/span_gt_ result _eq_ position.add(BABYLON.Vector3.TransformNormal(direction_co_ matrix))_sm_ \n\nconsole.log(result)_sm__lt_/code_gt__lt_/pre_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t Yo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ Thanks man... I will put this in some kind of Helper Tool _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2017-09-15T02:51:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_  Just so I_t_m clear... Does this do the actual Multplication of the rotation (converted to a matrix) times Direction Vector..\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I should be able to do something like_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_public multplyVectorByQuaternion(vec_dd_Vector3_co_ quat_dd_Quaternion)_dd_Vector3 {\n var matrix _eq_ BABYLON.Matrix.Identity()_sm_\n BABYLON.Matrix.FromQuaternionToRef(quat_co_ matrix)_sm_\n return BABYLON.Vector3.TransformNormal(vec_co_ matrix)_sm_\n}\n\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAnd if that works... I make a xxxToRef version_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_public multplyVectorByQuaternionToRef(vec_dd_Vector3_co_ quat_dd_Quaternion_co_ result_dd_Vector3)_dd_void {\n var matrix _eq_ BABYLON.Matrix.Identity()_sm_\n BABYLON.Matrix.FromQuaternionToRef(quat_co_ matrix)_sm_\n BABYLON.Vector3.TransformNormalToRef(vec_co_ matrix_co_ result)_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tNote_dd_ I will of a better name than_dd_ _t_multplyVectorByQuaternion_t_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut should that work ???\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-09-15T13:45:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_d call it something like _lt_s_gt_Quaternion.RotateNormal_lt_/s_gt_.  Quaternion.RotateVector3 \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou could use a static temp matrix rather than allocating a matrix every time you call the function.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Kesshi","Date":"2017-09-15T13:55:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere are two versions of my _qt_rotateVector3ToRef_qt_ function._lt_br /_gt_\n\tbasic version_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_export function rotateVector3ToRef(pV_dd_ BABYLON.Vector3_co_ pRot_dd_ BABYLON.Quaternion_co_\n        pResult_dd_ BABYLON.Vector3)_dd_ void\n    {\n        //pResult _eq_ pRot * pV * conjugate(pRot)\n        let tQuat _eq_ pRot.multiply(new BABYLON.Quaternion(pV.x_co_ pV.y_co_ pV.z_co_ 0))_sm_\n        tQuat.multiplyInPlace(pRot.conjugate())_sm_\n\n        pResult.x _eq_ tQuat.x_sm_\n        pResult.y _eq_ tQuat.y_sm_\n        pResult.z _eq_ tQuat.z_sm_\n    }_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n\t_lt_/p_gt_\n_lt_p_gt_\n\t\tAnd a faster version based on this_dd_ _lt_a href_eq__qt_http_dd_//blog.molecular-matters.com/2013/05/24/a-faster-quaternion-vector-multiplication/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//blog.molecular-matters.com/2013/05/24/a-faster-quaternion-vector-multiplication/_lt_/a_gt__lt_br /_gt_\n\t\tThis is the one i_t_m using in production.\n\t_lt_/p_gt_\n\n\n_lt_pre_gt_\n_lt_code_gt_    export function rotateVector3ToRef(pV_dd_ BABYLON.Vector3_co_ pRot_dd_ BABYLON.Quaternion_co_\n        pResult_dd_ BABYLON.Vector3)_dd_ void\n    {\n        //t _eq_ 2 * cross(pRotation.xyz_co_ pVector)\n        //pResult _eq_ pVector + pRotation.w * t * cross(pRotation.xyz_co_ t)\n        let tx _eq_ 2 * (pRot.y * pV.z - pRot.z * pV.y)_sm_\n        let ty _eq_ 2 * (pRot.z * pV.x - pRot.x * pV.z)_sm_\n        let tz _eq_ 2 * (pRot.x * pV.y - pRot.y * pV.x)_sm_\n\n        pResult.x _eq_ pV.x + pRot.w * tx + (pRot.y * tz - pRot.z * ty)_sm_\n        pResult.y _eq_ pV.y + pRot.w * ty + (pRot.z * tx - pRot.x * tz)_sm_\n        pResult.z _eq_ pV.z + pRot.w * tz + (pRot.x * ty - pRot.y * tx)_sm_\n    }_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]