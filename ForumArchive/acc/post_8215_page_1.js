[{"Owner":"gryff","Date":"2014-07-29T17:47:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The BJS functionality for the Directional Light in scenes exported from Blender behaves in a way that is different from what I expect. An issue that I ran into a number of weeks back and brought back to me a few days ago by a post on JCPalmer_t_s thread _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/8028-tower-of-babel-released/_qt__gt_Tower of Baylon Released_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I posted some examples of the behaviour on that thread as well as an image of how Directional Lights function in Unity 3D (scroll down)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In particular_co_ this example of a row of blocks with the Directional Light placed in front of the blocks and close to them_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/shadows/index2.html_qt_ rel_eq__qt_external nofollow_qt__gt_Example 3_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Result_dd_ Some shadows missing and those that are produced are at an angle (normally_co_ rays of light are parallel with a Directional Light)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This is another example (image below). In Blender I have placed the Directional Light _lt_u_gt_behind_lt_/u_gt_ a row of blocks with the light pointing away from the blocks(A). The image also includes a render of the scene in Blender( _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_cool.png_qt_ alt_eq__qt_B)_qt__gt_ - note shadows are parallel and the direction follows light direction.. Blender is not worried about the position of the light_co_ just the direction(rotation)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_However_co_ this is what the same scene looks like when loaded as a BJS scene_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/shadows/index3.html_qt_ rel_eq__qt_external nofollow_qt__gt_Example 4_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Again we get the black notch and no shadows at all. However_co_ the correct block faces are illuminated correctly._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_No idea why I am seeing these behaviours._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_&lt_sm_fileStore.core_Emoticons&gt_sm_/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_07_2014/post-7026-0-37380000-1406655890.jpg_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_07_2014/post-7026-0-37380000-1406655890.jpg_qt_ data-fileid_eq__qt_2336_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-7026-0-37380000-1406655890.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-30T00:26:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Shadows maps are a bit different. They use a direction AND a position (more like a spot to be honest but without the angles limitation)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_They are not really directional shadows. That why you see all this _qt_weird_qt_ behaviors_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-30T00:45:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_They are not really directional shadows._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That is the conclusion I came to - kind of a best attempt at true Directional Light._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I guess when using Directional Light to get reasonable results_co_  it is best to remember to not put the light too close to objects in the scene._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-30T00:49:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yes absolutely_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But I_t_m thinking also about adding support for shadows for point light and for true directional in a new version_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-30T01:01:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt_But I_t_m thinking also about adding support for shadows for point light and for true directional in a new version_lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_DK_dd_ That would be good if it is doable without a serious hit on performance _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Funny you should mention the Point Light as looking at Example 3 above_co_ that looked to me more like shadows were created with a Point Light - rays of light coming from from a sphere and perpendicular to the sphere surface_co_ as opposed to rays of light parallel to each other. I even wondered what it would take to make Point Lights cast shadows ? _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_cool.png_qt_ alt_eq__qt_B)_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But in the meantime people_co_ be careful with the placement of Directional Lights_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2014-07-30T16:54:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I am totally for a better shadow system in general. Right now_co_ I can_t_t add shadows in my projects at all_co_ because I work with big structures (big buildings for example_co_ or even a city) ._lt_/p_gt__lt_p_gt_Maybe I_t_m missing something_co_ but I always have some kind of weird shadow _t_cut_t_ because my shadow map is not big enough._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Shadows for spotlights could be cool too!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-30T21:00:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_For big scene you should think about different lights to _qt_cascade_qt_ shadow maps_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"monkeyface","Date":"2015-09-20T10:25:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_i am also struggling with this...  in other engines i am used to directional lights just needing a direction... having shadows generated from a particular light direction makes it really hard to just have a single far-away light source like the sun._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-20T16:25:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_This is a rather old discussion_co_ we have fixed the shadow engines since then. You can now use directional lights with no issue_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"monkeyface","Date":"2015-09-20T18:46:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_97404_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_8215_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1442766350_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_This is a rather old discussion_co_ we have fixed the shadow engines since then. You can now use directional lights with no issue_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Really? I am still finding the shadows get worse as I move around the scene...as if I am getting too distant from the light._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Am I doing something wrong?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-21T15:44:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Oh I thought you talked about light positioning (which is no more required for directional)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As we do not have cascading shadow maps_co_ yes the distance is still a problem (you can increase shadow maps size)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"monkeyface","Date":"2015-09-21T17:57:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_97520_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_8215_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1442850281_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Oh I thought you talked about light positioning (which is no more required for directional)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As we do not have cascading shadow maps_co_ yes the distance is still a problem (you can increase shadow maps size)_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I can_t_t really increase the map size enough... I am trying to run it on mobile... so I  hit the performance limit pretty fast. _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-21T22:24:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Gotcha! What about having different lights based on distance? (And turn off some of them depending on where the camera is)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"monkeyface","Date":"2015-09-22T08:37:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_97565_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_8215_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1442874276_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Gotcha! What about having different lights based on distance? (And turn off some of them depending on where the camera is)_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m trying to make a large open world... I guess for now i_t_ll just have to have a pointlight follow the character around and bake the rest._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_+10 upvote for CSMs _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]