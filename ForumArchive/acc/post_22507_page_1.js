[{"Owner":"exc_html5","Date":"2016-05-11T18:53:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys_co_ trying to wrap my head around how shadows are working inside of BJS_co_ and have a few questions. First off_co_ I have this scene here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can move around the scene with the mouse/arrow keys.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can see the shadows looked a bit jacked up. Not only are the shadows low rez looking (despite having the resolution cranked up in BJS) but there is weird self shadowing on the objects themselves? Attached below is an image of the scene I_t_m exporting from Unity_co_ what I_t_m expecting shadows to look closer to. It_t_s just a single directional light. I_t_m manually fiddling with the filtering options on the BJS to try and get closer to this_co_ but I_t_m not having much luck. Attached is code were using_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var engine_co_ scene_sm_\nvar mouseX_co_mouseY_co_dx_co_dz_sm_\nvar cameraTarget _eq_ new BABYLON.Vector3(0_co_0_co_0)_sm_\nvar renderPlane_co_ renderTarget_sm_\nvar DEBUG _eq_ true_sm_\nvar showstats _eq_ false_sm_\n\n\n\n\n  \n// Get the canvas element from our HTML above\nvar canvas _eq_ document.querySelector(_qt_#render_qt_)_sm_\n// var stats _eq_ document.querySelector(_qt_#stats_qt_)_sm_\n\n// Load the BABYLON 3D engine\nengine _eq_ new BABYLON.Engine(canvas_co_ true)_sm_\nengine.enableOfflineSupport _eq_ false_sm_ //this stops the manifest errors in the console\n\nBABYLON.SceneLoader.Load(_qt_assets/_qt__co__qt_fog_test.unity.babylon_qt__co_engine_co_function(newScene){\nscene _eq_ newScene_sm_\n\t   \n\t\t//CAMERA\n\t\tdoCamera(newScene_co_canvas)_sm_\n\t\t// FOG\n\t\tdoFog(newScene_co_canvas)_sm_\n\t\t// SHADOWS\n\t\tdoShadows(newScene)_sm_\n\t\t\n\t\t// RENDER LOOP\n\t\tengine.runRenderLoop(function(){\n\t\tnewScene.render()_sm_\n\t\tupdate()_sm_\n\t\t})_sm_\n\t\t\n})_sm_\n        \n\n\nfunction doShadows(newScene){\n  for (var i _eq_ 0_sm_ i &lt_sm_ newScene.lights.length_sm_ i++){\n    var shadowGenerator _eq_ new BABYLON.ShadowGenerator(8192_co_ newScene.lights[i])_sm_\n    newScene.meshes.forEach(function(mesh) {\n      shadowGenerator.getShadowMap().renderList.push(mesh)_sm_\n      shadowGenerator.bias _eq_ 0.0000001_sm_\n      //shadowGenerator.useVarianceShadowMap _eq_ true_sm_\n\t  shadowGenerator.usePoissonSampling _eq_ true_sm_\n    })_sm_\n  }_sm_\n  newScene.meshes.forEach(function(mesh) {\n    mesh.receiveShadows _eq_ true_sm_\n  })_sm_\n}\n\nfunction doCamera(newScene_co_canvas){\n  //new camera\n  var newCamera _eq_ new BABYLON.FreeCamera(_qt_FreeCamera_qt__co_ new BABYLON.Vector3(0_co_ 0_co_ 0)_co_ newScene)_sm_\n\n  newCamera.position _eq_ newScene.cameras[0].position_sm_\n  newCamera.rotation _eq_ newScene.cameras[0].rotation_sm_\n  newCamera.target _eq_  newScene.cameras[0].target_sm_\n  newCamera.fov _eq_  newScene.cameras[0].fov_sm_\n  newCamera.inertia _eq_  newScene.cameras[0].inertia_sm_\n  newCamera.mode _eq_  newScene.cameras[0].mode_sm_\n  newCamera.speed _eq_ 0.1_sm_\n\n  newCamera.attachControl(canvas_co_false)_sm_\n  newScene.activeCamera _eq_ newCamera_sm_\n  //newScene.activeCamera.wheelPrecision _eq_ 90_sm_\n  //newScene.activeCamera.minZ _eq_ .01_sm_\n\n  // Define z key to rotate object z axis left\n  newScene.actionManager _eq_ new BABYLON.ActionManager(newScene)_sm_\n  newScene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger_co_ function (evt) {\n    if (evt.sourceEvent.keyCode _eq__eq_ 90) {\n      console.log(_qt_z key pressed_qt_)_sm_\n      newScene.meshes.forEach(function(mesh) {\n        //mesh.rotation _eq_ new BABYLON.Vector3(0_co_ 0_co_ 1)_sm_\n        mesh.rotate(BABYLON.Axis.Z_co_ 0.06_co_ BABYLON.Space.Local)\n      })_sm_ \n    }\t  \n  }))_sm_\n\n  // Define x key to rotate object z axis right\n  newScene.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyDownTrigger_co_ function (evt) {\n    if (evt.sourceEvent.keyCode _eq__eq_ 88) {\n      console.log(_qt_x key pressed_qt_)_sm_\n      newScene.meshes.forEach(function(mesh) {\n        mesh.rotate(BABYLON.Axis.Z_co_ -0.06_co_ BABYLON.Space.Local)\n      })_sm_\n    }\t  \n  }))_sm_\n  \n}\n\nfunction doFog(newScene_co_canvas){\n  newScene.meshes.forEach(function(mesh) {\n    mesh.applyFog _eq_ true_sm_ // allow all meshes to be effected by fog\n  })_sm_\n  // newScene.fogMode _eq_ 2_sm_\n  // newScene.fogColor _eq_ new BABYLON.Color3(1_co_ 1_co_ 0.85)_sm_\n  // newScene.fogDensity _eq_ .0075_sm_             \n}\n\n\nfunction update(){\n  if (renderPlane){\n    //console.log(_t_hey_t_)_sm_\n    var v1 _eq_ new BABYLON.Vector3(1_co_0_co_0)_sm_\n    var v2 _eq_ scene.cameras[1].target.subtract(scene.cameras[1].position)_sm_\n    var vec _eq_ math.cross([v1.x_co_v1.y_co_v1.z]_co_[v2.x_co_v2.y_co_v2.z])_sm_\n    var w _eq_ math.sqrt(v1.lengthSquared()*v2.lengthSquared()) + math.dot([v1.x_co_v1.y_co_v1.z]_co_[v2.x_co_v2.y_co_v2.z])_sm_\n\n    var q _eq_ new BABYLON.Quaternion(vec[0]_co_ vec[1]_co_ vec[2]_co_ w)_sm_\n    // Quaternion q_sm_\n    // vector a _eq_ crossproduct(v1_co_ v2)\n    // q.xyz _eq_ a_sm_\n    // q.w _eq_ sqrt((v1.Length ^ 2) * (v2.Length ^ 2)) + dotproduct(v1_co_ v2)\n\n    renderPlane.rotation _eq_ q.toEulerAngles()_sm_\n    //console.log(q.toEulerAngles())_sm_\n    }\n  \n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAny thoughts on what we could do to improve the shadows?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_05/shadows_unity.png.f0fa349f2d60e5b0e23e6d2428df8b7f.png_qt_ data-fileid_eq__qt_7625_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img alt_eq__qt_shadows_unity.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_7625_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_05/shadows_unity.thumb.png.e488f811867e760104b4e6400f9db707.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-11T21:38:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyou can turn self-shadowing off by setting mesh.receiveShadows _eq_ false.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRegarding shadows we do not support cascaded shadows for now so the bigger the scene the more aliased your shadows will be.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-11T22:13:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThanks for the heads up! So in theory_co_ if I scale the scene down to half it_t_s size_co_ the shadows will look better?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-12T16:20:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tCorrect _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-12T18:55:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay_co_ still having some issues here. First_co_ just to make sure_co_ I took the sample shadows scene and turned off the spotlight so we only see the directional shadow_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PHUZL_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PHUZL_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNext_co_ I took our own custom scene_co_ and made an area the same size as the ground plane in the BJS sample scene (100 units wide/across)_co_ also at the origin like the sample scene. Also_co_ this scene has a directional light_co_ with the same shadow settings as the BJS sample scene. You can see this scene below (use the arrow keys to move around). \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy scene shows up completely black tho. The BJS scene file is here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/assets/fog_test.unity.babylon_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/assets/fog_test.unity.babylon_lt_/a_gt_ - Size_dd_ 0.26 MB\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have another JS file that runs the shadow loops like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_function doShadows(newScene){\n  for (var i _eq_ 0_sm_ i &lt_sm_ newScene.lights.length_sm_ i++){\n    var shadowGenerator _eq_ new BABYLON.ShadowGenerator(1024_co_ newScene.lights[i])_sm_\n    newScene.meshes.forEach(function(mesh) {\n      shadowGenerator.getShadowMap().renderList.push(mesh)_sm_\n      //shadowGenerator.bias _eq_ 0.00001_sm_\n      shadowGenerator.useVarianceShadowMap _eq_ true_sm_\n    })_sm_\n  }_sm_\n  newScene.meshes.forEach(function(mesh) {\n    mesh.receiveShadows _eq_ true_sm_\n  })_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIf I disable the doShadows function the scenes shows up as expected_co_ but no shadows. Since the size of my scene is exactly the same as your sample scene on the playground_co_ as well as the shadow settings_co_ i_t_m at a loss why it looks so diff _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"lesterhaus","Date":"2016-05-12T19:06:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey there_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif you want your meshes to drop and receive shadows at the same time you cannot use variance shadow maps (neither blurred nor normal). You will have to stick to shadowGenerator.usePoissonSampling in that case.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn another side note_co_ the shadowGenerator properties are per generator_co_ so you can set these outside your forEach loop.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-12T20:55:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the tip! Change the code to this_dd_\n_lt_/p_gt_\n\n_lt_div_gt_\n\t_lt_pre_gt_\n_lt_code_gt__lt_span_gt__lt_span_gt_function_lt_/span_gt_ _lt_span_gt_doShadows_lt_/span_gt__lt_span_gt_(newScene)_lt_/span_gt_{_lt_/span_gt_\n  _lt_span_gt_for_lt_/span_gt_ (_lt_span_gt_var_lt_/span_gt_ i _eq_ _lt_span_gt_0_lt_/span_gt__sm_ i &lt_sm_ newScene.lights.length_sm_ i++){\n    _lt_span_gt_var_lt_/span_gt_ shadowGenerator _eq_ _lt_span_gt_new_lt_/span_gt_ BABYLON.ShadowGenerator(_lt_span_gt_1024_lt_/span_gt__co_ newScene.lights[i])_sm_\n    newScene.meshes.forEach(_lt_span_gt__lt_span_gt_function_lt_/span_gt__lt_span_gt_(mesh)_lt_/span_gt_ {_lt_/span_gt_\n      shadowGenerator.getShadowMap().renderList.push(mesh)_sm_\n      _lt_span_gt_//shadowGenerator.bias _eq_ 0.00001_sm__lt_/span_gt_\n\t  shadowGenerator.usePoissonSampling _eq_ _lt_span_gt_true_lt_/span_gt__sm_\n      _lt_span_gt_//shadowGenerator.useVarianceShadowMap _eq_ true_sm__lt_/span_gt_\n    })_sm_\n  }_sm_\n  newScene.meshes.forEach(_lt_span_gt__lt_span_gt_function_lt_/span_gt__lt_span_gt_(mesh)_lt_/span_gt_ {_lt_/span_gt_\n    mesh.receiveShadows _eq_ _lt_span_gt_true_lt_/span_gt__sm_\n  })_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\t_lt_span style_eq__qt_background_dd_url(&quot_sm_//www.html5gamedevs.com/applications/core/interface/ckeditor/ckeditor/plugins/widget/images/handle.png&quot_sm_)_sm__qt__gt__lt_/span_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\tAnd now I get this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_color_dd_rgb(173_co_20_co_87)_sm_text-decoration_dd_underline_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhich is better_co_ but the shadows still look pretty funky_co_ compared to the BJS sample scene?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"lesterhaus","Date":"2016-05-13T13:15:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFunky is a good way to describe it _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWell looking at your babylon file_co_ there already seems to be a shadowGenerator included with a shadowMap size of 1536. So you are loading the scene which already has the light and the shadowGenerator for it_co_ and afterwards you create a new shadowGenerator for that light. Since you are doing all this in the _qt_onLoad_qt_ callBack maybe this causes some side effects? (Just a wild guess_co_ I don_t_t know if that is really a problem)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo one thing you could try is to call all your setup functions (doShadows_co_ doCamera_co_ etc.) in a newScene.executeWhenReady(function(){ .. })_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know if this solves any problems_co_ but that way at least you can be sure that everything is loaded from your babylon file into the scene before you finish setting it up with your code.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust to make clear what I mean_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.SceneLoader.Load(_qt_assets/_qt__co__qt_fog_test.unity.babylon_qt__co_engine_co_function(newScene){\nscene _eq_ newScene_sm_\n\t\n    newScene.executeWhenReady(function(){  \n    \t//CAMERA\n        doCamera(newScene_co_canvas)_sm_\n    \t// FOG\n        doFog(newScene_co_canvas)_sm_\n    \t// SHADOWS\n        doShadows(newScene)_sm_\n\t\t\n\t    // RENDER LOOP\n    \tengine.runRenderLoop(function(){\n            newScene.render()_sm_\n            update()_sm_\n        })_sm_\n    })_sm_\n\t\t\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-05-13T22:56:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ Any idea when you will have time for CSM shadows? Is it something for this year?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-13T23:48:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/16223-lesterhaus/?do_eq_hovercard_qt_ data-mentionid_eq__qt_16223_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/16223-lesterhaus/_qt_ rel_eq__qt__qt__gt_@lesterhaus_lt_/a_gt_- Yeah_co_ i forgot to mention we did the execute when ready in the code on the last pass_co_ didn_t_t really do much. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor whoever is watching_co_ I can get the shadows to look a little better by cranking the resolution up_co_ but I_t_m sure that_t_s going to have performance consequences. This is a 4k shadow map_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//client.elementxcreative.com/public/bjs/fog_test/index.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGiven my scene is the same as the bablyon playground test scene (size wise)_co_ i_t_m baffled how the shadows in that one are crisp at 1024 and mine are still chunky at 4k. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-14T02:28:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17567-dal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17567_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17567-dal/_qt_ rel_eq__qt__qt__gt_@Dal_lt_/a_gt_ Yes_co_ for 2.5\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-14T02:29:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20944-exc_html5/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20944_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20944-exc_html5/_qt_ rel_eq__qt__qt__gt_@exc_html5_lt_/a_gt_ I think this is more a scene size issue. Can you try this_dd_ reduce camera.maxZ to see if this changes something. Else please provide me a PG with your latest version and I_t_ll see what I can do\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-14T02:51:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ i tried adjusting the maxZ_co_ and it had an effect_co_ but nothing satisfactory. I zipped up all the files for you here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//client.elementxcreative.com/public/bjs/fog_test.zip_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//client.elementxcreative.com/public/bjs/fog_test.zip_lt_/a_gt_ - Size_dd_ 1.43 MB\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe one i_t_m adjusting code in is the main.js file under scripts folder. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-15T02:36:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHey! please use the playground to share a repro _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-16T04:55:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIs there an easy way to copy my babylon scene I exported from unity to a playground setup?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-16T15:40:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tJust save it to a server with no CORS restriction like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#GTHTR%237_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#GTHTR#7_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-17T01:01:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay_co_ take a look at this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LKLNX%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#LKLNX#11_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI know I can keep cranking the shadow map resolution up_co_ but is there any other way to get decent aliasing on the shadow edges? The variance/possion thing looks a little funky when I enable/disable them. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-17T17:50:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tBetter? _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LKLNX%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#LKLNX#12_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"exc_html5","Date":"2016-05-17T19:38:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYeah_co_ better. Looks like the cylinders have a weird dark stripe on them from self shadowing? So I guess I_t_d need to turn off recieve shadows on the cylinders if I want that to go away? If I comment out the shadowGenerator.useBlurVarianceShadowMap _eq_ true_sm_ line_co_ then the shadows go back to being jaggy_co_ but they shade correctly on the objects.  \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-18T02:21:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYes there is a tradeof to do here _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ And you_t_re correct_dd_ you need to turn selfshadowing off on cylinders\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]