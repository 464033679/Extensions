[{"Owner":"Nico","Date":"2014-04-22T12:05:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi guys_co__lt_/p_gt__lt_p_gt_I need some help (once again _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_rolleyes.gif_qt_ alt_eq__qt__dd_rolleyes_dd__qt__gt_ )_co_ I would like to know if it is possible to change the ratio just before making a render ? I would like to use this with a renderTargetTexture_co_ I can easily save previous values_co_ stopRenderLoop_co_ make my render on my texture_co_ restore previous values_co_ and runRenderLoop again._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks for reading and helping !_lt_/p_gt__lt_p_gt_Nico._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-22T14:17:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I_t_ve found something_co_ but it_t_s more a hack than a solution _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_canvas.style.width _eq_ _qt_auto_qt__sm_canvas.style.height _eq_ _qt_auto_qt__sm_canvas.width _eq_ newWidthValue_sm_canvas.height _eq_ newHeightValue_sm_scene.render()_sm_ //To get immediately the right ratio and display//Do what I want to do//Restore previous valuescanvas.style.width _eq_ previousSavedWidth_sm_canvas.style.height _eq_ previousSavedHeight_sm_engine.resize()_sm__lt_/pre_gt__lt_p_gt_If someone have a better way to do that_co_ please share _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_happy.png_qt_ alt_eq__qt_^_^_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/happy@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Edit_dd__lt_/p_gt__lt_p_gt_Assuming there is no inline styling on renderingCanvas on width and height_co_ an easier way could be _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_canvas.style.width _eq_ _qt_auto_qt__sm_canvas.style.height _eq_ _qt_auto_qt__sm_canvas.width _eq_ newWidthValue_sm_canvas.height _eq_ newHeightValue_sm_scene.render()_sm_ //To get immediately the right ratio and display//Do what I want to do//Restore previous valuescanvas.style.width _eq_ _qt__qt__sm_canvas.style.height _eq_ _qt__qt__sm_engine.resize()_sm__lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Artem","Date":"2014-04-22T15:12:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I just leave _lt_span_gt__lt_em_gt_engine_lt_/em_gt__lt_/span_gt__lt_em_gt__lt_span_gt_._lt_/span_gt__lt_span_gt_resize_lt_/span_gt__lt_span_gt_()_lt_/span_gt__lt_/em_gt_ in the end of the _lt_em_gt_engine.runRenderLoop_lt_/em_gt_ function_co_ but before the _lt_em_gt_scene.render()_lt_/em_gt__co_ of course (maybe it_t_s a bad way_co_ though)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-22T18:43:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thanks for answering !_lt_/p_gt__lt_p_gt_With that it will be working_co_ but not for my (special) case_co_ because I call the render method from my renderTargetTexture manually (outside the renderLoop)_co_ so if I change the canvas size_co_ call engine.resize()_co_ and render my texture_co_ sometime the renderLoop haven_t_t yet call the scene.render(). _lt_/p_gt__lt_p_gt_And I_t_m not sure_co_ but I think that is not very good to call engine.resize() inside the renderLoop since it will be called a lot_co_ and in most case_co_ it just do the same calculation with the same result for each frame._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-04-22T23:59:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I_t_m not sure to understand_dd_ if you render to a texture the canvas is not used at all and the viewport should be set to the texture ratio_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-23T06:23:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_It will be easier to understand with some screenshots _dd__lt_/p_gt__lt_p_gt_What I get inside the rendering canvas_lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//pix.keuse.fr/images/ourownbaby.jpg_qt_ alt_eq__qt_ourownbaby.jpg_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_And here is what I get with a render target texture (size _eq_ 1024) _dd__lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//pix.keuse.fr/images/screenshot.jpg_qt_ alt_eq__qt_screenshot.jpg_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If I execute the code I have posted before_co_ I get this _dd__lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//pix.keuse.fr/images/screenaqa.jpg_qt_ alt_eq__qt_screenaqa.jpg_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I don_t_t know if there is a bug_co_ or if I did something wrong._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-04-23T16:24:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Could be a bug_lt_/p_gt__lt_p_gt_could you share your code to that I can try to find the bug?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-24T06:59:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yep_co_ you can find my code in _lt_a href_eq__qt_https_dd_//github.com/nicolas-obre/Babylon.js/blob/05826d5798d86e2a5b3116bcb40895e4dd80c678/Babylon/Tools/babylon.tools.js_qt_ rel_eq__qt_external nofollow_qt__gt_my babylonJS fork_lt_/a_gt_ at the bottom of the file_co_ I have created a function called _qt_createScreenshot_qt_ my code using renderTargetTexture is inside._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-04-24T21:32:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok bug found!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ll fix it for next version_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-25T08:36:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thanks for the bug fix !_lt_/p_gt__lt_p_gt_I have just remembered one thing_co_ for my createScreenshot method_co_ I have to flip my picture on Y axis to get the right picture_co_ is it normal ? (Because of WebGL ?)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-04-25T15:54:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yes it is _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-04-25T15:54:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The fix is already on the github but you have to build the minified version to test it_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-28T13:11:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I have build the latest version available on GitHub_co_ but I have the same result as before_co_ I can_t_t find where is your fix_co_ I assumed it was in this commit _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/commit/05358eeb885968e36e9dc9fb909bde1bfad0d371_qt_ rel_eq__qt_external nofollow_qt__gt_05358eeb_lt_/a_gt_ but there to much additions/deletions to locate the fix _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wacko.png_qt_ alt_eq__qt__dd_wacko_dd__qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-04-28T21:20:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The mian change is in renderTarettexture.js_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_ if (!this._doNotChangeAspectratio) {                scene.updateTransformMatrix(true)_sm_            }            if (this.onBeforeRender) {                this.onBeforeRender()_sm_            }            // Render            this._renderingManager.render(this.customRenderFunction_co_ this.renderList_co_ this.renderParticles_co_ this.renderSprites)_sm_            if (this.onAfterRender) {                this.onAfterRender()_sm_            }            // Unbind            engine.unBindFramebuffer(this._texture)_sm_            if (!this._doNotChangeAspectratio) {                scene.updateTransformMatrix(true)_sm_            }_lt_/pre_gt__lt_p_gt_Then also into engine.js_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_ public getAspectRatio(camera_dd_ Camera)_dd_ number {     var viewport _eq_ camera.viewport_sm_     return (this.getRenderWidth() * viewport.width) / (this.getRenderHeight() * viewport.height)_sm_ } public getRenderWidth()_dd_ number {     if (this._currentRenderTarget) {         return this._currentRenderTarget._width_sm_     }     return this._renderingCanvas.width_sm_ } public getRenderHeight()_dd_ number {     if (this._currentRenderTarget) {         return this._currentRenderTarget._height_sm_     }     return this._renderingCanvas.height_sm_ }_lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nico","Date":"2014-04-29T06:54:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I have just fetched the latest changes with the code you posted here_co_ and it now works perfectly ! Thanks a lot  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]