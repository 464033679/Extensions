[{"Owner":"Champa","Date":"2016-06-17T09:50:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello guys!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere I am with yet another question _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo I want to make it possible for players to jump on objects (meshes) that are somewhat lower than the players camera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have set the checkCollisions to true but i can_t_t seem to jump on any objects\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is my jump function\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_//Object i wanna jump on\nvar cube _eq_ BABYLON.Mesh.CreateBox(_qt_box_qt__co_ 10_co_ scene)_sm_\ncube.checkCollisions _eq_ true_sm_\ncube.position.y _eq_ - 4.5\t_sm_\n\n\n//Jump function\n_playerJump _dd_ function(){\n\t\t$this _eq_ this_sm_\n\t\t\n\t\tif($this.isJumping _eq__eq_ false &amp_sm_&amp_sm_ $this.energy - 30 &gt_sm__eq_ 0){\n\t\t\tvar\n\t\t\t\tcamera _eq_ $this.camera_co_\t\t\n\t\t\t\tjumpAnim _eq_ new BABYLON.Animation(_qt_jumpAnim_qt__co_ _qt_position.y_qt__co_ 20_co_ BABYLON.Animation.ANIMATIONTYPE_FLOAT_co_ BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE)_co_\n\t\t\t\tkeys _eq_ []_co_\n\t\t\t\tjumpStep_sm_\n\n\t\t\tcamera.animations _eq_ []_sm_\n\t\t\n\t\t\tfor(jumpStep _eq_ 0_sm_ jumpStep &lt_sm_ 23_sm_ jumpStep ++)\n\t\t\t\tkeys.push({frame_dd_ jumpStep_co_ value_dd_ camera.position.y + jumpStep / 5})_sm_\n\t\t\t\n\t\t\tfor(jumpStep _eq_ 24_sm_ jumpStep &lt_sm_ 46_sm_ jumpStep ++)\n\t\t\t\tkeys.push({frame_dd_ jumpStep_co_ value_dd_ camera.position.y + 4.8 - (jumpStep - 24) / 5})_sm_\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tjumpAnim.setKeys(keys)_sm_\n\t\t\t\t\n\t\t\tvar easingFunction _eq_ new BABYLON.BezierCurveEase(.13_co_.01_co_.63_co_1.41)_sm_\n\t\t\teasingFunction.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEIN)_sm_\n\t\t\tjumpAnim.setEasingFunction(easingFunction)_sm_\n\t\t\t\t\n\t\t\tcamera.animations.push(jumpAnim)_sm_\n\n\t\t\t$this.isJumping _eq_ true_sm_\n\t\t\t\n\t\t\t$this._setEnergy(-30)_sm_\n\t\t\t\n\t\t\t$this.scene.beginAnimation(camera_co_ 0_co_ 46_co_ false_co_ 4_co_ function(){\n\t\t\t\t$this.isJumping _eq_ false_sm_\n\t\t\t\t$this.isCrouching _eq_ false_sm_\n\t\t\t})_sm_\n\t\t}\n\t}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Champa","Date":"2016-06-17T14:14:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAnyone ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPretty please ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-06-17T15:25:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello_co_ if you could provide a Playground_co_ it would be utterly simpler to help you _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Champa","Date":"2016-06-17T16:55:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI can_t_t seem to get the playground script to work\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Boz","Date":"2016-06-17T17:38:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tDo the Animation take the checkCollisions into account ?_lt_br /_gt_\n\tFor my part when I was using a jump animation I got collisions problems_co_ I think both should not be used in the same time\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Champa","Date":"2016-06-17T17:39:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_132849_qt_ data-ipsquote-contentid_eq__qt_23242_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1466185092_qt_ data-ipsquote-userid_eq__qt_8472_qt_ data-ipsquote-username_eq__qt_Pouet_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 minute ago_co_ Pouet said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tDo the Animation take the checkCollisions into account ?_lt_br /_gt_\n\t\t\tFor my part when I was using a jump animation I got collisions problems_co_ I think both should not be used in the same time\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tWhat do you mean?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcan you give me an example ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Boz","Date":"2016-06-17T19:50:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think that checkCollisions is used only in moveWithCollisions function._lt_br /_gt_\n\tWhen you move your player with the keyboard_co_ you call moveWithCollisions(dx_co_ dy_co_ dz) which compute the displacement in x_co_ y and z axis_co_ regarding if there is collisions or not._lt_br /_gt_\n\tIt then apply this displacement at your _qt_mesh.position_qt_ and everything works fine. Great.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen you start an animation_co_ I_t_m afraid that this animation do not use moveWithCollisions to move_co_ but directly uses mesh.position._lt_br /_gt_\n\tThis is normal behavior_co_ an animation has a predefined array of positions (the keys[] array)_co_ and goes from start position to end position.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I assume (maybe i_t_m totally wrong _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt_) that your animation does not take care of your checkCollisions boolean_co_ position is updated until the last frame.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m currently doing exactly the same for my game (make the player moving and jumping). I don_t_t get a satisfying solution for now._lt_br /_gt__lt_br /_gt_\n\tHowever_co_ I have 2 ideas _dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tthe ugly one _dd__lt_br /_gt_\n\t\tcreate your own animation model in your Player class_co_ and call moveWithCollisions each frame_co_ with the jumpStep values._lt_br /_gt_\n\t\tCongratulations_co_ you just created the CollisionAnimation object_co_ nice !_lt_br /_gt_\n\t\t \n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tthe I-hope-its-not-too-resource-consuming one _dd__lt_br /_gt_\n\t\tyou have to check yourself if there is a collision during the jump._lt_br /_gt_\n\t\tYou can registerBeforeRender a new function which will check if your playerMesh intersects the object you want to jump in._lt_br /_gt_\n\t\tYou call this function each step of the animation (so basically each frame until the end of the anim). If the player intersects the mesh_co_ stop the animation _dd_ it will not go through the object_lt_br /_gt_\n\t\tSadly_co_ you have to check all the objects of the scene because you cant know on which object you_t_re jumping. Maybe you can if you store the id of the nearest object... or with other trick._lt_br /_gt__lt_br /_gt_\n\t\tI will test the second option for my game_co_ if I have good results I will tell you._lt_br /_gt_\n\t\tIf you do it before me and you got good results.. Tell me too _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ _lt_br /_gt_\n\t\t \n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tI am not even sure this was your problem_co_ if it_t_s the case_co_ leave a feedback !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBye_co__lt_br /_gt_\n\tPouet\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Champa","Date":"2016-06-17T20:53:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8472-pouet/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8472_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8472-pouet/_qt_ rel_eq__qt__qt__gt_@Pouet_lt_/a_gt_ I_t_m actually not moving meshes with the jump function but the camera (Its a FPS game)\n_lt_/p_gt_\n\n_lt_div_gt_\n\t_lt_pre_gt_\n_lt_code_gt__createCamera _dd_ _lt_span_gt__lt_span_gt_function_lt_/span_gt__lt_span_gt_()_lt_/span_gt_{_lt_/span_gt_\n\t\t_lt_span_gt_var_lt_/span_gt_\n\t\t\tcamera _eq_ _lt_span_gt_new_lt_/span_gt_ BABYLON.FreeCamera(_lt_span_gt__qt_playerCamera_qt__lt_/span_gt__co_ _lt_span_gt_this_lt_/span_gt_.spawnpoint_co_ _lt_span_gt_this_lt_/span_gt_.scene)_sm_\n\t\t\t\n\t\tcamera.attachControl(_lt_span_gt_this_lt_/span_gt_.scene.getEngine().getRenderingCanvas()_co_ _lt_span_gt_false_lt_/span_gt_)_sm_\n\t\n\t\tcamera.ellipsoid \t\t\t_eq_ \t_lt_span_gt_new_lt_/span_gt_ BABYLON.Vector3(_lt_span_gt_2_lt_/span_gt__co_ _lt_span_gt_10_lt_/span_gt__co_ _lt_span_gt_2_lt_/span_gt_)_sm_\n\t\t_lt_span_gt_//camera.collisionRadius \t\t_eq_ \tnew BABYLON.Vector3(0.5_co_ 0.5_co_ 0.5)_lt_/span_gt_\n        camera.checkCollisions \t\t_eq_ \t_lt_span_gt_true_lt_/span_gt__sm_\n\t\tcamera.applyGravity \t\t_eq_ \t_lt_span_gt_true_lt_/span_gt__sm_\n\t\t\n\t\tcamera.keysUp \t\t\t\t_eq_ \t[_lt_span_gt_87_lt_/span_gt_]_sm_ \t_lt_span_gt_// W_lt_/span_gt_\n        camera.keysDown \t\t\t_eq_ \t[_lt_span_gt_83_lt_/span_gt_]_sm_ \t_lt_span_gt_// S_lt_/span_gt_\n        camera.keysLeft \t\t\t_eq_ \t[_lt_span_gt_65_lt_/span_gt_]_sm_ \t_lt_span_gt_// A_lt_/span_gt_\n        camera.keysRight \t\t\t_eq_ \t[_lt_span_gt_68_lt_/span_gt_]_sm_ \t_lt_span_gt_// D_lt_/span_gt_\n\t\t\n\t\tcamera.speed \t\t\t\t_eq_ \t_lt_span_gt_this_lt_/span_gt_.walkSpeed_sm_\n        camera.inertia \t\t\t\t_eq_ \t_lt_span_gt_this_lt_/span_gt_.inertia_sm_\n        camera.angularInertia \t\t_eq_ \t_lt_span_gt_this_lt_/span_gt_.angularInertia_sm_\n        camera.angularSensibility \t_eq_ \t_lt_span_gt_this_lt_/span_gt_.angularSensibility_sm_\n        camera.layerMask \t\t\t_eq_ \t_lt_span_gt_2_lt_/span_gt__sm_\n\t\t\n\t\t_lt_span_gt_return_lt_/span_gt_ camera_sm_\n\t}_lt_/code_gt__lt_/pre_gt_\n\t_lt_span style_eq__qt_background_dd_url(&quot_sm_//www.html5gamedevs.com/applications/core/interface/ckeditor/ckeditor/plugins/widget/images/handle.png&quot_sm_)_sm__qt__gt__lt_/span_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\tI_t_m not working with moveWithCollision because that_t_s for meshes only_co_ right ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Boz","Date":"2016-06-17T21:15:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes_co_ but if you apply an animation on your camera_co_ it will be the same_co_ checkCollisions is not detected in my opinion.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat you can do is _dd__lt_br /_gt_\n\t- define only UP frames in your animation _dd_ player will jump_co_ it will stop at max height_co_ and gravity will make him go down._lt_br /_gt_\n\tOK because I suppose gravity take checkCollisions into account._lt_br /_gt__lt_br /_gt_\n\tOR_lt_br /_gt_\n\t- apply the second solution I gave to you.. check intersectsMesh every frame and stop the animation when it collides.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThese are just some ideas_co_ I don_t_t have this implemented.. will do it this week-end_co_ so I can give you my solution on next week (I work with either freeCamera and meshes)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee ya!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Champa","Date":"2016-06-18T10:15:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tUhhh_co_ my problem is not the collision but not able to jump on meshes\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI cant jump on some object that are somewhat lower than the camera \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]