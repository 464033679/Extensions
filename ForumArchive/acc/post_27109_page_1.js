[{"Owner":"juanmajr93","Date":"2016-12-16T10:23:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ I would like merge all meshes of obj file. This is my code_co_ and shows me and error when I use the function MergeMeshes()...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var t _eq_ 0_sm_\n  edificios_texto.forEach(function() {\n  var loader _eq_ new BABYLON.AssetsManager(scene)_sm_\n  var edificio _eq_ loader.addMeshTask(t_co_ _qt__qt__co_ _qt_http_dd_//localhost_dd_8080/modelos/_qt_+edificios_texto[t]+_qt_/_qt__co_edificios_texto[t]+_qt_.obj_qt_)_sm_\n  var mergeEdificio _eq_ []_sm_\n  edificio.onSuccess _eq_ function (task) {\n     var k_eq_0_sm_\n     task.loadedMeshes.forEach(function(b) {\t\n        b.computeWorldMatrix(true)_sm_\n        mergeEdificio[k] _eq_ b\n        k++_sm_\n\t\t\t\t\t\n     })_sm_\n  }\nBABYLON.Mesh.MergeMeshes(mergeEdificio)_sm_\nloader.load()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"max123","Date":"2016-12-16T10:35:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhat error do you get?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLooking at your code_co_ you call MergeMeshes outside edificio.onSuccess method_co_ e.g. there_t_s nothing to merge yet.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-16T10:41:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHi again_co_ yes this was the error however if apply this merge of meshes the obj is loaded in my scene without textures. Why?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-12-16T11:30:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYou meshes to merge must share the same material. If you merge objects with different materials this will not work as expected.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-16T12:19:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk... so there isnt any way to get a smaller number of meshes beacause I have the same number of meshes than materiales for each object. Somebody knows anyway to join meshes with different materials?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-12-16T14:00:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYou need to do this with your modeling software or can be with SPS_dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/Solid_Particle_System_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/overviews/Solid_Particle_System_lt_/a_gt_ (Although I_t_m not sure)\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-12-16T16:22:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyes_co_ you can _dd_-D\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust put all your texture images in a single one_co_ and use it as the global sps texture_co_ then set each object (particle) its own texture subpart\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-12-16T17:56:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Cool convo.  _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24178-juanmajr93/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24178_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24178-juanmajr93/_qt_ rel_eq__qt__qt__gt_@juanmajr93_lt_/a_gt__lt_/span_gt_ - don_t_t forget about .parent (instead-of merge).  You can set your mesh.parent _eq_ commonMesh ( commonMesh would be an extra plane or box... possibly with .visibility _eq_ 0)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow you have _qt_connected_qt_ all your mesh (to commonMesh)_co_ yet NOT merged any.  Each slave-mesh you connected (parented)... can have different material.  Yet all will rotate_co_ position_co_ and scale... commonly... simply by doing those things to commonMesh.  You will still be able to rotate_co_ position_co_ and scale each INDIVIDUAL mesh_co_ too_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCommonMesh is sometimes called master_co_ parent_co_ handle_co_ gizmo_co_ etc.  A common mesh that all other mesh parent-to.  *shrug* \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI love parenting feature.  Very very handy.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-19T11:30:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHow can I do it Wingnut? I have many meshes (25 for each building). You say me that one of them was commonMesh and the rest were connected to this parent so I had only one mesh for each building... GREAT!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI understand you but I dont know how?¿? At the first post I have shown my code_co_ could you help me?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-12-19T13:07:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi J.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t  I_t_m not sure how.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tActually_co_ I have _lt_em_gt_some_lt_/em_gt_ experience with AFTER-IMPORT parenting-to-commonMesh.  (not much experience_co_ though)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#M0UJB%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#M0UJB#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe pretend building walls (the 4 discrete-material colored boxes)... retain their OWN material. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd_co_ they retain their own scaling_co_ rotation_co_ and position... IF the parent is at position 0_co_0_co_0_co_ rotation 0_co_0_co_0_co_ and scaling 1_co_1_co_1... when you set parent.  The parent must have no position_co_ rotation_co_ or non-default scaling... at the time of parenting (in order to keep building parts oriented same as in modeler). \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt_After_lt_/u_gt_ parenting all 25 parts to commonMesh parent_co_ then you can go crazy... positioning_co_ rotating_co_ and scaling parent.  Entire building (all parts) will follow and stay proportioned.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ you would do successful import of all 25 mesh (1 building). Then...\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_ edificio.onSuccess _eq_ function (task) {\n    var after_import_parent_mesh _eq_ BABYLON.Mesh.CreateBox(_qt_commonMesh_qt__co_ 2_co_ scene)_sm_\n    after_import_parent_mesh.visibility _eq_ .2_sm_ // set 0 for invisible\n\n    task.loadedMeshes.forEach(function(b) {\t\n        b.computeWorldMatrix(true)_sm_\n        b.parent _eq_ after_import_parent_mesh_sm_\n     })_sm_\n  }_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t(I hope I didn_t_t say anything incorrect.  I make mistakes often.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSome might call this _qt__lt_strong_gt_late_lt_/strong_gt_ parenting_qt_.  It is done late in the loading sequence.  Early parenting might be done inside the modeling software.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have little experience in parenting to a commonMesh _lt_u_gt_while using modeling software_lt_/u_gt_.  I don_t_t use modeling software often.  I don_t_t know how well _qt_early parenting_qt_ travels through export-&gt_sm_import.  Sorry.   Others may comment.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you want to import... say... 10 buildings in same file (250 total parts)_co_ you might want to specially name each building part.  Example_dd_ b08_west_wall_co_ b04_east_wall_co_ etc.  THEN_co_ after import_co_ you will need to use custom code to set parent of all building b08 parts... to b08 commonMesh.  Same with building b04... each is parented to the commonMesh for building 04.  You would do this by using JS _lt_em_gt_match _lt_/em_gt_and _lt_em_gt_substring_lt_/em_gt_ operations... on each imported mesh._lt_em_gt_name_lt_/em_gt_ property.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tQuite a bit more _qt_late_qt_ after-import work/code_co_ but it can be done.  Perhaps it is wiser to put each building into a separate .babylon file_co_ and import all 10 .babylon files.  Test and experiment_co_ and ask more questions if you wish.  Good luck.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-19T16:34:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ by all your advices. The last of them is very interesting. You say me that put each building into a separate .babylon file and import it instead of load all obj models in my scene. However_co_ I dont know how can use .babylon file and how this model can be loaded into a separate .babylon file. Maybe BLENDER could export model to .babylon file. Finally_co_ do you consider that by this way I could get a faster load of my scene?_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_JMJR_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-12-19T17:04:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMy pleasure.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think for fastest performance... while in Blender_co_ make entire building be a single model (combine? group? convert-to-editable-mesh?)  You should still see many different materials on building... all looking proper.  But only one _qt_mesh_qt_.  Not sure how to do that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ use _lt_em_gt_unwrap UVs map _lt_/em_gt_or something similar.  Create a single texture (an atlas)... that contains ALL the textures needed for that single building.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow export that single model and single big texture atlas.  Fast load_co_ all texture in-place_co_ all should be good.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBUT... if you want to allow webGL user to change carpet_co_ change kitchen linoleum_co_ change building siding material_co_ etc... you are in trouble (if you use single mesh method).  Also_co_ if you want to change a door_co_ or rotate a wall (to reveal a secret room behind a wall)... that will be much more difficult (because building is one big model_co_ not many parts).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYes_co_ you gain speed and reduce bytes when you use Blender _qt_compacting_qt_ into single mesh_co_ but you lost some future user/programmer adjust-ability.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ it is difficult for me to determine which methods are best for you.  I don_t_t know what features/power you plan for self/users.  Try ALL ways... and compare speeds. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-19T18:53:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ the application that I am developing is only to be shown so there arent any transformation of different parts of mesh. I have done many things with blender and the result is better however I must create a single texture to each model to simplify more...( I would like to get only 1 mesh to each building)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you know any way to create this single texture? and after I will try to use spstexture as _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_ said me...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-19T20:32:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again_co_ I got it a unique texture to all parts of my building. I have made with blender. However_co_ I have the same problem. I have the same numbre of meshes and if I try to merge them again the model is loaded without textures. Like you said me I consider that I am using an 1 material so I dont understand this. I will share you the obj file and mtl with texture. Please if you could test it because it is so important getting for each building an unique mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_10841_qt__gt_edificio.rar_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-12-19T20:33:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//sophiehoulden.com/tutorials/blender/unwrapTut.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//sophiehoulden.com/tutorials/blender/unwrapTut.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.google.com/search?q_eq_blender+unmap+uvs_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.google.com/search?q_eq_blender+unmap+uvs_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-19T20:35:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tyes yes I did it. Please check this .rar\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-12-19T20:49:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYep_co_ looking good.  Only one mesh_co_ right?  No mesh merging needed_co_ if a single mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes your .babylon file have a section called UVS?  Those tell the texture HOW to wrap back-onto the single mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNo errors on console? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAre you loading .obj/.mtl file (with BJS objectLoader)... or are you loading .babylon file?  Best to export from Blender... to .babylon file... I think.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am not very good at this part.  I hope others will help_co_ soon.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Keep experimenting and do forum searches... might help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nabroski","Date":"2016-12-19T21:51:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RBMUC%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RBMUC#5_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"juanmajr93","Date":"2016-12-29T12:40:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThanks you very much. I got it using a unique texture to each building. This topic is resolved!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]