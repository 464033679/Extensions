[{"Owner":"Carharttguy","Date":"2017-07-20T19:10:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m porting an application from AppGameKit to BabylonJS. Now I came to the point of moving the camera on keypresses. In AGK I could use the local position of a mesh. This is pseudocode\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf keypress _eq_ up Then_lt_br /_gt_\n\tCamera.MoveLocalZ(5)_lt_br /_gt_\n\tEndif\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis moves the camera 5 units forward on it_t_s local axes_co_ so it_t_s always going forward_co_ no matter the direction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter a lot of reading and searching the docs_co_ I found this_dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/how_rotations_and_translations_work#more-advanced-positioning_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/overviews/how_rotations_and_translations_work#more-advanced-positioning_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo locallyTranslate seems awesome. So I cleared the inputs on the camera and tried something like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre class_eq__qt_ipsCode_qt__gt_\n\t window.addEventListener(_qt_keydown_qt__co_ ProcessKeyDown_co_ false)_sm_function ProcessKeyDown(kbe_dd_ KeyboardEvent){    switch(kbe.keyCode)    {        case 38_dd_ //UP            gEditor._camera.locallyTranslate(new BABYLON.Vector3(0_co_ 0_co_ 5))_sm_    }}\n\t \n\t_lt_/pre_gt_\n\n_lt_p_gt_\n\tBut I get an error on locallyTranslate that it_t_s not a function.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI get the same error on gEditor._camera.Translate. That also isn_t_t a function it seems. Or is .Translate and .locallyTranslate not applicable on a camera?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-07-20T19:17:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_pre_gt_\n_lt_code_gt_player _eq_ {\n\t\t\tmesh_dd_player_box_co_\n\t\t\tspeed_dd_ {\n\t\t\t\tf_dd_0_co_\n\t\t\t\ts_dd_0_co_\n\t\t\t\tu_dd_0_co_\n\t\t\t}\n\t\t}_sm_\n\t\t\n\t\t//PHYSICS START\n\t\t\n\t\tplayer_box.body _eq_ player_box.setPhysicsState(BABYLON.PhysicsImpostor.SphereImpostor_co_ { mass_dd_ 1.0_co_ friction_dd_ 0.0001_co_ restitution_dd_ 0.0})_sm_\n\n\t\tplayer_box.body.grounded _eq_ false_sm_\n\t\t\t\t\n\t\t\t\tplayer_box.body.collisionResponse _eq_ 0_sm_\n\t\t\t\tplayer_box.body.addEventListener(_qt_collide_qt__co_ function(e){ player_box.body.grounded _eq_ true_sm_\n\t\t\t\tplayer_box.body.collisionResponse _eq_ 1_sm_\n\t\t})_sm_\n\t\t//CONTROLS\n\t\tkeys _eq_ {}_sm_\n\t\tkeys.up _eq_ false_co_ keys.down _eq_ false_co_ keys.left _eq_ false_co_ keys.right _eq_ false_co_ keys.space _eq_ false_co_ keys.w _eq_ false_co_ keys.s _eq_ false_co_ keys.a _eq_ false_co_ keys.d _eq_ false_co_ keys.ctrl _eq_ false_sm_\n\t\tfunction onKeyDown(evt) {\n\t\tconsole.log(evt.keyCode)_sm_\n   \t\t switch (evt.keyCode){\n\t\tcase 37_dd_ // left\n\t\tkeys.left _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 39_dd_ //right\n\t\tkeys.right _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 38_dd_ //up\n\t\tkeys.up _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 40_dd_ //down\n\t\tkeys.down _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 32_dd_ //space\n\t\tkeys.space _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 87_dd_ //w\n\t\tkeys.w _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 83_dd_ //s\n\t\tkeys.s _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 65_dd_ //a\n\t\tkeys.a _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 68_dd_ //d\n\t\tkeys.d _eq_ true_sm_\n\t\tbreak_sm_\n\t\tcase 17_dd_ //ctrl\n\t\tkeys.ctrl _eq_ true_sm_\n\t\tbreak_sm_\n\t}\n\t}\n\t\tfunction onKeyUp(evt) {\n    switch (evt.keyCode){\n\t\tcase 37_dd_ // left\n\t\tkeys.left _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 39_dd_ //right\n\t\tkeys.right _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 38_dd_ //up\n\t\tkeys.up _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 40_dd_ //down\n\t\tkeys.down _eq_ false_sm_\n\t\tbreak_sm_\t\n\t\tcase 32_dd_ //space\n\t\tkeys.space _eq_ false_sm_\n\t\tbreak_sm_\t\n\t\tcase 87_dd_ //w\n\t\tkeys.w _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 83_dd_ //s\n\t\tkeys.s _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 65_dd_ //a\n\t\tkeys.a _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 68_dd_ //d\n\t\tkeys.d _eq_ false_sm_\n\t\tbreak_sm_\n\t\tcase 17_dd_ //ctrl\n\t\tkeys.ctrl _eq_ false_sm_\n\t\tbreak_sm_\n\t}\n\t}\n\t\n\twindow.addEventListener(_qt_keydown_qt__co_ onKeyDown)_sm_\n\twindow.addEventListener(_qt_keyup_qt__co_ onKeyUp)_sm_\n\t\t\n\t\t//console.log(player_box.body)_sm_\n\t\t//console.log(camera)_sm_\n\t\tsettings _eq_ {\n\t\t\taccel _dd_ 1_co_\n\t\t\tspeeds _dd_{\n\t\t\t\tnormal _dd_{\n\t\t\t\t\tf_dd_ 50.0_co_\n\t\t\t\t\tb_dd_ -20.0_co_\n\t\t\t\t\ts_dd_ 30.0_co_\n\t\t\t\t}_co_\n\t\t\t\trun _dd_{\n\t\t\t\t\tf_dd_ 1.0_co_\n\t\t\t\t\tb_dd_ 0.45_co_\n\t\t\t\t\ts_dd_ 0.65_co_\n\t\t\t\t}_co_\n\t\t\t\twalk _dd_{\n\t\t\t\t\tf_dd_ 0.3_co_\n\t\t\t\t\tb_dd_ 0.1_co_\n\t\t\t\t\ts_dd_ 0.2_co_\n\t\t\t\t}_co_\n\t\t\t}_co_\n\t\t}_sm_\n\t\t//CONTROL RESPONSE\n\t\tscene.registerBeforeRender(function(){\n\t\t\t//console.log(player_box.position)_sm_\n\t\t\t\n\t\t\tif(player_box.body.collisionResponse){\n\t\t\tplayer_box.body.grounded _eq_ true_sm_\n\t\t\tplayer_box.body.velocity.y _eq_ 0_sm_\n\t\t\t}else{\n\t\t\tplayer_box.body.grounded _eq_ false_sm_\t\n\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\tif(player_box.body.grounded || gravity.y _eq__eq_ 0){\n\t\t\t\n\t\t\tif(keys.w){\n\t\t\t\tif(player.speed.f &lt_sm_ settings.speeds.normal.f){\n\t\t\t\t\tplayer.speed.f +_eq_ settings.accel_sm_\n\t\t\t\t}else{\n\t\t\t\tplayer.speed.f _eq_ settings.speeds.normal.f_sm_\n\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t}else if(keys.s){\n\t\t\t\tif(player.speed.f &gt_sm_ settings.speeds.normal.b){\n\t\t\t\t\tplayer.speed.f -_eq_ settings.accel_sm_\n\t\t\t\t}else{\n\t\t\t\tplayer.speed.f _eq_ settings.speeds.normal.b_sm_\n\t\t\t\t}\t\n\t\t\t}\n\t\t\t\n\t\t\tif(keys.a){\n\t\t\t\tif(player.speed.s &gt_sm_ settings.speeds.normal.s*-1){\n\t\t\t\t\tplayer.speed.s -_eq_ settings.accel_sm_\n\t\t\t\t}else{\n\t\t\t\tplayer.speed.s _eq_ settings.speeds.normal.s*-1_sm_\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(keys.d ){\n\t\t\t\tif(player.speed.s &lt_sm_ settings.speeds.normal.s){\n\t\t\t\t\tplayer.speed.s +_eq_ settings.accel_sm_\n\t\t\t\t}else{\n\t\t\t\tplayer.speed.s _eq_ settings.speeds.normal.s_sm_\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(keys.space){\n\t\t\t\tif(gravity.y !_eq_ 0 &amp_sm_&amp_sm_ player_box.body.grounded){\n\t\t\t\t\tplayer_box.body.collisionResponse _eq_ 0_sm_\n\t\t\t\t\tvar jumpVector _eq_ v3(0_co_6.5_co_0)_sm_\n\t\t\t\t\tplayer_box.applyImpulse(jumpVector_co_ player_box.position)_sm_\t\n\t\t\t\t}else{\n\t\t\t\tif(player.speed.u &lt_sm_ -2){\n\t\t\t\t\tplayer.speed.u -_eq_ settings.accel_sm_\n\t\t\t\t\t}else{\n\t\t\t\t\tplayer.speed.u _eq_ -2_sm_\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\n\t\t\t\n\t\t\tif(keys.ctrl){\n\t\t\t\tif(gravity.y !_eq_ 0 &amp_sm_&amp_sm_ player_box.body.grounded){\n\t\t\t\t\tplayer.speed.f*_eq_0.5_sm_\n\t\t\t\t\tplayer.speed.s*_eq_0.5_sm_\n\t\t\t\t}else{\n\t\t\t\t  if(player.speed.u &gt_sm_ 2){\n\t\t\t\t\tplayer.speed.u +_eq_ settings.accel_sm_\n\t\t\t\t\t}else{\n\t\t\t\t\tplayer.speed.u _eq_ 2_sm_\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t \tplayer.speed.f*_eq_0.82_sm_\n\t\t\t\tplayer.speed.s*_eq_0.82_sm_\n\t\t\t\tplayer.speed.u*_eq_0.82_sm_\n\t\t\t\tif(player.speed.f&lt_sm_0.05 &amp_sm_&amp_sm_ player.speed.f &gt_sm_ -0.05){\n\t\t\t\t\tplayer.speed.f _eq_ 0_sm_\n\t\t\t\t}\n\t\t\t\tif(player.speed.s&lt_sm_0.05 &amp_sm_&amp_sm_ player.speed.s &gt_sm_ -0.05){\n\t\t\t\t\tplayer.speed.s _eq_ 0_sm_\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar forward _eq_ scene.activeCamera.getTarget().subtract(scene.activeCamera.position).normalize()_sm_\n\t\t\t\tforward.y _eq_ 0_sm_\n\t\t\t\tvar right _eq_ BABYLON.Vector3.Cross(forward_co_ scene.activeCamera.upVector).normalize()_sm_\n\t\t\t\tright.y _eq_ 0_sm_\t\n\t\t\t\t\n\t\t\t\n\t\t\t\tvar f_speed _eq_ 0_co_ s_speed _eq_ 0_co_ u_speed _eq_ 0_sm_\n\t\t\t\tif(player.speed.f !_eq_ 0){\n\t\t\t\t\tf_speed _eq_ player.speed.f_sm_\n\t\t\t\t}\n\t\t\t\tif(player.speed.s !_eq_ 0){\n\t\t\t\t\ts_speed _eq_ player.speed.s_sm_\n\t\t\t\t}\n\t\t\t\tif(player.speed.u !_eq_ 0){\n\t\t\t\t\tu_speed _eq_ player.speed.u_sm_\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmove _eq_ (forward.scale(f_speed)).subtract((right.scale(s_speed))).subtract(scene.activeCamera.upVector.scale(u_speed))_sm_\n\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\tplayer_box.body.velocity.x _eq_ move.x_sm_\n\t\t\tplayer_box.body.velocity.z _eq_ move.z_sm_\n\t\t\tplayer_box.body.velocity.y _eq_ move.y_sm_\n\t\t\t}\n\t\t\tif(keys.ctrl){\n\t\t\tcamera.position _eq_ v3(player_box.position.x_co_player_box.position.y+1_co_player_box.position.z)_sm_\n\t\t\t}else{\n\t\t\tcamera.position _eq_ v3(player_box.position.x_co_player_box.position.y+2_co_player_box.position.z)_sm_\n\t\t\t}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis might be over kill... but this is a controller that I have used in the past._lt_br /_gt__lt_br /_gt_\n\tYou need to get a forward vector and do something with that!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2017-07-20T19:23:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tthese functions are for meshes only\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Carharttguy","Date":"2017-07-20T19:32:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/?do_eq_hovercard_qt_ data-mentionid_eq__qt_19199_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/_qt_ rel_eq__qt__qt__gt_@Pryme8_lt_/a_gt_ Thanks for your answer. But to be honest_co_ I completely fail to see what your solution does. I have very little BabylonJS experience_co_ and it looks like your moving a physics body that has a camera attached to it?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_ Thanks! It_t_s a real shame tho_co_ it would be so easy _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo I guess the only way to mova a camera is using those input systems? I already read the tutorial 3 times and looks super complex for what I want.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-07-20T19:41:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tvar distance _eq_ 5_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcamera.position.addInPlace(camera.getDirection(BABYLON.Axis.Z).scale(distance))_sm_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Carharttguy","Date":"2017-07-20T19:56:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ That is spot on what I need. But wow_co_ I_t_m impressed_co_ it would_qt_ve taken me quiet some time to come up with such a solution._lt_br /_gt_\n\tI have some new material to research in the class ref.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks everybody! This forum is crazy fast with replies.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-07-20T20:02:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tMy bad_co_ I miss read your first post!_lt_br /_gt_\n\t&gt_sm__&lt_sm_ I was rushing out the door to get to lunch_co_ good thing adam knows what hes talking about!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]