[{"Owner":"MackeyK24","Date":"2018-04-29T02:19:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Guys...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ or anybody else _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGotta a quick question. Is there a way to _qt_MIRROR_qt_  an skeletal animation pose (bone._martix)...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf is was playing animation of walk left... and I have access to and want to FLIP/MIRROR that matrix pose to make it walk right...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tis the some kind of BABYLON.Matrix.Mirror type function ???\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gijs","Date":"2018-04-29T12:45:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHow about bone._martix.invert()?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-04-29T13:09:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDoes that flip left to right ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-04-29T17:20:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMultiply it by Matrix.Scaling(1_co_ -1_co_ 1) ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-04-30T07:09:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNope_co_ neither matrix.invert or matrix.scaling (1_co_-1_co_1) actually flips or mirrors the pose left to right.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am trying to save space in encoding animation keys_co_ if i have a walk left_co_ i would like to NOT have to encode a walk right animation. So i was\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthink i could MIRROR or FLIP the pose at actual runtime animation when i interpolate the animation frame to get the POSE for that frame update.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut i am afraid i DONT know the math involded in FLIPPING or MIRRORING the animation pose matrix...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes anyone know how or if maybe i have decompose the matrix and then flip or mirror the individual TRS (Translation_co_ Rotation and Scale) then put back together...Kinda like a DecomposedLerp maybe ????\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyone got any thoughts _lt_span_gt__dd_)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-04-30T17:18:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ Blender has a copy / paste to the other side functionality.  I just posed a bone many different ways_co_ copied to clipboard_co_ &amp_sm_ _qt_cross-pasted_qt_ it.  The UI show that the signs on the Y &amp_sm_ Z of the quaternion part are flipped.  In BJS coordinate is switched where Z is up_co_ but it is still Y &amp_sm_ Z.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe Matrix.Scaling(1_co_ -1_co_ -1)  or just update the quarternion\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-04-30T20:44:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMyabe im using Matrix.Scaling() wrong...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow would i use Matrix.Scaling to SCALE another matrix ??\n_lt_/p_gt_\n\n_lt_p_gt_\n\ttestMatrix _eq_ testMatrix * BABYLON.Scaling(1_co_-1_co_-1)_sm_ or something like that ???\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-04-30T21:24:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think so\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-05-01T00:51:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell I tried to multiply by scaling(1_co_-1_co_-1)... Does not work... makes my model SQIUSH down to little blob or disappears complete from view.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake a look at my HOW i am trying to MIRROR a pose if the blender.mirror flag is set...But the sampleMatrix multiply by scaling does not work_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (blender.track !_eq_ null) {\n  this._sampleMatrix.reset()_sm_\n  BABYLON.Utilities.SampleAnimationMatrix(this._boneAnim_co_ blender.frame_co_ BABYLON.Scalar.Clamp(blender.track.behavior_co_ 0_co_ 1)_co_ this._sampleMatrix)_sm_\n  if (blender.mirror _eq__eq__eq_ true) {\n    this._sampleMatrix.multiplyToRef(BABYLON.Matrix.Scaling(1_co_-1_co_-1)_co_ this._sampleMatrix)_sm_\n  }\n  this.blendAnimationMatrix(layer_co_ this._sampleMatrix_co_ blender.weight)_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-01T18:52:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI would suggest a test apart from your code_co_ where say leftFoot bone is rotated.  Grab matrix &amp_sm_ do stuff to it_co_ then assign it to rightFoot bone &amp_sm_ mark bone dirty.  If this is not working_co_ try decomposing_co_ changing rotation recombine.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou are doing too much.  Part of this code not great production quality yet_co_ but should work.  if (blender.track_lt_strong_gt_ _lt_span style_eq__qt_color_dd_#2980b9_sm__qt__gt_!_eq__eq__lt_/span_gt__lt_/strong_gt_ null) &amp_sm_ if (blender.mirror _lt_span style_eq__qt_color_dd_#2980b9_sm__qt__gt__lt_strong_gt__lt_s_gt__eq__eq__eq_ true_lt_/s_gt__lt_/strong_gt__lt_/span_gt_) probably better.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-05-02T04:55:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_213421_qt_ data-ipsquote-contentid_eq__qt_37294_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1525200740_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t9 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI would suggest a test apart from your code_co_ where say leftFoot bone is rotated.  Grab matrix &amp_sm_ do stuff to it_co_ then assign it to rightFoot bone &amp_sm_ mark bone dirty.  If this is not working_co_ try decomposing_co_ changing rotation recombine.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_span_gt_﻿_lt_/span_gt_ You are doing too much.  Part of this code not great production quality yet_co_ but should work.  if (blender.track_lt_strong_gt_ _lt_span style_eq__qt_color_dd_#2980b9_sm__qt__gt_!_eq__eq__lt_/span_gt__lt_/strong_gt_ null) &amp_sm_ if (blender.mirror _lt_span style_eq__qt_color_dd_#2980b9_sm__qt__gt__lt_strong_gt__lt_s_gt__eq__eq__eq_ true_lt_/s_gt__lt_/strong_gt__lt_/span_gt_) probably better._lt_span_gt_﻿_lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI dont know about toooo much... Each line is doing something specific in the animation process...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat make you say DOING too much ???\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe first line blender.track !_eq_ null .... Need that !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe second line reset a matrix buffer so i dont instantiate new matrix each frame... Need that !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe third line actually SAMPLES the animation matrix pose... Need that !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe forth and fifth lines TRY to mirror if the blender.mirror flag is set... Need that !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe six and final line ADDS the animation matrix to the current BLEND BUFFER that later gets assigned bone and the matrix is updated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have all the animation frame code as OPTIMIZED i can get it... I can blend multiple animation from multiple layers with a MINIMUM amount of overhead\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNote_dd_ I always get issues when test for null using !_eq__eq_ as apposed to !_eq_ (for null only).... And i am just OLD school i know blender.mirror and blender.mirror _eq__eq__eq_ true are the same thing...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just like SEEING blender.mirror _eq__eq__eq_ true or blender.value _eq__eq__eq_ false.... More easy to tell when i am glancing thru code the blender.mirror or !blender.mirror\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo again i dont know what mean... Doing too much... How could i be doing ANY less ???\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor a larger picture of the actual Animation State Machine_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_18089_qt_ data-fileid_eq__qt_18089_qt_ rel_eq__qt__qt__gt_babylon.scenestates.ts_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNote_dd_ Still a work in progress... But so far i am doing all this with like 1 to 1.5 millisecs overhead (THUS FAR) _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-02T16:17:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI mean get the pose cross copy working_co_ before trying to put everything through that Blender thing.  I made a _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#D1U63S_qt_ rel_eq__qt_external nofollow_qt__gt_PG_lt_/a_gt__co_ which shows switching the sign on the Y &amp_sm_ Z of the quaternion does the trick. Playing with the scale _lt_strong_gt__lt_sup_gt__lt_span style_eq__qt_color_dd_#2980b9_sm__qt__gt_DOES NOT WORK_lt_/span_gt__lt_/sup_gt__lt_/strong_gt_.  Without simplifying your test_co_ running it through an interpolater is just going to make matters much harder to figure out.  You do not need anything_co_ if the pose is not right.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]