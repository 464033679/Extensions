[{"Owner":"Topper","Date":"2018-01-02T08:51:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI´m new to BJS and trying to get along with a 3D visualization for warehouses.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe 2D visualization already work pretty well_co_ the coordinates are stored in a DB running on a remote server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTarget is to provide a library of rack elements (frames and beams) of different dimensions (height_co_ width_co_ length).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can provide a JSON from server-side Java-application with all the necessary data (rack id_co_ rack type_co_ coordinates_co_ etc.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI´m using OBJFileLoader for importing obj and mtl which works fine as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is 2D visualization of a warehouse_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_16458_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.png.399f6cc91bbbcff777c94a3c45ca675e.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_image.thumb.png.aad69305b919258a0e08210235fe57f4.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16458_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.thumb.png.aad69305b919258a0e08210235fe57f4.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEvery blue rectangle is a warehouse rack consisting of two frames an a bunch of beam pairs_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_image.png.037ade7006bc3f2621e45cd7afba4aa0.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16460_qt_ height_eq__qt_331_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.png.037ade7006bc3f2621e45cd7afba4aa0.png_qt_ width_eq__qt_336_qt_ /_gt__lt_img alt_eq__qt_image.png.e4e42a63051c6afafac585343f3c7413.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16461_qt_ height_eq__qt_329_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.png.e4e42a63051c6afafac585343f3c7413.png_qt_ width_eq__qt_269_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tBoth elements_co_ frame and beam_co_ come from separate obj-files.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the end of the day_co_ i want to have something like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_image.png.9353a3e248861fbbc8c6661152d2594a.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16462_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.png.9353a3e248861fbbc8c6661152d2594a.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThe displayed meshes are kind of super simple_co_ but perfect for playing around with BJS (i´ve all models in high poly as well).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor some reason I can´t move (or change) meshes imported by this method_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can specify the mesh position while importing like this (works for the sphere btw.)_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_        var loader _eq_ new BABYLON.AssetsManager(scene)_sm_\n        \n                        var pos _eq_ function(t){\n                          t.loadedMeshes.forEach(function(m){\n                              var meshName _eq_ m.name_sm_\n                              var meshID _eq_ m.id_sm_\n                                      \n                              m.position.z _eq_ 5_sm_\n                              m.position.x _eq_ 7_sm_\n                          })_sm_\n                        }_sm_\n        \n        var steher1 _eq_ loader.addMeshTask(_qt_steher_2500_900_120_qt__co_ _qt__qt__co_ _qt_http_dd_//localhost_dd_8080/MagllanMain/Babylon/Cyril/_qt__co_ _qt_steher_2500_900_120.obj_qt_)_sm_\n        \n                        steher1.onSuccess _eq_ pos_sm_\n        \n                        var sphere _eq_ BABYLON.Mesh.CreateSphere(_qt_sphere_qt__co_ 0.5_co_ 0.5_co_ scene)_sm_\n                        var simpleMaterial _eq_ new BABYLON.StandardMaterial(_qt_texture2_qt__co_ scene)_sm_\n                        simpleMaterial.diffuseColor _eq_ new BABYLON.Color3(0_co_ 1_co_ 0)_sm_//Green\n                        sphere.material_eq_simpleMaterial_sm_\n                        sphere.position.x _eq_ Math.floor((Math.random() * 2) )_sm_\n                        sphere.position.y _eq_ Math.floor((Math.random() * 2) )_sm_\n                        sphere.position.z_eq_3_sm_\n \n\n        BABYLON.OBJFileLoader.OPTIMIZE_WITH_UV _eq_ true_sm_\n        \n        loader.load()_sm_\n        \n        \n        // Begin of User interaction via button event\n\n        $(_qt_#move_z_qt_).click(function(){ \n             //scene.meshes.forEach(function(k) {alert(k.name)_sm_})_sm_\n             pilot.position.z _eq_ pilot.position.z + 1_sm_\n             sphere.position.z _eq_ sphere.position.z + 0.4_sm_\n             scene.getMeshByName(_t_steher_2500_900_120_t_).position.z +_eq_10_sm_\n           })_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tFunny thing is_co_ i can move all other meshed via click-event.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn general_co_ I´ve been asking myself if I´m using the best way of doing this (import-method_co_ file-types_dd_ obj and mtl).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt_The workflow should be like this_dd__lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1) get JSON from server with an array of IDs and their coordinates (e.g._dd_ ID_eq__qt_10012_qt__co_ ID_name_eq__qt_rack_012_qt__co_ ID_pos_x_eq__qt_130_qt__co_ ID_pos_y_eq__qt_120_qt__co_ etc.)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2) Importing the rack elements that belong to a specific ID into existing BJS scene_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3) Every rack element uses the same obj-file(s) (meshes) because all racks shall be of the same rack type_co_ _lt_u_gt_but with different IDs in BJS_sm__lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don´t know how to give imported meshes their own unique_co_ custom IDs so that I can access them in the scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMore in general_dd_ I have my server-side array and i need a client-side array as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen i change the position of let´s say 10 of 2000 racks in my layout / scene_co_ I need to know which meshes i have to _qt_move_qt_ on client-side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf there are any other weak points my way of trying to achieve this_co_ please tell me.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny help appreciated !!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTopper\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.png.1397419e76754cf373e148e40ba7eb5e.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_16459_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/image.thumb.png.5cdff6dc3d94a54ba011fc144b0b792d.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_image.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-01-02T15:28:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHiya Topper_co_ welcome to the forum.  I will try to offer some suggestions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#1_dd_  Sounds good.  JSON file is good idea.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#2.  Perhaps import only ONE of each type.  Then use createInstance() or clone() (within scene JS) to make MANY of them_co_ using the JSON info to name and position them.  By doing this_co_ the JSON file is the boss.  IT tells BJS how many clones() are needed_co_ what each name is_co_ and where to position it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#3.  Yep_co_ good idea... just import ONE of each type.  Then spawn spawn spawn more_co_ based-upon info from JSON file.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  When each cloning/instance is created_co_ you have option to name it... example_dd_  masterRack.createInstance(_t_row15_col24_rack_t_)_sm_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ we have the _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/resources/tags_qt_ rel_eq__qt_external nofollow_qt__gt_BJS Tags System_lt_/a_gt_... which will allow you to set a mesh.tags property.  Using the Tags Tools_co_ you could find all mesh whose names include _t_row15_t_ or _t_col24_t_.  The Tags system will return an array of ALL row15 or all col24_co_ or even all _t_rack_t_.  It has very powerful search tools.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYour problem with moving/positioning imported mesh... is something simple.  It is a minor problem.  Do you know how to _qt_wrap in a try/catch_qt_?  I show how... in _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/34792-doubt-with-an-animation-exported-from-blender/?tab_eq_comments#comment-199993_qt_ rel_eq__qt__qt__gt_THIS forum post_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps_co_ wrap your positioning attempts... in a try/catch_co_ and then more error information might be seen at JS console.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt__lt_span style_eq__qt_color_dd_#8e44ad_sm__qt__gt_scene.getMeshByName(_t_steher_2500_900_120_t_).position.z +_eq_10_sm__lt_/span_gt__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_That line SHOULD work... if the mesh name is correct_co_ AND if mesh has finished loading.  But see below... about _lt_strong_gt_loader.onFinish()_lt_/strong_gt__co_ which I think you might need._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Perhaps_co_ in FIRST LINE of pos()... add...  console.log(t.loadedMeshes)_sm_  _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Then go to JS console... you might see _lt_/span_gt__lt_span style_eq__qt_color_dd_#2980b9_sm__qt__gt__lt_strong_gt__lt_em_gt_object _lt_/em_gt_[object_co_ object_co_ object]_lt_/strong_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_In most browsers_co_ you can CLICK-upon any _t_object_t_ word_co_ and an _t_object inspector_t_ will launch_co_ and you can make sure that you have names set properly._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tTry to publish your small .babylon file... or small .obj/.mtl files... somewhere on the web... where we can load-it with a BJS playground scene.  I store my little .babylon/.obj files in my free github account.  Here is _lt_a href_eq__qt_https_dd_//github.com/Wingnutt/misc_qt_ rel_eq__qt_external nofollow_qt__gt_my _t_misc_t_ folder on github_lt_/a_gt_... it is free... and you can see that I store little test files in there... including _lt_strong_gt_mesh01.obj_lt_/strong_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is a BJS playground scene that loads _lt_strong_gt_mesh01.obj_lt_/strong_gt_.   _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#3FV2X%2313_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#3FV2X#13_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice the _lt_strong_gt_loader.onFinish()_lt_/strong_gt_  I notice that you don_t_t have one in your code.  Perhaps add one?  *shrug*  Then put MOST of your scene code... within IT.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice in my loader... lines 28-30_co_ which are also inside-of _lt_strong_gt_loader.onFinish()_lt_/strong_gt_.  Those code lines are slowly positioning the mesh... further from camera.  Positioning is working.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGo to console_co_ click on the word _lt_em_gt_object. _lt_/em_gt_Does object inspector launch?  If so_co_ scroll down down down... until you see property _lt_strong_gt_.name_lt_/strong_gt_.  This is how I discovered... that the imported mesh was named _t_TriPatch01_t_.  I had forgotten its name_co_ so I needed to _qt_look it up_qt_ with the object inspector.  Object inspectors are VERY cool_co_ and learning about them... speeds-up BJS learning LOTS.  It_t_s a great tool. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOkay_co_ sorry for so long talking.  Hope this helps.  Be patient with yourself.  Soon it will feel much easier.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Topper","Date":"2018-01-03T12:18:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t@ Wingnut\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAwesome. Thx for your your detailed and exhausting description. I´m gonna check this out today.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBR_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMarkus\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]