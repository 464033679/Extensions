[{"Owner":"jodo","Date":"2016-01-25T18:52:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI tried to switch between a ArcRotateCamera and a FreeCamera. Well thats really easy to do. But I wanted to have a smooth transition. For example when switching from Arc to Free I need to tell the Free Camera the position (position of the Arc Camera) and direction (target of arc camera - position of arc camera).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow my problem was i couldn_t_t find any _qt_direction_qt_ property. But what i found was a method inside the TragetCamera called _qt_setTarget(target)_qt_ which calculates the rotation from cameras current position_co_ upVector and the passed target vector.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just copy pasted that function to the FreeCamera and it works just fine. Maybe for the next Version such a functionality would be nice to have also in the FreeCamera.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-25T20:03:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs Arc and Free inherits from TargetCamera I suggest moving this to TargetCamera\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you want to do a PR for that?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jodo","Date":"2016-01-25T20:33:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tUps missed that inheritance. Than of course everything is totaly fine_co_ sry!_lt_br_gt__lt_br_gt_\n\tSo to make at least some sense out of this post_co_ here is the code that makes smooth transition between FreeCamera and ArcRotateCamera (of course when switch back to Arc_co_ the Direction jumps to the target (which in this case is at (0_co_0_co_0).\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_//User wants to have the free Camera\nGame.prototype.useFreeCamera _eq_ function(){\n    this.cameraArc.detachControl(this.canvas)_sm_\n    this.cameraFree.position _eq_ this.cameraArc.position.clone()_sm_\n    this.cameraFree.setTarget(new BABYLON.Vector3.Zero())_sm_ //If target is not a (0_co_0_co_0)_co_ exchange with target position\n    this.scene.activeCamera _eq_ this.cameraFree_sm_\n    this.cameraFree.attachControl(this.canvas)_sm_\n}\n\n//User wants to move around with the Arc Rotate Camera\nGame.prototype.useArcCamera _eq_ function(){\n    this.cameraFree.detachControl(this.canvas)_sm_\n    this.cameraArc.setPosition(this.cameraFree.position.clone())_sm_\n    this.scene.activeCamera _eq_ this.cameraArc_sm_ \n    this.cameraArc.attachControl(this.canvas)_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-01-28T15:29:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys!  Interesting quest_co_ Jodo!  Can I ask a question?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhile using free camera (mode)_co_ are you (maybe) going to allow the user to click on a mesh_co_ and then that mesh becomes the new target if/when the user switches to ArcCam mode? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m just thinking_co_ mostly about moving the Arc cam target... possibly to make it APPEAR _lt_u_gt_as if_lt_/u_gt_ the Arc cam turned into a Free cam_co_ even though it really didn_t_t.  Hard to do_co_ though.  Forward and backward_co_ not so difficult (move target closer/further from cam).  But Free cam-like panning left/right/up/down using an Arc cam... erf_co_ not so easy.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso thinking about... sometimes setting the free cam as the arc cam_t_s parent_co_ and sometimes reverse.  *scratch scratch*.  Maybe that would be helpful_co_ somehow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe hard part_co_ is what you mentioned.  Changing from free cam to arc... will immediately change the camera direction_co_ and without easing/animation_co_ that is certainly not a _qt_smooth transition_qt__co_ is it?  Hmm.  It almost seems like... when you switch from Free to Arc_co_ you would set a NEW target point somewhere out in front-of the free camera_co_ and then change to Arc_co_ and set that NEW target point for the Arc.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn a way_co_ this is a _qt_smart_qt_ Arc cam.  It would try to determine WHAT the free cam was looking-at_co_ and use THAT point as the Arc_t_s target.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBJS has a thing called layers_co_ which allows you to put a background image on the scene.  But layers don_t_t allow picking-upon_co_ and therefore you can_t_t really use them as a ray target.  (Here I am trying to figure out HOW the Arc cam will establish a new target... IF the Free cam is sort-of aimed at the sky... at the time the user switches from free to arc.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLike I say_co_ _lt_u_gt_smart_lt_/u_gt_ Arc cam_co_ maybe.  This thing tries like hell to determine a new target whenever it goes active_co_ and it analyses the hell out of the free cam... to try to figure out where to set Arc_t_s target.  Even if the free cam is aimed at NOTHING_co_ shooting to the sky...  this smart Arc cam sets a target in that direction (but on the ground if there IS a ground_co_ and at SOME kind of sensible .radius). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ even cooler_co_ it slowly animates the target (possibly an invisible mesh)... from the sky_co_ to the ground.  (No violent _qt_snap_qt_ of re-targeting when user changes from free to arc).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWeird.  An Arc cam that would gently animate to a new target IF it could derive one from whatever the user was doing with the free camera... and if it can_t_t derive a decent new target_co_ revert (gently animated) to it_t_s previous target.  Cool challenge.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  *scratch scratch*  It makes me think. (which usually isn_t_t healthy_co_ for me)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust maybe... take an Arc cam and overload the hell out of it... with your own funcs... turning IT into a free cam as wanted_co_ with pure force.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  Jodo_t_s Hybrid Cam.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  When it switches to free cam mode_co_ you create a free cam to use as the invisible gizmo parent for the arc_co_ freeze the arc_t_s .alpha_co_ .beta and .radius_co_ and let the free cam gizmo do the Arc_t_s positioning.  (Looking thru one cam_co_ controlling with another?)  I dunno.  Crazy fun_co_ though!  Sort of reminds me of a phenomenon called _qt_behaviors_qt_.  Temporarily DE-attach the Arc cam_t_s behavior module_co_ and snap-on free cam_t_s behavior module.  Interesting!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jodo","Date":"2016-01-29T00:59:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay_co_ thats a lot of input _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSome interesseting stuff so. Dont know if I understand everything what you mean _sm_)_co_ but I will play around a little bit and see what I can get_co_ stay tuned!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-01-29T02:16:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt could be useful to have in Babylon a BABYLON.scene._lt_strong_gt_switchCamera_lt_/strong_gt_(cam) ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tit would change the camera with only a small function._lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jodo","Date":"2016-01-29T09:58:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo i hacked a little something together in the playground_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1FYQKN%2322_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1FYQKN#22_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_Features_qt__dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tWhen clicking on a box (no matter which cam is active)_co_ the camera switches to Arc Cam and rotates (animated) to the target while cam position is in place\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tWhen switching from Arc to Free_co_ the camera stays just in place and you can now move aroun with the free cam\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tWhen switching from Free to Arc_co_ I look for the Mesh (boxes) with the closest distance and rotate there (animated) while camera position is in place\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tActive Box is highlighted in green\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tyou can switch camera with the _qt_c_qt_ button\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tA little problem I had with the playground_dd_ When registering key events... everytime i press run_co_ the same key event gets registered again which is really anyoing. I had to save and reload the page everytime _dd_/_lt_br_gt_\n\tIs there a workaround for that?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-01-29T11:49:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFantastic playground_co_ Jodo!  You have accomplished smooth transition for camera switch._lt_br /_gt_\n\tTake a look at _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/?18_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/?18_lt_/a_gt_ lines 123-127.  scene.onDispose is the way you can revert things before unload.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1FYQKN%2323_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1FYQKN#23_lt_/a_gt_  lines 328-330 should get good results.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCoooooool code_co_ Jodo!  Nice work!  I bookmarked it twice! \n_lt_/p_gt_\n\n_lt_p_gt_\n\t------------------------------_lt_br /_gt_\n\tValue-Added Notes_dd_ _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t------------------------------_lt_br /_gt_\n\tSome folks put added HTML into the playground_t_s id_eq_canvasZone DIV.  Take a browse to _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#YIT1S%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#YIT1S#14 _lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 7_dd_  This gets a ref to the canvasZone div.  If you list the Playground_t_s HTML source_co_ you_t_ll see that the canvasZone div has one child node... the canvas element itself.  SO_co_ if you want buttons/readouts/inputs ABOVE the canvas_co_ the canvas needs to happen AFTER those.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLines 87-89_dd_  Remove EVERYTHING from the canvasZone container.  There is probably a DOM command that can do insertBeforeFirstChild_co_ but a cleanout and rebuild of canvasZone_t_s element-order... works_co_ too.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLines 91-96_dd_  Add a pile of HTML to canvasZone container.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 98_dd_  Return the canvas itself to the canvasZone container as the last item.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow look at lines 75-77 (in the scene.onDispose func).  This removes HTML nodes from the canvasZone container until there is only one node remaining_co_ which is the canvas.  Clean-up!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tJQuery is within scope of our playground_co_ too.  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#9U086%2372_qt_ rel_eq__qt_external nofollow_qt__gt_Another person_t_s playground_lt_/a_gt_ can be seen using jQuery power at the top of their PG code.  I_t_m not sure what the user_t_s objective is_co_ but I just wanted to show you that jQuery is certainly active and sometimes used for similar things.  Party on!  Thx again for the cool playground/code!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jodo","Date":"2016-01-29T13:02:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the infos!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhile creating the playground I was actually thinking about ... hmm how could I put some HTML elements in the playground to show which camera is active or to switch it with a button. Its like you could read me mind _dd_D.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]