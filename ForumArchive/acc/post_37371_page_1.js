[{"Owner":"timetocode","Date":"2018-05-03T06:52:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m attempting to use NullEngine in node.js as a component of the server side simulation for a multiplayer game.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen using *just* NullEngine + nengi.js (a multiplayer engine) mesh intersection and rays work great. I can get somewhere in the realm of 50-150 ccu (that_t_s players_co_ not NPCs). The performance is really awesome. Now I_t_m trying to get some more advanced physics in place.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever when I attempt to include OimoJSPlugin on the serverside I get _qt_ TypeError_dd_ Cannot read property _t_World_t_ of undefined _qt_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_const BABYLON _eq_ require(_t_babylonjs_t_)\nlet engine _eq_ new BABYLON.NullEngine()\nlet scene _eq_ new BABYLON.Scene(engine)\nlet camera _eq_ new BABYLON.ArcRotateCamera(_t_Camera_t__co_ 0_co_ 0.8_co_ 100_co_ BABYLON.Vector3.Zero()_co_ scene)\nscene.enablePhysics(null_co_ new BABYLON.OimoJSPlugin())\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThat last line there is the one that throws the error. Any idea what I_t_m doing wrong?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI also get a warning that _t_oimo_t_ module cannot be found (related_co_ I presume?).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI setup babylon via `npm install babylonjs` (as opposed to downloading something) and the version is 3.2.0.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for reading! And BJS + NullEngine is a dream come true!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_18098_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/2018-03-30_13-40-03.gif.daba39222136948cead40e0d316cf147.gif_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_2018-03-30_13-40-03.gif_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_18098_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/2018-03-30_13-40-03.thumb.gif.059d9956bb06a66d22189061f197448d.gif_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-05-03T07:12:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI also tried another way_co_ where I downloaded a custom build of babylon.js that has oimo in it_co_ and include that from the server side. This one get slightly different errors_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_[0] WARNING in ./server/babylon.custom.js\n[0] Module not found_dd_ Error_dd_ Can_t_t resolve _t_oimo_t_ in _t_C_dd_\\Users\\benne\\Desktop\\nengi-projects\\3d\\server_t_\n[0]  @ ./server/babylon.custom.js 1_dd_294-309\n[0]  @ ./common/entity/PlayerCharacter.js\n[0]  @ ./common/nengiConfig.js\n[0]  @ ./client/GameClient.js\n[0]  @ ./client/clientMain.js_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThis warning is the same as before.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe new error is this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_[1] BJS - [00_dd_05_dd_35]_dd_ Babylon.js null engine (v3.2.0) launched\n[1] C_dd_\\Users\\benne\\Desktop\\nengi-projects\\3d\\server\\babylon.custom.js_dd_84244\n[1]             this.world _eq_ new this.BJSOIMO.World({\n[1]                                           ^\n[1]\n[1] TypeError_dd_ Cannot read property _t_World_t_ of undefined\n[1]     at new OimoJSPlugin (C_dd_\\Users\\benne\\Desktop\\nengi-projects\\3d\\server\\babylon.custom.js_dd_84244_dd_43)\n[1]     at Object.&lt_sm_anonymous&gt_sm_ (C_dd_\\Users\\benne\\Desktop\\nengi-projects\\3d\\server\\GameInstance.js_dd_13_dd_27)\n[1]     at Module._compile (module.js_dd_635_dd_30)\n[1]     at Object.Module._extensions..js (module.js_dd_646_dd_10)\n[1]     at Module.load (module.js_dd_554_dd_32)\n[1]     at tryModuleLoad (module.js_dd_497_dd_12)\n[1]     at Function.Module._load (module.js_dd_489_dd_3)\n[1]     at Module.require (module.js_dd_579_dd_17)\n[1]     at require (internal/module.js_dd_11_dd_18)\n[1]     at Object.&lt_sm_anonymous&gt_sm_ (C_dd_\\Users\\benne\\Desktop\\nengi-projects\\3d\\server\\serverMain.js_dd_1_dd_84)\n[1] [nodemon] app crashed - waiting for file changes before starting...\n[0] [BABEL] Note_dd_ The code generator has deoptimised the styling of _qt_C_dd_/Users/benne/Desktop/nengi-projects/3d/server/babylon.custom.js_qt_ as it exceeds the max of _qt_500KB_qt_._lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-05-03T22:19:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI guess your issue is that you need to also npm install oimo as it is an external dependency for Babylon.js\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBJS only contains a plugin for it but not the actual physic engine code\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-05-03T22:35:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh that makes sense.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis looks like it is working. I mean I don_t_t yet  know enough physics to confirm it_co_ but the error is gone now. I_t_ll reply and mark as approved after a real test.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-05-05T06:07:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPerhaps this should be its own topic.. but does true-ish physics even make sense for something like multiplayer first person shooter? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m the author of nengi.js which is a network engine that does relatively high concurrency (50-300 players_co_ depending on the game) and has stuff like lag compensated shots (rewind entities by the interp delay plus the player_t_s latency) and clientside prediction. I haven_t_t worked in 3D or in anything particularly realistic yet_co_ so pardon my ignorance if I_t_m missing a major element. It seems to me that the kind of movement needed for these multiplayer games is usually not very accurate physically -- players can change direction rapidly_co_ sometimes we can change direction in air_co_ etc. Also the nature of lag compensation makes it so that time isn_t_t linear. A player with 250 ms of latency and 100 ms of interpolation needs the _qt_physics_qt_ (or really the collision layer) to store a history of entity positions and then go back in time 350 ms to see if the laggy player_t_s shot would connect. I presume some of this would be doable by messing with the physics steps (instead of calling it in a loop) or perhaps by creating a temporary physics world just to test for that one lag-compensated event... however as a whole it seems like realistic physics along a linear timeline isn_t_t always going to work with advanced multiplayer features. What do you think? The desired behavior is  accomplishable via simply moving meshes around and using the regular babylon collision checks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-05-10T18:19:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt is a good question _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ And to be fair I don_t_t have an obvious answer_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_It depends a lot on what you want to achieve. but I think it can make sense for some use cases_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_In your case it will obviously require lag compensation technique and I_t_m not expert in this domain unfortunately_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]