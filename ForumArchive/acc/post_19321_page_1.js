[{"Owner":"Vousk-prod.","Date":"2015-12-17T17:16:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi everyone_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_With DK we spotted a bug in the standardMaterial when materials are using combination of bump / reflexion / roughness._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If a reflexionTexture (CubeTexture) is used_co_ the roughness param is perfect to blur it._lt_/p_gt__lt_p_gt_When a reflexionTexture and a bumpTexture are used together_co_ everything is ok._lt_/p_gt__lt_p_gt_But when we activate roughness on that combinaison of reflexion and bump - _lt_em_gt_bang_lt_/em_gt_ - awful artifacts appears._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You can see that in this playground _dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MYQJJ%2371_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MYQJJ#71_lt_/a_gt__lt_/p_gt__lt_p_gt_(comment / uncomment lines 43_co_ 44)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It_t_s a bit tricky to debug because the shaders calculations seem correct. Could other eyes dive into it and help us spot the culprit function ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2015-12-17T18:06:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The more I observe this_co_ the more I think it looks like the bump texture become too much sensitive to image compression artifacts when roughness is activated_co_ making the speculars produced by reflexion covered with _qt_too high value_qt_ spots._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The bump texture used here is a png but if we check it deeply enough in photoshop_co_ we can see a (very very) little bit of compression artifacts_co_ and those area can correspond to the ugly dots in the PG._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2015-12-17T19:28:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_i think replace bump map with normal map in this case not correct computed new normal ._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_thats why you need normal map _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2015-12-17T19:30:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I don_t_t get what you mean_co_ the texture used for the bump is a normal map..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2015-12-17T20:51:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Other strange fact_co_ on the sphere_co_ with no bump_co_ only reflection texture and roughness _dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MYQJJ%2372_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MYQJJ#72_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-12-17T20:55:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_These are seams.A known issue with WebGL as we cannot use GL_SEAMLESS_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2015-12-17T21:05:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You mean _qt_seams_qt_ for the problem on the sphere ?_lt_/p_gt__lt_p_gt_Yes but why the higher the roughness value the harder those seams are visible ? If we totally disable roughness_co_ no seams are visible at all._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2015-12-18T02:07:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ create bump with normal map but not like your pic_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_you can make from here and dont change any thing_lt_/p_gt__lt_p_gt_ _lt_a href_eq__qt_http_dd_//cpetry.github.io/NormalMap-Online/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//cpetry.github.io/NormalMap-Online/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//185.88.152.218/pub/preview#23_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//185.88.152.218/pub/preview#23_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ vec3 newNrm  _eq_ vec3(normalize(normal-(normalize(  nrmTextureColor  )*2.0-1.)*-0.5))_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_it work fine_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_only reflect _dd_  _lt_a href_eq__qt_http_dd_//185.88.152.218/pub/preview#10209_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//185.88.152.218/pub/preview#10209_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-12-18T07:55:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_impressive !_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2015-12-18T13:12:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_109592_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_19321_qt_ data-ipsquote-username_eq__qt_NasimiAsl_qt_ data-cite_eq__qt_NasimiAsl_qt_ data-ipsquote-timestamp_eq__qt_1450404445_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_ create bump with normal map but not like your pic_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_you can make from here and dont change any thing_lt_/p_gt__lt_p_gt_ _lt_a href_eq__qt_http_dd_//cpetry.github.io/NormalMap-Online/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//cpetry.github.io/NormalMap-Online/_lt_/a_gt__lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks for the help but my pic is already a _qt_real_qt_ normal map._lt_/p_gt__lt_p_gt_In the bump slot of the first cube only - on the left -_co_ the second cube uses a classical black and white pic as bump data_co_ that was on purpose_co_ to check if the bug is or not related to actual normal map information (but it seems not)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I already know the online tool you mentionned_co_ usually I use SSBumpGenerator (or sometimes the good old fellow CrazyBump) to generate my normal maps but this one is nice also (just a little lack of params to my taste)._lt_/p_gt__lt_p_gt_However_co_ to check you proposal_co_ I_t_ve switched my normal map in the PG with the default normal map created with this online tool._lt_/p_gt__lt_p_gt_And the result is exactly the same _dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MYQJJ%2373_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MYQJJ#73_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Here we can check the pic exported by the online tool and see that it has some noise in it (no problem_co_ that_t_s often required_co_ many material simulations need some noise in the bump). We can then clearly see that this noise acts logically when no roughness_co_ and acts strangely when roughness activated._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_To do more checks_co_ I exported an other normal map with this tool_co_ from a very clean starting pic and adjusting the blur/sharp param to avoid unwanted additional noise _dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MYQJJ%2374_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MYQJJ#74_lt_/a_gt__lt_/p_gt__lt_p_gt_Same problem (in fact_co_ we can even better see it_co_ just go near the different sides of the cube and look at a sharp angle)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The artifacts are not due to my previous normal pic used_co_ it is related to the way the calculations are done when roughness is activated._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-12-18T16:25:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_For the bump issue_co_ this is one thing I cannot fix so far because I have no fraking idea what is the root cause _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Seams appears when glossiness is on because it forces the shader to use different mipmap levels which introduce the _qt_connection_qt_ issue between cubemap faces_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2015-12-18T16:35:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok that make sense for the seams._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Yep I know for the bump issue_co_ that_t_s why I_t_ve been calling for some assistance in the forum._lt_/p_gt__lt_p_gt_(Come one boys !! DK has no clue_co_ it is a unique occasion for someone to outperform god himself_co_ don_t_t miss that_co_ it_t_s the chance of a lifetime ! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt_ _dd_lol_dd_ _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt_ )_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]