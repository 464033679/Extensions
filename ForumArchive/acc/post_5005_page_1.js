[{"Owner":"AndyBeaulieu","Date":"2014-03-21T16:20:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_OK_co_ so this is somewhat related to _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/3736-babylonboneprototypesetabsoluteposition/_qt__gt_this previous thread_lt_/a_gt_ which I was going to give up on_co_ but my stubbornness brought me back to it _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I am trying to get a rag doll working and here is a lame jsfiddle of where I am at_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p style_eq__qt_margin-left_dd_40px_sm__qt__gt__lt_a href_eq__qt_http_dd_//jsfiddle.net/andybeaulieu/9Ffv5/42/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/andybeaulieu/9Ffv5/42/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you go there and _lt_u_gt__lt_strong_gt_click the button_lt_/strong_gt__lt_/u_gt_ at the top_co_ you will see that_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_ul_gt__lt_li_gt_the skeleton of the guy mesh is copied to a series of box meshes on the left._lt_br_gt_ _lt_/li_gt__lt_li_gt_physics is added to the _qt_arm copies_qt_ using box imposters and joints_lt_br_gt_ _lt_/li_gt__lt_li_gt_I am trying to apply the same position and rotation for the _qt_arm copies_qt_ on the left to the equivalent skeleton bones on the right_co_ thus creating a rag doll effect._lt_/li_gt__lt_/ul_gt__lt_p_gt_As you can see_co_ I have the POSITION of the bones being copied ok_co_ using a Translation. _lt_u_gt__lt_strong_gt_But I cannot get the Rotation to work_lt_/strong_gt__lt_/u_gt__co_ and the guy_t_s arms are all bent wrong  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wacko.png_qt_ alt_eq__qt__dd_wacko_dd__qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Near the top of the code_co_ at line 58_co_ is where I need help I think - I have the starting Quaternion of the bone mesh_co_ and the current Quaternion_co_ and I want to apply the difference in those to the bone matrix. Because this causes some really bizzarre rotations and problems_co_ I have the code to do that commented out. What am I missing here to do this rotation?_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_            // ********************            //                 // THIS IS WHERE I NEED HELP!            // Apply the difference in Rotation between the Start Mesh Rotation            // and the current Rotation to the bone            //            // ********************            // rotation TEST ONLY            if (boneMeshParent) {                var matrixRotationStart _eq_ new BABYLON.Matrix()_sm_                boneMesh.saveStartRotationQuaternion.toRotationMatrix(matrixRotationStart)_sm_                var matrixRotationCurrent _eq_ new BABYLON.Matrix()_sm_                boneMesh.rotationQuaternion.toRotationMatrix(matrixRotationCurrent)_sm_                // I must have this matrix multiply out of order? I dunno                //matrixRotationStart.invert()_sm_                //var matrixRotation _eq_ matrixRotationStart.multiply(matrixRotationCurrent)_sm_                //boneMatrix _eq_ boneMatrix.multiply(matrixRotation)_sm_            }_lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"AndyBeaulieu","Date":"2014-03-22T13:55:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Just to be a bit more clear on this - if you run the jsfiddle here - _lt_a href_eq__qt_http_dd_//jsfiddle.net/andybeaulieu/9Ffv5/42/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/andybeaulieu/9Ffv5/42/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You will see the issue I have_co_ circled in red below - I need to rotate the bones in the arms equal to the rotation of the bone meshes to the left.  My thought is to use the difference in the rotation quaternions at the rest position and the current position_co_ but that doesn_t_t work. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_By the way_co_ I think if I can get past this rotation issue_co_ I can create a generic rag doll helper for Babylon_co_ which would very cool - basically you could just pass in a mesh with a skeleton_co_ and have a pretty good rag doll automatically generated from it._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//www.andybeaulieu.com/downloads/ragdollweirdness.png_qt_ alt_eq__qt_ragdollweirdness.png_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-03-24T17:10:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Sounds more than promising!!!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Had you have a chance to check how the bones are computed and transmitted to the shaders? If you think we could do thinks differently to accommodate your needs_co_ I will be happy to fix the code!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"AlbertoBonn","Date":"2014-03-25T15:41:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_This demo is nice for me! But I think you not align the z-axle (or y if when u think in babylon.js coordinates) with the parent element_lt_br_gt_Im not shure_co_ but this problem I know from my first blender bone studies. Maybe this video will clear some questions. Its Blender_co_ but the concept is the same_lt_br_gt__lt_br_gt__lt_a href_eq__qt_http_dd_//www.blenderguru.com/videos/introduction-to-rigging/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.blenderguru.com/videos/introduction-to-rigging/_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]