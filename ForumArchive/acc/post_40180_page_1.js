[{"Owner":"royibernthal","Date":"2018-09-22T16:21:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDo Animatables take into account the current frame rate? Specifically when used for animating skeletons via Scene/beginAnimation().\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s assume_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbjs renders at 60 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe current fps on a weak machine is 30 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI started an animation with a speedRatio of 1\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tGiven that frame rate (executing at 50% of ideal fps)_co_ is the speedRatio compensated in any way under the hood to 2 instead of 1? Or do I need to compensate for it manually?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I need to compensate for it manually_co_ is there a dynamic way to base the speedRatio on the current fps?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor instance_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s say I started an animation in an infinite loop while the fps was 60. After a while it became 30 - would I have to stop the animatable and create a new one at speedRatio * 2?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn other words_co_ would I have to recreate an animatable in order to have an updated speedRatio that takes into account the current fps?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-22T19:06:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tA couple of quotes from _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/features/animations_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/features/animations_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tInstead of giving the time for each frame to be displayed_co_ in BabylonJS the number of frames per second in an animation is given. This should not be confused with the rendering speed of a scene_co_ also measured in frames per second. The animation frames per second is specified in an animation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tframes per second - number_co_ the number of animation frames per second (_lt_strong_gt_independent of the scene rendering frames per second_lt_/strong_gt_)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWould have to check the following statement but I think I am correct.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe speedRatio is like running a video at normal speed (1) or in slow mo (0.5) or fast forward (4).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-09-22T19:56:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay so I understand the animation fps is not dependent on scene rendering fps.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut when there is lag in scene rendering_co_ it means the device is having a hard time to calculate stuff_co_ therefore doesn_t_t it indirectly affect the animation fps as well? (due to device lag rather than being directly tied to scene fps)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe most important question is - would I need to compensate in animation speed for lag on device? Or would it really be synced perfectly with time regardless of lag on device?\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti.e. would time become subjective to the device_t_s lag or does it always remain objectively accurate? (in the case of animations of course)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-09-22T21:23:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes_co_ when FPS slows down then animation FPS is also affected - as they are the same.  Animations are done as part of render loop.  If you were to write your own smooth animation irrespective of frame rate_co_ you would take the amount of time between the frames (delay) to determine how to proceed with the animation_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tdelta calculation_dd__lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/6a359893cba45ba93de744027370c54910fac5aa/src/babylon.scene.ts#L2602_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/6a359893cba45ba93de744027370c54910fac5aa/src/babylon.scene.ts#L2602_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tanimation next frame calculation_dd__lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Animations/babylon.animatable.ts#L344_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Animations/babylon.animatable.ts#L344_lt_/a_gt__lt_br /_gt_\n\tIf you were writing your own simple animation then you could just use engine.getDeltaTime()_co_ but animations in Babylon have a lot more going on (options_co_ pause_co_ weights_co_ frame sets_co_ easing effects_co_ etc.).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you are using physics then you can notice slower devices behave differently - the timeStep can help there_co_ but looks like you are just on animations.  Also_co_ if you are doing collisions with less FPS then there are differences as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-09-22T23:02:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCan you help me understand why this line doesn_t_t take care of exactly that issue? It takes into account the difference in time between now and the previous time things were animated_co_ doesn_t_t it?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/6a359893cba45ba93de744027370c54910fac5aa/src/babylon.scene.ts#L2602_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/6a359893cba45ba93de744027370c54910fac5aa/src/babylon.scene.ts#L2602_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow_t_d you best approach compensating for low FPS in animation while still using Babylon_t_s animations? (without creating my own animations solution from scratch)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-09-23T04:22:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_229085_qt_ data-ipsquote-contentid_eq__qt_40180_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1537657337_qt_ data-ipsquote-userid_eq__qt_8420_qt_ data-ipsquote-username_eq__qt_royibernthal_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t5 hours ago_co_ royibernthal said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tIt takes into account the difference in time between now and the previous time things were animated_co_ doesn_t_t it?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYes_co_ and that_t_s what makes the animation work well and not need to compensate for different FPS rates! In other words_co_ if the animation knows how much to move in 1 second then only the duration of time is important_co_ not the frame rate.  If your frame rate is twice as fast_co_ you will move 1/2 the distance on each render.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-23T10:09:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_229084_qt_ data-ipsquote-contentid_eq__qt_40180_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1537651435_qt_ data-ipsquote-userid_eq__qt_25365_qt_ data-ipsquote-username_eq__qt_brianzinn_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t12 hours ago_co_ brianzinn said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYes_co_ when FPS slows down then animation FPS is also affected - as they are the same\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThis is not correct (and from what else you stated I don_t_t think you believe this either). In the first PG below are two boxes running in the same scene so the rendering frame rate must be the same for both. Animation for both is set with 200 animation frames running in a loop from frame 0 to frame 200. Each box has a different animation frame rate and you can see the difference so rendering FPS and animation FPS are not the same.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#9WUJN%2369_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#9WUJN#69_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is a PG with low rendering fps and a skeleton animation _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1F57V9_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1F57V_lt_/a_gt_ still pretty smooth. You can compare it with one without the cause of the slow fps. _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1F57V9%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1F57V9#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTL_sm_DR\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA change in rendering FPS does not change an animation FPS but will change how the animation is seen. In the same way that the FPS of a film can change how a car wheel is viewed_co_ at some FPS the wheel can appear stationary at others it can appear to rotate backwards_co_ the stroboscopic effect.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake an animation rendering rate of 30 fps_co_ this means that after 1 second animation frame number 30 is viewed  whatever the rendering fps. So frame 1 is shown between 0 and 1/30 or a second_co_ frame 2 between 1/30 and 2/30 of a second etc..\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake a rendering frame rate of 60 fps_co_ ie each new screen image is calculated every 1/60 of a second and so every 1/60 of a second the animation frame to show is calculated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsince 0 &lt_sm_ 1/60 &lt_sm_ 1/30 frame 1 of the animation is viewed\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 2/60 _eq_ 1/ 30 switch to frame 2\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsince 1/30 &lt_sm_ 3/60 &lt_sm_ 2/30 frame 2 of the animation is viewed\n_lt_/p_gt_\n\n_lt_p_gt_\n\tetc\n_lt_/p_gt_\n\n_lt_p_gt_\n\tafter 1 second frame 30 is viewed\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLower the rendering frame rate to 30 fps_co_ ie each new screen image is calculated every 1/30 of a second and so every 1/30 of a second the animation frame to show is calculated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfrom 0 to  &lt_sm_ 1/30  frame 1 of the animation is viewed\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 1/30  switch to frame 2\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfrom 1/30 to &lt_sm_ 2/30 frame 2 of the animation is viewed\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 2/30 switch to frame 3\n_lt_/p_gt_\n\n_lt_p_gt_\n\tetc\n_lt_/p_gt_\n\n_lt_p_gt_\n\tafter 1 second frame 30 is viewed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow take a low rendering frame rate of 5 fps_co_  ie each new screen image is calculated every 1/5 of a second and so every 1/5 of a second the animation frame to show is calculated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfrom 0 to &lt_sm_1/5 frame 1 of the animation is shown\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 1/5  _eq_ 6/30 switch to frame 6 of the animation (frames 2 to 5 are skipped)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 2/5 _eq_ 12/30 switch to frame 12 (skip 7 to 11 frames)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tafter 1 second _eq_ 5/5 _eq_ 30/30 switch to frame 30\n_lt_/p_gt_\n\n_lt_p_gt_\n\tafter 1 second frame 30 is viewed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor some rendering fps frame 30 will be skipped_co_ eg rendering rate of 7 frps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 1/7  _eq_ 4.285/30 switch to frame 4 (skip 1_co_ 2_co_ 3)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 2/7 _eq_ 8.57/30 switch to frame 8 (skip 5_co_ 6_co_ 7)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tat 7/7 _eq_ 30/30 switch to frame 30 \n_lt_/p_gt_\n\n_lt_p_gt_\n\tafter 1 second frame 30 is viewed\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo for low rendering fps frames can be skipped perhaps making the animation less than smooth.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-09-23T13:46:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_229098_qt_ data-ipsquote-contentid_eq__qt_40180_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1537697346_qt_ data-ipsquote-userid_eq__qt_14282_qt_ data-ipsquote-username_eq__qt_JohnK_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ JohnK said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tThis is not correct (and from what else you stated I don_t_t think you believe this either)._lt_span_gt_﻿_lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThanks for clarifying and adding the important distinction (and PG) between rendering FPS and animation frame rate.  I was just thinking about rendering FPS as the question was in terms of slower devices _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-09-23T13:49:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLongest TL_sm_DR I_t_ve seen in my life _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Thanks for the explanation_co_ I think I get the picture._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-24T16:08:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTLDR_dd_ If your animation is supposed to last 1s_co_ it will last 1s whatever FPS you get _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]