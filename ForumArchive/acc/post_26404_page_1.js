[{"Owner":"pevecyan","Date":"2016-11-15T14:38:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHey guys I crated simple rigidbody vehicle using cannon js physics engin and I cannot figure it out how to prevent car flipping when making sharp turns. _lt_br /_gt_\n\tThanks for any help._lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-15T16:41:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPing our physic god_dd_ _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard_qt_ data-mentionid_eq__qt_10310_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt__gt_@RaananW_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-16T09:21:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24418-pevecyan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24418_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24418-pevecyan/_qt_ rel_eq__qt__qt__gt_@pevecyan_lt_/a_gt__co_ welcome to the forum!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Can you put a simple version of your car... into a _lt_a href_eq__qt_http_dd_//babylonjs-playground.azurewebsites.net/_qt_ rel_eq__qt_external nofollow_qt__gt_playground_lt_/a_gt_ scene?_lt_span_gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe chassis of your car has a physics _qt_body_qt__co_ sometimes called a rigid body.  Here is _lt_a href_eq__qt_http_dd_//schteppe.github.io/cannon.js/docs/classes/Body.html_qt_ rel_eq__qt_external nofollow_qt__gt_the CannonJS API for its physics body_lt_/a_gt_.  There are two properties of interest_co_ there... _lt_em_gt_angularVelocity_lt_/em_gt_ and _lt_em_gt_angularDamping._lt_/em_gt_  Raanan re-worked the BJS interface to the 3rd-party CannonJS and OimoJS engines... and added a feature called _lt_em_gt_native parameters._lt_/em_gt_  You can see some native parameters being set on a joint... in _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#14VFYX%2318_qt_ rel_eq__qt_external nofollow_qt__gt_this Oimo demo_lt_/a_gt_ - lines 87-92.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBUT_co_ I have only seen _lt_em_gt_native parameters_lt_/em_gt_ set on _lt_u_gt_joints_lt_/u_gt__co_ as seen in the above demo.  I have never seen _lt_em_gt_native parameters_lt_/em_gt_ set during a physics body declaration.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_IF_lt_/strong_gt_ setting native parameters during an impostor construction _lt_strong_gt_IS POSSIBLE AT ALL_lt_/strong_gt_... it might look like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\tvar chassisBody _eq_ chassis.setPhysicsState({\n\t\timpostor_dd_ BABYLON.PhysicsEngine.BoxImpostor_co_\n\t\tmass_dd_ 1_co_\n\t\tfriction_dd_ .01_co_\n\t\trestitution_dd_ .1_co_\n\n\t\tnativeParams_dd_ {\n    \t\t     angularDamping_dd_ 0.01_co_\n\t\t}\n\t})_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_See _qt_Update_qt_ below_lt_/strong_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would say... try increasing the angularDamping value.  Although I have not researched that property name_co_ it MIGHT mean... _qt_resistance to rotation_qt_.  Rotation is what is happening to your car chassis... which allows it to flip.  So_co_ increase the damping_co_ and the chassis might resist rollover.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother idea_dd_  Inside the render loop of your scene_co_ continuously _qt_watch_qt_ or monitor the chassis physics body ._lt_em_gt_angularVelocity.  _lt_/em_gt_Adjust as necessary.  In fact_co_ you may wish to simply set the chassisBody ._lt_em_gt_angularVelocity_lt_/em_gt_ to vec3  0_co_0_co_0... on every frame (every render-loop run).  But this might kill any realistic chassis leaning. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Note_dd__lt_/strong_gt_  You MIGHT need to create a _lt_a href_eq__qt_http_dd_//schteppe.github.io/cannon.js/docs/classes/Vec3.html_qt_ rel_eq__qt_external nofollow_qt__gt_Cannon-based vector3_lt_/a_gt__co_ using THAT to set angularVelocity_co_ and NOT use a BABYLON.Vector3.  Hope this helps.  Raanan may visit soon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Update_dd_ _lt_/strong_gt_I finally DID see some _qt__lt_em_gt_native options_qt_ _lt_/em_gt_set in a non-joint impostor constructor... in _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1BHF6C%2320_qt_ rel_eq__qt_external nofollow_qt__gt_lines 68 and 70 here_lt_/a_gt_.  Notice they are called _lt_em_gt_nativeOptions_lt_/em_gt_ and _lt_strong_gt_not_lt_/strong_gt_ _lt_em_gt_nativeParams_lt_/em_gt_.  Interesting!  Our new physics interface has SO MUCH POWER... it_t_s just great!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-11-17T10:04:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh_co_ hi!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYour PM actually forced me back to the forum (calling me Jesus did the trick. I have the beard_co_ but even after trying really hard_co_ I couldn_t_t convert water to wine.).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs I said in my PM answer_co_ this is very use-case dependent. Adding more mass_co_ especially to the wheels_co_ usually does the trick_co_ but it might not be the behavior you are looking for.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA demo would be awesome _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"pevecyan","Date":"2016-11-17T11:49:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\there is  _lt_a href_eq__qt_http_dd_//babylonjs-playground.azurewebsites.net/#19R0VL%230_qt_ rel_eq__qt_external nofollow_qt__gt_Playground_lt_/a_gt_ and thanks for all the help_co_ I tried few things_co_ some of the work but car acts weird._lt_br /_gt_\n\tLooks like higher chassis mass fix problem with rather good driving feel\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-11-17T12:03:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthis playround is a demo I made a long time ago and that was modified so many times i can_t_t really follow up.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ in this case - making the car wider_co_ adding mass and lowering the amount of force applied to the wheels will make your car never flip.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-17T13:14:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tJust for fun_co_ I tried the nativeOptions { angularDamping_dd_ 1 } in line 41/42 of _lt_a href_eq__qt_http_dd_//babylonjs-playground.azurewebsites.net/#19R0VL%231_qt_ rel_eq__qt_external nofollow_qt__gt_this car demo_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works fine!  Car will not tip over!  It also won_t_t steer.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWe need angularDamping ONLY on a single axis_co_ probably Z.  Not gonna do_co_ unless we do it manually_co_ inside the render loop.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSpeaking of which_dd_  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#19R0VL%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#19R0VL#2_lt_/a_gt_   \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn that PG_co_ lines 194-198_co_ I tried to constantly force the angularVelocity.z to 0.  That doesn_t_t work_co_ either.  But I should probably be using quaternions... as _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/Using_The_Physics_Engine#angular-velocity_qt_ rel_eq__qt_external nofollow_qt__gt_described in our plugin docs_lt_/a_gt_.  I am not yet sure HOW to null-out the Z-only value of a quaternion_co_ though.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have no more demented ideas for this one.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  (thank goodness)  (Wingnut asks Jesus for ID)  heh\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]