[{"Owner":"MarianG","Date":"2018-11-09T10:41:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi._lt_br /_gt_\n\tI_t_m playing a little bit with SPS_co_ and I_t_m try to check which solution is better for my next project_co_ SPS_co_ instances_co_ or in the worst case clone._lt_br /_gt_\n\tThe scenario is simple_dd_ Have a few objects with or without animation_co_ on click on one begin new animation on it._lt_br /_gt_\n\tSo because of this I_t_m haveing a few questions related to SPS._lt_br /_gt_\n\t_lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#C48VK3%231_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d6594_sm_font-size_dd_14px_sm__qt__gt_https_dd_//playground.babylonjs.com/#C48VK3#1_lt_/a_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_ this is what I_t_m haveing till now._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_1. if I can add a animation to the sps mesh? Now they are moveing there but it would be nice if i can attach an animation to them_lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_2. Related to optimizations_co_ I think I added all what was necesarelly. If you think I miss something._lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_3. The material on SPS mesh seems to be different from material on real model_co_ you can see this on click on a mesh_co_ when it is replaced by the original. Can I avoid this in some way?_lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_4. If I_t_m adding an environment _lt_/span_gt__lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#C48VK3%232_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d6594_sm_font-size_dd_14px_sm__qt__gt_https_dd_//playground.babylonjs.com/#C48VK3#2_lt_/a_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__co_ line 15_co_ click function broke. I mean even if I click random in scene it say I_t_m clicking an object from SPS _lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_5. If I_t_m adding color to SPS meshes _lt_/span_gt__lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#C48VK3%233_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d6594_sm_font-size_dd_14px_sm__qt__gt_https_dd_//playground.babylonjs.com/#C48VK3#3_lt_/a_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__co_ this color is added to vertex? I know that for instances_co_ all instance need to have the same material_co_ but I_t_m thinking to try this trick from SPS_co_ modify directly color of instance._lt_/span_gt__lt_br /_gt_\n\t_lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_And the last but maybe most important_lt_span_gt_ _lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ style_eq__qt_border-style_dd_none_sm_vertical-align_dd_middle_sm__qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ What do you think is SPS a solution for this scenario?_lt_/span_gt__lt_br /_gt_\n\tI_t_m going to create similar playground with instance _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tThank you for your time _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-11-09T13:13:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi MG!   I_t_m not a pro on SPS_co_ but I try to show something interesting.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#2FPT1A%23229_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#2FPT1A#229_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I said... _qt_All 4 boxes are part of ONE mesh_qt_... would that surprise you?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe only reason this scene _qt_appears_qt_ to have 4 mesh... is that certain _qt_indices_qt_ were not drawn/coded into the SPS one-mesh vertexData object.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tClick on some boxes and watch console.  Notice the very high values on the tan and blue boxes. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ each of the particles... each of the boxes... is NOT really a (individual) mesh.  Thus_co_ it will not accept many of the _qt_features_qt_ that a standard mesh would.  Particles... are special things... primarily made for high-performance flying. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tEach flight-STEP... is moving (transforming) the  _lt_u_gt_vertices_lt_/u_gt_ used for _lt_u_gt_one_lt_/u_gt_ _qt_shape_qt_.  A different particle shape will be flying in some OTHER direction_co_ and its vertices will need DIFFERENT transforms (so it can stay on ITS trajectory).  Still... only one mesh for entire SPS system_co_ but you can create more than one SPS_co_ as needed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis one-mesh system... is why _qt_depth-sorting_qt_ can be troublesome for particle systems.  It is VERY difficult (impossible) to make SOME sprayed particles display BEHIND something_co_ and some displayed IN-FRONT-OF something.  The particle system is ONE mesh_co_ and it must be either ahead-of_co_ or behind... another.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee line 35_co_ the addShape?  That is add_lt_strong_gt_Shape_lt_/strong_gt__co_ not add_lt_strong_gt_Model_lt_/strong_gt_.  Line 35 _qt_digests_qt_ (injests?) the SHAPE of the model_co_ but not the ACTUAL model.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ in line 38_co_ the MODEL is disposed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt takes some time to comprehend these odd high-performance methods.  They are different from standard mesh operations.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSO... when you make your mesh/shapes... be particles... you give-up MANY of the features found on standard mesh_co_ clones_co_ or instances.  BUT_co_ if you can _qt_work WITH_qt_ the SPS or particle system_co_ and if you know about their easily-user-over-rideable startPosition and update functions_co_ you can make them DANCE for you. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSPS and particleSystems are VERY powerful and useful_co_ but it requires that we understand the limitations_co_ and the good pay-offs that result from those limitations.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTry to think about this weird stuff.  Once a SPS system _qt_digests_qt_ the SHAPE of a mesh_co_ then you must use SPS systems/methods... to color_co_ scale_co_ or texture the particles.  In BJS_co_ both solid and standard particle systems... use this one-mesh system... for high performance.  Vrooooom!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope I_t_ve been helpful (and not wrong).   _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_   _lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-11-09T13:48:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t1 there_t_s no animation in the SPS_co_ you have to animate every particle_co_ vertex by vertex with updateVertex() if you need it\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2 - in your case_co_ instances would probably be faster than the SPS because the SPS iterates over all the particle vertices and your model seems to have a big number of vertices\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3 - the SPS only copies the UVs from the model. No idea if your model has UV2s_co_ UV3s or some PBR material.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t4 - I can_t_t see what_t_s going wrong here\n_lt_/p_gt_\n\n_lt_p_gt_\n\t5- yep_co_ these are vertexColor for each whole particle. This already works in your case_co_ rotate the cam_co_ you_t_ll see them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe instances may faster than the SPS with your high-tri model\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MarianG","Date":"2018-11-09T16:15:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi._lt_br /_gt_\n\tYes _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt__co_ was helpfull. Thank you._lt_br /_gt_\n\tI only try to test SPS limitations_co_ and see what is the best for my scenario._lt_br /_gt_\n\t_lt_br /_gt_\n\tThank you _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_ for answer._lt_br /_gt_\n\tMore clear now _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ _lt_br /_gt_\n\t_lt_br /_gt_\n\tI tried with instances_co_ but it seems to have some problems with glb files. With babylon file it is working but with glb didn_t_t get it_co_ but still trying._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]