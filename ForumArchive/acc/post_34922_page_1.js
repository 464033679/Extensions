[{"Owner":"MackeyK24","Date":"2018-01-08T03:33:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ ... I know you said you dont wanna add any code to the engine specifically for my toolkit.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut the last changes you made to metadata cloning is KILLING ME BRO... specifically the like in constructor babylon.mesh.ts_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.metadata _eq_ source.metadata_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThis is line is really setting a _qt_POINTER_qt_ so to speak on the clone to the original metadata instead of making a COPY of the metadata.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI had tons of code for _qt_Prefabs_qt_ or mesh cloning where I would do something like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_mesh.metadata.clone _eq_ () _eq_&gt_sm_ { return BABYLON.SceneManager.CloneMetadata(mesh.metadata)_sm_ }_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut somehow via the cloning framework_co_ if you set_dd_ this.metadata _eq_ source.metadata ... that screws the whole thing up for me and a (almost) year worth of METADATA code I was using before that lone of code showed up.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan we at least add some kind of switch so those us who need CUSTOM METADATA CLONING ... not just simply setting a _qt_REFERENCE_qt_ to the the original metadata in the clone.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSomething like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (!BABYLON.Mesh.CUSTOM_METADATA_CLONING) {\n    this.metadata _eq_ source.metadata_sm_\n}\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThen I could set that STATIC switch to true to use custom metadata cloning like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_// Setup metadata cloning\nmesh.metadata.clone _eq_ () _eq_&gt_sm_ { return BABYLON.SceneManager.CloneMetadata(mesh.metadata)_sm_ }_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIf not_co_ then I will have to use Custom Builds of babylon.js in the Toolkit... Which not be a bad ideal so I can keep the toolkit working to a Custom Build of the current stable release... What do you think... I just thought I would ask _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-01-08T22:35:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m against custom builds mostly for an officially hosted toolkit like yours _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWhat if I do this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code class_eq__qt_language-javascript_qt__gt_if (mesh.metadata.clone) {\n   this.metadata _eq_ mesh.metadata.clone()_sm_\n} else {\n   this.metadata _eq_ mesh.metadata_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-01-09T00:57:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_200680_qt_ data-ipsquote-contentid_eq__qt_34922_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1515450931_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI_t_m against custom builds mostly for an officially hosted toolkit like yours _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tWhat if I do this_dd_\n\t\t_lt_/p_gt_\n\n\t\t_lt_pre_gt_\n\n_lt_code_gt__lt_span_gt_if_lt_/span_gt_ (mesh.metadata.clone) {\n   _lt_span_gt_this_lt_/span_gt_.metadata _eq_ mesh.metadata.clone()_sm_\n} _lt_span_gt_else_lt_/span_gt_ {\n   _lt_span_gt_this_lt_/span_gt_.metadata _eq_ mesh.metadata_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n\t\t_lt_p_gt_\n\t\t\t?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis should work... trying is now in a custom build_dd_ in the babylon.mesh.ts constructor\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_// Metadata\nif (source.metadata.clone) {\n   this.metadata _eq_ source.metadata.clone()_sm_\n} else {\n   this.metadata _eq_ source.metadata_sm_\n}        \n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-01-09T01:19:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYo _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ ... it turns out we need to EXCLUDE metadata from Tools.DeepCopy if we are going to set this.metadata at all (even without the mod)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tso this works perfect_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_// Deep copy\nTools.DeepCopy(source_co_ this_co_ [_qt_name_qt__co_ _qt_material_qt__co_ _qt_skeleton_qt__co_ _qt_instances_qt__co_ _qt_parent_qt__co_ _qt_uniqueId_qt__co_ _qt_source_qt__co_ _qt_metadata_qt_]_co_ [_qt__poseMatrix_qt__co_ _qt__source_qt_])_sm_\n\n// Metadata\nif (source.metadata.clone) {\n    this.metadata _eq_ source.metadata.clone()_sm_\n} else {\n    this.metadata _eq_ source.metadata_sm_\n}             _lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am going to PR this... Please ACCEPT _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-01-09T04:35:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ I_t_m getting _qt_TypeError_dd_ Cannot read property _t_clone_t_ of null_qt_.  source.metadata is null.  I_t_m using CSG toMesh()._lt_br /_gt_\n\tShould it not be_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (source.metadata &amp_sm_&amp_sm_ source.metadata.clone) {\n    this.metadata _eq_ source.metadata.clone()_sm_\n} else {\n    this.metadata _eq_ source.metadata_sm_\n} _lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tedit_dd_ can confirm my game loads with that change.  have done a PR.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2018-01-09T06:47:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_200736_qt_ data-ipsquote-contentid_eq__qt_34922_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1515472526_qt_ data-ipsquote-userid_eq__qt_25365_qt_ data-ipsquote-username_eq__qt_brianzinn_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ brianzinn said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ I_t_m getting _qt_TypeError_dd_ Cannot read property _t_clone_t_ of null_qt_.  source.metadata is null.  I_t_m using CSG toMesh()._lt_br /_gt_\n\t\t\tShould it not be_dd_\n\t\t_lt_/p_gt_\n\n\t\t_lt_pre_gt_\n\n_lt_code_gt__lt_span_gt_if_lt_/span_gt_ (source.metadata &amp_sm_&amp_sm_ source.metadata.clone) {\n    _lt_span_gt_this_lt_/span_gt_.metadata _eq_ source.metadata.clone()_sm_\n} _lt_span_gt_else_lt_/span_gt_ {\n    _lt_span_gt_this_lt_/span_gt_.metadata _eq_ source.metadata_sm_\n} _lt_/code_gt__lt_/pre_gt_\n\n\t\t_lt_p_gt_\n\t\t\tedit_dd_ can confirm my game loads with that change.  have done a PR.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tGood Catch _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-01-09T07:00:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_200743_qt_ data-ipsquote-contentid_eq__qt_34922_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1515480444_qt_ data-ipsquote-userid_eq__qt_24012_qt_ data-ipsquote-username_eq__qt_MackeyK24_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t10 minutes ago_co_ MackeyK24 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tGood Catch\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThanks - should work as long as nobody puts a clone property on the metadata!  I normally check for typeof(source.metadata.clone) _eq__eq__eq_ _t_function_t__co_ but don_t_t see that used much in the code _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]