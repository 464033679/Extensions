[{"Owner":"adwilson","Date":"2014-08-23T20:28:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello Babylon.js forum!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m developing a coin pusher type game as a foray into 3D game dev. But I_t_m stumped on something._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I put an animation on the pusher_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var sliderBox _eq_ BABYLON.Mesh.CreateBox(_qt_slider_box_qt__co_ 2_co_ scene)_sm_sliderBox.scaling _eq_ new BABYLON.Vector3(2.5_co_ 0.2_co_ 1.5)_sm_var sliderZPos _eq_ { \tallIn_dd_ backWallBox.position.z_co_ allOut_dd_ \tbackWallBox.position.z - sliderBox.scaling.z * 2 }_sm_ sliderBox.position _eq_ new BABYLON.Vector3(0_co_ 0.2_co_ sliderZPos.allIn)_sm_ // Slider animation var sliderAnimation _eq_ new BABYLON.Animation(_qt_slider_animation_qt__co_ _qt_position.z_qt__co_ 60_co_ BABYLON.Animation.ANIMATIONTYPE_FLOAT_co_ BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE)_sm_ var keys _eq_ [ \t{ frame_dd_ 0_co_ value_dd_ sliderZPos.allIn }_co_ \t{ frame_dd_ 90_co_ value_dd_ sliderZPos.allOut }_co_ \t{ frame_dd_ 180_co_ value_dd_ sliderZPos.allIn }_co_ ]_sm_ sliderAnimation.setKeys(keys)_sm_ sliderBox.animations.push(sliderAnimation)_sm_ scene.beginAnimation(sliderBox_co_ 0_co_ 180_co_ true_co_ 1)_sm_ _lt_/pre_gt__lt_p_gt_This works great_co_ but I need to enable physics on it and this disables the animation. Physics code is simply..._lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_sliderBox.setPhysicsState({\timpostor_dd_ BABYLON.PhysicsEngine.BoxImpostor_co_\tmove_dd_ false})_sm__lt_/pre_gt__lt_p_gt_I do not understand 3D development enough to figure this one out_co_ I_t_ve done Google searches but haven_t_t found a solution. How can I emulate what an animation would do with physics? Or am I doing something wrong with regards the animation and/or physics code._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Extra info_dd_ the rest of the code is standard stuff and I_t_m using oimo.js for physics._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Any help is greatly appreicated. Thanks_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2014-08-25T17:51:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi adwilson!  Welcome to the forum_co_ good to have you.  And may I say_co_ what an interesting and cool project idea!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You might want to look at_dd_  _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/issues/209_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/issues/209_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I am no expert_co_ but another user apparently has had your same troubles.  Mesh with physicsState set... don_t_t like to be moved in standard ways.  They require applyImpulse.  (This may be why your standard animation appears to stop when the pusher bar has its physicsState set)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_And if you use applyImpulse to slide the pusher bar_co_ you are going to run into the same problem as the user in that post above.  How do you know when the bar has moved to ALL-IN or to ALL-OUT?  How do you measure?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Here_t_s an idea... but not necessarily a good idea.  Leave Babylon.Animation alone_co_ and make your own pusher bar animation system.  Do this by doing repeated little applyImpulsings... in the renderLoop (or registerBeforeRender) of the scene... UNTIL... the pusher bar intersectsMesh with a pusher bar _t_stopper_t_.  Put pusher bar _t_stoppers_t_ (.visibility _eq_ 0 is probably OK) at the ALL-IN and ALL-OUT stopping locations.  These stoppers might be simple tiny boxes that _t_watch_t_ for intersectMesh events with the pusher bar. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_When its time to move the bar IN_co_ start doing little repeated applyImpulsings to the pusher bar... until the IN-stopper... intersectsMesh with the pusher bar.  Then quit those impulsings_co_ and start doing little repeated applyImpulsings (against the pusher bar) in the _lt_u_gt_opposite_lt_/u_gt_ direction_co_ until the ALL-OUT stopper intersects mesh with the pusher bar.  Rinse_co_ repeat.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_When I say _t_little impulsings_t_... I mean low-powered.  By repeating these low-powered impulsings_co_ you should see a smooth movement of the pusher bar_co_ in both directions._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Just an idea.  Dad72 has done recent work with collisions and moving mesh.  He might have some ideas_co_ too.  And there are many other very smart people here (far smarter than I)_co_ so we are likely to hear better ideas... from others.  Be well!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_PS_dd_  Temechon... if you_t_re reading along... _lt_a href_eq__qt_http_dd_//pixelcodr.com/tutos/oimo/oimo.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//pixelcodr.com/tutos/oimo/oimo.html_lt_/a_gt_ is _lt_u_gt_way nice_lt_/u_gt_... well done.  Adwilson_co_ this url won_t_t show you how to do applyImpulsing with oimo (impulsings are not used in Temechon_t_s tutorial)_co_ but I needed to give him an attaboy anyway.  Using oimo with Babylon.js is sort of new_co_ and information about it is a bit scarce.  Thanks for the oimo info_co_ T-doggydog!  Good stuff._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adwilson","Date":"2014-08-25T20:09:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Firstly_co_ thank you for the kind words. I feel very welcome already._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I tried setting position as well_co_ like the user on GitHub but obviously it didn_t_t work! _lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_Those ideas you suggested are definitely worth a go_co_ it_t_s the only bottleneck in my project so far. Cheers for the idea dude!  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/span_gt__lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_ _lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_While you bring the subject up I also want to you join with the attaboy for my own reasons! The whole reason I_t_m this far this quickly is because of those tutorials_co_ they_t_re fantastic! So yeah_co_ Temechon_co_ thanks for oimo and the tutorials!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2014-08-25T21:01:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hmm.  I was just thinking.  Just because we can_t_t MOVE a mesh with physicsState set... does not mean we can_t_t _t_get_t_ the current position of that mesh.  So_co_ maybe...  if (pusher.position &lt_sm_ all-in) { reverseImpulsings() }  etc etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I just wanted to remind you to check if you could getPosition of a physics object that is currently moving (from an impulsing).  Maybe you don_t_t need stoppers and intersectMesh crap.  Maybe you only need to keep checking pusher bar position_co_ and when it has gone far enough.position_co_ reverse the impulsings (direction).  *shrug* _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2014-08-26T09:15:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello there ! _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thank you for your kind words _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In Oimo_co_ there IS a way to update the position of a mesh having a physics body. I created a method called updatePhysicsBodyPosition_co_ to be used like this _dd_ _lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_floor.position.z +_eq_ 1_sm_floor.updatePhysicsBodyPosition()_sm__lt_/pre_gt__lt_p_gt_This way_co_ the physics body will be updated accordingly to the mesh position. And it works with rotations too !_lt_/p_gt__lt_p_gt_However_co_ this method won_t_t check physics interactions_co_ as it is not a movement_co_ so be careful !_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Hope this can help you with your game _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Cheers !_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_@Wingnut _dd_ Using Oimo is the same as using Cannon _dd_ same methods_co_ same objects_co_ same everything. A demo should work with Cannon and Oimo just by updating the plugin name. Everything except this method above _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adwilson","Date":"2014-08-26T16:31:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yeah I_t_ll give that a go for sure. Thanks for bringing that to my attention!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adwilson","Date":"2014-08-28T21:30:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_div_gt_Here_t_s a progress update..._lt_/div_gt__lt_br_gt__lt_div_gt_ _lt_/div_gt__lt_br_gt__lt_div_gt_@Temechon_dd_ updatePhysicsBodyPosition() let the coins drop through the pusher as you warned it probably would so that couldn_t_t help me this time_co_ but I appreciate your help none the less _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_cool.png_qt_ alt_eq__qt_B)_qt__gt_ ._lt_/div_gt__lt_br_gt__lt_div_gt_ _lt_/div_gt__lt_br_gt__lt_div_gt_@Wingnut_dd_ I tried your idea and had reasonable success_co_ testing the position wasn_t_t quite enough as the deceleration made it breach it_t_s limits_co_ so I put very heavy but very small objects in the way_co_ one at the back  and one at the front which is almost completely unobtrusive so the coins don_t_t hit it (and isn_t_t visible either). _lt_/div_gt__lt_br_gt__lt_div_gt_ _lt_/div_gt__lt_br_gt__lt_div_gt_With the ideas and knowledge I have now I_t_m going to restart the whole thing_co_ do it properly with better calculated values instead of _qt_winging_qt_ most of them (which causes the pusher to get wedged sometimes and other funky physics) and build a nicer stage and textures etc. using Blender. _lt_/div_gt__lt_br_gt__lt_div_gt_ _lt_/div_gt__lt_br_gt__lt_div_gt_Here is the demo - _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/36184617/coinpusher/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_[DEMO]_lt_/a_gt__lt_/div_gt__lt_br_gt__lt_div_gt_(No interaction on the world_co_ just drops 100 coins at random places_co_ feel free to fiddle with the pusher force though!)_lt_/div_gt__lt_br_gt__lt_div_gt_ _lt_/div_gt__lt_br_gt__lt_div_gt_This is exciting_co_ did everyone else get this buzz on their first 3D project?_lt_/div_gt__lt_br_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2014-08-28T21:48:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Very nice_co_ adwilson!  You_t_re becoming a Babylon.js expert rather quickly.  And yes_co_ I get excited when making 3D scenes...  almost every time.  But right now_co_ I_t_m kind of excited about YOUR project.  Its coooooool.  I suspect we are going to see lots of fun projects from you.  Keep on doing what you_t_re doing... and showing us your inventions and discoveries.  We love seeing them!  Party on!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_A handy thing to keep in mind is... you don_t_t need to use _t_button_t_ in your gui.  If you want more style-ability from your buttons_co_ just use a span.  Set its CSS background color (let_t_s say red)_co_ then set its border to maybe 2pt outset red...  then set its cursor_dd_ pointer... and its onclick_eq__qt_somefunction()_qt_._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You_t_ve just made a button from a span element_co_ and you get lots of CSS power to style it.  Sometimes_co_ a STANDARD button element doesn_t_t accept CSS as well as it could/should.  With span-buttons_co_ you could even use round-corners_co_ but I don_t_t know what a round-corner span element looks like... when it has an outset border.  Just some more options.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you want to get really fancy_co_ you can set its onmousedown_eq__qt_functionToChangeToInsetBorderStyle()_qt_ and onmouseup_eq__qt_functionToChangeToOutsetBorderStyle()_qt_.  That makes it look like your span-button _qt_depresses_qt_ (moves inward) when you press it.  Stupid HTML tricks.  hehe_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_@temechon - Thanks for that Oimo info_co_ good deal._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adwilson","Date":"2014-08-29T10:40:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yeah for sure! I_t_ll keep showing off anything I_t_m working on_co_ thanks for the kind words! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ve found the new(ish) &lt_sm_button&gt_sm_ tag is perfect to be honest_co_ you can have HTML inside it and style it just as well as a &lt_sm_span&gt_sm_ tag because as soon as you set a style on them they lose all their default styles and become like any other element (plus they are semantically correct and correct for accessibility_co_ but that isn_t_t too relevant for games)_co_ were you thinking of the old &lt_sm_input type_eq__qt_button_qt_&gt_sm_ tag? Because they are dated and very limited._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2014-08-29T12:50:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi adwilson!  Yes_co_ I was indeed thinking of the older input type_eq__qt_button_qt_.  (My brain often fails me these days.)  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I haven_t_t used &lt_sm_button&gt_sm_ much at all_co_ if ever.  Good to hear that it has full CSS style-ability.  I will start using &lt_sm_button&gt_sm_ instead of &lt_sm_span&gt_sm_ ... for my scene buttons.  Thanks for the correction and information on that.  _qt_semantically correct and correct for accessibility_qt_... well said and absolutely right._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]