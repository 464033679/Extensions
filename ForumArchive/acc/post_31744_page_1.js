[{"Owner":"beng128","Date":"2017-07-19T19:24:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIs it at all possible to create the bounding volumes (ie Box_co_ Capsule_co_ Sphere) for meshes_co_ in blender? I can_t_t find anything in the babylon exporter plugin. I was hope this would be a feature_co_ as it would make the process more data driven.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-07-25T18:22:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Beng.  No answers yet_co_ eh?  I_t_m going to ping _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ and _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/7026-gryff/?do_eq_hovercard_qt_ data-mentionid_eq__qt_7026_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/7026-gryff/_qt_ rel_eq__qt__qt__gt_@gryff_lt_/a_gt_ in case they want to ride-along.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst_co_ and for curious readers_co_ What IS Bounding Volume Hierarchy (BVH)?  Start _lt_a href_eq__qt_https_dd_//en.wikipedia.org/wiki/Bounding_volume_hierarchy_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_.  Then maybe _lt_a href_eq__qt_https_dd_//blender.stackexchange.com/questions/32465/what-does-static-dynamic-bvh-do_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_.   Generally speaking_co_ it is somewhat similar to octrees in that it allows some _qt_quick elimination_qt_ of large chunks of intersection/collision testing.  A complex model could be divide into_co_ for example... 5 different bounding areas_co_ each containing many many subMeshes or children bounding-areas.  For increased speed of intersection testing_co_ we can quickly test WHICH of the _qt_big 5 bounding areas_qt_ was hit by intersection.  This eliminates up-to 80% of the intersection testing_co_ because we know which 4/5ths of the entire complex model... WASN_t_T intersected.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ perhaps that 1/5th that WAS hit... is divided into 5 equal sections.  Test those 5_co_ and perhaps we can eliminate 4/5ths of THOSE_co_ as well.  With just a few intersection tests_co_ we have _qt_narrowed-it-down-to_qt_ a rather precise area that got the intersection hit.  BVH is certainly MUCH faster than iterating the entire submesh-list of the entire model_co_ one-by-one.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know what support Blender has... for BVH_co_ but it can be web-researched.  I wonder if it CAN be exported_co_ and what it looks-like when it IS exported.  It is surely a tree-structure.  A BVH tree-walker is likely _lt_u_gt_not_lt_/u_gt_ part of the current BJS framework_co_ and I_t_m not sure it ever SHOULD be.  But tree-walking is certainly a fairly common JS thing-to-do.  (Careful_co_ don_t_t confuse THIS BVH_co_ with a BVH format used for motion-capture data.)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI suspect... it all starts with an experimental mod to our exporter_co_ and learning how Blender structures its BVH_co_ if it even has them_co_ natively.  It looks like it is part of the _qt_Cycles_qt_ area_co_ so_co_ hmm... does that matter somehow? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s pretend that a Blender BVH _lt_strong_gt_can_lt_/strong_gt_ be passed into the .babylon exporter_co_ or perhaps_co_ as part of an .obj export.  Once it arrived at BJS_co_ it is going to require special handling_co_ and then a whole different way of testing for intersections.  We won_t_t be doing _qt_standard_qt_ tree-walking... for intersections.  We_t_ll be adding intersect observers that have _qt_priorities_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLikely_co_ we_t_ll check the TOP BVH sections first_co_ eliminate as many as possible.  Then check the TOP of THAT/THOSE remaining _qt_tree-limb(s)_qt_... eliminate whatever can be eliminated_co_ etc_co_ etc.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWHILE doing all of that_co_ IS that cannonball that caused the first intersection observation... continuing it_t_s high-speed flight into/through OTHER sections of the model... sections that MIGHT have been eliminated during the FIRST intersection processing?  In other words_co_ even though we eliminated some major subsections of the model during our first intersection tests_co_ those eliminated _qt_top sections_qt_ must still have active observers for MORE intersections as the cannonball travels THRU other sections of the model/BVH.  They HAVE TO keep observers active_co_ even though they were eliminated in the initial intersect check.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPhew.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI think it is a cool idea_co_ and BJS is a great way to do cool experiments with it.  I think it has a bright future_co_ and might surpass octrees.  Interesting.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ this thread got onto page 3 of Q&amp_sm_A with 0-replies_co_ so it needed bumping.  I_t_m no expert in these systems... not even close.  But I thought I_t_d rattle-on a little... what the heck.  Hopefully_co_ others will comment_co_ soon.  Cool subject.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-07-25T18:35:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tGoogle of _qt_Blender bounding volume_qt_ does not really get anything_co_ only bounding box.  If you can live with a box_co_ BJS can display one that kept in the framework.  I forgot how to turn it on.  Even if it were in Blender_co_ we are only setup to export the faces of a mesh_co_ ignoring my particle hair experiments.  Were it to be implemented_co_ it would undoubtedly be vertices without faces.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-07-25T19:14:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tJC - _lt_a href_eq__qt_https_dd_//wiki.blender.org/index.php/Dev_dd_Source/Render/Cycles/BVH_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//wiki.blender.org/index.php/Dev_dd_Source/Render/Cycles/BVH_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThey seem to be rather particular about the naming.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-07-25T20:40:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tSo the answer to your question is yes.  A BVH can be created in Blender from _lt_a href_eq__qt_https_dd_//docs.blender.org/api/blender_python_api_2_78a_release/mathutils.bvhtree.html_qt_ rel_eq__qt_external nofollow_qt__gt_python_lt_/a_gt_.  What this has to do with BJS I do not know.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-07-25T21:00:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell JC_co_ JC!  I already painted-out the scenario in my first post.  If a user can set a flag on a Blender model (export BVH if available?)... then the BVH tree for that model could import-into BJS land. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ the user can build their own intersection system that takes advantage of the potential speed increase.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe usage for BJS is obvious_co_ but not yet coded.  User could do experiments after the tree arrived.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope I_t_m not making you angry.  You are not required to answer this user.  The initial forum question is a little vague_co_ but I think we can assume that Beng wants to know if a Blender-made BVH can be brought into BJS scope.  (He mentioned the exporter.)  *shrug*  Perhaps Beng will give us more details.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2017-07-26T02:13:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt__dd_ Well Wingy my only knowledge of this kind of BVH in Blender is shown in the image below. They are used to improve render performance - and are different tor the two Blender internal render engines. A is the Blender Render Engine_co_ and B is the Cycles Render Engine. It is my understanding for A that the BVH is calculated as needed. For B_co_ again the BVH is calculated as needed but with the option to save the BVH to a cache. Note the two engines seem to use different algorithms. The file saved to the cache is not easily readable. _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo how you might export them - I hate to think.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd then of course there is 3Dmax - there are a number of render engines for it (5+?) And I have no idea how they work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow you would develop compatibility across all these options?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_07/performance1.png.7cadb1c8b94f6043a243369a662f89d6.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_14038_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_07/performance1.png.7cadb1c8b94f6043a243369a662f89d6.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_performance1.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-07-26T04:07:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey_co_ thanks Gryff.  Interesting info.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheck-out _lt_a href_eq__qt_http_dd_//raytracey.blogspot.com/2016/01/_qt_ rel_eq__qt_external nofollow_qt__gt_this_lt_/a_gt_ tutorial.   Phew.  Perhaps I understand Jeff_t_s _qt_What_t_s that got to do with BJS_qt_ -thing a bit better.  It almost looks more-targeted toward the folks at Khronos.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think I might be _qt_in over my head_qt__co_ yet again_co_ here.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]