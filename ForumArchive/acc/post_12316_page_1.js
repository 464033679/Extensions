[{"Owner":"benoit-1842","Date":"2015-02-06T16:02:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_So I will explain my situation.  I am now good with creating a scene in Blender and porting it to babylon.js in two viewports (thanx Gryff and Iceman). So right now I have a model that plays an animation created in Blender.  But now I want to create an animation directly through code (i.e moving one of my bones through code not passing by Blender).... So how works the animation of a model bone through code ?  I have seen the dude tutorial and  I still need some enlightement and my ultimate challenge it_t_s to put kinect 2 data x_co_y_co_z qx_co_qy_co_qz and qw in my bone information so it can move accordingly to the position I get from my motion capture...._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So for example this is my data for my left knee _dd_ _lt_/p_gt__lt_div_gt_        _qt_x_qt__dd_ 0.223173529_co__lt_/div_gt__lt_div_gt_        _qt_y_qt__dd_ -0.388017774_co__lt_/div_gt__lt_div_gt_        _qt_z_qt__dd_ 0.582939148_co__lt_/div_gt__lt_div_gt_        _qt_qx_qt__dd_ 0.425287217_co__lt_/div_gt__lt_div_gt_        _qt_qy_qt__dd_ 0.6508006_co__lt_/div_gt__lt_div_gt_        _qt_qz_qt__dd_ -0.478602648_co__lt_/div_gt__lt_div_gt_        _qt_qw_qt__dd_ -0.408079475_lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_div_gt_How can I implement that _qt_inside my bone _qt_ data in babylon.js........it will be fantastic !!!!_lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_div_gt_This is my model _dd__lt_a href_eq__qt_https_dd_//drive.google.com/file/d/0B_ZBy6q5jS8xOE1xNndzcWZ2d0k/view?usp_eq_sharing_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//drive.google.com/file/d/0B_ZBy6q5jS8xOE1xNndzcWZ2d0k/view?usp_eq_sharing_lt_/a_gt__lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_div_gt_ _lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Samuel Girardin","Date":"2015-02-07T15:08:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I did something with babylon that maybe could help you  _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/11918-ts-sources-character-study-demo-keyframe-animation-ragdoll/_qt__gt_http_dd_//www.html5gamedevs.com/topic/11918-ts-sources-character-study-demo-keyframe-animation-ragdoll/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It s about switching  keyframes animation character to a ragdoll physic mode. So I had to reflect ragdoll part to bones. You can have a look to my source_co_ perhaps it will help you._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My dev is very specific to the model I use_co_ but you can give it a try._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Sam_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"benoit-1842","Date":"2015-02-07T15:58:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Bonjour Samuel.....  Yesterday I have downloaded your code of your chef d_t_oeuvre !!!!  I couldn_t_t find the file(s) that was coding the *switch* of animation.... If you can point me in witch file it is_co_ it will be very cool...._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Merci_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Benoit_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Samuel Girardin","Date":"2015-02-07T16:52:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Salut_co_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It_t_s in Bundle.ts _lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_public compute(v_dd_BABYLON.Vector3 _co_ o_dd_BABYLON.Quaternion)_dd_ void {        //waarning call order here are very  important                     //  translation offset         var t_dd_ BABYLON.Vector3 _eq_ this.offset_sm_        this.helper.locallyTranslate(new BABYLON.Vector3(-t.x_co_ -t.y_co_ -t.z))_sm_                       //compute matrix and update skeleton         var world_dd_ BABYLON.Matrix _eq_ this.helper.getWorldMatrix()_sm_        world.invert()_sm_        var m _eq_ this.bone.getWorldMatrix().multiply(world)_sm_        // waitt 1 one frame before update         if (!this.wait) {            this.bone.update(m)_sm_        }                    // this f..... rotation quaternion offset fix        var qinvert _eq_ BABYLON.Quaternion.Inverse(this.qset)_sm_        var r _eq_ this.mesh.rotationQuaternion_sm_                 this.helper.rotationQuaternion _eq_ r.multiply(qinvert)_sm_          var t _eq_ new BABYLON.Vector3(this.mesh.position.x-v.x_co_ this.mesh.position.y-v.y_co_ this.mesh.position.z-v.z)        this.helper.position _eq_ t_sm_          this.wait _eq_ false_sm_    }_lt_/pre_gt__lt_p_gt_As I said you it_t_s very specific to my model_co_ and I need to deal with  some strange 3dsmax exporter behavior (the new one maybe fix that). It_t_s very important to do not have hierarchy between your bones when you export you model. Hope this help._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"benoit-1842","Date":"2015-02-07T17:28:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_thank you....  what do you mean by no hierarchy between bones_co_ that there_t_s no parenting at all_co_ each bone are like independant ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Merci_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Benoit_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Samuel Girardin","Date":"2015-02-07T17:36:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Exactly_co_ I use this trick because_co_ with hierarchy each bone is relative to his parent. I was no very comfortable with heavy matrix computing. With independant bones_co_ position and rotation are stored in world unit. So it was not a problem for keyframe mode  and for the ragdoll mode_co_ the hierarchy is giving by the ragdoll boxes._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"benoit-1842","Date":"2015-02-12T13:58:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_So is it possible if I use data from a kinect has a json file to update my model everytime....  Because that_t_s the goal_co_ I have a model and I want to be able to change the animation of my model with the info of a json file...._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Merci_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Benoit_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Samuel Girardin","Date":"2015-02-12T14:05:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Sure ! If you can update you data in real time and  pass them to the  bones. That_t_s what I m doing reflecting oimo mesh pos &amp_sm_ rot  to my bones model (here oimo mesh are you kinect data)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"benoit-1842","Date":"2015-02-12T14:54:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Cool.....  Can you give me or point me a little step by step to how I do that...... For example which function i must use etc.....  I am newbie with all that !!!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Merci beaucoup_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Benoit_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]