[{"Owner":"JackFalcon","Date":"2017-05-06T01:35:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t      This may be a simple answer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t       A cube is rotating around the x axis with .addRotation(). \n_lt_/p_gt_\n\n_lt_p_gt_\n\t      GOAL_dd_ detect when cube is flat on top_co_ with z axis_co_ to stop animation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t      So what are best ways to measure Quaternion rotation progress? And then stop the animation?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks much_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2017-05-06T04:11:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIf you can figure out how far you need to rotate before you start the animation_co_ that might be easier.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\nvar animationRotation _eq_ new Animation(_t_myAnimation_t__co_ _t_rotation.y_t__co_ 30_co_\n    Animation.ANIMATIONTYPE_FLOAT_co_ Animation.ANIMATIONLOOPMODE_CONSTANT)\n\nvar keys _eq_ []\nkeys.push({\n    frame_dd_ 0_co_\n    value_dd_ this.rotation.y\n})\n\nlet newPositionY _eq_ this.isClockwise ? (Math.PI / 2) _dd_ (-(Math.PI / 2))\n\nkeys.push({\n    frame_dd_ 30_co_\n    value_dd_ this.rotation.y + newPositionY\n})\n\nanimationRotation.setKeys(keys)\nthis.animations.push(animationRotation)\n\nthis.scene.beginAnimation(this_co_ 0_co_ 30_co_ false_co_ 1_co_ () _eq_&gt_sm_ {\n   // after animation\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tHere I am rotating 90 degrees_co_ but you can take current rotation and modulus PI / 2 to find the radians needed to be flat with z-axis.  If you are using a quaternion then you can do some crazy rolling animations - I haven_t_t seen this documented anywhere_co_ but you can rotate simultaneously on 2 axis.  I think you can set the Quaternion.RotationYawPitchRoll(0_co_?_co_?) to flatten with z axis.  If you make a PG I_t_m happy to give it a try.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var animationRotation _eq_ new Animation(_t_arrowFlipRotation_t__co_ _t_rotationQuaternion_t__co_ 30_co_\n        Animation.ANIMATIONTYPE_QUATERNION_co_ Animation.ANIMATIONLOOPMODE_CONSTANT)\n\n\n    let startingQuaternion _eq_ (this.isClockwise _eq__eq__eq_ true)\n        ? Quaternion.RotationYawPitchRoll(3 * (Math.PI / 4)_co_ Math.PI_co_ 0)\n        _dd_ Quaternion.RotationYawPitchRoll(Math.PI / 4_co_ 0_co_ 0)\n\n    let destinationQuaternion _eq_ (this.isClockwise _eq__eq__eq_ true)\n        ? Quaternion.RotationYawPitchRoll(Math.PI / 4_co_ 0_co_ 0)\n        _dd_ Quaternion.RotationYawPitchRoll(3 * (Math.PI / 4)_co_ Math.PI_co_ 0)\n\n    this.rotationQuaternion _eq_ startingQuaternion\n\n    var keys _eq_ []\n    keys.push({\n        frame_dd_ 0_co_\n        value_dd_ this.rotationQuaternion\n    })\n    keys.push({\n        frame_dd_ 30_co_\n        value_dd_ destinationQuaternion\n    })\n\n    animationRotation.setKeys(keys)\n\n    let easingFunction _eq_ new QuarticEase()\n    easingFunction.setEasingMode(EasingFunction.EASINGMODE_EASEINOUT)\n\n    animationRotation.setEasingFunction(easingFunction)\n    this.animations.push(animationRotation)\n\n    this.scene.beginAnimation(this_co_ 0_co_ 30_co_ false_co_ 1_co_ () _eq_&gt_sm_ {\n        // done animation here\n    })_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JackFalcon","Date":"2017-05-06T14:39:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNice_co_ I_t_ll give that a try... \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JackFalcon","Date":"2017-05-06T23:09:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSolved. Thanks _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/25365-brianzinn/?do_eq_hovercard_qt_ data-mentionid_eq__qt_25365_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/25365-brianzinn/_qt_ rel_eq__qt__qt__gt_@brianzinn_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWill post solution.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JackFalcon","Date":"2017-05-09T15:21:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tStopping point for rotation animation_co_ solution_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_ /*****************************PLANET-FALLING-ANIMATION****************************/\n            var orbitLimit _eq_ Math.PI / 2_sm_  // total amount to rotate\n            var deorbitRate _eq_ 0.6_sm_         // amount to move each frame.\n            var orbitCounter _eq_ 0_sm_          // incremented amount across frames.\n            var orbitRate _eq_ 0_sm_             // calculation of orbit_co_ based on direction.\n\n            function animatePlanet(){\n                //STOP-ORBIT-ANIMATION_co_\n                if(orbitCounter&gt_sm__eq_orbitLimit){ //&lt_sm_---SOLUTION (radian-limit).\n                    orbitCounter _eq_ 0_sm_\n                    return_sm_ //stop planet animation\n                }else{ //ORBIT\n                    //Calculate Orbit Heading.\n                    if(rectHeading_eq__eq__eq__t_topnorth_t_){\n                        orbitRate _eq_ -1*Math.PI/20_sm_\n                        orbitCounter +_eq_ (-1* orbitRate) \n                    }else if (rectHeading_eq__eq__eq__t_topsouth_t_){\n                        orbitRate _eq_ 1*Math.PI/20_sm_\n                        orbitCounter +_eq_ orbitRate_sm_ \n                    }\n                    //...\n                }\n                //ORBIT_dd_\n                    if(rectHeading_eq__eq__eq__t_topnorth_t_||rectHeading_eq__eq__eq__t_topsouth_t_){\n                        world1.top.addRotation(orbitRate_co_ 0_co_ 0)_sm_\n                        world1.north.addRotation(orbitRate_co_ 0_co_ 0)_sm_\n                        world1.south.addRotation(orbitRate_co_ 0_co_ 0)_sm_\n                        //...\n                    }             \n            }\n\n /*****************************END-PLANET-FALLING-ANIMATION****************************/_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tDescription_dd_  basic rotation interpolation. When applicable_co_ render loop calls animatePlanet()_co_ if radian-counter exceeds limit_co_ animation stops_co_ else it proceeds at given rate.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tContext_dd_ this code is used to _qt_orbit_qt_ a character around a planet_co_ with the illusion of falling_co_ Local Y of character stays constant. Single-Bevel-Cube shaped Planet orbits underneath.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe stopping-point keeps the world flat. It turned out to be  Math.PI / 2.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI do not understand why that number works_co_ mathematically_co_  if someone can explain why Math.PI/2 rotates a cube to next face_co_ that would be great!  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI keep incorrectly imagine it to be Math.PI/4... (?)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers_co_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-05-09T15:54:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thello! 360 degrees _eq_ 2PI\n_lt_/p_gt_\n\n_lt_p_gt_\n\tso 90 degrees _eq_ PI / 2 _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JackFalcon","Date":"2017-05-09T16:00:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAh_co_ makes sense!  I_t_d _t_like_t_.... but used up daily allocation of _t_likes_t_ before 9am again.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t Maybe I can like it tomorrow.... _dd_ )\n_lt_/p_gt_\n\n_lt_p_gt_\n\t jk. Thanks for tip.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-05-09T16:06:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tlol thanks\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]