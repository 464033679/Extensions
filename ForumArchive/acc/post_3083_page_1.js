[{"Owner":"gwenael","Date":"2014-01-14T09:03:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi everyone_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For those who may be a little confused about all these spaces (like I was)_co_ I made a jsfiddle you can play with._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//jsfiddle.net/gwenaelhagenmuller/Wcegj/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/gwenaelhagenmuller/Wcegj/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It draws the axis of the different spaces thanks to the following function_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var drawAxis _eq_ function(camera_co_ mesh_co_ drawAncestors_co_ pivot) {...}_lt_/pre_gt__lt_p_gt_drawAncestors must be set to true to draw spaces of the ancestors of the mesh and the world space (but you can also set mesh to null or undefined to draw them). pivot must be set to true to also draw the pivot space._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The axis of the pivot space are drawn lighter and smaller to see the difference with those of the local spaces._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The white dashes lines represent the 3D hierarchy (parent-child)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_u_gt_Things to remember_dd__lt_/u_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_- position_co_ rotation_co_ scale are used to set the matrix to pass from the parent to the pivot_lt_/p_gt__lt_p_gt_- pivotMatrix is the matrix to pass from the pivot to the local space_lt_/p_gt__lt_p_gt_- combined they are the local matrix (from parent to mesh)_lt_/p_gt__lt_p_gt_- vertices are expressed in local space_lt_/p_gt__lt_p_gt_- world matrix is the matrix to pass from the local space to the world_lt_/p_gt__lt_p_gt_- local matrix combined to parent world matrix is the world matrix_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Enjoy playing with rotation_co_ position_co_ scale_co_ pivotMatrix..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2014-01-14T10:53:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Awesome ! These features should be added in babylon.js in a Debug object_co_ don_t_t you think ? The bounding box/sphere draw could be added too._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-14T11:11:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_That would be a pleasure. That_t_s a great idea to have a Debug object. I think we could also parametize it to log into the console (info and/or warnings and/or errors) and the corresponding calls to it could be removed by JSKompactor.exe I guess._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ProfessorF","Date":"2014-01-14T16:28:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Nice!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-15T09:36:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Here is an example on how it could be useful_dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/gwenaelhagenmuller/4QgPm/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/gwenaelhagenmuller/4QgPm/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I did it for _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2921-physic-engine/?p_eq_19621_qt__gt_http_dd_//www.html5gamedevs.com/topic/2921-physic-engine/?p_eq_19621_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-01-15T16:44:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I think you should create a new page on our wiki for that topic._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-16T08:21:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Will do. Thanks. I may add a Debug object as suggested by Temechon if you don_t_t mind._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-01-20T18:15:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_hey gwenael_co_ in looking through the docs and the Mesh class_co_ I can_t_t seem to locate a method_co_ property or simple way to set world coordinates for a parented object.  I know position is local space_co_ and I was hoping for something like _qt_setAbsolutePosition()_qt_ to go along with _qt_getAbsolutePosition()_qt_ and even tried prototyping my own method to set _absolutePosition_co_ but it_t_s not having any affect on the actual position of the mesh._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_How should I go about that?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_thanks for your help_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_John_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-20T20:05:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi neoRiley_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For now_co_ I think there is no direct way for you to achieve this but here_t_s a gift for you _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//jsfiddle.net/gwenaelhagenmuller/75WJt/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/gwenaelhagenmuller/75WJt/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ll do a pull-request for it tomorrow_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-01-20T22:35:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Gwenael is officially our master of matrices _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-21T12:33:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I updated _lt_a href_eq__qt_http_dd_//jsfiddle.net/gwenaelhagenmuller/75WJt/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/gwenaelhagenmuller/75WJt/_lt_/a_gt_ and made the pull-request _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/133_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/pull/133_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-01-21T17:26:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_20903_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_3083_qt_ data-ipsquote-username_eq__qt_gwenael_qt_ data-cite_eq__qt_gwenael_qt_ data-ipsquote-timestamp_eq__qt_1390248309_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Hi neoRiley_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For now_co_ I think there is no direct way for you to achieve this but here_t_s a gift for you _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//jsfiddle.net/gwenaelhagenmuller/75WJt/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/gwenaelhagenmuller/75WJt/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ll do a pull-request for it tomorrow_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_very nice!  Thanks very much for your time and response_co_ I apologize that it took me so long to reply - I keep forgetting to subscribe to posts I_t_m interested in!  I hadn_t_t realized you replied _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-01-21T17:47:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I hate to ask_co_ but any chance you could update the minified version on git?  right now it_t_s babylon.1.8.5 and that doesn_t_t include setAbsolutePosition_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ll figure out how to do it on mac soon enough!_lt_/p_gt__lt_p_gt_Thanks again - John_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-21T22:44:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I can_t_t (only Deltakosh releases this file) but tomorrow I can update ourOwnBabylon.js under /Tools/BuildOurOwnBabylonJS/BuildOurOwnBabylonJS and do a pull-request or upload it here I guess._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-01-21T22:45:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Otherwise_co_ you can use the same trick that I did in the jsfiddle_dd_ add the function after including babylon.js_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-01-21T22:55:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_yeah for now I can just add it like that_co_ thanks guys_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-01-22T16:41:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Great thanks very much Gwenael_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-01-31T16:08:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hey Gwenael_co_ In using setAbsolutePosition()_co_ if I do multiple calls to it within a render_co_ the final call is the only one reflected on the transform.  So_co_ I assumed the other changes were being overwritten_co_ and I added computeWorldMatrix(true) and that fixed the issue.  _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m guessing that we don_t_t need all of what_t_s happening in computeWorldMatrix and I_t_m concerned with impacting performance needlessly.  Could you take a look at what the most efficient way to fix this is?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_PS&gt_sm_ I also tried computeWorldMatrix() without the force flag and that did not work_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_this.computeWorldMatrix(true)_sm_// without this_co_ the final call in a frame overwrites any other calls to setAbsolutePosition()this.setAbsolutePosition(...)_sm__lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-02-18T14:51:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi neoRiley_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Sorry_co_ I was too busy at work recently._lt_/p_gt__lt_p_gt_By _qt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_within a render_qt_ do you mean _qt_per frame_qt_ ?_lt_/span_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-02-18T15:10:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hey Gwenael - yes_co_ that_t_s exactly what I meant_co_ sorry about the way I phrased it.  I meant to say _qt_within the render loop_qt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-02-18T17:03:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Don_t_t be sorry_co_ I only wanted to be sure to understand what you meant. I don_t_t really get why you want to call several times setAbsolutePosition() on a mesh during the computation of a frame. Or is it one call per mesh for several meshes?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-02-18T21:10:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_it_t_s multiple calls on setAbsolutePosition to one object._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Scenario - you need to test an objects position based on different conditions within a frame.  _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Or_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You want to place an object in a particular location_co_ but you don_t_t know the x/y/z.   So you move/translate the object on x_co_ then y individually to achieve the location you want. example_dd_  you need to define and entry point for your fish into a fish tank.  You didn_t_t create the original model_co_ so you have to create an blank 3d object_co_ and nudge it until it_t_s located in the tank where fish are supposed to spawn.  So_co_ whether I figure out the position and then set it directly or just use the setAbsolutePosition 3x_t_s I still can_t_t do it if the last call erases the first 1 or 2._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Or_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Real world example_dd_ You want to create a chase cam - step 1) move camera to same location as target.  Step 2) translate camera on z axis  Step 3) translate camera on y axis to rise above the target to look over shoulder._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Hope that helps_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-02-19T10:20:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok_co_ now I better understand the reason._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You_t_re right_co_ you could figure out the position and then set it with setAbsolutePosition but if you prefer the different approach (using setAbsolutePosition 3 times in a row)_co_ we could add parameters to getAbsolutePosition and then pass it to computeWorldMatrix to force recompute only parts which need to be updated. I guess that between 2 calls of setAbsolutePosition_co_ only the local position changed in your case. If you look at the code of setAbsolutePosition_co_ I only set position so if nothing else has changed between two calls (parent matrix_co_ pivot matrix_co_ rotation...)_co_ only _localTranslation and _localWorld must be computed to get the new worldMatrix. The parameter passed to getAbsolutePosition and then to computeWorldMatrix would be _qt_onlyLocalTranslationCouldHaveChanged_qt_. _lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_BABYLON.Mesh.prototype.computeWorldMatrix _eq_ function (force_co_ onlyLocalTranslationCouldHaveChanged) {    // by default onlyLocalTranslationCouldHaveChanged _eq_ false}_lt_/pre_gt__lt_p_gt_Did I understand you well? Is it something that you would like to have? For sure_co_ it would be faster than forcing computeWorldMatrix. It would force to compute only some parts._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gwenael","Date":"2014-02-19T10:26:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Something even faster would be to only recompute elements of _localTranslation and _localWorld which are used to compute _worldMatrix.m[12]_co_  _worldMatrix.m[13]_co_  _worldMatrix.m[14]. I didn_t_t think about it but if we are lucky we don_t_t need all the elements of the matrices to compute _worldMatrix.m[12]_co_  _worldMatrix.m[13]_co_  _worldMatrix.m[14]._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"neoRiley","Date":"2014-02-19T17:09:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_yeah that_t_s essentially what I think would be expected - if I update the position_co_ it should force an update on the matrix for position only.  Something like a getter/setter for position would seem like a good pattern in that the setter takes the new value and manages the translation math in the setter._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Same for rotation and scale.  That way we_t_re isolating the math to just whatever we_t_re updating.  I think it_t_s more flexible at that point as well._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]