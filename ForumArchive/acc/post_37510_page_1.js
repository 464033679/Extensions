[{"Owner":"alexoy","Date":"2018-05-08T19:26:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve got a strange behavior of a _lt_strong_gt_layerMask_lt_/strong_gt_ parameter. If I understand it right_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. _lt_strong_gt_mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/strong_gt_ - this is about mesh visibility and related calculations only. When we load a scene and this mesh is behind a player - it is not active_co_ but becomes active when you turn around_co_ and some things are calculated only when the mesh is active_co_ right?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. _lt_strong_gt_mesh.layerMask_lt_/strong_gt_ - this is about multiple cameras only_co_ right? When you want some meshes be visible on specific camera only - you put needed layerMask for that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat I have here - _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/index.html#2GXKNW%2330_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/index.html#2GXKNW#30_lt_/a_gt_ - here are 2 cameras_co_ 1_t_st normal standard_co_ 2_t_nd takes the right half of the canvas and is in front of the first one.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhy all meshes are visible on both cameras?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you comment out lines with _lt_strong_gt_alwaysSelectAsActiveMesh_lt_/strong_gt_ - 2_t_nd camera will show a sphere only_co_ that is an expected result for me. That means _lt_strong_gt_alwaysSelectAsActiveMesh_lt_/strong_gt_ makes _lt_strong_gt_layerMask_lt_/strong_gt_ useless.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2018-05-08T20:14:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30699_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/_qt_ rel_eq__qt__qt__gt_@alexoy_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_alwaysSelectAsActiveMesh_lt_span_gt_ _lt_/span_gt__lt_/strong_gt_means that the mesh is _lt_strong_gt_Always_lt_/strong_gt_ active_co_ Thus the layerMask can_t_t disable it from a viewport_co_ and i believe the mesh isn_t_t culled either when out of viewport._lt_br /_gt_\n\tYou shouldn_t_t really need this unless a mesh should always be active (even when out of viewport / camera view)_co_ but if you do need them to always be active_co_ yet respect camera layerMask_co_ i suggest overwriting the culling logic with your own game logic. (find_co_ copy &amp_sm_ edit camera culling function(s) to follow your game_t_s logic &amp_sm_ re-load function(s) after the babylon.js core)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-05-08T20:38:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_strong_gt_alwaysSelectAsActiveMesh_lt_/strong_gt_ was mentioned somewhere about scene optimizations_co_ with things like freeze()_co_ freezeWorldMatrix() etc. I use it too_co_ because without it my scene freezes when I turn around and see the meshes for the first time. Probably because new meshes become active and BJS does some things when it sees the mesh for the first time. This camera freezing is very noticeable_co_ so I can_t_t just leave it as is.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat can I do then? I set all the meshes as active now.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2018-05-09T16:49:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30699_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/_qt_ rel_eq__qt__qt__gt_@alexoy_lt_/a_gt__lt_br /_gt_\n\tAs this behaviour is not how alwaysSelectAsActiveMesh was designed to act_co_ you have to overwrite a core function._lt_br /_gt_\n\tThe following will force layerMask to be respected. Please test performance in your project as i_t_m not sure how it will act with your freezing issues._lt_br /_gt_\n\tLine 118 in PG_sm_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_- if (mesh.alwaysSelectAsActiveMesh || mesh.isVisible &amp_sm_&amp_sm_ mesh.visibility &gt_sm_ 0 &amp_sm_&amp_sm_ ((mesh.layerMask &amp_sm_ this.activeCamera.layerMask) !_eq__eq_ 0) &amp_sm_&amp_sm_ mesh.isInFrustum(this._frustumPlanes)) {\n\n+ if ( (mesh.alwaysSelectAsActiveMesh &amp_sm_&amp_sm_ ((mesh.layerMask &amp_sm_ this.activeCamera.layerMask) !_eq__eq_ 0)) || mesh.isVisible &amp_sm_&amp_sm_ mesh.visibility &gt_sm_ 0 &amp_sm_&amp_sm_ ((mesh.layerMask &amp_sm_ this.activeCamera.layerMask) !_eq__eq_ 0) &amp_sm_&amp_sm_ mesh.isInFrustum(this._frustumPlanes)) {_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tCopy the whole function from PG_co_ lines 52 -&gt_sm_ 146 and load in your project after the Babylon.js core file. (3.2)_lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/index.html#2GXKNW%2331_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/index.html#2GXKNW#31_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-05-09T17:53:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17943-aweirdo/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17943_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17943-aweirdo/_qt_ rel_eq__qt__qt__gt_@aWeirdo_lt_/a_gt__co_ big thanks! Performance looks good_co_ both actual and potential FPS are similar. Potential FPS digit changes too fast to be able to say more precisely_co_ but numbers look more or less the same. In a debug layer - maybe it_t_s possible to set a refresh rate lower? It will be much easier to read a potential FPS\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2018-05-09T18:38:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30699_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/_qt_ rel_eq__qt__qt__gt_@alexoy_lt_/a_gt__lt_br /_gt_\n\tGlad to hear it works!_lt_br /_gt_\n\t_lt_br /_gt_\n\tI rarely use the inspector i_t_m afraid_co_ and i don_t_t know any of it_t_s coding_co__lt_br /_gt_\n\tbut i made a github issue about slowing down the update rate_sm_ _lt_br /_gt_\n\t_lt_br /_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/issues/4302_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/issues/4302_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]