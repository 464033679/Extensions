[{"Owner":"Kesshi","Date":"2017-02-15T13:57:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tCurrently i_t_m trying to reduce the gpu memory usage of our app (especially for mobile devices)._lt_br /_gt_\n\tI just saw that BabylonJS internally uploads every texture as gl.RGBA to the gpu even if if the source was a jpg or any other image without alpha channel._lt_br /_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.engine.ts#L2189_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.engine.ts#L2189_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tUsing gl.RGB in those cases would save 25% of texture memory. I also have some grayscale textures. It would be nice if i could use gl.LUMINANCE to save even more memory. It should be possible to define the desired texture format in my opinion._lt_br /_gt_\n\tWould it make sense to add this as another parameter to the Texture constructor? It has a lot of parameters already ... i don_t_t know if there is a better option without a breaking change.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-02-15T15:47:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tKTX_co_ or _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/27804-multi-platform-compressed-textures-for-bjs/_qt_ rel_eq__qt__qt__gt_multi-platform compressed textures_lt_/a_gt_ that I added for 2.6 are much small in GPU.  Your finding makes my comparisons to regular textures even worse than I thought.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you make this change_co_ you are going to have to modify a lot more if you make it a parameter.  Maybe_co_ just determine the extension cannot possibly have alpha_co_ and adjust internally.  Otherwise_co_ you are probably going to need to go all the way out to the exporters_co_ since few people actually write Texture constructor code.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ when making this change_co_ remember to do it to _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.engine.ts#L2592_qt_ rel_eq__qt_external nofollow_qt__gt_createCubeTexture()_lt_/a_gt_ too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Kesshi","Date":"2017-02-16T08:23:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tCompressed textures are good but they are not an option for me in this case (because of our software architecture) but i will keep it in mind for other projects._lt_br /_gt_\n\tI think automatic detection of the format is not a good idea. You would always have to use RGBA for png files even if the png doesn_t_t have an alpha channel._lt_br /_gt_\n\tYou would also lose the option to force a conversion. For example_dd__lt_br /_gt_\n\t- you have a png with alpha channel but you don_t_t need it -&gt_sm_ use RGB instead of RGBA_lt_br /_gt_\n\t- you have a fullcolor image but you want to show it as grayscale -&gt_sm_ use LUMINANCE_co_ the browser will convert the image for you_lt_br /_gt__lt_br /_gt_\n\tA parameter would be better i think._lt_br /_gt_\n\tI will have a look and see if can make a PR for this (for the engine only_co_ not for the exportes)\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-02-16T16:34:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSee your PR.  While I do not merge stuff on this repo_co_ one extra line might be good for the general public.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf no format arg is supplied_co_ then test for a _t_.JPG_t_ extension.  If JPG_co_ then do RGB.  That way you get the benefit without changing all the way back to Blender / 3DS Max_co_ nor complicate things.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Vousk-prod.","Date":"2017-03-07T17:50:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHey JCP_co_ what exactly are all the values we can pass to format parameter?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-03-07T18:41:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSee internalformat parameter _lt_a href_eq__qt_https_dd_//developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/texImage2D_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_.  I have to get in there soon_co_ (before 3.0 comes out).  I added a compressed image type ATC_co_ but could not find any ktx format converter.  I_t_ve seen Google is trying to officially remove ATC from WebGL_co_ so I might as well rip it out before KTX gets into a production release.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWill probably add the JPG override described above_co_ If I am not too late.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]