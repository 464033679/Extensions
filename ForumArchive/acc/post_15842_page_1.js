[{"Owner":"maca134","Date":"2015-07-20T03:59:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_So im pretty new to babylonjs_co_ getting my head around most of it but i wanted to ask for some _qt_good practices_qt_ advice._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Im creating a map preview for a game_co_ i have the actual map working nicely but wanted to know the best way to create 1000s of small_co_ cuboid shapes to represent buildings._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I found when i simply dumped the meshes on the map_co_ fps dropped massively. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Are there any existing approaches to this kind of problem around?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Cheers_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-07-20T10:30:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi maca and welcome to the forum. _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Did you already have a look at octrees (_lt_a href_eq__qt_http_dd_//www.babylonjs.com/?OCTREE_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/?OCTREE_lt_/a_gt_) and instances _lt_a rel_eq__qt_external nofollow_qt__gt_(_lt_/a_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/?INSTANCES_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/?INSTANCES_lt_/a_gt_)? That should help you creating alot of meshes. Let us know how it is working for you. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe you could create a playground (www.babylonjs-playground.com) to illustrate the fps drop and people can help you directly by editing your code and playing around with it._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-07-20T11:31:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_SPS could be a good option to set 1000s of cubic shapes in a single mesh _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"davrous","Date":"2015-07-20T11:35:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ If your small meshes are static (i.e you don_t_t need to update them individually)_co_ you can group them to boost a lot the performance like described in my article_dd_ _lt_a href_eq__qt_http_dd_//blogs.msdn.com/b/davrous/archive/2014/02/19/coding4fun-tutorial-creating-a-3d-webgl-procedural-qrcode-maze-with-babylon-js.aspx_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//blogs.msdn.com/b/davrous/archive/2014/02/19/coding4fun-tutorial-creating-a-3d-webgl-procedural-qrcode-maze-with-babylon-js.aspx_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Bye_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_David_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"davrous","Date":"2015-07-20T11:40:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Link to the doc_dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/page.php?p_eq_22451_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/page.php?p_eq_22451_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2015-07-20T11:49:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You also have this function _dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/page.php?p_eq_25147_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/page.php?p_eq_25147_lt_/a_gt__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_static MergeMeshes(meshes_co_ disposeSource_co_ allow32BitsIndices_co_ meshSubclass) → Mesh_lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-07-20T14:06:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_here is a quick example with SPS _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2356_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#56_lt_/a_gt__lt_/p_gt__lt_p_gt_5000 random buildings set once_co_ 1 mesh only_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_just change line 36 the var fact to space them_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"maca134","Date":"2015-07-20T17:25:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thats seems to be what im looking for_co_ thank you very much _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-07-20T18:06:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_really big city (compared to my 2800 people village here) _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2357_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#57_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_20000 buildings_co_ normals and world matrix recomputed each frame _dd_ 60 fps on my office laptop here  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"maca134","Date":"2015-07-21T04:19:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The only problem im having now is the particles disappear when the cam gets too close._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-07-21T07:30:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_disappearing when cam too close ?_lt_/p_gt__lt_p_gt_I just can_t_t reproduce the problem here._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe is it a matter of the mesh bounding box size (just. In this case you could set this size once like explained here _dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/15255-is-it-possible-to-set-the-size-of-the-bounding-box/?p_eq_86456_qt__gt_http_dd_//www.html5gamedevs.com/topic/15255-is-it-possible-to-set-the-size-of-the-bounding-box/?p_eq_86456_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In the last PG example_co_ the bounding box size could be (1500_co_ 10_co_ 1500) for instance. You could check it by displaying the debug layer and mark the _qt_bounding box_qt_ menu._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"maca134","Date":"2015-07-21T14:55:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Here is a playground that show the problem_lt_/p_gt__lt_p_gt__lt_strike_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#V78LI_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#V78LI_lt_/a_gt__lt_/strike_gt__lt_/p_gt__lt_p_gt_Fixed_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#V78LI%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#V78LI#3_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you move around abit the red blocks disappear_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"maca134","Date":"2015-07-21T14:59:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_nvm fixed it _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_It was the mesh bounding box_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_mesh.getBoundingInfo()._update(BABYLON.Matrix.Scaling(new BABYLON.Vector3(820_co_ 100_co_ 820)))_sm__lt_/pre_gt__lt_p_gt_Playground also updated for anyone in the future_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-07-21T15:33:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi Maca... welcome to the forum.  I see the issue.  It seems to be caused by a problem or characteristic with the freeCamera.  I changed to an ArcRotate_co_ and no more disappearing parti-buildings.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#V78LI%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#V78LI#4_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ll try to put some time into figuring out why this is happening... soon.  Others will_co_ too.  Be well._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m sure Jerome has started on the newest SPS feature... you know... groundHeight-sensing particle-positioning with automatic mountain and water avoidance.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_   Yep_co_ we_t_re beginning a whole new world of particle positioning funcs.  Might just as well (mizewell) start collecting them_co_ because there will be 100 various SPS positioning funcs by the end of the year.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  You know_co_ cloud shaped_co_ spherical_co_ pyramidal_co_ stack-o-boxes_co_ bowl-o-cheerios_co_ etc.  Oooh_co_ how about a positioner that accepts a 3D model_co_ and then places the PSP particles in the shape of the volume of that model?  wow!  3dsMax has an _t_array_t_ thing that is very similar to one of these positioners (stacker/spreader/distributor).  Sounds like farming gear_co_ eh?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"maca134","Date":"2015-07-21T15:48:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The block disappear when the bounding box (the black cube) here (there are 2 objects there)_dd__lt_/p_gt__lt_p_gt__lt_img src_eq__qt_https_dd_//dl.dropboxusercontent.com/u/135243/Screenshot%20at%2016-46-30.png_qt_ alt_eq__qt_Screenshot%20at%2016-46-30.png_qt__gt__lt_/p_gt__lt_p_gt_Goes out of shot_co_ im presuming the engine thinks the blocks dont need rendering anymore._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-07-21T16:52:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yep the rendering of a mesh is controlled by its bounding box visibility._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BUT _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ you can also ask the engine to always draw your mesh even if the engine thinks it is out of shot_dd_ mesh.alwaysSelectAsActiveMesh _eq_ true_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-07-21T17:02:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_didn_t_t even know this such useful feature existed !!!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-07-22T06:37:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_with y random rotation _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2358_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#58_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]