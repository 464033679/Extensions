[{"Owner":"Tomm Huth","Date":"2017-11-17T00:00:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m a total noob at Babylonjs_co_ but I_t_m playing around with remaking a previous raw Threejs project in Babylonjs. It_t_s a physics based stacking game_co_ and is really very simple (nothing but boxes)_co_ but I still seem to get really bad framerates. The thing is_co_ when I made this in Threejs I had no such problems.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI’m using 3.1.0-beta3 (which seems to be the default through NPM). I’ve tried switching to the previous release but that gives me the error _lt_em_gt_TypeError_dd_ Cannot assign to read only property _t_RGBA16F_t_ of object _t_#&lt_sm_WebGL2RenderingContext&gt_sm__lt_/em_gt__t_. I’ve also played around with anti-aliasing and _lt_em_gt_adaptToDeviceRatio_lt_/em_gt_ on/off but that seems to make little difference. Also _lt_em_gt_SceneOptimizerOptions_lt_/em_gt_ causes a bug in CSG for me_co_ where it errors out on finding position of null of my mesh._lt_span style_eq__qt_color_dd_#444444_sm__qt__gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy project consists of 2 files_co_ scene.js and app.js\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(sorry about the formatting_co_ why isn_t_t here a code tag)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt__lt_strong_gt_// app.js_lt_/strong_gt__lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\timport { Vector3_co_ Animation_co_ MeshBuilder_co_ CSG_co_ PhysicsImpostor_co_ StandardMaterial_co_ Color3 } from _qt_babylonjs_qt__lt_br /_gt_\n\timport { scene } from _qt_./scene_qt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tconst stack _eq_ []\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tfunction makeGround() {_lt_br /_gt_\n\t    var ground _eq_ MeshBuilder.CreateBox(_t_ground1_t__co_ { height_dd_ 40_co_ depth_dd_ 35_co_ width_dd_ 35_co_ subdivisions_dd_ 1 }_co_ scene)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    ground.position.y _eq_ -22.5_lt_br /_gt_\n\t    ground.physicsImpostor _eq_ new PhysicsImpostor(ground_co_ PhysicsImpostor.BoxImpostor_co_ { mass_dd_ 0 })\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    stack.push(ground)_lt_br /_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfunction makeBox() {_lt_br /_gt_\n\t    let top _eq_ stack[stack.length - 1]_lt_br /_gt_\n\t    var boundingBx _eq_ top.getBoundingInfo() _lt_br /_gt_\n\t  _lt_br /_gt_\n\t    let boundingBox _eq_ boundingBx.boundingBox_lt_br /_gt_\n\t    var box _eq_ MeshBuilder.CreateBox(_t_box1_t__co_ { height_dd_ 5_co_ depth_dd_ boundingBox.extendSize.z * 2_co_ width_dd_ boundingBox.extendSize.x * 2_co_ subdivisions_dd_ 1 }_co_ scene)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    box.position _eq_  boundingBx.boundingBox.centerWorld.clone()_lt_br /_gt_\n\t    box.position.y _eq_ (stack.length - 1) * 5\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    box.material _eq_ new StandardMaterial(_qt_xx_qt__co_ scene)_lt_br /_gt_\n\t    box.material.diffuseColor _eq_ new Color3(Math.random()_co_ Math.random()_co_ Math.random())_lt_br /_gt_\n\t    box.physicsImpostor _eq_ new PhysicsImpostor(box_co_ PhysicsImpostor.BoxImpostor_co_ { mass_dd_ 0 })\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    stack.push(box)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    animateBox(box)_lt_br /_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfunction makeFirstBox() {_lt_br /_gt_\n\t    var box _eq_ MeshBuilder.CreateBox(_t_box1_t__co_ { height_dd_ 5_co_ depth_dd_ 35_co_ width_dd_ 35_co_ subdivisions_dd_ 1 }_co_ scene)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    box.position.y _eq_ 0_lt_br /_gt_\n\t    box.physicsImpostor _eq_ new PhysicsImpostor(box_co_ PhysicsImpostor.BoxImpostor_co_ { mass_dd_ 0 })\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    stack.push(box)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    animateBox(box)_lt_br /_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfunction animateBox(box) {_lt_br /_gt_\n\t    let lefty _eq_ (stack.length - 1) % 2 _eq__eq_ 0_lt_br /_gt_\n\t    let prop _eq_ lefty ? _qt_x_qt_ _dd_ _qt_z_qt__lt_br /_gt_\n\t    var animation _eq_ new Animation(_qt_anm_qt__co_ _qt_position._qt_ + prop_co_ 60_co_ Animation.ANIMATIONTYPE_FLOAT_co_ Animation.ANIMATIONLOOPMODE_CYCLE)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    var keys _eq_ [_lt_br /_gt_\n\t        {_lt_br /_gt_\n\t            frame_dd_ 0_co__lt_br /_gt_\n\t            value_dd_ 60  _lt_br /_gt_\n\t        }_co__lt_br /_gt_\n\t        {_lt_br /_gt_\n\t            frame_dd_ 200_co__lt_br /_gt_\n\t            value_dd_ -60  _lt_br /_gt_\n\t        }_co__lt_br /_gt_\n\t        {_lt_br /_gt_\n\t            frame_dd_ 400_co__lt_br /_gt_\n\t            value_dd_ 60  _lt_br /_gt_\n\t        }_lt_br /_gt_\n\t    ]\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    animation.setKeys(keys)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    box.animations _eq_ [animation]_lt_br /_gt_\n\t    box.animation _eq_ scene.beginAnimation(box_co_ 0_co_ 400_co_ true)_lt_br /_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfunction match() {_lt_br /_gt_\n\t    let top _eq_ stack[stack.length - 1]\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    top.animation.stop()_lt_br /_gt_\n\t    top.position.y -_eq_ 5\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    let a _eq_ CSG.FromMesh(top)_lt_br /_gt_\n\t    let b _eq_ CSG.FromMesh(stack[stack.length - 2])_lt_br /_gt_\n\t    let intersection _eq_ a.intersect(b)_lt_br /_gt_\n\t    let subtraction _eq_ a.subtract(b)_lt_br /_gt_\n\t _lt_br /_gt_\n\t    if (!intersection.polygons.length) {_lt_br /_gt_\n\t        top.physicsImpostor.setMass(5)_lt_br /_gt_\n\t        top.position.y +_eq_ 5\n_lt_/p_gt_\n\n_lt_p_gt_\n\t        console.log(_qt_Missed - game over!_qt_)_lt_br /_gt_\n\t    } else {_lt_br /_gt_\n\t        let box _eq_ intersection.toMesh(_qt_s_qt__co_ top.material_co_ scene_co_ false)_lt_br /_gt_\n\t        let leftover _eq_ subtraction.toMesh(_qt_ss_qt__co_ top.material_co_ scene_co_ false)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t        box.position.y +_eq_ 5_lt_br /_gt_\n\t        box.physicsImpostor _eq_ new PhysicsImpostor(box_co_ PhysicsImpostor.BoxImpostor_co_ { mass_dd_ 0 })\n_lt_/p_gt_\n\n_lt_p_gt_\n\t        leftover.position.y +_eq_ 5_lt_br /_gt_\n\t        leftover.physicsImpostor _eq_ new PhysicsImpostor(leftover_co_ PhysicsImpostor.BoxImpostor_co_ { mass_dd_ 5 })_lt_br /_gt_\n\t _lt_br /_gt_\n\t        stack.splice(stack.length - 1_co_ 1) _lt_br /_gt_\n\t        _lt_br /_gt_\n\t        stack.push(box)_lt_br /_gt_\n\t        top.dispose()\n_lt_/p_gt_\n\n_lt_p_gt_\n\t        makeBox()_lt_br /_gt_\n\t    }_lt_br /_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tdocument.addEventListener(_qt_click_qt__co_ () _eq_&gt_sm_ {_lt_br /_gt_\n\t    match()_lt_br /_gt_\n\t})\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tmakeGround()_lt_br /_gt_\n\tmakeFirstBox()\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt__lt_u_gt_// scene.js_lt_/u_gt__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\timport { Engine_co_ FreeCamera_co_ Scene_co_ CannonJSPlugin_co_ HemisphericLight_co_ Vector3_co_ Camera_co_ Color3_co_ PointLight } from _qt_babylonjs_qt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tconst frustumSize _eq_ 100_lt_br /_gt_\n\tconst aspect _eq_ window.innerWidth / window.innerHeight\n_lt_/p_gt_\n\n_lt_p_gt_\n\tconst canvas _eq_ document.getElementById(_qt_app_qt_)_lt_br /_gt_\n\tconst engine _eq_ new Engine(canvas_co_ false_co_ { deterministicLockstep_dd_ true_co_ lockstepMaxSteps_dd_ 4 }_co_ false)_lt_br /_gt_\n\tconst scene _eq_ new Scene(engine)_lt_br /_gt_\n\tconst camera _eq_ new FreeCamera(_qt_camera_qt__co_ new Vector3(-45_co_ 45_co_ -45)_co_ scene)_lt_br /_gt_\n\tconst light _eq_ new HemisphericLight(_t_light1_t__co_ new Vector3(0_co_ -1_co_ 0)_co_ scene)  _lt_br /_gt_\n\tconst physEngine _eq_ new CannonJSPlugin(false)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tphysEngine.setTimeStep(1/60)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tscene.enablePhysics(new Vector3(0_co_ -9.81_co_ 0)_co_ physEngine)_lt_br /_gt_\n\tscene.gravity _eq_ new Vector3(0_co_ -9.81_co_ 0)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcamera.mode _eq_ Camera.ORTHOGRAPHIC_CAMERA_lt_br /_gt_\n\tcamera.orthoTop _eq_  frustumSize / 2_lt_br /_gt_\n\tcamera.orthoBottom _eq_ frustumSize / - 2_lt_br /_gt_\n\tcamera.orthoLeft _eq_ frustumSize * aspect / - 2_lt_br /_gt_\n\tcamera.orthoRight _eq_ frustumSize * aspect / 2_lt_br /_gt_\n\tcamera.setTarget(Vector3.Zero()) \n_lt_/p_gt_\n\n_lt_p_gt_\n\tlight.groundColor _eq_ new Color3(0_co_ .5_co_ 0)_lt_br /_gt_\n\tlight.diffuse _eq_ Color3.White()_lt_br /_gt_\n\tlight.intensity _eq_ .4_sm__lt_br /_gt_\n\t _lt_br /_gt_\n\tengine.runRenderLoop(() _eq_&gt_sm_ scene.render()) \n_lt_/p_gt_\n\n_lt_p_gt_\n\twindow.addEventListener(_t_resize_t__co_ () _eq_&gt_sm_ {_lt_br /_gt_\n\t    const aspect _eq_ window.innerWidth / window.innerHeight\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    camera.orthoTop _eq_  frustumSize / 2_lt_br /_gt_\n\t    camera.orthoBottom _eq_ frustumSize / - 2_lt_br /_gt_\n\t    camera.orthoLeft _eq_ frustumSize * aspect / - 2_lt_br /_gt_\n\t    camera.orthoRight _eq_ frustumSize * aspect / 2_lt_br /_gt_\n\t    engine.resize()_lt_br /_gt_\n\t})\n_lt_/p_gt_\n\n_lt_p_gt_\n\texport { scene_co_ camera }\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-11-17T00:35:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tremake this on_dd__lt_br /_gt__lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tand people will help_co_ not many are guru enough to just read through script and know whats happening.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Tomm Huth","Date":"2017-11-17T08:06:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI_t_ll see if I can duplicate it on the playground within the day. \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"max123","Date":"2017-11-17T14:19:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_195429_qt_ data-ipsquote-contentid_eq__qt_34056_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1510876801_qt_ data-ipsquote-userid_eq__qt_29314_qt_ data-ipsquote-username_eq__qt_Tomm Huth_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t14 hours ago_co_ Tomm Huth said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t(sorry about the formatting_co_ why isn_t_t here a code tag)\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15748_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/5a0eefe402cf9_ScreenShot2017-11-17at14_16_35.png.e734a68dac416ce742a98b432ccb8b4e.png_qt_ alt_eq__qt_5a0eefe402cf9_ScreenShot2017-11-17at14_16_35.png.e734a68dac416ce742a98b432ccb8b4e.png_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Tomm Huth","Date":"2017-11-17T14:36:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tseems like this might have been a passing thing_co_ everyhthing runs nicely now. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t@max123  aha! thanks _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]