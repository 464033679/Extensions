[{"Owner":"ozRocker","Date":"2015-07-28T11:40:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I_t_m having a play with shadows to my 3D website which you can see here _lt_a href_eq__qt_http_dd_//preview.punkoffice.com_qt_ rel_eq__qt_external nofollow_qt__gt_preview.punkoffice.com_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The light is actually attached to the camera so it moves as you turn around.  I had to do this because a still directional light isn_t_t able to light the whole scene and adding more directional lights made a significant difference to the frame rate.  Nevertheless_co_ the bad shadows still happen even with a still light.  Also_co_ keep in mind you can zoom in and out with the scroll wheel which can give you a different perspective on the shadows._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As you can see_co_ they don_t_t look so good _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  The shadows are completely black.  Is there a way I can make them more subtle?  Like a light-gray colour?  It seems to be 100% intensity all the way through.  Also_co_ the shadows cast from the people don_t_t start from their feet.  It looks like a glitch there._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My shadow code is this_dd__lt_/p_gt__lt_div_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var shadowGenerator _eq_ new BABYLON.ShadowGenerator(4096_co_ light)_sm_shadowGenerator.getShadowMap().renderList.push(meshMarcus)_sm_shadowGenerator.getShadowMap().renderList.push(meshAndrew)_sm_shadowGenerator.getShadowMap().renderList.push(meshDiem)_sm_shadowGenerator.getShadowMap().renderList.push(meshFB)_sm_shadowGenerator.getShadowMap().renderList.push(meshYouTube)_sm_shadowGenerator.getShadowMap().renderList.push(meshSketchfab)_sm_shadowGenerator.getShadowMap().renderList.push(meshARmarker)_sm_shadowGenerator.getShadowMap().renderList.push(meshRigging)_sm_shadowGenerator.getShadowMap().renderList.push(meshWebGL)_sm_shadowGenerator.getShadowMap().renderList.push(meshVR)_sm__lt_/pre_gt__lt_p_gt_They_t_ve all been set to receive shadows in Unity (where I converted my scene from) so I don_t_t need to do that in code._lt_/p_gt__lt_/div_gt__lt_p_gt_ _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-07-28T11:54:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hey again_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_you could soften the shadows if you combine ti with a hemi light. Also you should try to play around with the bias value and the different shadow types to see if things change if you use different options_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_//shadowGenerator.useVarianceShadowMap _eq_ true_sm_//shadowGenerator.useBlurVarianceShadowMap _eq_ true_sm_shadowGenerator.usePoissonSampling _eq_ true_sm_shadowGenerator.bias _eq_ 0.000005_sm__lt_/pre_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#HVNVX_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#HVNVX_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-07-28T12:28:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok cool!  That _qt_bias_qt_ property fixed the problem of the shadows not coming from their feet.  I_t_ve got it looking pretty sweet_co_ unfortunately it drops the frame rate by half on mobile _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  The additional hemi light doesn_t_t make much difference to the frame rate so its not cos of that.  Also I only set the floor and walls to receive shadows but the frame rate still went down to 30.  Any tips on reducing quality of shadows to make it faster_co_ or should I just give up on shadows if I_t_m aiming for around 60FPS on mobile?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-07-28T12:37:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var shadowGenerator _eq_ new BABYLON.ShadowGenerator(4096_co_ light)_sm__lt_/pre_gt__lt_p_gt_Maybe 512 will do_co_ too? _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ Not sure how big the impact on performance is_co_ though_co_ but might be worth a try. If it helps set higher values if you detect a desktop PC and go down as much as needed on mobile._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_strong_gt_Edit_lt_/strong_gt__dd_ just checked on my slow work PC and the shadow textures size seems to have a BIG impact on performance._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-07-28T13:52:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I_t_ve gone up to 1024 for mobile and 4096 for desktop.  1024 looks acceptable and on iPhone 5S runs at 54fps_co_ iPhone 6+ runs at 47fps (6+ is slower cos of increased number of pixels apparently).  I_t_ll get some Android peeps to test on their devices as well._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What I_t_m also trying to do is cast the same kind of shadow regardless of where the camera is facing.  That_t_s why I made the directional light the parent of the camera_dd__lt_/p_gt__lt_div_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_light _eq_ new BABYLON.DirectionalLight(_qt_dir_qt__co_ new BABYLON.Vector3(0_co_ -1_co_ 2)_co_ mainScene)_sm_light.position _eq_ new BABYLON.Vector3(0_co_ 40_co_ 0)_sm_light.intensity _eq_ 0.5_sm_light.parent _eq_ myCamera_sm__lt_/pre_gt__lt_/div_gt__lt_div_gt_Its not doing what I expected though.  The shadows cast at the HOME side is longer than the shadows cast at the ABOUT side.  I_t_m trying to get the shadows looking the same as the HOME side from every direction I move to.  Do I need to recalculate its position within the render loop?_lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-07-28T14:29:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_My suggestion would be to recalculate the direction of the light_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_light.direction _eq_ camera.target.subtract(camera.position)_sm_light.direction.y _eq_ -0.5_sm__lt_/pre_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#JE6HE%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#JE6HE#3_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_strong_gt_Alternativly_dd_ _lt_/strong_gt_maybe use separate spotlights for each model? _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-07-28T15:29:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Damn_co_ you_t_re on the ball!  thanks iiceman _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  That works well_co_ but when I zoom the camera in and out the light changes direction which changes shadow length and light strength on the walls.  With that recalculation above_co_ is there a way to keep the light direction unaffected by camera zooming?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-07-28T15:38:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_light.direction _eq_ camera.target.subtract(camera.position).normalize()_sm_light.direction.y _eq_ -0.5_sm__lt_/pre_gt__lt_p_gt_We could normalize the vector so that it always has the length 1. Is that better _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#JE6HE%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#JE6HE#4_lt_/a_gt_ ? _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-07-28T16:03:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_That_t_s perfect!! Thanks so much man!  When I become a millionaire you_t_re invited to my boat party lol_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-07-28T16:20:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Glad I could help. Good luck and... see you on the boat! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]