[{"Owner":"alexoy","Date":"2018-03-12T22:13:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi all!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI use Blender for modelling. I_t_ve found out that mesh_t_s instances can greatly improve performance_co_ however I_t_ve got 2 issues after importing scene in Babylon.js_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. There are no collisions with any instances except _qt_parent_qt_ mesh. In Blender collision checkbox is set and affects all instances (no chance to set it separately_co_ but that_t_s OK in this case). How to enable collisions?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. There are no tags for individual instance. I can set them for _qt_parent_qt_ mesh_co_ in Blender tags are visible for all instances_co_ however they are not accessible from Babylon.js. How to set different tags for individual instance?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-13T17:37:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve tried to repeat the same thing on playground with a very basic scene - _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#NKZ8CX_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#NKZ8CX_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ both boxes have collisions _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ so probably a problem on my side somewhere.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut still something strange with tags_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- initially I_t_ve applied tag to the mesh _qt_Cube_qt__co_ not _qt_Cube.001_qt__co_ which is an instance_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- console shows that tag exists only for _qt_Cube.001_qt_. That means_co_ that random mesh/instance gets my tags - how do I use it later?!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCould you please make_co_ that we can set tags for instances independently? So any instance can have it_t_s own tags.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT ABOUT COLLISIONS_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCollisions disappear when a parent mesh is joined from multiple meshes with different materials.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-03-13T19:48:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFirst_co_ when a .babylon file is loaded any tags found in a mesh are applied to any instances.  Currently_co_ there are no unique tags for instances supported in this format.  They look like they are supposed to be _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.mesh.ts#L2579_qt_ rel_eq__qt_external nofollow_qt__gt_copied from the original mesh_lt_/a_gt_.  I could grey out adding them in the Blender interface (along with other stuff)_co_ but that is not going to help you.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI remember an issue last July with instances &amp_sm_ collisions.  The code has move repos since then_co_ so I do not have the commit.  There is code to export an instance_t_s imposter if found.  It does need to be set on each instance.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_class MeshInstance_dd_\n     def __init__(self_co_ instancedMesh_co_ rotation_co_ rotationQuaternion)_dd_\n        self.name _eq_ instancedMesh.name\n        if hasattr(instancedMesh_co_ _t_parentId_t_)_dd_ self.parentId _eq_ instancedMesh.parentId\n        self.position _eq_ instancedMesh.position\n        if rotation is not None_dd_\n            self.rotation _eq_ rotation\n        if rotationQuaternion is not None_dd_\n            self.rotationQuaternion _eq_ rotationQuaternion\n        self.scaling _eq_ instancedMesh.scaling\n        self.freezeWorldMatrix _eq_ instancedMesh.freezeWorldMatrix\n        \n        if hasattr(instancedMesh_co_ _t_physicsImpostor_t_)_dd_\n            self.physicsImpostor _eq_ instancedMesh.physicsImpostor\n            self.physicsMass _eq_ instancedMesh.physicsMass\n            self.physicsFriction _eq_ instancedMesh.physicsFriction\n            self.physicsRestitution _eq_ instancedMesh.physicsRestitution\n# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n     def to_scene_file(self_co_ file_handler)_dd_\n        file_handler.write(_t_{_t_)\n        write_string(file_handler_co_ _t_name_t__co_ self.name_co_ True)\n        if hasattr(self_co_ _t_parentId_t_)_dd_ write_string(file_handler_co_ _t_parentId_t__co_ self.parentId)\n        write_vector(file_handler_co_ _t_position_t__co_ self.position)\n        if hasattr(self_co_ _t_rotation_t_)_dd_\n            write_vector(file_handler_co_ _t_rotation_t__co_ self.rotation)\n        else_dd_\n            write_quaternion(file_handler_co_ _t_rotationQuaternion_t__co_ self.rotationQuaternion)\n\n        write_vector(file_handler_co_ _t_scaling_t__co_ self.scaling)\n        # freeze World Matrix currently ignored for instances\n        write_bool(file_handler_co_ _t_freezeWorldMatrix_t__co_ self.freezeWorldMatrix)\n\n        if hasattr(self_co_ _t_physicsImpostor_t_)_dd_\n            write_int(file_handler_co_ _t_physicsImpostor_t__co_ self.physicsImpostor)\n            write_float(file_handler_co_ _t_physicsMass_t__co_ self.physicsMass)\n            write_float(file_handler_co_ _t_physicsFriction_t__co_ self.physicsFriction)\n            write_float(file_handler_co_ _t_physicsRestitution_t__co_ self.physicsRestitution)\n            \nfile_handler.write(_t_}_t_)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-13T21:32:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ thanks for the answer. Can you please check my playground demo? Nothing to edit_co_ just open and check the console - it shows_co_ that mesh _qt_Cube_qt_ has no tags_co_ but an instance _qt_Cube.001_qt_ does have. I attach a .blend file here - you can see_co_ that both meshes should have the same tag_co_ what doesn_t_t happen in a playground. In an application - If I know_co_ that mesh _qt_Cube_qt_ must have a tag - I can_t_t access it_co_ sorry. A bug?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOh_co_ and I have found what causes disabled collisions for all instances except one - when my Blender object is made from different joined meshes with different materials. Example - _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#NKZ8CX%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#NKZ8CX#1_lt_/a_gt_ - one mesh has no more collisions_co_ but the second does have. As you can see_co_ cubes now contain 2 materials. Is that true that we can create instances for meshes with _lt_strong_gt_one_lt_/strong_gt_ material only or this is a bug? It looks strange_co_ for example_co_ if you have 1 complex object -&gt_sm_ you create 9 instances and suddenly a _qt_parent_qt_ becomes one of instances_co_ with collisions enabled_co_ while all other 9 stays without.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you want me to test anything else to help to solve these issues?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ data-fileid_eq__qt_17477_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_17477_qt_ rel_eq__qt__qt__gt_instance.blend_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-03-14T15:31:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDid not look at your blend.  Looking at the long string I see_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__qt_meshes_qt__dd_[{_qt_name_qt__dd__qt_Cube.001_qt__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThen at the very end of the section  for that mesh there is_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__qt_instances_qt__dd_[{_qt_name_qt__dd__qt_Cube_qt__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tYour assumptions that _qt_Cube.001_qt_ is the instance &amp_sm_ the mesh is _qt_Cube_qt_ is wrong.  Why they both do not have the tag_co_ I do not know.  That is not my PR to read tags in a .babylon.  I also did not add tags to the export_co_ but looks like it works.  If the export is confusing the mesh with the instance_co_ I would look into that_co_ but I am doing my own work right now.  I think the export code defines the mesh as the first one encountered.  In that case_co_ probably not much can be done.  If you refer to them by name_co_ it should not matter (assuming they all get the same tags _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have no idea whether the material shared by an instance can in fact be a multi-material.  I am generating a properly formatted .babylon file_co_ as far as I can tell.  If that is not supported_co_ maybe an exception should be thrown.  How this impacts collision_co_ who knows.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-14T18:18:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo worries _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ I understand_co_ that you are not the only one who worked on these features. You are just the only one who responded yet_co_ thanks for that_co_ I don_t_t know whom to ask.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_208399_qt_ data-ipsquote-contentid_eq__qt_36320_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1521041462_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tIf the export is confusing the mesh with the instance_co_ I would look into that\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI think that_t_s the case. Historically _qt_Cube_qt_ was created first_co_ then with _lt_strong_gt_Alt+D_lt_/strong_gt_ an instance _qt_Cube.001_qt_ was created. In .babylon file it is vice-versa.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo the questions we have_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. How to get tags from every instance? Demo shows they are missing.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Can we create instances for objects with multiple materials? Demo shows we can_co_ but without collisions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. How to enable collisions for instances with multiple materials inside?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s wait for more experts _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-15T17:20:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t1. Tags are not duplicated when an instance is created but you can just manually call  Tags.AddTagsTo(instance_co_  source.tags)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Instances must have exactly the same material as source. This is the only constraints. Collisions are not related to materials\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. Can you repro only this one? This should not be related at all\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-03-15T17:52:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ for 1_co_ I did have a link in my first response_co_ where in ParseMesh this exact code is.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn 2_co_  This is user error.  The tag for instance from his PG contains no physics imposter tags_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__qt_instances_qt__dd_[{_qt_name_qt__dd__qt_Cube_qt__co__qt_position_qt__dd_[-2_co_0_co_0]_co__qt_rotation_qt__dd_[0_co_0_co_0]_co__qt_scaling_qt__dd_[1_co_1_co_1]_co__qt_freezeWorldMatrix_qt__dd_false}]}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI also indicated in my first response_co_ the need to add an imposter for each instance in the .blend.  In theory_co_ the data of the object designated by the exporter as the _t_Mesh_t_ could also be written for those designated as instances_co_ but I am not. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI do not think there is some designation in Blender of the _qt_master_qt_ mesh &amp_sm_ the linked copies other than naming (too weak).  This also might limit when no imposter is wanted.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-15T18:04:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t1. Oh right..So it should work _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-15T18:06:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ I know this is strange_co_ but really - if I join in Blender meshes with the same 1 material and then create an instance - everything is Ok and all collisions exist_sm_ but if I join meshes which have different materials and then create an instances - collisions disappear.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPG - _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#NKZ8CX%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#NKZ8CX#1_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBoth objects have exactly the same materials. Left object has become _qt_transparent_qt_ and right one still has collisions. I didn_t_t change anything else except materials before creating an instance.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__co_ I do not use additional physics plugins_co_ only built-in _qt_Check Collisions_qt_ in Blender.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-15T18:07:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHow do you know that collisions disappear?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-15T18:08:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_208664_qt_ data-ipsquote-contentid_eq__qt_36320_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1521137265_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tJust now_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHow do you know that collisions disappear?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tWith AWSD keys try to go through both objects.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-15T18:13:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIf you want I can create one more example with the same objects_co_ but 1 common material only. You will see the difference\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-15T18:18:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ here we are - _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#NKZ8CX%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#NKZ8CX#2_lt_/a_gt_ - the only thing I did is removed red material _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ now both objects have collisions\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-15T22:29:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyeah!!! it was a bug!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll fix it for next commit\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot for your resilience _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-16T08:06:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ great _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat about tags? As I understood you agreed_co_ that every instance should have the same tags automatically. Simple use case_dd_ in Blender you create a house _qt_myHouse_qt__co_ assign a tag _qt_empty_qt_ to it_co_ then create some instances to place them somewhere else. They will get names _qt_myHouse.001_qt__co_ _qt_myHouse.002_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ later if you try to read tag in BJS from your initial house _qt_myHouse_qt_ - you will notice that it has disappeared_co_ moreover - it is no longer a parent mesh_co_ but an instance. Now parent mesh is _qt_myHouse.002_qt_ somehow and it really contains your tag. Somehow they swap places. My guess is that the latest created instance becomes a parent mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe same PG shows the idea_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#NKZ8CX%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#NKZ8CX#1_lt_/a_gt_ - console shows that _qt_Cube_qt_ has no tags and is not a mesh_co_ however it was created first and tag was assigned to it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-16T18:21:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCube.001 is the mesh and Cube is the instance from BJS loading point of view.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo perhaps some inversion happened in the exporter?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI agree on the fact that isntances can have tags and these tags are loaded from the file. But I do not agree  on the fact that instances should have the same as the source mesh. They could be different. It is on you to set the same tags to both objects in Blender\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-16T19:03:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ different tags possible for instances is even much more better.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAbout inversion - yes_co_ some kind of it happens. If I create_co_ for example_co_ 20 instances - then _qt_Cube.020_qt_ will become a mesh. I even tried to delete it - then _qt_Cube.019_qt_ becomes a mesh _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you help with disappearing tags and roles inversion too? Blender shows the same tags automatically for the mesh and all the instances_co_ it may be one of issue reasons too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-19T15:48:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOn my side (bjs) the loader seems ok. Pinging _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ to help with debugging on Blender side\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-03-19T16:43:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI do not see a mesh - instance like relationship in the Blender API.  Just meshes which share the same geometry.  The first mesh encountered by the exporter which has shared geometry_co_ gets to be the mesh in BJS.  The simplest way is just to\n_lt_/p_gt_\n\n_lt_ul_gt_\n\t_lt_li_gt_\n\t\tadd all your Blender duplicates\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\texport once_co_ and look in the log file to see which mesh is the BJS Mesh.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tEdit THAT meshes tags.\n\t_lt_/li_gt_\n_lt_/ul_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-19T19:16:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__co_ Kind of solution for a parent mesh_co_ yes. A workaround _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ but how to set different tags for different instances? Currently Blender shows the same tags everywhere. If I change the instance_t_s tags - mesh_t_s are changed too.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd one more idea about roles inversion_dd_\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_209051_qt_ data-ipsquote-contentid_eq__qt_36320_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1521477787_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tThe first mesh encountered by the exporter which has shared geometry_co_ gets to be the mesh in BJS\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t.. what will happen if you take the last mesh_co_ not the first? Maybe in that case an initial mesh _qt_Cube_qt_ will always stay a parent mesh?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-03-19T20:46:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe order of iterating through the array of meshes would have to be reversed.  Not sure it would always work_co_ since I do not know what drives the order in the first place.  Have no plan to do that when you could just change the name for the mesh that is earliest in the array to be whatever name you wish.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs far as unique tags for each instance (whether the loader reads it or not)_co_ I added it to a list. Would not look for it anytime soon.  There is only one other thing on the list &amp_sm_ I have my own work.  PR the change yourself_co_ if you wish.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-03-23T19:23:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30699_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30699-alexoy/_qt_ rel_eq__qt__qt__gt_@alexoy_lt_/a_gt__co_ checking in Blender_co_ duplicates share a data directory.  The exporter custom properties are in the data directory_co_ as shown on the data tab_co_ so there may only be a single version.  Blender_t_s sharing of data precludes unique tags_co_ so there will be no exporter changes for this.  The _qt_2_qt_ in the picture_co_ shows 2 meshes sharing the same data_co_ just like materials and everything else in Blender_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_tags2.jpg.2cf1def0e7b9f37c0d766ed189fda844.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17622_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/tags2.jpg.2cf1def0e7b9f37c0d766ed189fda844.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would recommend to use your mesh name to hold your tags.  Something like the format of _t_mymesh_dd_tag1_co_tag2_t_.  Then have a loop to transfer_dd__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_for (var i _eq_ 0_co_ len _eq_ scene.meshes.length_sm_ i &lt_sm_ len_sm_ i++){\n    var name _eq_ scene.meshes[i].name_sm_\n     if (name.startsWith(_t_myMesh_dd__t_)) {\n          scene.meshes[i].tags _eq_ name.substr(7)_sm_\n     }\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-03-23T22:58:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__co_ thanks for explanation. So we could think that Blender_t_s mesh is a data container and an instance is more like a reference to this data. Correct?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo the issue with collisions is/will be solved by Deltakosh_co_ tags are common for all Blender instances.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe only problem left is about disappearing tags. While all instances should share the same tag - it is not accessible from BJS code. Had you a chance to find what causes this?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"alexoy","Date":"2018-05-04T17:28:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__co_ any news about missing tags in instances? Currently it_t_s impossible to use instances if somebody needs tags\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]