[{"Owner":"ramsestom","Date":"2016-05-05T23:10:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have a scene with physics where I need to rotate some objects in the WORLD space. However_co_ the physics do not seems to be updated after the rotation. I made an example to show the issue_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MLACF%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MLACF#0_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAt start_co_ the ball is well affected by gravity and fall on the box. But then_co_ if I rotate the two objects with mouse so that the ball is now on one side of the box or bellow it_co_ the ball do not move (it should be attracted by gravity to the bottom of the screen when the box surface do not block it...)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo how can I update physics on rotated objects?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-05-06T01:00:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MLACF%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MLACF#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHi R.  I_t_m sure what you are using _lt_em_gt_sbm_lt_/em_gt_ for_co_ but I disabled it.  No parent on sphere... he needs to move free.  Now I rotate box_co_ not sbm.  Ball is active now_co_ eh?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHope this helps.  Here is _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1XAAKS%237_qt_ rel_eq__qt_external nofollow_qt__gt_another simple Oimo physics playground_lt_/a_gt_... if you_t_re bored. Click on canvas_co_ hit/hold any key. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ramsestom","Date":"2016-05-06T01:18:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi. I am actually using sbm to group sphere and box. Because here this is only a simple example but actually_co_ in the game I am trying to create_co_ there would be some balls inside cubes and the user should be able to rotate all the objects of the scene at once (imagine he has a cube with a ball inside and he want to rotate it in front of him like he would do with a real cube by changing the face he is looking at. If the ball is at the _qt_top-left-front_qt_ corner of the cube and the user rotate the cube on the y axis so that he now has the side of the cube that was left in front of him_co_ I want the ball to appear on the _qt_top-right-front_qt_ corner). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can achieve this by rotating cube + sphere like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MLACF%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MLACF#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut when you have multiple meshes that you need to rotate_co_ this is kind of a mess. That is the reason why I would have like to be able to group meshes and rotate them all at once without messing with the physics...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-05-06T01:55:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ I think I understand_co_ thanks.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou DO want to use physics_co_ right?  If you put the sphere in group that isn_t_t affected by gravity_co_ then the ball will not drop or roll.  It will hold position WITH sbm.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn your example_co_ with physics ON_co_ ball will not stay in top left corner.  It will fall immediately to the bottom left corner.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s say a single ball is bouncing inside the box... un-parented (it has to be_co_ in order to bounce around_co_ unless its parent is bouncing along with it).  Let_t_s use that CannonJS meshImposter example for a moment... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1FXRWT%2313_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1FXRWT#13_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBall starts in top-left-front_co_ but immediate ball drop... not parented to anything.  To keep ball in top-left-front_co_ then rotate the box right (making ball in top-right-front)_co_ you almost HAVE TO turn-off the physics.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr do you need physics at all? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  I am confused_co_ aren_t_t I?   Sorry.  Leaving ball be physics-free to bounce and roll... versus parenting ball to something which would kill its physics movements.  If the ball is bouncing_co_ and the box is rotated 90 degrees right_co_ and the ball keeps bouncing _qt_correctly_qt_ during and after the box rotation_co_ would that be a success?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t*scratch scratch*  (I_t_m easily confused_co_ sorry).  I will do some more testing... see if parenting ... stops ball physics movement.  I think it does.  But your ball DID do a drop at scene-run time_co_ even though it was parented.  hmm.  Maybe I am wrong about parenting stopping physics motion.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-05-06T02:29:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again.  Ok_co_ I was wrong_co_ parenting does not kill ball motion.  hmm_co_ I learn something every day.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tBut... check this out... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1FXRWT%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1FXRWT#14_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsbm creation at line 33_co_ ball.parent  _eq_ sbm at line 34_co_ but line 35 is no-go.  Activate line 35_co_ and the ball falls thru the meshImposter box.  Hmm.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOimo has no meshImposter option_co_ so an Oimo-legal box... would be 6 planes or box flat-panels... assembled into a box shape.  All other attempts to put a sphere inside of an Oimo box imposter... fail... even when the box is created with BACKSIDE or DOUBLESIDE mode.  Darn.  A failed attempt_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MLACF%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MLACF#5_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSphere.position.y _eq_ 0.  Now the Oimo b-imposter fires the sphere out-of the box.  We can_t_t use a standard box with Oimo.  We need a box of walls.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  _lt_a href_eq__qt_http_dd_//www.babylonjs.com/Demos/Physics/physics.js_qt_ rel_eq__qt_external nofollow_qt__gt_Here is a box of walls_lt_/a_gt__co_ (labeled // playground)_co_ that is used for _lt_a href_eq__qt_http_dd_//www.babylonjs.com/Demos/Physics/_qt_ rel_eq__qt_external nofollow_qt__gt_the physics demo on the BJS main website_lt_/a_gt_.  It is an Oimo-based demo_co_ I believe.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Sorry if I am not being helpful.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ramsestom","Date":"2016-05-06T17:03:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_Ball starts in top-left-front_co_ but immediate ball drop... not parented to anything.  To keep ball in top-left-front_co_ then rotate the box right (making ball in top-right-front)_co_ you almost HAVE TO turn-off the physics._lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYes I took a bad ball start position to explain (because in reality_co_ my _qt_box_qt_ containing balls is not empty_co_ it is a 3D maze. Which is the reason why a ball can stay at a given position without necessarily falling _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_ )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ lets keep it simple for the moment and lets consider a simple box containing a free ball like in the example you created. What I want to be able to achieve is to rotate the box (like you would do with a real box that you rotate between your hands irl) and to have the ball inside the box correctly affected by the world gravity after this box rotation (I realized that I just had to rotate the box and let the ball free to mimic reality so no more grouping needed)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI made a sample from yours_dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1FXRWT%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1FXRWT#15_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_If you rotate the box with the mouse_co_ you will see that the ball movements is inconsistent with real physics... So there is an issue_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_Oimo has no meshImposter option_co_ so an Oimo-legal box... would be 6 planes or box flat-panels... assembled into a box shape.  All other attempts to put a sphere inside of an Oimo box imposter... fail... even when the box is created with BACKSIDE or DOUBLESIDE mode.  Darn.  A failed attempt_dd__lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYes I know that_co_ I already have my box defined as 6 planes on which I apply 6 Planes impostors in my real code (in Haxe. I only use javascript version of babylonjs to debug and have help on the forum _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_ ). No big deal.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-05-06T22:57:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again.  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1FXRWT%2317_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1FXRWT#17_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI turned on a little ball roll (friction and restitution) (friction does nothing on spheres_co_ though_co_ because of no significant contact area).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo be frank_co_ I don_t_t see the inconsistent ball movements.  Okay_co_ okay_co_ when the ball goes thru the box walls_co_ that_t_s certainly not sane.  But other than that... it looks... pretty good.  Maybe.  Maybe I_t_m not inspecting properly_co_ though.  I_t_m a bit distracted at the moment_co_ but I wanted to visit the topic again... see what_t_s shakin_t_ here.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Thanks for the comments and explanations.  Hopefully others will comment.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA note for testers... there is a type of vertical drag active here in Ram_t_s demos.  Drag up/down is active.  That_t_s when it is easy to send the ball through the box walls... gone until reRUN.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ramsestom","Date":"2016-05-07T00:32:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhat I found inconsistent is that if you rotate the cube 1/8 by sliding vertically once with the mouse_co_ the ball fall inside bottom corner of the box (till then_co_ everything ok) but the next 1/8 horizontal rotation (by sliding vertically once more with the mouse)_co_ the ball start jumping up (whereas it should just roll on the bottom face of the box). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know maybe this only requiere some tuning of ball elasticity and friction but it still seems an unnatural behavior to me.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd the fact that the ball can escape the box when you turn it multiple times also shows that the system certainly has issues _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway I made a sample with the camera centered on the z axis (which render the understanding of what happen easier as gravity and bottom of the screen match perfectly)  \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1FXRWT%2318_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1FXRWT#18_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-05-17T12:58:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ it is interesting you got internal collisions to work _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tPutting an object INSIDE another object might work and might now. Try changing the engine to Oimo and you will see that the box _qt_spits_qt_ the ball out. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo get internal collision working properly_co_ you will have to create 6 walls and add collidors to each and every one of them. Then_co_ rotate them together (or using a parent).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe reason the balls falls out (or escapes) from time to time is because you are turning the box too much in each step. Turning 45 degrees on each step might make the engine think that the ball is suddenly outside of the box (which_co_ evidently_co_ does happen). The ball will then simple fall out. Maybe add a _qt_pointermove_qt_ event that changes the rotation in smaller steps.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]