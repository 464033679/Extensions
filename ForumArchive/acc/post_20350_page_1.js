[{"Owner":"Arthuron","Date":"2016-02-05T08:56:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys_co__lt_br_gt__lt_br_gt_\n\tIam a newbie and thats my first question here. I have some little trouble with my first steps with babylonJS._lt_br_gt_\n\tMy english skills not the best but i hope u undertand what i want_co_ i will explain it with some of my code snippets.\n_lt_/p_gt_\n\n_lt_div_gt_\n\t \n\t_lt_pre_gt_\n_lt_code_gt_var scene _eq_ new BABYLON.Scene(engine)_sm_\nscene.enablePhysics()_sm_\nvar camera _eq_ new BABYLON.ArcRotateCamera(_qt_Camera_qt__co_ 3 * Math.PI / 2_co_ Math.PI / 8_co_ 50_co_ BABYLON.Vector3.Zero()_co_ scene)_sm_\ncamera.attachControl(engine.getRenderingCanvas()_co_ false)_sm_\n\n// Hemispheric light to light the scene\nvar h _eq_ new BABYLON.HemisphericLight(_qt_hemi_qt__co_ new BABYLON.Vector3(0_co_ 1_co_ 0)_co_ scene)_sm_\nh.groundColor _eq_ BABYLON.Color3.FromInts(255_co_ 83_co_ 13)_sm_\nh.intensity _eq_ 0.5_sm_\n\n// Ground creation\nvar ground _eq_ BABYLON.Mesh.CreateGround(_qt_ground_qt__co_ 100_co_ 100_co_ 1_co_ scene)_sm_\nground.position.y _eq_ -11_sm_\nground.receiveShadows _eq_ true_sm_\nground.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor_co_ {mass_dd_ 0_co_ restitution_dd_ 0.5_co_ friction_dd_ 0.1})_sm_\n\n// Material\nvar matPlan _eq_ new BABYLON.StandardMaterial(_qt_matPlan1_qt__co_ scene)_sm_\nmatPlan.backFaceCulling _eq_ false_sm_\nmatPlan.emissiveColor _eq_ new BABYLON.Color3(1.2_co_ 1_co_ 0.2)_sm_\nvar plan _eq_ BABYLON.Mesh.CreateBox(_qt_plane2_qt__co_ 20_co_ scene)_sm_\nplan.position _eq_ new BABYLON.Vector3(20_co_ 0_co_ 0)_sm_\nplan.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor_co_ {mass_dd_ 1_co_ restitution_dd_ 0.5_co_ friction_dd_ 0.1})_sm_\nplan.material _eq_ matPlan_sm_\n\n// Balloon - Thats my Player\nballoon _eq_ BABYLON.Mesh.CreateBox(_qt_balloon_qt__co_ 2_co_ scene)_sm_\nballoon.position _eq_ new BABYLON.Vector3(0_co_ -10_co_ 0)_sm_\nballoon.rotation.y _eq_ 1_sm_\nballoon.body _eq_ balloon.setPhysicsState(BABYLON.PhysicsEngine.BoxImpostor_co_ {mass_dd_ 1_co_ friction_dd_ 0.001_co_ restitution_dd_ 0.5})_sm_\nballoon.material _eq_ new BABYLON.StandardMaterial(_qt_matBallon_qt__co_ scene)_sm_\nballoon.material.emissiveColor _eq_ new BABYLON.Color3(1_co_ 1_co_ 1)_sm__lt_/code_gt__lt_/pre_gt_\n\n\t_lt_p_gt_\n\t\tSo_co_ you can see i add a big yellow cube and small white one on a ground in this scene.\n\t_lt_/p_gt_\n\tNow i add some key event listeners and the functions from the physics example by temechon (btw. i write him a mail with this question.but i think he is a busy man).\n\n\t_lt_pre_gt_\n_lt_code_gt_scene.registerBeforeRender(function () {\n   oKeyBoard.fxKeyEvents(_qt_w_qt_)_sm_\n   oKeyBoard.fxKeyEvents(_qt_d_qt_)_sm_\n   balloon.body.body.linearVelocity.scaleEqual(0.92)_sm_\n   balloon.body.body.angularVelocity.scaleEqual(0)_sm_\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n\t_lt_p_gt_\n\t\t_lt_br_gt__lt_br_gt_\n\t\tSo now i want that my Player (balloon) move forward when i press _lt_strong_gt_W_lt_/strong_gt_ and change the rotation in one direction on press _lt_strong_gt_D_lt_/strong_gt_ .\n\t_lt_/p_gt_\n\n\t_lt_pre_gt_\n_lt_code_gt_var oKeyBoard _eq_ {\n   fxKeyEvents_dd_ function (sKey) {\n      if (sKey _eq__eq__eq_ _t_d_t_ &amp_sm_&amp_sm_ oKeyBoard.bPressRight) {\n         balloon.rotate(BABYLON.Axis.Y_co_ 0.1_co_ BABYLON.Space.LOCAL)_sm_\n      }\n      if (sKey _eq__eq__eq_ _t_w_t_ &amp_sm_&amp_sm_ oKeyBoard.bPressRight) {\n         var v _eq_ new BABYLON.Vector3(0_co_ 0_co_ 1)_sm_\n         var m _eq_ balloon.getWorldMatrix()_sm_\n         var v2 _eq_ BABYLON.Vector3.TransformCoordinates(v_co_ m)_sm_\n         v2.subtractInPlace(balloon.position)_sm_\n         v2.scaleInPlace(1)_sm_\n         balloon.applyImpulse(v2_co_ balloon.position)_sm_\n      }\n   }\n}_lt_/code_gt__lt_/pre_gt_\n\n\t_lt_p_gt_\n\t\t_lt_br_gt_\n\t\tPress _lt_strong_gt_W_lt_/strong_gt_ works pretty well. The Balloon is going in the right direction and there is blocking by the yellow cube._lt_br_gt_\n\t\tAnd when i now press _lt_strong_gt_D_lt_/strong_gt_ my Balloon will rotate in the right way_co_ but if now press _lt_strong_gt_W_lt_/strong_gt_ again_co_ the rotation of my ballon will be resetet to_lt_br_gt_\n\t\this starting rotate values and _qt_move_qt_ into the _qt_old_qt_ direction._lt_br_gt_\n\t\ti have now idea why and i hope that u understand whats my issue and u can help me ?! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_br_gt__lt_br_gt_\n\t\tThe final goal is to create a controle like the good old Micro Machines games_co_ with a bird perspective and WASD-controle... iam not sure that u know what i mean?! ^^_lt_br_gt__lt_br_gt_\n\t\tFell free to ask me if you have any question._lt_br_gt__lt_br_gt_\n\t\tCheers_lt_br_gt_\n\t\tArthuron\n\t_lt_/p_gt_\n_lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-05T12:41:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Arthuron_co_ welcome to the forum!  I think I know exactly what you mean.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s take a look at the flying bed frame I made long ago.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/thruster/t26/flyer26.htm_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/thruster/t26/flyer26.htm_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPush/hold some buttons_co_ or use control or shift number pad items...  rotate the flyer around to some weird angle.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow press any of the position buttons.  The position thrust still aims perfectly along LOCALSPACE x/y/z.  By the way_co_ all the thrusting of this flyer... is done on an invisible box that surrounds the flyer.  The thruster ports and particles are only there for coolness.  Its a box (flyerframe handle)_co_ using basic applyImpulse... or sort-of basic.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow let_t_s look at the _qt_controller_qt_ file for the flyer.  _lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/thruster/t26/js/controller08.js_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/thruster/t26/js/controller08.js_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn there_co_ you will find THIS cool code_co_ written for me by our local super-hero_co_ Deltakosh_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_//  a special func - thanks Deltakosh! _dd_)\n\nBABYLON.FlyerFrameController.prototype.doTransformPerFlyerQuat _eq_ function (vec) {\n\tvar mymatrix _eq_ new BABYLON.Matrix()_sm_\n\tthis.flyerframe.handle.rotationQuaternion.toRotationMatrix(mymatrix)_sm_\n\treturn BABYLON.Vector3.TransformNormal(vec_co_ mymatrix)_sm_\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tYou can name it anything_co_ of course.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow let_t_s look at 2 of the 8 _lt_u_gt_positioning_lt_/u_gt_ functions just above that.  Here_t_s translate -x and translate +y funcs.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\tBABYLON.FlyerFrameController.prototype.transNegativeX _eq_ function () {\n\t\tthis.flyerframe.thrusters[7].start()_sm_\n\t\tthis.flyerframe.thrusters[10].start()_sm_\n\t\tthis.flyerframe.thrusters[13].start()_sm_\n\t\tthis.flyerframe.thrusters[16].start()_sm_\n\n\t\tvar forcevec _eq_ this.doTransformPerFlyerQuat(new BABYLON.Vector3(-this.transforce_co_ 0_co_ 0))_sm_\n\t\tvar cntptvec _eq_ this.flyerframe.handle.position_sm_\n\t\tthis.flyerframe.handle.applyImpulse(forcevec_co_ cntptvec)_sm_\n\n\t}_sm_\n// --------------------------------------------------------------------------------------------------\n\tBABYLON.FlyerFrameController.prototype.transPositiveY _eq_ function () {\n\t\tthis.flyerframe.thrusters[6].start()_sm_\n\t\tthis.flyerframe.thrusters[12].start()_sm_\n\t\tthis.flyerframe.thrusters[18].start()_sm_\n\t\tthis.flyerframe.thrusters[24].start()_sm_\n\n\t\tvar forcevec _eq_ this.doTransformPerFlyerQuat(new BABYLON.Vector3(0_co_ this.transforce_co_ 0))_sm_\n\t\tvar cntptvec _eq_ this.flyerframe.handle.position_sm_\n\t\tthis.flyerframe.handle.applyImpulse(forcevec_co_ cntptvec)_sm_\n\t}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAgain_co_ ignore the thrusters... they are there for _qt_looks_qt_.  The real thrusting happens against flyerframe.handle_co_ the invisible box around the flyer. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_this.transforce_lt_/em_gt_ is the amount of impulse power.  Notice in the transNegativeX func_co_\n_lt_/p_gt_\n\n_lt_pre_gt_\nvar forcevec _eq_ this.doTransformPerFlyerQuat(new BABYLON.Vector3(-this.transforce_co_ 0_co_ 0))_sm__lt_/pre_gt_\n\n_lt_p_gt_\n\tA negative _lt_em_gt_transforce_lt_/em_gt_ is put into the _lt_strong_gt_X_lt_/strong_gt_ of the vector3 that gets sent to doTransformPerFlyerQuat.  Makes sense_co_ because it is a negative X translation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow let_t_s look at transPositiveY_dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\nvar forcevec _eq_ this.doTransformPerFlyerQuat(new BABYLON.Vector3(0_co_ this.transforce_co_ 0))_sm__lt_/pre_gt_\n\n_lt_p_gt_\n\tA positive _lt_em_gt_transforce_lt_/em_gt_ is put into the _lt_strong_gt_Y_lt_/strong_gt_ of the vector3 that gets sent to doTransformPerFlyerQuat.  Makes sense_co_ because it is a positive Y translation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs you likely know_co_ physics-active mesh and their physics body... use Quaternions to hold the rotation.  Physics bodies essentially ignore Vector3 Euler rotating.  When you applyImpulse to make a rotation (often requires two impulses_co_ in opposite directions_co_ at the same time_co_ to get a nice non-skidding spin)_co_ the rotation values are stored in mesh.rotationQuaternion.  In Deltakosh_t_s _qt_transformer_qt_ func_co_ you can see the rotationQuaternion of my flyer gizmo (flyerframe.handle)... being used.  The transform that is being done... is based-upon a matrix derived from the mesh.rotationQuaternion_co_ and _lt_u_gt_not_lt_/u_gt_ from getting its worldMatrix.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou were SO CLOSE to having it perfect.  This function stopped my flyer dev for 3 months_co_ and I never got as close to getting it correct... as you did. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think if you play around with Deltakosh_t_s transformer a bit_co_ it will work for you_co_ too.  And feel free to use ANYTHING from my flyer (but it uses an OLD Babylon.js version_co_ so it might be a bit stale).  _lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/thruster/t26/flyer26.zip_qt_ rel_eq__qt_external nofollow_qt__gt_Get the zip_co_ here_lt_/a_gt_.  The whole controller08.js file... is full of keypress goodness and button-ready impulsing funcs.  You can drive that flyer with control and shift number pad_co_ or control/shift keys surrounding _sm_ key (for those with no numeric keypads).  I think shift/control page-up and page-down keys are involved with the latter_co_ too.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd_co_ I think... that you can get all the translations into a single func_co_ and all the rotations into a single func_co_ too_co_ if wanted.  I kept them all separated into specialty funcs... just to make it easier for me to read my own code.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAgain_co_ welcome!  I hope I understood your issue.  Example_dd_  You want your right-side impulsing.... to happen on the right-side of the mesh_co_ no matter how the mesh is rotated_co_ correct?  Take some time to try some things with Deltakosh_t_s transformer func... and keep us posted.  I hope it works for you_co_ or at least gives you some new ideas.  Party on!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Arthuron","Date":"2016-02-05T16:33:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you very much for your fast answer _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt__gt_@Wingnut_lt_/a_gt__lt_br_gt_\n\tBut i tried all day to understand this _qt_magic function_qt_ and implemented in my code._lt_br_gt__lt_br_gt_\n\twithout success _lt_img alt_eq__qt__dd_unsure_dd__qt_ data-emoticon_eq__qt_true_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_unsure.png_qt_ title_eq__qt__dd_unsure_dd__qt__gt__lt_br_gt_\n\tI hoped there exist an easy way and anyone says ---_lt_br_gt__lt_br_gt__lt_em_gt__qt_oh yes is realy simple dont use_qt__dd__lt_/em_gt__lt_br_gt__lt_strong_gt_balloon.rotate(...)_sm__lt_/strong_gt__lt_br_gt__lt_em_gt__qt_use bether this one_qt__dd__lt_/em_gt__lt_br_gt__lt_strong_gt_balloon.magicPhysicRotate(...)_sm__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut i realy dont understand physics correctly at the moment._lt_br_gt__lt_br_gt_\n\tMy last try was to dispose my player mesh on as long you pressed the _lt_strong_gt_D _lt_/strong_gt_key and recreate it_co_ with the new (higher) rotaion value ... but this is to dirty _lt_img alt_eq__qt__dd_rolleyes_dd__qt_ data-emoticon_eq__qt_true_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_rolleyes.gif_qt_ title_eq__qt__dd_rolleyes_dd__qt__gt__lt_br_gt_\n\tiam sorry that iam so stupid to understand what you telling me ... do you think_co_ it is bether for to start from the scratch and learning basics about physics?!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-05T17:16:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo no_co_ Authuron_co_ you_t_re not being stupid at all.  I misunderstood your issue.  Sorry about that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSome of us were just recently talking about the need for a mesh.updatePhysicsBodyRotation() function in another topic thread. Interesting that you would need this_co_ at this time.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_115545_qt_ data-ipsquote-contentid_eq__qt_20350_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1454662592_qt_ data-ipsquote-userid_eq__qt_18889_qt_ data-ipsquote-username_eq__qt_Arthuron_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t8 hours ago_co_ Arthuron said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tballoon.rotate(BABYLON.Axis.Y_co_ _lt_span_gt_0.1_lt_/span_gt__co_ BABYLON.Space.LOCAL)_sm_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI didn_t_t notice that part of your code.  Dummy me.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYep_co_ I think that might be called _qt_trying to set the mesh.rotationQuaternion WHILE the physics body has control of rotation_qt_.  Maybe not allowed via normal/standard methods.  Your code is perfect for rotating a BabylonJS mesh via Quaternion_co_ but without a mesh.updatePhysicsBodyRotation()_co_ you have no way of getting those values transferred onto the physics body Quaternion.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs far as I know... AFTER mesh.setPhysicsState()_co_ _lt_strong_gt_TWO_lt_/strong_gt_ Quaternions get involved.  Mesh has mesh.rotationQuaternion_co_ and the physicsBody has a rotation/orientation Quaternion_co_ too.  I suspect they are NOT the same Quaternion.  (As far as I know.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSooooooo.... hmm.  Let_t_s _t_assume_t_... that you need to do manual rotating of the physicsBody of your balloon.  You already know how to get balloon.body  (quite advanced for a new physics user_co_ by the way.  Good job.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow let_t_s pretend you are using Cannon.js as your physics engine of choice.  Let_t_s go visit its API... _lt_a href_eq__qt_http_dd_//schteppe.github.io/cannon.js/docs/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//schteppe.github.io/cannon.js/docs/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow let_t_s choose _t__lt_a href_eq__qt_http_dd_//schteppe.github.io/cannon.js/docs/classes/Body.html_qt_ rel_eq__qt_external nofollow_qt__gt_body_lt_/a_gt__t_ from the left sidebar there.  I_t_m thinking that_t_s the API for the physics body.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice that there is a Quaternion on body.  Cooooool.  balloon.body.quaternion  Look out!  Let_t_s click on the word Quaternion_co_ to go look at _lt_a href_eq__qt_http_dd_//schteppe.github.io/cannon.js/docs/classes/Quaternion.html_qt_ rel_eq__qt_external nofollow_qt__gt_CannonJS_t_s Quaternion class_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tScroll down a bit_co_ and we see cool methods like set_co_ setFromAxisAngle_co_ setFromEuler_co_ setFromVectors... you might want to try some of those.  I have never tried rotating a physics body in this way... so if it blows up and your dog loses a tooth_co_ I_t_m not responsible_co_ ok?  You might be the first BJS user to ever try this... and we want to know how it turns-out_co_ ok?  YOU could be the BabylonJS contributor/inventor for AbstractMesh.updatePhysicsBody_lt_u_gt_Rotation_lt_/u_gt__co_ the sister to _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.3/AbstractMesh#updatephysicsbodyposition-rarr-void_qt_ rel_eq__qt_external nofollow_qt__gt_AbstractMesh.updatePhysicsBodyPosition_lt_/a_gt_.  You could be a BJS superstar!  Cooooool.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_IF_lt_/strong_gt_ you are using Oimo.js instead... umm... we can look at a crappy API for it that I once collected.  Go here...  _lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/misc/j2h02.htm_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/misc/j2h02.htm_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSearch document for...  com.element.oimo.physics.dynamics.  Next to that... _t_RigidBody_t_ (body) label is seen.  Go down the list to item #9...  _lt_span_gt_public var orientation_dd_Quat_sm_  (yay!)  balloon.body.orientation!  Look out!  Careful here.  In Oimo... it might be TWO _t_body_t_... as in _lt_u_gt_balloon.body.body.orientation_lt_/u_gt_._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Now search that same document... for _lt_/span_gt_com.element.oimo.math.  Once found_co_ scroll down a ways... until you find Quat.  Look down through its poorly formatted list of methods_co_ and we see not much _qt_set_qt_ stuff.  But we DO see SOME stuff... especially item #3 - _lt_span_gt_public function init(s_dd_Number _eq_ 1_co_ x_dd_Number _eq_ 0_co_ y_dd_Number _eq_ 0_co_ z_dd_Number _eq_ 0)  hmm_co_ you might be able to force some values into that.  Item 12.. _t_copy_t_ might be useful_co_ too.  Maybe you can tell the physics body.body to copy mesh.rotationQuaternion.   *shrug*  The _t_s_t_ value in the Oimo quat... COULD be the same as the _t_w_t_ value of a _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.3/Quaternion_qt_ rel_eq__qt_external nofollow_qt__gt_BabylonJS quat_lt_/a_gt_.  But maybe not.  They COULD be incompatible. Maybe using _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.3/Quaternion_qt_ rel_eq__qt_external nofollow_qt__gt_BJS quat_lt_/a_gt_ values in an Oimo quat... will give bad results.  Not sure._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_I hope I_t_m not on a wild goose chase.  Maybe none of this stuff will work.  Maybe it will.  Tell us what you discover_co_ please.  _lt_u_gt_You_lt_/u_gt_ are the teacher_co_ now.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  Welcome aboard!  _lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Arthuron","Date":"2016-02-08T08:20:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNew week_co_ new luck ...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_ i will check that and let the community know what i find out ^^\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIam realy the first one ? No one creates a _qt_micro machine_qt_ like controle before me? Ahh comon_co_ u kidding me ?! _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-02-08T08:53:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_115630_qt_ data-ipsquote-contentid_eq__qt_20350_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1454692601_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 2/5/2016 at 6_dd_16 PM_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tAs far as I know... AFTER mesh.setPhysicsState()_co_ _lt_strong_gt_TWO_lt_/strong_gt_ Quaternions get involved.  Mesh has mesh.rotationQuaternion_co_ and the physicsBody has a rotation/orientation Quaternion_co_ too.  I suspect they are NOT the same Quaternion.  (As far as I know.)\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tSo! you are totally correct on the first statement_co_ and half correct on the second one. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThey are two quaternions_co_ coming from two different systems. One is BabylonJS_co_ the other is the physics engine we are currently using. What Babylon_t_s phyiscs plugin does is constantly update the MESH_t_s quaternion with the physics engine_t_s BODY quaternion. and this is why_co_ as you said_co_ the quaternion change in BabylonJS won_t_t affect the body at all.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is a way around it_co_ as you have already wrote - changing the mesh_t_s quaternion and calling mesh.updatePhysicsBodyPosition()_co_ which actually updates the body_t_s rotation as well _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ (if if it doesn_t_T work_co_ please let me know). Maybe changing the name to updatePhysicsBodyTransformation() or something similar would be better. I_t_ll consider this in my physics engine update for 2.4.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18889-arthuron/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18889_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18889-arthuron/_qt__gt_@Arthuron_lt_/a_gt_ - I am sorry_co_ but I didn_t_t really understand your initial question. But a simple answer to your second one would be - use rotate_co_ and update the physics body state (updatePhysicsBodyPosition) right after. this will rotate the  mesh in the physics engine too. But i am not entirely sure this is what you need.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-02-08T19:48:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCompletely agree for the renaming!! (for once_co_ we can break the compat due to how this function name is not good )\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-02-08T20:07:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYei! Breaking changes! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll take care of that. We can leave the old function deprecated_co_ calling the new one.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd anyhow_co_ There are many changes planned for the physics engine_co_ so...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-09T02:14:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tBut but but but... umm... updatePhysicsBodyPosition _lt_u_gt_only_lt_/u_gt_ updates the rotation FROM mesh.rotationQuaternion_co_ correct?  It will not update rotation from mesh.rotation.  (I think)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt WILL update physics body positions... from mesh.position.  See the inconsistency?  I think there is one there.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo update physicsBody rotation... from the values stored in mesh.rotation... umm... let_t_s see.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. var newQuat _eq_ new BABYLON.Quaternion.RotationAlphaBetaGamma(mesh.rotation.y_co_ mesh.rotation.x_co_ mesh.rotation.z)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Get real_co_ Wingy!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  var newQuat _eq_ mesh.rotation.toQuaternion()_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. myOimoBody.body.orientation.copy(newQuat)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RRUBU%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RRUBU#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA little broken testing scene.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  Lines 30-37 is my new Update_lt_u_gt_ROTATION_lt_/u_gt_ func... where I attempt to set... well_co_ you can see.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe box has a little Y-rotation happening (render loop).  NOP line 21 to see the spin.  Or... NOP line 49 to see the not-rotated-on-Y physics activity.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy updater fails_co_ probably in line 36 where I try to do OimoQuat.copy(BjsQuat).  In line 35_co_ I tried something demented.  BJS Quats have x_co_ y_co_ z_co_ and w props.  Oimo Quats have s_co_ x_co_ y_co_ and z props.  De-NOP line 35_co_ and get _lt_u_gt_some_lt_/u_gt_ success!  SOMETHING got copied into the Oimo Quat_co_ because our box starts rotating during the air-drop.  Unexpected axis_co_ though. We were hoping for Y.  Box shows some X-rot.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have SO MUCH to learn.  Thanks for looking-into other names/ideas_co_ and for any thoughts on allowing users to use mesh.rotation as the source values for the rotation update on the physics body.  And thx for correcting my mistakes_co_ Raanan!  I love it when folks do that.  Really.  Less foot taste in my mouth.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-09T02:33:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAbout the renaming...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Maybe we WANT _lt_u_gt_both_lt_/u_gt_ updatePhysicsBodyPosition_co_ AND updatePhysicsBodyRotation_co_ and keep them separate?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Maybe a separate updatePhysicsBodyScale_co_ too?  Just thinkin_t_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   UpdatePhysicsBodyImpostor?  UpdatePhysicsBodyParameters({mass_dd_ 0_co_ friction_dd_ 0_co_ restitution_dd_ .5})_sm_  ??  Goofy.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  I suppose those could be done... by doing _lt_u_gt_another_lt_/u_gt_ mesh.setPhysicsState(something different)_sm_  But doing that might null-out/reset some things_co_ like velocities.  We would want to change impostors while maintaining energy... for maximum goofy-levels.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA good example... is my snow-plowing and snow-blowing game (still a dream).  It is going to take a LOT of little mesh to simulate snow plowing and road grading_co_ but _qt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JFDFW%2310_qt_ rel_eq__qt_external nofollow_qt__gt_Jerome_t_s SPS poor-man_t_s physics engine on a stick_lt_/a_gt__qt_ is up to the task_co_ in my opinion.  In order for artificial snow to roll-off-of the curved meshImpostor blades of a V-plow PROPERLY_co_ it will need to be spheres and sphereImpostors.  Snowballs_co_ essentially.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ after the snow is XX distance from the plow blade_co_ the snow balls _lt_u_gt_could_lt_/u_gt_ be told to LOD into being boxes or pyramids_co_ and switch to boxImpostors.  This might speed-up the scene-wide physics updating speeds.  We would want to switch impostors_co_ yet KEEP the current velocities_co_ and keep mass/inertia/friction... from the original.  Generally_co_ snow plowing is not a high-speed sport_co_ so we caught a break_co_ there.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tPretend a sphere impostor is rolling across a plane_co_ and then suddenly_co_ it changes to a box impostor (yet still a sphere mesh).  Demented.  heh_lt_br_gt_\n\t  _qt_Mom_co_ Jimmy did something to my bowling ball and now it won_t_t roll anymore!_qt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ I_t_m off to snow-blow for an hour_co_ in real life.  Seriously.  brrrrrr.  Thank goodness I have a space suit.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Arthuron","Date":"2016-02-09T17:40:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHmm good player.updatePhysicsBodyPosition()_sm_ works very fine._lt_br_gt__lt_br_gt_\n\tbut now is my next issue that i cant use my applyImpulse() together with my rotations?!_lt_br_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (oKeyBoard.bPressLeft) {\n  player.rotation.y -_eq_ 4_sm_\n  player.updatePhysicsBodyPosition()_sm_\n}\nif (oKeyBoard.bPressRight) {\n  player.rotation.y +_eq_ 4_sm_\n  player.updatePhysicsBodyPosition()_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (oKeyBoard.bPressUp) {\n  var v _eq_ new BABYLON.Vector3(0_co_ 0_co_ 6.5)_sm_\n  var m _eq_ player.getWorldMatrix()_sm_\n  var v2 _eq_ BABYLON.Vector3.TransformCoordinates(v_co_ m)_sm_\n  v2.subtractInPlace(player.position)_sm_\n  player.applyImpulse(v2_co_ player.position)_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\taslong i rotate (press Left or Right in my case)_co_ the player.applyImpulse(...) doesnt run. Only i dont press a rotate button this code will run._lt_br_gt_\n\tanyone an idea for that?_lt_br_gt__lt_br_gt_\n\tcheers\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-09T18:52:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh_co_ sorry_co_ Arthuron.  I wandered-off on tangents... screwing up your thread.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny chance you could make a playground demo showing this issue_co_ with a simple box as the player?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ regarding this code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_  player.rotation.y +_eq_ 4_sm_\n  player.updatePhysicsBodyPosition()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI don_t_t know if that rotation setting is getting set.  On the mesh_co_ yes_co_ it gets set.  On the physicsImpostor_co_ I don_t_t think so.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTry using something like... player.rotate(BABYLON.Axis.Y_co_ 4.0_co_ BABYLON.Space.Local)_sm_  (instead of player.rotation)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tKeep us posted... and make that playground_co_ eh?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  It will make it easier for folks to help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-02-09T19:34:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\trotation is not being used once the mesh has a physics impostor. use the rotate function to give the mesh a small rotation (with the y Axis as rotation axis). this should update the rotation as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs wingnut said - share a playground_co_ we will be able to help much better _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Arthuron","Date":"2016-02-10T10:10:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk ok ok ... i create a scene with my problem in a playground _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_br_gt__lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#2CRZWS%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#2CRZWS#2_lt_/a_gt__lt_br_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can see my little white playerBox and the Big yellow one._lt_br_gt_\n\tits possible to controle the playerBox by using WASD on your keyboard._lt_br_gt_\n\ti want that my little playerBox _lt_strong_gt_cant _lt_/strong_gt_move trough the big one_co_ by this controles._lt_br_gt__lt_br_gt_\n\tNotice_dd__lt_br_gt_\n\ti have removed my other functions and trys-solutions of my issues_co_ to show simple where is my problem._lt_br_gt__lt_br_gt_\n\tHope its know bether understandable what i want. Sorry for my bad explanation _lt_img alt_eq__qt__dd_unsure_dd__qt_ data-emoticon_eq__qt_true_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_unsure.png_qt_ title_eq__qt__dd_unsure_dd__qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-02-10T12:31:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tmoveWithCollision is your friend! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tNo need for physics here. Here is your scene_co_ with small modifications.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#2CRZWS%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#2CRZWS#3_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo do it with physics you will either need to change the physics body directly_co_ or wait for BJS 2.4 where this functionality probably be integrated in the physics engine.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-10T12:49:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI agree!  (like that matters)  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSpeaking of changing the physics body directly_co_ _lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#2CRZWS%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#2CRZWS#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_co_ I_t_m using applyImpulse method to do just that.  You will see the _qt_doTransformPerQuat_qt_ function in action (the magic func Deltakosh wrote for my flyer)_co_ and you_t_ll see the two-impulse _qt_twist_qt_ method that does the rotating.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe rotation isn_t_t acting perfect.  Rotation seems to get _qt_jammed_qt_ sometimes_co_ and you need to give it a little forward/backward to get it to turn again.  Plus_co_ when it DOES jam_co_ the rotation impulses seem to get stored in a capacitor_co_ and they discharge when you hit forward/backward again.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m working on it.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThis method is not exactly good for a walking player_co_ but for a drift-racing car_co_ or spinning doughnuts on the local ice rink with your fried-out Combi_co_ it works pretty well.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Arthuron","Date":"2016-02-10T12:49:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMy Hero _lt_img alt_eq__qt__dd_wub_dd__qt_ data-emoticon_eq__qt_true_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wub.png_qt_ title_eq__qt__dd_wub_dd__qt__gt_!!!_lt_br_gt__lt_br_gt_\n\tThank you very much _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_br_gt__lt_br_gt_\n\tI will waiting for the new version_co_ think there coming a lot of new nice stuff ... but for the moment i can continue my work on my project with this new know how_co_ thanks again.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-10T13:14:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDid you see the way I got that last-second post published_co_ and got in the way of hero worship that was meant for Raanan?  Slimy of me_co_ eh?  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Arthuron","Date":"2016-02-10T13:22:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh now i see what you did _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt__gt_@Wingnut_lt_/a_gt_ _co_ this is pretty amazing toooooo _lt_img alt_eq__qt__dd_wub_dd__qt_ data-emoticon_eq__qt_true_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wub.png_qt_ title_eq__qt__dd_wub_dd__qt__gt__lt_br_gt__lt_br_gt_\n\tabsolute wonderful_co_ know i must choose which solution ist the best for my tracks ingame ... i will try some expiremts with that._lt_br_gt_\n\tFor the Hero request ... Both_co_ you and RaananW  _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt__gt__lt_br_gt__lt_br_gt_\n\tThanks so much for the fast competent help here !_lt_br_gt_\n\tHope Jimmy and his bowling ball story will continue now _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-10T15:19:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/misc/info01.jpg_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/misc/info01.jpg_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat picture applies to the #4 playground demo.  _lt_em_gt_rotPower_lt_/em_gt_ is the same as _lt_em_gt_contactPoint offset_lt_/em_gt_. _lt_em_gt_ rotPower_lt_/em_gt_ is actually a distance.  When rotating left_co_ for example_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 88 - No matter how the player is currently rotated_co_ I set my force vector to push the player toward the _lt_u_gt_player_t_s_lt_/u_gt_ right.  +impulsePower is set in the X slot of the vector3.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 89 - I move the contact point BEHIND (-z) player center.  I want to push +x direction_co_ but at a contact point towards the BACK of the car/player.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 90 - Impulse!  Push localSpace +x (but at a contact point towards the _lt_u_gt_back_lt_/u_gt_ of the mesh)  (localSpace +x means... car driver_t_s right)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 91 - Quickly move the contact point FORWARD-OF player center (+z)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 92 - Reverse the force vector.  It _lt_u_gt_was_lt_/u_gt_ pushing +x.  Now it is pushing -x.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tline 93 - Impulse!  Push localSpace -x (but at a contact point towards the _lt_u_gt_front_lt_/u_gt_ of the mesh)  (localSpace -x means car driver_t_s left)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTwist!  You understood all this already_co_ didn_t_t you Arthuron?  *nod*\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_C_t_mon baby... let_t_s do The Twist_qt__co_ etc.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_   BabylonJS fun!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlus_co_ we might be just getting started_co_ here.  All of us could find new discoveries and have more ideas_co_ yet.  The power of white-boarding in the playground... it never fails.  But the code I write with it... sometimes does.  heh\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]