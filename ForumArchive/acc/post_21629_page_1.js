[{"Owner":"Flomotion","Date":"2016-04-01T15:16:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m playing around with the VR camera. So I made it to always move forward in the direction that you_t_re looking at with the registerBeforeRender function.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut it seems that the camera doesn_t_t check for gravity and collision unless I press one of the keyboard keys to move the camera. Is there a way to check for collision and add gravity all the time?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhile I_t_m at it.. another question. I noticed that the VR camera doesn_t_t display correctly in my cardboard. Both camera views are way to far apart to make a single 3D image. Are there settings where I could change that?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthanks _dd_-)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-02T01:23:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHiya Flomo! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe have seen this _qt_kick the camera_qt_ thing before... it_t_s annoying and lovable all at the same time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tConsider building a camera kicker.  scene.executeWhenReady(function(){camera.position.z +_eq_ .0001})_sm_  MAYBE that will make the camera come alive (fall to ground) at scene startup.  Maybe not.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSubject #2_dd_  Here is a strange playground with a webVRFreeCam.  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JSXHW%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1JSXHW#16_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis shows how to get a ref to a _t__lt_em_gt_metrics_lt_/em_gt__t_ object. It has lots of cool knobs to turn.  In the above demo_co_ we needed to widen the nose-bridge gap for someone.  (Notice how wide it is.)  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think you need to change line 11 to _lt_em_gt_true_lt_/em_gt__co_ to activate junk.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGoof around with all that_co_ see if something is successful.  Let us know.  (thx)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Flomotion","Date":"2016-04-03T11:21:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for your reply!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe camera metrics settings are just what I need. Just have to find the right settings now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe camera kicker is not working unfortunately. I_t_ve made a playground to illustrate_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1GL6RR_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1GL6RR_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe camera should walk onto the ramp. But it goes right through. Only when pressing an arrow left/right it works as it should.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI guess I_t_m looking for this function_dd_ moveWithCollissions()_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut that only works on meshes. Not on a camera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny ideas?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-03T13:27:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again.  Yeah_co_ the kicker isn_t_t working.  Sorry about that.  I gave that very same advice _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/7019-collision/#comment-41873_qt_ rel_eq__qt__qt__gt_here_lt_/a_gt__co_ and it failed then_co_ too.  Dummy me.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have been doing some testing... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1GL6RR%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1GL6RR#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(I like to test this with camera-falls.  If the camera falls to the ground at scene start-up_co_ then we know we have won this challenge.)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWith low gravity like my testing scene_co_ it takes _lt_u_gt_THREE_lt_/u_gt_ cursor-up or cursor-down... to make the camera hit the ground.  Terrible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis POSSIBLY indicates... that gravity movement on the camera is ONLY active while the camera still has inertia.  When camera inertia ends_co_ gravity-checking/update ends_co_ too.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut nothing is for sure.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe fun is in the learning!  SO_co_ now we can continue down the trail... to learn how the engine/scene _qt_services_qt_ camera collisions and gravity.  It looks like a fun_co_ nicely wooded learning trail_co_ and I bet we will find a secret pine cone that allows us to beat this challenge.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Update_dd__lt_/strong_gt_  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1GL6RR%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1GL6RR#4_lt_/a_gt_  -  Line 41 - _lt_em_gt_camera._needMoveForGravity _eq_ true_sm__lt_/em_gt_   Cooool!  Magic pine cone!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAuto-fall is working_co_ but this... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1GL6RR%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1GL6RR#5_lt_/a_gt_ ...still shows camera goes THROUGH the ramp.  hmm.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Flomotion","Date":"2016-04-03T20:51:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Wingnut_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyou_t_re being a real wingman here! And indeed you_t_re getting close.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut if the angle is too steep or camera speed too high_co_ the collision will be missed. Something that moveWithCollissions() was created for. ( This function will try to move the mesh according to given velocity and will check if there is no collision between current mesh and all meshes with checkCollisions activated.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr should the camera be moved in a different way? Would it be possible to emulate a key-press of the forward button?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr should I give up and make the camera a child of a mesh? That_t_s what I did in this PG_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1GL6RR%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1GL6RR#6_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works perfectly. But feels like it shouldn_t_t be like this _dd_-)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Flomotion","Date":"2016-04-03T22:36:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAfter implementing that solution in my scene it seems like it_t_s working (on pc browsers)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut when using my iPhone_co_ the camera switches moving forward and backward depending on the angle of looking up/down.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee here_dd_ _lt_a href_eq__qt_http_dd_//flomotion.nl/temp_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//flomotion.nl/temp_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd also.. after changing metrics the file crashes immediately on iPhone (does work on pc).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo.. looks like the VR cam needs some more attention.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-04T16:44:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tTHat_t_s weird because _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5218-temechon/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5218_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5218-temechon/_qt_ rel_eq__qt__qt__gt_@Temechon_lt_/a_gt_ made it working here_dd_ _lt_a href_eq__qt_http_dd_//leblon-delienne.com/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//leblon-delienne.com/_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-04T21:41:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNice scene_co_ Flomo!  I don_t_t think I can help much more.  Camera moving_co_ or moving mesh with camera parented to it... both are good ideas.  Sorry to hear about the iPhone troubles.  I will keep thinking_co_ though.  Please tell us of your discoveries... if some are made.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Flomotion","Date":"2016-04-04T22:31:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks Wingnut_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI did manage to fix the camera moving backward. Not a handsome fix but a working one. If the camera looks up it flips all angles (only on phone_co_ not on PC). But everything looks smooth. Except for the forwards speed vector.  That seems to be reversed.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var moveCamera _eq_ function() {\n    var camSpeed _eq_ 0.06_sm_\n    var gravity _eq_ -0.15_sm_\n    if (Math.abs(camera.rotation.x)&gt_sm_2 &amp_sm_&amp_sm_ Math.abs(camera.rotation.z)&gt_sm_2) {\n        camSpeed _eq_ camSpeed*-1_sm_\n        camera.rotation.z _eq_ Math.abs(camera.rotation.z*-1)_sm_\n    }\n    var forwards _eq_ new BABYLON.Vector3(parseFloat(Math.sin(camera.rotation.y)) * camSpeed_co_ gravity_co_ parseFloat(Math.cos(camera.rotation.y)) * camSpeed)_sm_ \n    camMesh.moveWithCollisions(forwards)_sm_\n    camera.position _eq_ camMesh.position.clone().add(new BABYLON.Vector3(0_co_ 2.8_co_ 0))_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__dd_ The Temechon VR cam does work on my iPhone. So I_t_ll try to figure out what I_t_m doing wrong. Thanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]