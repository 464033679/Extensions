[{"Owner":"Numa","Date":"2016-12-01T06:10:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi there_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m trying to load a 35mb obj file. on mobile it crashes the browser (on an iphone 6_co_ chrome/safari). I monitored the memory and it looks like when parsing the file memory goes up to 200+mb ? Is that normal? Is there a way to _qt_stream_qt_ the data?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust to make sure I_t_m not doing anything silly with it I_t_d like to test it in the playground_co_ how can I do that?  the file is here_dd_ _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/28007926/gg/bigModel.obj_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//dl.dropboxusercontent.com/u/28007926/gg/bigModel.obj_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy obj data comes in as a string then I_t_m using sceneLoader.Append().\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Kesshi","Date":"2016-12-01T07:59:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThat doesn_t_t surprise me. Obj is a text based format and parsing a 35mb text file is not an easy job._lt_br /_gt_\n\tobj is not good for complex models. I would recommend that you try to convert your model into the babylon format (e.g. with blender or one of the other exporters_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/Exporters_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/Exporters_lt_/a_gt_ )\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-12-01T15:54:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20501-numa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20501_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20501-numa/_qt_ rel_eq__qt__qt__gt_@Numa_lt_/a_gt_ _dd_ I downloaded your .obj file and took a look at it in Blender as _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/16973-kesshi/?do_eq_hovercard_qt_ data-mentionid_eq__qt_16973_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/16973-kesshi/_qt_ rel_eq__qt__qt__gt_@Kesshi_lt_/a_gt_ suggested. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIt imported into Blender fine_co_ but as there is no .mtl file all the 96 meshes have no materials!!_lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI added a light and camera (that can be done in javascript code if you wish) and exported it as a .babylon file. The exporter gave me 96 _qt__lt_em_gt_warnings_lt_/em_gt__qt_ about the export ( the lack of materials)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ I opened the .babylon file in the BJS Sandbox - see image below.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you want either the .blend file or the exported .babylon file so that you can test the.babylon file on a mobile device - I can post them here.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/numobj1.png.d345d42c6c159ffadfd945b54b13dbbe.png_qt_ data-fileid_eq__qt_10488_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_numobj1.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_10488_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_12/numobj1.png.d345d42c6c159ffadfd945b54b13dbbe.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Numa","Date":"2016-12-02T00:52:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks a lot_co_ yeah I converted it into a .babylon file and it was about half the size_co_ that worked better on mobile _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Also I know about the materials_co_ I don_t_t need them in my project.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow I need your opinion_co_ we_t_re going to move away from obj at this point as it is just too heavy to work with (and doesn_t_t have bones) and I_t_m still unsure which format to use to keep files as small/fast loading as possible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe have a very specific workflow. People bring 3d models from all formats into our program (build with unity)_co_ edit the models in unity_co_ save them out to our server_co_ which then displays them in babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tso the workflow is_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tupload any format to server --&gt_sm_ server converts to our format of choice to be read by Unity -&gt_sm_ unity saves back to the server to format of choice --&gt_sm_ view in babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you recommend any format? It must have _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- a robust unity importer/exporter_lt_br /_gt_\n\t- a robust babylon importer_lt_br /_gt_\n\t- support skinned meshes / bones_lt_br /_gt_\n\t- be as light / fast as possible _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI was going to go with GLTF but it sometimes produces files larger than obj_t_s so I_t_m not sure.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-12-02T22:03:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20501-numa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20501_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20501-numa/_qt_ rel_eq__qt__qt__gt_@Numa_lt_/a_gt_ _dd_ not sure I can be much help with your workflow as I tend to work with Blender.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll I can suggest is you have a look at the Unity exporter to.babylon. As you mentioned the .obj format _qt__lt_em_gt_doesn_t_t have bones_lt_/em_gt_ _qt__co_ you might want to check how well the Unity Exporter exports rigs (and animations?).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust one final thought_co_ if the end viewing device is _qt_mobile_qt__co_ you may want to watch out for rigs with a lot of bones. _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__co_ I think_co_ recommends less than 30 bones for mobile devices. Now I have some character rigs with 90+ bones which don_t_t work well on a desktop PC - so could be a disaster on a mobile device .\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou might want to perhaps start a new thread on finding out more about the export of rigs from Unity to BJS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood luck.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Numa","Date":"2016-12-04T07:17:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOk thanks a lot I_t_ll have a look at this soon!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-12-04T16:27:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe theoritical max on iOS is 32.  One my recent Android tablet_co_ the theoretical max is 64.  If you exceed based on what else you are doing to the materials / meshes of the skeleton_co_ it is going to fallback to cpu skinning.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHave already _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/25464-skeleton-animation/#comment-145641_qt_ rel_eq__qt__qt__gt_mentioned_lt_/a_gt_ what else needs to be taken into account. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-12-04T19:09:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ _dd_ Thanks Jeff - I just could not find that thread _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]