[{"Owner":"webGLmmk","Date":"2016-09-16T00:17:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk before I plunge into some crazy hair-brained attempt at a solution_co_ I need to ask if there_t_s an easier way to accomplish this. I created a set of camera/movement controls using Canvas 2D buttons. Look pretty good I think. Looks aren_t_t everything.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe set on the left adjusts the POSITION of the camera along 3 axes.  The set of buttons on the right adjusts the ROTATION of the camera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LYEU3%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#LYEU3#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThey don_t_t work together at all. If i rotate the camera_co_ then want to move forward in that direction_co_ the position controls on the left move me along the original axes...Its like Im looking out the side window of a car thats moving forward. I want to be able to adjust the camera_co_ then have a forward/backward movement action based on where the camera is pointing. The way it works when you are using keyboard/mouse. Except the buttons are to ensure all touchscreen users can adjust view/movement. I_t_m going to create more practical scenes with these controls.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tposition.x/y/z and cameraDirection.x/y/z  both do the same thing. I guess its obvious...the current button listeners are based on the static X/Y/Z axes of the scene. How do I get the camera to move according to the camera rotation? Or is my entire architecture here wrong... You need to be able to swivel the camera along X and Y... And then as long as I had forward and backwards_co_ I could get rid of the other position buttons and have just one group of buttons. But I have to be able to do the forwards/backwards correctly first.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI was hoping someone would see something I dont_co_ or offer a new perspective #pun  ...I_t_ve looked through FreeCamera_co_ TargetCamera_co_ and Camera classes...  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tConfused by inputs Manager still...not at that level I don_t_t think_co_ unless at some point in the future someone could provide a more indepth non-typescripty breakdown _dd_-D\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m sure there are better ways to set up another Virtual Joystick. But I like the idea of having button control options...like a cockpit simulation or something...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRelevant code starts at line 333 in the Playground scene_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\tforwardButton.pointerEventObservable.add(function (d_co_ s) {\n\t\tcamera.position.z +_eq_ 20_sm_\n\t\t//camera.cameraDirection.z +_eq_ 20_sm_\n\t}_co_ BABYLON.PrimitivePointerInfo.PointerUp)_sm_\n\t\t\t\t\n\tbackButton.pointerEventObservable.add(function (d_co_ s) {\n\t\tcamera.position.z -_eq_ 20_sm_\n\t}_co_ BABYLON.PrimitivePointerInfo.PointerUp)_sm_\t_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-16T04:30:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again_co_ W!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Yep_co_ I_t_ve been here before.  Rotate-around a bit_co_ and suddenly _qt_forward_qt_ and _qt_backward_qt_ don_t_t match the new rotation. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LYEU3%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#LYEU3#5_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tInstead of setting .positions and .rotations_co_ we can use the .translate and .rotate funcs.  Rotation-speaking_co_ you have just entered the world of mesh._lt_em_gt_rotationQuaternion_lt_/em_gt__co_ which is another way to store mesh orientation.  The ._lt_em_gt_rotationQuaternion_lt_/em_gt_ property does not exist on most mesh... until needed.  When we called the ._lt_em_gt_rotate_lt_/em_gt_ function in the lines 377-397 area... BJS automatically created thing._lt_em_gt_rotationQuaternion_lt_/em_gt_.  At least I _lt_em_gt_think_lt_/em_gt_ that_t_s what happened.  On newly-made mesh_co_ console.log(mesh.rotationQuaternion) will return _lt_em_gt_undefined_lt_/em_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou will see many places in the BJS source code... _lt_em_gt_if (!mesh.rotationQuaternion) { install one }_lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWelcome to Quaternion hell.  heh.  Quaternions will give you a brain tumor_co_ if you are not careful.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_  Local BJS superhero _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard_qt_ data-mentionid_eq__qt_10310_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt__gt_@RaananW_lt_/a_gt_ loves them_co_ and drives them great_co_ but he_t_s a robot_co_ I suspect.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAnnnnyyyway... I put a ground in your _qt_space_qt_ and I made a _qt_thing_qt_ box.  Instead of moving the camera around... we will be moving _qt_thing_qt_ around (for now).  Test your buttons_co_ make sure your orientations are working the way you want.  I did some simple testing.  I think _qt_thing_qt_ is moving correctly_co_ and per your desires.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen it comes time to use the camera instead of the _qt_thing_qt_ box... I would simply parent the camera to thing_co_ and then set thing.visibility _eq_ 0.  Easy.  And remove that _qt_testing ground_qt__co_ too_co_ of course.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPitch and yaw_co_ but no roll? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYeah_co_ free cameras don_t_t _qt_roll_qt_... by default... _lt_u_gt_unless_lt_/u_gt_... they are parented to a _lt_em_gt_thing_lt_/em_gt_ that allows z-axis roll.  Yours... would be so.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou could roll (z-rotate) the free camera!  It_t_s a rarely-seen thing.  You might want to invite the neighbors over for a _qt_FreeCam Z-rot Party_qt_!   Build up the suspense and anticipation_co_ and then blow their minds with your delicious z-rolls!  Yum!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWhat a goofball I am_co_ huh?  Hope this helps.  Your scene is starting to look nice and work nice.  Well done!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou know what_t_s coming up next_co_ don_t_t you?  Enabling a physics engine with zero gravity_co_ and instead of .translate and .rotate... you applyImpulses.  Thrust.  That _qt_thing_qt_ would drift along in space... just like a real spacecraft.  Put some particleSystem emitters on all 6 sides of _lt_em_gt_thing_lt_/em_gt__co_ so that when you fire a thruster... it emits some _qt_stuff_qt_.... maybe some smoke and fire and ice particles and soot.  Coooool.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe... _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2571-the-wingnut-chronicles/?do_eq_findComment&amp_sm_comment_eq_139766_qt_ rel_eq__qt__qt__gt_this post and linked ZIP_lt_/a_gt_... might be of interest.  It_t_s controller.js file... controls 24 physics-active thruster ports_co_ _lt_u_gt_each_lt_/u_gt_ having 4 particleSystems (not fleshed-out graphically_co_ but ready for fire_co_ smoke_co_ soot_co_ ice particles_co_ all at the same time)... for a grand total of... 96 particleSystems.  Wow! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think you should grab that zip and give it a look-see.  All code... free to steal... even say that you wrote it... it_t_s fine.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFun side story_dd_  The Wingnut Flyer was snagged on an issue for SIX MONTHS... I just COULD NOT figure-out how to fix it.  Wanna know what issue it was?  The exact same issue you just experienced... but in physics engine land.  Once the flyer rotated... left/right/up/down/forward/backward... were mis-oriented.  Truthfully_co_ I shed a few tears when finally Deltakosh and I were able to communicate enough... for him to help me.  Look how large a post YOU needed... to explain the mis-orientation.  I didn_t_t know HOW to ask Deltakosh what I needed. I kept asking him to _qt_run my flyer_qt__co_ _qt_run my flyer_qt__co_ _qt_see what it_t_s doing_qt_. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen one day... he tossed me a function_co_ and I banged on it for awhile... and suddenly_co_ life became wonderful again.  It_t_s in the controller.js file. It_t_s called doTransformPerFlyerQuat()_co_ and I thanked Deltakosh heavily... in the source.  That simple (not-so-simple) 4-line function... made my entire year!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat a great story_co_ eh?  (yawn)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Party on!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"webGLmmk","Date":"2016-09-19T15:40:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_144215_qt_ data-ipsquote-contentid_eq__qt_25213_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1474000250_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 9/15/2016 at 9_dd_30 PM_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHi again_co_ W!\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t   Yep_co_ I_t_ve been here before.  Rotate-around a bit_co_ and suddenly _qt_forward_qt_ and _qt_backward_qt_ don_t_t match the new rotation. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LYEU3%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#LYEU3#5_lt_/a_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t... I put a ground in your _qt_space_qt_ and I made a _qt_thing_qt_ box.  Instead of moving the camera around... we will be moving _qt_thing_qt_ around (for now).  Test your buttons_co_ make sure your orientations are working the way you want.  I did some simple testing.  I think _qt_thing_qt_ is moving correctly_co_ and per your desires.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tWhen it comes time to use the camera instead of the _qt_thing_qt_ box... I would simply parent the camera to thing_co_ and then set thing.visibility _eq_ 0.  Easy.  And remove that _qt_testing ground_qt__co_ too_co_ of course.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tMaybe... _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2571-the-wingnut-chronicles/?do_eq_findComment&amp_sm_comment_eq_139766_qt_ rel_eq__qt__qt__gt_this post and linked ZIP_lt_/a_gt_... might be of interest.  It_t_s controller.js file... controls 24 physics-active thruster ports_co_ _lt_u_gt_each_lt_/u_gt_ having 4 particleSystems (not fleshed-out graphically_co_ but ready for fire_co_ smoke_co_ soot_co_ ice particles_co_ all at the same time)... for a grand total of... 96 particleSystems.  Wow! \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI think you should grab that zip and give it a look-see.  All code... free to steal... even say that you wrote it... it_t_s fine.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t...\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tExcellent...I do recall having seen something about this in previous threads I_t_ve read_co_ I just didn_t_t connect why you_t_d need it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo its actually making the mesh the parent to the camera_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\tcamera.parent _eq_ thing_sm_\n\tthing.visibility _eq_ 0_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI almost thought the translate buttons weren_t_t working...until I realized I just wasn_t_t seeing the movement because it was too small...increased the posStep and its fine!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LYEU3%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#LYEU3#8_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI swear_co_ I gotta watch the whole _qt_scale/view_qt_ thing in these scenes...Like too much lighting_co_ movement too small to notice...where it_t_s not the code thats the problem but the way it looks...I bet a good chunk of questions are coming down to things like that...going on my list of things to watch for along with scope.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood idea with the physics engine and impulses. I can have it emit particles as the camera spins around making people dizzy...like WALL-E.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  *edit*   VR anyone?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want to get some randomized planets going so need to create a constructor that picks one of a few different images_co_ flips it in a random direction_co_ then applies it as a texture...although perhaps its time to look into whatever _qt_procedural generation_qt_ is now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhoa so whats with the matrix thing? gnarly...Saving that for another day... nice work\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]