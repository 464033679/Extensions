[{"Owner":"saldukoo","Date":"2016-03-13T19:57:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m trying to make a huge grid of rectangles run as smoothly as possible. (BABYLON.Mesh.CreateBox)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat i_t_ve done so far_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- Make them use a single material\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- Create the first mesh and clone that for the rest\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- Use Mesh.setEnabled() for the ones that are far away. The increase in FPS was disappointing.  When i was disabling 2480 cubes from a grid of 2500 the fps went from 21 to 24. In comparison_co_ if I create a scene with 20 cubes it runs at max FPS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo what is Mesh.setEnabled doing under the hood? Is there a better way to disable the rendering of a mesh? And is there anything else i should try?\n_lt_/p_gt_\n\n_lt_p style_eq__qt_margin-top_dd_0px_sm_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.3999996185303px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\tUpdate_dd_ As a last resort i tried calling mesh.dispose() for the far-away ones and recreate them when they_t_re near. This gives me the huge increase in FPS i was expecting! But it_t_s a dirty solution for such a simple thing. I have to mention that i_t_m doing this after a click event. Would be a different scenario with more frequent calls.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-03-13T20:06:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMesh.setEnabled(_lt_strong_gt_false_lt_/strong_gt_)_sm_ Should not lower your fps.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can also try the LOD system to mask distant objects\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe use of octree can also help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-13T20:08:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou should think about using instances or even better having on single big object\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-13T20:08:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAnd please provide a playground_co_ we would be able to work together to optimize it\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"saldukoo","Date":"2016-03-13T20:25:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_120421_qt_ data-ipsquote-contentid_eq__qt_21157_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1457899612_qt_ data-ipsquote-userid_eq__qt_5292_qt_ data-ipsquote-username_eq__qt_Dad72_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t33 minutes ago_co_ Dad72 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tMesh.setEnabled(_lt_strong_gt_false_lt_/strong_gt_)_sm_ Should not lower your fps.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tYou can also try the LOD system to mask distant objects\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tThe use of octree can also help.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\taddLODLevel() seems perfect. Couldn_t_t find it in Sokrate though (hint!). I_t_ll try it out.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI read about the octree but didn_t_t try it out yet_co_ will do later.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_120423_qt_ data-ipsquote-contentid_eq__qt_21157_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1457899694_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t31 minutes ago_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYou should think about using instances or even better having on single big object\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI forgot to mention that i_t_m going to use lots of different materials for the grid_co_ so instances aren_t_t an option i guess?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlthough i could try creating a bunch of meshes with each material_co_ then create instances out of them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"saldukoo","Date":"2016-03-13T20:42:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTried out addLODLevel(0_co_ null) for all meshes_co_ which essentially disables all of them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso tried out creating instances instead of clones.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut no noticeable increase in FPS!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m gonna create the playground thing tomorrow and try an octree.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"saldukoo","Date":"2016-03-13T20:58:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tUpdate! As a last resort i tried calling mesh.dispose() for the far-away ones and recreate them when they_t_re near.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis gives me the huge increase in FPS i was expecting! But it_t_s a dirty solution for such a simple thing. If only there was undispose() _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI have to mention that i_t_m doing this after a click event. Would be a different scenario with more frequent calls.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-14T01:53:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tsetEnabled should do the same actually...I would love to see a running sample of it to understand _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-03-14T10:04:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\twell_co_ if you need rectangles_co_ it is to say planar shapes_co_ you probably should consider using planes or grounds (or even tiledGrounds) instead of 3D boxes\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll have far less vertices to compute\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen use instances instead of many occurrences of the same object type.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"saldukoo","Date":"2016-03-14T10:06:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou_t_re right Delta_co_ i tried  a simple experiment in the playground and it indeed did the same.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen i tried calling dispose() on the _lt_strong_gt_material _lt_/strong_gt_when calling mesh.setEnabled(false) and the FPS increased succesfully. (had to create a new material for each mesh).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo the root of my problem is that a material is clogging up the render loop. I_t_m gonna try and fix this now. I think I have to start cloning materials instead of referring to a single one to make this work correctly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT_dd_ tried the same in playground_co_ working just fine without disposing the material. I just dont know anymore.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT_dd_ Okay_co_ posting the _lt_strong_gt_final solution_lt_/strong_gt_. No need to clone or dispose materials. Just setting mesh.material _eq_ null_sm_ after calling mesh.setEnabled(false) and vice versa. (This will NOT set the shared material null_co_ as I incorrectly assumed)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThx for all the suggestions. Case closed _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-03-14T16:05:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou should not have to use _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_mesh.material _eq_ null_sm__lt_/span_gt_ after use _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_mesh.setEnabled(false)_sm_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think if Deltakosh you ask a demo on the playground is to check if an error can not be corrected on setEnabled ().\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBasically_co_ reproduce problems and show a link here. You can start with existing demo and complete with setEnabled. This kind of demo is very quick to make\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"saldukoo","Date":"2016-03-14T17:40:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_120523_qt_ data-ipsquote-contentid_eq__qt_21157_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1457971520_qt_ data-ipsquote-userid_eq__qt_5292_qt_ data-ipsquote-username_eq__qt_Dad72_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ Dad72 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYou should not have to use _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_mesh.material _eq_ null_sm__lt_/span_gt_ after use _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_mesh.setEnabled(false)_sm_ _lt_/span_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI think if Deltakosh you ask a demo on the playground is to check if an error can not be corrected on setEnabled ().\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tBasically_co_ reproduce problems and show a link here. You can start with existing demo and complete with setEnabled. This kind of demo is very quick to make\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI tried but couldn_t_t reproduce it in the playground. Im out of ideas here. Will make sure to use the playground next time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]