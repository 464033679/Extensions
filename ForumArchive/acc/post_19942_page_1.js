[{"Owner":"Fabian Schempp","Date":"2016-01-18T07:26:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co__lt_br_gt_\n\tI_t_m very new to babylon.js._lt_br_gt_\n\tBut I have a lot of experience with Blender and worked with other 3D Engines like Unity3D.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI try to get a bone driven animation from Blender working in babylon.js.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works but it seems that the last keyframe of the animation used as the restpose for the animation_co__lt_br_gt_\n\twhich gives totaly wrong results.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHas this happen to anyone else?_lt_br_gt_\n\tWhat can cause this behavior?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBest_co__lt_br_gt_\n\tFabian\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-01-18T14:20:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Fabian - welcome to the BJS forum. Good to have another experienced Blender user on this forum. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tCan you give us some more detail about what the _qt__lt_em_gt_totally wrong results_lt_/em_gt__qt_ are? And perhaps a .blend file to look at ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-01-18T15:25:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGryff is probably the best to look at your scene.  I was wonder the version you are using?  If not 4.2_co_ which was put out Friday_co_ maybe test with_lt_a href_eq__qt_https_dd_//raw.githubusercontent.com/BabylonJS/Babylon.js/92cc1d7048aaa3fd57a4bbd402b49ed746100260/Exporters/Blender/io_export_babylon.py_qt_ rel_eq__qt_external nofollow_qt__gt_ 4.1_lt_/a_gt_. This was changed to support actions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDK_co_ bringing up the rest position.  Was wondering if maybe the matrix passed in bone constructor might be cloned off as a _rest member_co_ with getter &amp_sm_ returnToRest method?  I am not really sure why_co_ but think it might be important for re-targeting.  DBawel has not been back lately to weight in.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-18T16:26:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t@JCP_dd_ Yep good idea. I was thinking about something similar\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-01-19T19:58:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPossibly another 1 post wonder as not back since post.  Either way_co_  when I went to bone.ts I found a _baseMatrix member.  It is reference copied in constructor_co_ not cloned.  It has a getter_co_ but not a returnTo method.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs this supposed to be for resting?  Perhaps_co_ just change the name to be more recognizable.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-19T21:59:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyep! feel free to do these changes_co_ I see no issue on my side\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-01-20T19:45:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ I have a new version of the exporter ready to go_co_ v 4.2.1.  I made a typo fix for Blender Nodes_co_ &amp_sm_ expanded the set of inverse kinematic bones to ignore to having _t_.ik_t__co_ _t_.IK_t__co_ _t_ik._t__co_ &amp_sm_ _t_IK._t_ in the name.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ the matrix being passed for a bone is not the _t_rest_t_ position_co_ but the current pose.  The rest position looks sometimes like a crucification pose.  That is the one useful for skeleton re-targeting_co_ I think.  Added a separate _qt_field_qt_ on a .babylon for a bone_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_{_qt_name_qt__dd__qt_LeftUpLeg_qt__co__qt_index_qt__dd_2_co_\n_qt_matrix_qt__dd_[-0.1241_co_0.9922_co_0.0117_co_0_co_0.3019_co_0.0265_co_0.953_co_0_co_0.9452_co_0.1218_co_-0.3028_co_0_co_0_co_4.0173_co_0_co_1]_co_\n_qt_rest_qt__dd_[-0.1146_co_0.9926_co_0.0412_co_0_co_0.2379_co_-0.0129_co_0.9712_co_0_co_0.9645_co_0.1212_co_-0.2347_co_0_co_0_co_4.0173_co_0_co_1]_co__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tWill PR after I have modified Parse &amp_sm_ constructor.  _rest will be defined as a constructor arg with a default of null.  If null_co_ _rest will be cloned from matrix.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWill add a returnToRest() for a bone.  Also will add a skeleton version which does all bones_co_ as that is how it is likely to be called.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs far as why this topic was started_co_ I am guessing at what he meant_co_ but think this was a reference to what happens when having translation in the animation of the root bone.  I am trying to address this in my QI extension.  I have the advantage of being beforeRender based_co_ which by definition makes me mesh based.  The BJS animation of skeletons is skeleton based_co_ and can have multiple meshes &amp_sm_ multiple root bones_co_ so not so easy to handle internally.  I just tell them to drop dead if there are multiple root bones.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-20T22:20:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you for this hard work\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]