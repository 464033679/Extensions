[{"Owner":"Myjestic","Date":"2016-09-11T12:26:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif I add the following code to my scene_co_ pressing _qt_q_qt_ locks the pointer as wanted.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I press _qt_q_qt_ again_co_ the pointer will unlock only after I click the left mouse button.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow can I prevent this behavior?_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_\t\twindow.addEventListener(_qt_keydown_qt__co_ checkKeyPressed_co_ false)_sm_\n\t// If key _qt_Q_qt_ is pressed \n\t// -----------------------------------------------------------------------------------------\t\t\n\t\tfunction checkKeyPressed(e) {\n\t\t\tswitch(e.keyCode) {\n\t\t\t\tcase 81_dd_ // key q pressed\n\t\t\t\t\tif (!engine.isPointerLock){\n\t\t\t\t\t\tengine.isPointerLock _eq_ true_sm_\n\t\t\t\t\t} else {\n\t\t\t\t\t\tengine.isPointerLock _eq_ false_sm_\n\t\t\t\t\t}\n\t\t\t\t\tbreak_sm_\n\t\t\t}   \n\t\t}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-11T18:27:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20583-myjestic/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20583_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20583-myjestic/_qt_ rel_eq__qt__qt__gt_@Myjestic_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Generally speaking_co_ any _lt_u_gt_._lt_strong_gt__lt_em_gt_is_lt_/em_gt__lt_/strong_gt__lt_/u_gt_SomethingSomething _lt_u_gt_property_lt_/u_gt_..._lt_strong_gt__lt_em_gt_ _lt_/em_gt__lt_/strong_gt_is a check of a _qt_state_qt__co_ and is not used as a _lt_em_gt_setter_lt_/em_gt_.  (At least _lt_em_gt_I think_lt_/em_gt_ that is truth.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt would be nice to find _lt_em_gt_engine.setPointerLock(true/false)_lt_/em_gt_... but I have not found that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ I tried some things.  First_co_ I looked at engine source code... _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.engine.js#L309_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/babylon.engine.js#L309_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ I tried some experiments...  put some of the source code in a playground_co_ goofed around...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#15ECGN%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#15ECGN#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tComplete failure on my part.  heh.  But perhaps you_co_ or others... can repair my mess.  I_t_ll keep testing_co_ too... but I am not doing so well_co_ so far.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Sorry. Calling all forum... HELP.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Myjestic","Date":"2016-09-11T19:21:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey Wingnut_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthanks so far.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo clarify what I want to do_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBabylon.js gives the user (player) the possibility to move the freecamera with the keys and look around with mouse_co_ if left mouse button is pressed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you _qt_walk_qt_ through a large world_co_ the player will suffer finger pain after a while _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I want to give the player the possibility to switch the _qt_look around_qt_ mode between locked cursor and unlocked cursor (left mouse button pressed).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI played a bit with the Pointer Lock API but get no good results.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI did not know that this small task is so complicated _lt_img alt_eq__qt_-_-_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sleep.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sleep@2x.png 2x_qt_ title_eq__qt_-_-_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-11T20:04:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI found this PG_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#QKQHS%23227_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#QKQHS#227_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tusing the PG search_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/playground?q_eq_pointerlock_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/playground?q_eq_pointerlock_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Myjestic","Date":"2016-09-11T21:15:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk sry_co_ did not find this example. _lt_img alt_eq__qt__dd_blink_dd__qt_ data-emoticon_eq__qt__qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_blink.png_qt_ title_eq__qt__dd_blink_dd__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWhat displeases me is_co_ that the browser is asking for hiding the cursor. Can I hide it without that message or lock it without hiding?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Myjestic","Date":"2016-09-12T14:53:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI get the best result if I set the getter.\n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/7743-remove-need-to-click-to-rotate-camera-in-freecamera/?do_eq_embed&amp_sm_comment_eq_46204&amp_sm_embedComment_eq_46204&amp_sm_embedDo_eq_findComment_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#15ECGN%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#15ECGN#8_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I activate the mouse lock for the first time I have to press _qt_q_qt_ two times before it works as expected. Everything else is working in this PG.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-09-12T14:57:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYeah_co_ sorry_co_ M... I told you wrong information about _lt_strong_gt_is_lt_/strong_gt_PointerLock_co_ apparently.  Dummy me.  My apologies.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-12T15:45:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt looks like the problem is here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/a071d99a3ab83d0805a0b891da75f24851088ce9/src/Cameras/Inputs/babylon.freecamera.input.mouse.ts#L69_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/a071d99a3ab83d0805a0b891da75f24851088ce9/src/Cameras/Inputs/babylon.freecamera.input.mouse.ts#L69_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\toffsetX and offsetY are always 0\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-09-15T15:26:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tUnfortunately I_t_m afraid this is beyond our control. Seems like the browser upadte the lock only after click (But I did not do a long search though so I can be wrong)\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-09-15T19:00:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere is a way to do it_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#15ECGN%2313_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#15ECGN#13_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can submit a PR for the fix to the FreeCamera later today.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Myjestic","Date":"2016-09-15T19:48:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey adam_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis is great. Adding the line\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_scene.activeCamera.inputs.attached.mouse.previousPosition _eq_ null_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tto the unlocking section do the trick.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you very much!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]