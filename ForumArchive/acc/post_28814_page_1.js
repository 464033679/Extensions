[{"Owner":"AlbertTJames","Date":"2017-03-03T13:46:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey everyone_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a very simple 2D _qt_minigame_qt_ that looks like this (please don_t_t mind the uglyness) _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_58b97146a2be5_ScreenShot2017-03-03at14_23_08.png.6b294a1aebed2a62006bb9b990c93572.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11870_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58b97146a2be5_ScreenShot2017-03-03at14_23_08.png.6b294a1aebed2a62006bb9b990c93572.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo very simple_co_ only one sprite and a couple of shapes. But my computer (macbook pro) often starts heating up while running the task. So I ran a memory audit (around 700ko increase per minute_co_ that are due to me storing a lot of stuff) and also ran a CPU profile with devtools. Here are the results of the CPU profile_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_58b9720dadff7_ScreenShot2017-03-03at14_22_58.png.25cdc5b37223dd9b5694ece1c6003bcd.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11871_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58b9720dadff7_ScreenShot2017-03-03at14_22_58.png.25cdc5b37223dd9b5694ece1c6003bcd.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI was wondering if those results seemed ok to you ? _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr do you think I might be doing something wrong in the code? (too large to share)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I look at the engine.fps I am at around 60fps_co_ so perfect on that side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe game will be used by around 300 people all over the US with all sort of computers_co_ mine is a high end macbook pro of last year (with of course a shity gpu but still pretty common for macs)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2.2Ghz i7 - 16Gb ddr3 - Intel iris pro 1536 mb - Mac/OS sierra using Chrome Canari\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks !\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-03-03T13:55:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst call this on your canvas_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_canvas.createCanvasProfileInfoCanvas()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tand put screenshot of the window_t_s content when you rendering is the slowest. thanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"AlbertTJames","Date":"2017-03-03T16:25:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_11873_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_03/58b998f80de88_ScreenShot2017-03-03at17_25_05.png.9130ef11f1e73a8157ab241f19d4a6cc.png_qt_ alt_eq__qt_58b998f80de88_ScreenShot2017-03-03at17_25_05.png.9130ef11f1e73a8157ab241f19d4a6cc.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tLooks ok no ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-03-03T16:36:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ I_t_m not really concerned_co_ the number are really low_co_ now if you don_t_t do anything special in 3D it_t_s understandable that most of the time is in C2D.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve just noticed that I don_t_t display the render time in ms in the Canvas Profile_co_ I_t_m going to add it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMasterK did waaaaaaaay much more complicated in his game_co_ so I_t_m pretty confident_co_ but be assured_co_ I wouldn_t_t let a perf issue aside. Perf is top priority.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s keep this thread for a while_co_ I_t_m about to release a new version I_t_m going to add the counter and also profile it thoroughly before releasing it_co_ I_t_ll keep you in touch.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve created this _lt_a href_eq__qt_https_dd_//trello.com/c/Gldvw9w8_qt_ rel_eq__qt_external nofollow_qt__gt_Trello Card_lt_/a_gt_ for me to remind about it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTake a look at MasterK_t_s game here_dd_ _lt_a href_eq__qt_https_dd_//apps.facebook.com/locotitans/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//apps.facebook.com/locotitans/_lt_/a_gt_ all the UI is made with Canvas2D you_t_ll see there_t_s plenty of it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2017-03-03T18:08:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThat chrome profile is showing that the CPU is almost entirely idle. I wouldn_t_t worry too much about the mac book heating up - in my experience they heat up pretty much any time the GPU is running_co_ even for trivial amounts of work. Just how they_t_re made_co_ I think - partly caused by the fact that Apple doesn_t_t like fan noises_co_ so the fans stay off until the machine gets really hot.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MasterK","Date":"2017-03-04T06:41:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI dont worry about c2d_t_s frame time. it_t_s stable and acceptable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m worry about the memory leak...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn our game_co_ play core battle scene 6-8 times will rise memory to 1G....\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd I think BJS dont make good manager with mesh/geom/vertice/buff or other these things.\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhen i dispose all meshes_co_ textures_co_ materials...(almost like scene.dispose) some BJS object hasn_t_t clean memory. _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2017-03-04T10:55:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYou have to pay attention to all reference to your meshes_co_ otherwise it won_t_t be taken into account by the garbage collector. It_t_s not related to bjs in any way. I use bjs in several professional apps_co_ and the only problem I had with the memory management was related to my work on storing meshes and materials.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MasterK","Date":"2017-03-04T13:23:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5218-temechon/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5218_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5218-temechon/_qt_ rel_eq__qt__qt__gt_@Temechon_lt_/a_gt_ well_co_ that_t_s useful information. I_t_ll deep look at our code.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2017-03-04T14:26:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAs a second data point_co_ I_t_m working on a big project with lots of dynamic meshes getting created and disposed_co_ and I_t_ve profiled for memory leaks and not found any so far.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"AlbertTJames","Date":"2017-03-04T21:41:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThank you for your comments_co_ indeed on Master K game my mac is also heating up_co_ but no performance problem.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]