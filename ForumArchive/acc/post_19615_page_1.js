[{"Owner":"jerome","Date":"2016-01-03T13:38:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_continued from _dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/15523-getheightatcoordinates-alternative/?p_eq_111175_qt__gt_http_dd_//www.html5gamedevs.com/topic/15523-getheightatcoordinates-alternative/?p_eq_111175_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_same algo slightly modified for a ribbon _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#8_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-03T14:01:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Stronger ! with a live morphed ribbon _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#10_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_obviously_co_ this needs some GC optimizations but it still runs_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_please don_t_t mind about the balls jumping on the edges_co_ I just return altitude _eq__eq_ 0 when the balls are out of the ribbon_co_ even if they are above the trough of the wave_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_the same with lower ball velocities to better understand _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#11_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_note _dd_ there are no physics here (so no gravity_co_ no friction_co_ no acceleration_co_ no mass_co_ etc)_co_ the ball still roll from an edge to another following the waving surface_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Convergence","Date":"2016-01-03T14:08:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Great work on a staple function of game-making _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_How about a getAngleAt(x_co_ z_co_ rotation) ? _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ to make it work for cubes_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-03T15:58:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_quick and dirty GC optimization _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#12_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_about the angle_co_ I_t_m thinking about it ... something like getNormalsAt() and/or getSlopeAt()_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_this runs at 58 fps on my laptop _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2313_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#13_lt_/a_gt__lt_/p_gt__lt_p_gt_as you can see there many subdivisions_lt_/p_gt__lt_p_gt_this would run faster with far less subdivisions_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-03T20:28:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I reduced the number of subdivisions_co_ now this runs at 60 fps on my laptop with 100 balls _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#14_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-03T21:03:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_500 balls floating on the waving surface at 35 fps on my old laptop _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#15_lt_/a_gt__lt_/p_gt__lt_p_gt_not that bad  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ if I don_t_t care about the erratic movement on the edges_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_2000 tiny floating balls _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1QC4YQ%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1QC4YQ#16_lt_/a_gt__lt_/p_gt__lt_p_gt_still 25 fps in full screen on my pushcart computer ... I love this framework !_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-04T17:05:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_up_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_@DK _dd_ let me know if you want it as a new function or in replacement of getHeightAtCoordinates_lt_/p_gt__lt_p_gt_knowing this _dd_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/15523-getheightatcoordinates-alternative/?p_eq_110994_qt__gt_http_dd_//www.html5gamedevs.com/topic/15523-getheightatcoordinates-alternative/?p_eq_110994_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-04T17:24:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_As long as this produces the same result_co_ we can use the new algorithm in the previous function_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-04T17:25:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Or perhaps keep the current implementation and hide it under a flag in the function signature (In order to keep it working with tiled grounds)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-04T17:34:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Actually to get the height of a flat tiled ground is not that pertinent imho ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Ok_co_ what I propose is to keep aside the current implementation within the function code and add a boolean to the tiled ground constructor _dd_ isTiled _eq_ true_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If isTiled_co_ the function will do the same as currently (ray intersection)_lt_/p_gt__lt_p_gt_else _dd__lt_/p_gt__lt_p_gt_on first call_co_ it will generate the underlying quad array (if it doesn_t_t already exists)_lt_/p_gt__lt_p_gt_on each call_co_ it will compute the height from this array_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Oki doki ? _lt_/p_gt__lt_p_gt_Unless you prefer_co_ I just add a flag in the signature of getHeightAtCoordinates() to allow the user to explicitly choose the way he wants (more simple to code for me)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_And I will also provide the almost same for ribbons/grounds/whatever with the same geometry in vanilla JS in UserFunction repository. This version will have an updatable quad array in the render loop_co_ like I did in the PG with the waving ribbon._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-04T18:11:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_oki doki_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-04T20:28:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_BTW_co_ as the facet plane equations are pre-computed also in the array_co_ I would like to provide a fast method to get them at will _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_em_gt_getFacetNormalAt(x_co_ z) _lt_/em_gt_?  _eq_&gt_sm_ returns a Vector3_co_ the normal to the map at the coordinates (x_co_ z)_lt_/p_gt__lt_p_gt_or_lt_/p_gt__lt_p_gt__lt_em_gt_getFacetPlaneEquationAt(x_co_ z) _lt_/em_gt_? _eq_&gt_sm_ returns a Vector4(a_co_ b_co_ c_co_ d) _co_ the plane equation ax + by + cy + d _eq_ 0 at the coordinates (x_co_ z) _co_ knowing that (a_co_ b_co_ c) is actually the normal described in _lt_em_gt_getFacetNormaAtl()_lt_/em_gt__lt_/p_gt__lt_p_gt_Which one do you prefer ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Or any other more pertinent name_co_ let me know ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This could be very useful for the users to set mesh orientations/rotations on the map surface._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note _dd_ for a tiled ground_co_ this would return (0_co_ 1_co_ 0) for instance_co_ in any case._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-04T23:45:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_For the sake of comprehension I prefer the first one!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-06T14:37:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_mmh.. after reading the code in the class meshBuilder_co_ I can see that the TiledGround is NOT an instance of the class GroundMesh_co_ but only an instance of the class Mesh._lt_/p_gt__lt_p_gt_In other terms_co_ the current method _lt_em_gt_getHeightAtCoordinates()_lt_/em_gt_ is not a method of a TiledGround object _dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.2/TiledGround_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/classes/2.2/TiledGround_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I should have checked this before !  (that_t_s why it wasn_t_t pertinent)_lt_/p_gt__lt_p_gt_This means I can simply replace the current code of _lt_em_gt_getHeightAtCoordinates() _lt_/em_gt_by the new one _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_No need for special tips_co_ flags_co_ etc._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-06T16:17:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_PRed _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_in replacement of the current one_lt_/p_gt__lt_p_gt_works pretty well on my test scene_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-06T17:11:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_BTW_co_ it returns y from x_co_ z in the ground local system as it doesn_t_t really make sense to return an altitude from the ground in the world system_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_but if it_t_s expected in the world system I can fix it as well_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]