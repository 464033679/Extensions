[{"Owner":"Convergence","Date":"2015-11-21T14:35:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Since the default camera collision behavior is kind of awkward (camera _t_glues_t_ to any surface it bumps into until manually _t_released_t_)_co_ I resorted to just try to prevent the camera from going underground_co_ so to speak_co_ with just moving its target upwards as much as the camera would otherwise be underground._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1OWKH4_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1OWKH4_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_However the camera will start to flickr from going underground in one frame to being corrected in the next frame. More noticeable on lower FPS. How to prevent this?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks in advance  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MarianG","Date":"2015-11-21T14:43:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Like _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1OWKH4%231_qt_ rel_eq__qt_external nofollow_qt__gt_this_lt_/a_gt_ ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Convergence","Date":"2015-11-21T15:09:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106522_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_bulisor_qt_ data-cite_eq__qt_bulisor_qt_ data-ipsquote-timestamp_eq__qt_1448117014_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Like _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1OWKH4%231_qt_ rel_eq__qt_external nofollow_qt__gt_this_lt_/a_gt_ ?_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_Thanks_co_ that would work if the ground is completely flat (yes_co_ like the posted playground)_co_ but for the sake of this problem_co_ assume a groundFromheightMap please_co_ I just simplified the height calculation into a flattened map. _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"KarelAnker","Date":"2015-11-21T16:51:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You could use a raycast each frame from the position of the camera of 1 frame ago to the position of the camera at the current frame. If something hits in that raycast_co_ then you should set the camera position to the hit world position._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Or have the raycast from the current camera position to the mesh you_t_re looking at._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-11-21T17:12:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_In my project_co_ each frame I raycast from the camera target back to the camera_co_ and zoom the camera in if an obstruction is met. But this is with a freely moving camera - doing the same thing with the ArcRotateCamera would take some trig_co_ I guess._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MarianG","Date":"2015-11-21T18:07:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Oh_co_ my bad. _lt_/p_gt__lt_p_gt_I tryed a long time ago something like. But I used ground.getHeightAtCoordinates_co_ and this is not too fast._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#225AVV_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#225AVV_lt_/a_gt__lt_/p_gt__lt_p_gt_Maybe with _lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_raycast it_t_s faster and more _lt_/span_gt_precisely. I_t_ll try too_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-11-21T18:21:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106520_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_Convergence_qt_ data-cite_eq__qt_Convergence_qt_ data-ipsquote-timestamp_eq__qt_1448116529_qt__gt__lt_div_gt__lt_p_gt_Since the default camera collision behavior is kind of awkward (camera _t_glues_t_ to any surface it bumps into until manually _t_released_t_)_lt_/p_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_Just wondering - What do you mean by that? How would you expect the collision system to work? _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Convergence","Date":"2015-11-22T01:09:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106537_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_KarelAnker_qt_ data-cite_eq__qt_KarelAnker_qt_ data-ipsquote-timestamp_eq__qt_1448124716_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_You could use a raycast each frame from the position of the camera of 1 frame ago to the position of the camera at the current frame. If something hits in that raycast_co_ then you should set the camera position to the hit world position._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Or have the raycast from the current camera position to the mesh you_t_re looking at._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_with an arcrotate camera the position cannot be modified directly_co_ only alpha and beta I guess._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106539_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_fenomas_qt_ data-cite_eq__qt_fenomas_qt_ data-ipsquote-timestamp_eq__qt_1448125942_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_In my project_co_ each frame I raycast from the camera target back to the camera_co_ and zoom the camera in if an obstruction is met. But this is with a freely moving camera - doing the same thing with the ArcRotateCamera would take some trig_co_ I guess._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_I_t_ll try this_co_ thanks _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ Though I_t_m not a big fan of Raycast for its speed. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106542_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_bulisor_qt_ data-cite_eq__qt_bulisor_qt_ data-ipsquote-timestamp_eq__qt_1448129267_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Oh_co_ my bad. _lt_/p_gt__lt_p_gt_I tryed a long time ago something like. But I used ground.getHeightAtCoordinates_co_ and this is not too fast._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#225AVV_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#225AVV_lt_/a_gt__lt_/p_gt__lt_p_gt_Maybe with _lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_raycast it_t_s faster and more _lt_/span_gt_precisely. I_t_ll try too_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_It looks like _lt_span style_eq__qt_font-size_dd_12px_sm_background-color_dd_rgb(247_co_247_co_247)_sm__qt__gt_ ground.getHeightAtCoordinates uses a raycast as well_co_ (and I believe that_t_s why its slow)._lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106545_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_RaananW_qt_ data-cite_eq__qt_RaananW_qt_ data-ipsquote-timestamp_eq__qt_1448130065_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Just wondering - What do you mean by that? How would you expect the collision system to work?_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_If an arcrotate camera collides with something_co_ it stops (good)_co_ but when the cameraTarget starts to move while the camera is still _t_glued_t_ to its collision surface_co_ the camera won_t_t slide along with it. According to the docs_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ _t_Segoe UI_t__co_ Arial_co_ freesans_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_16px_sm__qt__gt_The ArcRotateCamera can also check collisions but instead of sliding along obstacles_co_ this camera won_t_t move when a collision appends._lt_/span_gt__lt_/div_gt__lt_/blockquote_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-11-22T05:30:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106578_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_Convergence_qt_ data-cite_eq__qt_Convergence_qt_ data-ipsquote-timestamp_eq__qt_1448154599_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_I_t_ll try this_co_ thanks _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ Though I_t_m not a big fan of Raycast for its speed. _lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Well_co_ in my case I_t_m doing it with voxels_co_ so raycasts are very fast and there_t_s no height map anyway. But even with a simple height map there can be a hill between the camera and the camera target_co_ and if you want to catch those cases you_t_ll need something - a raycast_co_ or sampling the height map at multiple points_co_ etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In general I_t_d assume that using BJS_t_s built-in raycast will be the slowest option_co_ but it may still be fast enough to not bother worrying about._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Convergence","Date":"2015-11-22T10:16:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106582_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18786_qt_ data-ipsquote-username_eq__qt_fenomas_qt_ data-cite_eq__qt_fenomas_qt_ data-ipsquote-timestamp_eq__qt_1448170210_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Well_co_ in my case I_t_m doing it with voxels_co_ so raycasts are very fast and there_t_s no height map anyway. But even with a simple height map there can be a hill between the camera and the camera target_co_ and if you want to catch those cases you_t_ll need something - a raycast_co_ or sampling the height map at multiple points_co_ etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In general I_t_d assume that using BJS_t_s built-in raycast will be the slowest option_co_ but it may still be fast enough to not bother worrying about._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_Since its only one pick per frame_co_ its acceptable_co_ though it looks like the single pickWIthRay call already makes it in the top 5 most time consuming function calls in the profiler.._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_div_gt__lt_p_gt_my solution using the pickWithRay method and ArcRotateCam _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_if (obstruction _eq_ scene.pickWithRay(cameraRay_co_ function(mesh) { return mesh.checkCollisions_sm_ })) {  if (obstruction.hit) {    camera.radius _eq_ BABYLON.Vector3.Distance(obstruction.pickedPoint_co_ cameraTarget.position)_sm_  }}_lt_/pre_gt__lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-11-22T16:18:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yep_co_ that_t_s basically what I do_co_ plus I add in a small offset to avoid partly seeing through the ground when the camera_t_s near plane intersects it. I tried a couple of ways of doing this and it got pretty hairy_sm_ I think what I settled on is_dd_ whenever the raycast hits an obstruction_co_ I shift the camera by a small amount (0.05 or something) along the normal of the raycast collision._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]