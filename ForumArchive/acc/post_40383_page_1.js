[{"Owner":"PavolHejný","Date":"2018-10-02T15:12:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am using Babylon.js with HTC Vive and WebVR and I want to pick a point on the mesh (this.wallMesh) with controller ray. I don_t_t want to use default VRHelper interactions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI expected that this code should work for it but it seems that there is wrong rotation because the rotation of the device behaves totally weird.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you have some tips on how to fix it? Thank you a lot.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_const pickMesh _eq_ BABYLON.Mesh.CreateSphere(\n    _t_pickMesh_t__co_\n    5_co_\n    0.1_co_\n    this.scene_co_\n)_sm_\n\nconst ray _eq_ new BABYLON.Ray(\n    BABYLON.Vector3.Zero()_co_\n    BABYLON.Vector3.One()_co_\n    100_co_\n)_sm_\n\nthis.scene.registerAfterRender(() _eq_&gt_sm_ {\n\n    ray.origin _eq_ controller.devicePosition_sm_\n    ray.direction _eq_ controller.deviceRotationQuaternion.toEulerAngles()_sm_\n\n    const hit _eq_ this.wallMesh!\n        .getScene()\n        .pickWithRay(ray_co_ (mesh) _eq_&gt_sm_ mesh _eq__eq__eq_ this.wallMesh)_sm_\n\n    if (hit) {\n        console.log(hit.hit)_sm_\n\n        if (hit.pickedPoint) {\n            pickMesh.position _eq_ hit.pickedPoint_sm_\n        }\n    }\n\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-10-02T15:43:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPinging _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/29361-trevordev/?do_eq_hovercard_qt_ data-mentionid_eq__qt_29361_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/29361-trevordev/_qt_ rel_eq__qt__qt__gt_@trevordev_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"trevordev","Date":"2018-10-02T16:54:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28780-pavolhejn%C3%BD/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28780_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28780-pavolhejn%C3%BD/_qt_ rel_eq__qt__qt__gt_@PavolHejný_lt_/a_gt__co_ from a quick look_lt_br /_gt_\n\tray.directi﻿o﻿n﻿ _eq_ controller.deviceRotationQuaternion﻿.to﻿EulerAngles()_sm_﻿﻿\n_lt_/p_gt_\n\n_lt_p_gt_\n\tlooks incorrect_co_ instead to get a direction for your ray you can rotate a forward vector by your rotation quaternion.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tvar m _eq_ new BABYLON.Matrix()_sm__lt_br /_gt_\n\tcontroller.deviceRotationQuaternion﻿.toRotationMatrix(m)_sm__lt_br /_gt_\n\tvar direction _eq_ Vector3.TransformCoordinates(BABYLON.Vector3.Forward()_co_ m)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet me know if that doesn_t_t work.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PavolHejný","Date":"2018-10-02T20:19:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/29361-trevordev/?do_eq_hovercard_qt_ data-mentionid_eq__qt_29361_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/29361-trevordev/_qt_ rel_eq__qt__qt__gt_@trevordev_lt_span_gt_﻿_lt_/span_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot. Your code is working perfectly!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]