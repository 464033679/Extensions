[{"Owner":"minexew","Date":"2016-04-10T16:04:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve started porting my PlayCanvas-based project to BABYLON.js_co_ but I seem to be stuck on a fairly basic thing - I cannot figure how to convince the engine that in my scene_co_ the up axis is not Y_co_ but Z.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBasically I_t_m looking for the BABYLON equivalent of the following code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var camera _eq_ new pc.Entity()_sm_\ng_camera _eq_ camera.addComponent(_qt_camera_qt__co_ {\n    clearColor_dd_ new pc.Color(zoneData.bgColor[0]_co_ zoneData.bgColor[1]_co_ zoneData.bgColor[2])\n})_sm_\napp.root.addChild(camera)_sm_\n\nvar cameraDist _eq_ 10_sm_\n\n// look at [0 0 0] from [-1 -1 1]*cameraDist to get a Diablo-style view\n// [0 0 1] points up\nvar camVec _eq_ new pc.Vec3(-1_co_ -1_co_ 1)_sm_\ncamVec.scale(cameraDist / camVec.length())_sm_\n\nvar camLookAt _eq_ pc.Vec3.ZERO_sm_\nvar camUp _eq_ new pc.Vec3(1_co_ 1_co_ 1)_sm_\ncamUp.normalize()_sm_\n\ncamera.setPosition(camVec)_sm_\ncamera.lookAt(camLookAt_co_ camUp)_sm_\n\n// later on - translate camera to follow the player\ncamera.setPosition(camVec.clone().add(self.playerEntity.getPosition()))_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI wouldn_t_t mind using ArcRotateCamera if I can get it to work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried setting camera.upVector_co_ but that just ended up distorting the view.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen I tried the following dirty hack_co_ but that didn_t_t do the job either (no errors_co_ but nothing is displayed)\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_(&lt_sm_any&gt_sm_camera)._camMatrix _eq_ BABYLON.Matrix.Zero()_sm_\nBABYLON.Matrix.LookAtLHToRef(camVec_co_ camLookAt_co_ camUp_co_ (&lt_sm_any&gt_sm_ camera)._camMatrix)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThanks for any help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-10T16:11:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello and welcome_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcan you provide a sample repro case on the playground. Setting up camera.upVector should work _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"minexew","Date":"2016-04-10T16:18:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIndeed_co_ seems to work in the playground (_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#QQJSV%230_qt_ rel_eq__qt_external nofollow_qt__gt_except for mouse control_lt_/a_gt__co_ but that_t_s not important for me).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll re-check my code.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-10T16:22:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI love when a plan comes together _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"minexew","Date":"2016-04-10T16:32:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPart of what I had done wrong was setting upVector to the _qt_correct_qt_ [1 1 1].normalize() instead of simply [0 0 1].\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ as you can see in the playground I linked_co_ the view is still not quite correct - it_t_s shifted the right and looks slightly tilted. What would be the right way to fix that?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-10T16:38:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI know. THe best option by far would be to keep upAxis unchanged and just rotate your models after loading them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBabylonjs is left handed_co_ Y up.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"minexew","Date":"2016-04-10T16:50:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell crap_co_ thought I wasn_t_t asking that much.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tChaging to Y-up would mean not only rotating all the models_co_ but also their placement_co_ and also all logic dealing with entities_t_ position_co_ rotation and so on. The codebase is not that small.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs it possible to transform the entire world _lt_em_gt_except_lt_/em_gt_ the camera? That would do without changing everything.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2016-04-10T17:02:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMaybe you could place all your Mesh under one node used only for its transform moving from Y to Z up ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI guess your pivot Matrix could look like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1 0 0 0\n_lt_/p_gt_\n\n_lt_p_gt_\n\t0 0 1 0\n_lt_/p_gt_\n\n_lt_p_gt_\n\t0 1 0 0\n_lt_/p_gt_\n\n_lt_p_gt_\n\t0 0 0 1\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"minexew","Date":"2016-04-10T17:20:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat was the first thing I tried to do. Lights seem to ignore the transformation though - see _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#QQJSV%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#QQJSV#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat options do I have left? Would implementing my own Camera work?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2016-04-10T18:16:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSeems to work with directional light _dd_-)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#QQJSV%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#QQJSV#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twell lit on z up. Hemispheric Light define their direction in world space directly. so basically_co_ as long as you correct hemispheric light maunallly (and probably a few other bits) it should be ok. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"minexew","Date":"2016-04-10T19:47:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI ended up copying _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_ArcRotateCamera_co_ throwing most of the guts away and fixing what I needed. Seems to work good enough so far._lt_/span_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"dbawel","Date":"2016-04-11T05:56:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20838-minexew/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20838_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20838-minexew/_qt_ rel_eq__qt__qt__gt_@minexew_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCould it be that you exported from a Z axis up application? Perhaps take a look at the last post I wrote on the link below - bottom of the page_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/3083-spaces-world-parent-pivot-local/?do_eq_embed&amp_sm_page_eq_3_qt__gt__lt_/iframe_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDB\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-11T21:20:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_span_gt_@minexew_dd_ I_t_m interested by what you changed in the ArcRotateCamera. Perhaps we can integrate your changes?_lt_/span_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"minexew","Date":"2016-04-18T19:16:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_124540_qt_ data-ipsquote-contentid_eq__qt_21837_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1460354212_qt_ data-ipsquote-userid_eq__qt_11286_qt_ data-ipsquote-username_eq__qt_dbawel_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 4/11/2016 at 7_dd_56 AM_co_ dbawel said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20838-minexew/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20838_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20838-minexew/_qt_ rel_eq__qt__qt__gt_@minexew_lt_/a_gt__co_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tCould it be that you exported from a Z axis up application?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAll our assets_co_ as well as the server software_co_ are built as Z-up. I intend to keep it that way_co_ not just because the work involved in changing everything_co_ but because Z-up is really the only system that makes sense to me in any non-trivial 3D world.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_124679_qt_ data-ipsquote-contentid_eq__qt_21837_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1460409645_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 4/11/2016 at 11_dd_20 PM_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_span_gt_@minexew_dd_ I_t_m interested by what you changed in the ArcRotateCamera. Perhaps we can integrate your changes?_lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI did it in a rather hacky way_co_ implementing only the absolute minimum needed. However_co_ if you_t_re interesting in merging this_co_ I can look into developing a proper patch.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for all the help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-19T01:53:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNo worry_co_ I understand _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ I_t_m happy as long as it works for you_co_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]