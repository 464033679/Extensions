[{"Owner":"ozRocker","Date":"2015-01-22T01:04:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_I_t_m trying to add shadows and its not coming out too well.  I think the high-poly count (100k) and lack of soft shadowing is producing some weird affects.  This is the result from Babylon.js _lt_a href_eq__qt_http_dd_//www.punkoffice.com/babylon/luke.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/babylon/luke.html_lt_/a_gt__lt_/p_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_ _lt_/p_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_What I_t_m trying to do is find out if Babylon.js is suitable for animated photogrammetry-made humans.  The only framework that I_t_ve gotten this working with so far is Unity 5_co_ which you can see here _lt_a href_eq__qt_http_dd_//www.punkoffice.com/luke/_qt_ title_eq__qt_External link_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/luke/_lt_/a_gt__lt_/p_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_ _lt_/p_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_My shadows are set up like this_lt_/p_gt__lt_br_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt__lt_br_gt_\nvar shadowGenerator _eq_ new BABYLON.ShadowGenerator(4096_co_ light)_sm__lt_br_gt_\nvar mesh _eq_ newScene.meshes[0]_sm__lt_br_gt_\nshadowGenerator.getShadowMap().renderList.push(mesh)_sm__lt_br_gt_\nshadowGenerator.useVarianceShadowMap _eq_ true_sm__lt_br_gt_\nshadowGenerator.usePoissonSampling _eq_ true_sm__lt_br_gt_\nmesh.receiveShadows _eq_ true_sm__lt_br_gt_\nground.receiveShadows _eq_ true_sm__lt_/pre_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_(using directional light as light source)_lt_/p_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_ _lt_/p_gt__lt_br_gt__lt_p style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_Is there any way to make the Babylon.js shadow look like the Unity 5 one?_lt_/p_gt__lt_br_gt__lt_div_gt_ _lt_/div_gt__lt_br_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2015-01-22T11:35:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_What you have done is correct. You can not do better. I have always said that the shadows in babylon are not perfect. maybe it is because of WebGL I do not know._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-22T12:02:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_oh ok_co_ so I guess that_t_s the best Babylon.js can do.  btw_co_ the Unity5 demo that I posted is also in webGL so I know it is possible_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-01-22T12:36:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Looks like the objects themselves are a bit different. What is causing those _qt_holes_qt_ in the texture?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-22T13:17:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Those holes in the Babylon.js version is the result of shadows on the person_t_s skin.  If I prevent the person from receiving shadows he doesn_t_t get those holes_co_ but I need him to receive shadows somehow._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-01-22T13:43:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I think the ground should receive shadows_co_ the person should only cast them_co_ no?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-22T14:36:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The ground and person both need to receive shadows.  If you check out the Unity demo you can see that the head will cast shadows on the back_co_ neck and shoulders.  Also the arms will cast shadows on the torso when he is doing sit-ups._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2015-01-22T15:59:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok_co_ I did not watch your demo. and indeed_co_ it looks like a bug I_t_d say. Looks like the shadow projected on the character comes from the ground. I have the impression that an object can not be projected to the shadow itself._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But I also feel that your model is transparent in part. I_t_ve had this problem by exporting with 3ds max. Face mask must be activated in the model options._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Try delete _dd_ _lt_span style_eq__qt_color_dd_rgb(0_co_0_co_0)_sm_font-family_dd_monospace_sm_font-size_dd_medium_sm__qt__gt_shadowGenerator.useVarianceShadowMap _eq_ true_sm_ _lt_/span_gt__lt_/p_gt__lt_p_gt_I think that using 2 filters can create this problem (maybe)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-01-22T16:58:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Can you try without any texture? just pure material?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-23T01:47:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok_co_ thanks guys! I_t_ve removed the line _lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(0_co_0_co_0)_sm_font-family_dd_monospace_sm_font-size_dd_medium_sm__qt__gt_shadowGenerator.useVarianceShadowMap _eq_ true_sm__lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ve also removed all textures in the scene.  Unfortunately it hasn_t_t changed the appearance of the shadows._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-01-23T03:15:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Can you then share this new version on your site and reference _lt_a href_eq__qt_http_dd_//www.babylonjs.com/babylon.max.js?_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/babylon.max.js?_lt_/a_gt_ This will allow me to debug your problem_dd_) _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-23T03:45:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Sure.  I_t_ve put up a new page here _lt_a href_eq__qt_http_dd_//www.punkoffice.com/babylon/luke_new.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/babylon/luke_new.html_lt_/a_gt_ which is referencing the babylon.max.js file off the babylon.com server. _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-01-23T16:51:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hum mesh sounds like broken to me...can you try with a simpler mesh?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-24T00:55:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_the babylon.max.js file seemed to really screw up the mesh.  The output is really different to the original babylon.js file that I was using.  I will decimate my guy down to a low poly count and see how that turns out_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"spritefire","Date":"2015-01-24T04:17:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I had isses with the mesh screwing up when exporting from 3ds max and then Xeonzinc mentioned using an earlier version and everything worked fine_lt_br_gt_(post was answered here_dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/11694-3ds-max-exported-animation-is-distorted/_qt__gt_http_dd_//www.html5gamedevs.com/topic/11694-3ds-max-exported-animation-is-distorted/_lt_/a_gt_)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-24T11:29:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I forgot to mention that I_t_m using Blender to export the mesh.  The mesh itself comes out as expected but when I add shadows it adds strange patterns to the material (regardless of whether there is texture or not).  The mesh only screws up when I_t_m linking to babylon.max.js _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2015-01-24T12:10:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You use the latest _lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_export to _lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_Blender _lt_/span_gt_? It is possible that this is a bug in an older version. (If you use an older version)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/Exporters/Blender_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/tree/master/Exporters/Blender_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-01-24T17:40:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_babylon.max.js is based on v2.0 though so perhaps dad72 is right _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-25T13:28:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok_co_ I installed the latest exporter for Blender.  The link using babylon.max.js still looks the same (_lt_a href_eq__qt_http_dd_//www.punkoffice.com/babylon/luke_new.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/babylon/luke_new.html_lt_/a_gt_) _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_However_co_ the link using the original babylon.js (_lt_a href_eq__qt_http_dd_//www.punkoffice.com/babylon/luke.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/babylon/luke.html_lt_/a_gt_) doesn_t_t cast shadows onto the ground_co_ even though it was before (ground is still set to receive shadows) _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-01-25T18:02:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok let_t_s retry from scratch _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  can you just export a simple box casting shadows to a simple ground using babylon v2.0 and the latest exporter?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-29T13:41:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok_co_ I have a link here _lt_a href_eq__qt_http_dd_//www.punkoffice.com/babylon/test.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/babylon/test.html_lt_/a_gt__lt_/p_gt__lt_p_gt_I_t_m using babylon.2.0-beta.debug.js and the latest Blender exporter.  I created a sphere which has 960 faces.  It is creating shadows.  The ground is created in Babylon HTML code.  Only the ground is receiving shadows.  The sphere creates a shadow with a sharp angle which seems odd._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-01-29T19:49:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_this is because the light position is not correctly defined._lt_/p_gt__lt_p_gt_Shadows maps are generated from the point of view of the light using a FOV of 45 degrees._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Try to move your light a little bit away will help a lot _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2015-01-30T03:18:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok_co_ I_t_ve moved the light further away.  its now at_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_light.position _eq_ new BABYLON.Vector3(-5_co_ 30_co_ 15)_sm__lt_/pre_gt__lt_p_gt_That made it worse.  Just wondering_co_ has anyone successfully gotten shadows to work with hi-poly meshes?  All the working examples I_t_ve seen are of cubes_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-01-30T07:11:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Here you go -_lt_a href_eq__qt_http_dd_//www.babylonjs.com/index.html?V8_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/index.html?V8_lt_/a_gt__lt_/p_gt__lt_p_gt_The demos in the playground are also using rings and not cubes. _lt_/p_gt__lt_p_gt_It_t_s possible. it_t_s all about configuring the light correctly._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-01-30T08:31:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_So a quick look at your code_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_ul_gt__lt_li_gt_no object is in the render list_co_ so of course no shadows will be generated._lt_/li_gt__lt_li_gt_Light_t_s direction should be normalized (well_co_ not a must since its done at the engine anyhow_co_ but it is a direction _dd_-) ) _lt_/li_gt__lt_li_gt_The light_t_s position doesn_t_t correlate to the direction. They have to fit (at a certain level) otherwise this won_t_t work._lt_/li_gt__lt_/ul_gt__lt_p_gt_So_co_ here are some offered changes to start with_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var light _eq_ new BABYLON.DirectionalLight(_qt_dir_qt__co_ new BABYLON.Vector3(-1_co_ -1_co_ -2).normalize()_co_ newScene)_sm_//make sure light_t_s position is correctlight.position _eq_ new BABYLON.Vector3(-1_co_ 30_co_ 15)_sm_//orlight.position _eq_ new BABYLON.Vector3(0_co_ 30_co_ 100)_sm_//orlight.position _eq_ new BABYLON.Vector3(5_co_ 20_co_ 10)_sm_/// A few lines later//Add the mesh to be _qt_shadowed_qt_.shadowGenerator.getShadowMap().renderList.push(newScene.meshes[0])_lt_/pre_gt__lt_p_gt_And... Tada _dd_-)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]