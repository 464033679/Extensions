[{"Owner":"Olgo","Date":"2016-03-17T13:15:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi everybody !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want to experiment my own SSAO_co_ and render it in a proceduralTexture instead of using postProcess (for several things).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works pretty well_co_ but i have some _qt_latency_qt_ when i move around my object. I guess this is due to the speed calculation difference between the procedural texture and the main frame.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan i force the engine to _qt_wait_qt_ my procedural Texture each frame ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-17T15:45:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere must be something else as procedural textures are already in sync with main render (there is no thread in js)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-03-17T21:03:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOr maybe just a low framerate?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-18T09:22:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you for your answers !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t@RaananW_co_ there is no problem with the framerate_co_ 60fps on deskop_co_ a little bit lower on mobile_co_ but it still acceptable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t@Deltakosh_co_ i should get the same result as using post process method ? Even if i use multiple procedural textures in the effect pipeline ? (one fore the main SSAO_co_ one for the blur pass)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe i should make a little playground to show you the problem.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-18T13:54:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOK_co_ this is an exemple of my problem _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1TDGFQ%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1TDGFQ#9_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried to make the simplest scene as possible. If you move the camera_co_ you can see the visible _qt_latency_qt_ between the procedural texture (in red)_co_ and the main render. The dark parts of bakground depthTexture bleeds over the objects when we move around.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-18T15:15:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFirst of all thanks for the PG_co_ this is far easier now _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThis issue comes from the following fact_dd_ procedural textures are generated BEFORE depth renderer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tProcedural textures are generated before any camera rendering (because they are independant). Then render targets (including depth renderer) are generating for every camera\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-18T15:34:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkaaaayyyy_co_ thank you_co_ you_t_re a damn wizzard_co_ I understand now _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t want to use renderTargetTexture because it implies to render the scene multiple times_co_ and it_t_s useless since i just need to deal with the DepthRender in my texture.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFurthermore_co_ I target mobile devices_co_ and I want to optimize the perf.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe last solution that i see is to use Post effects_co_ but I_t_ve noticed that when I use it_co_ webgl antialiasing seems to be disabled.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ what can I use instead of Procedural Textures ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-18T17:19:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\ti suggest using rendertarget actually.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDepthRenderer is a renderTarget and its render the full scene already\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-18T17:33:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ thank you for your suggestion.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope it will don_t_t drop down the FPS on mobile _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll tell you if it works !\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-18T17:35:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPlease have a look at the depth Render\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyou should almost do the same_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/e585f0417455413dbc90bd9fed1a55cae9b3b2df/src/Rendering/babylon.depthRenderer.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/e585f0417455413dbc90bd9fed1a55cae9b3b2df/src/Rendering/babylon.depthRenderer.ts_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-27T18:44:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everybody_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI follow your advise_co_ I tried to use renderTarget Texture instead of procedurals. Unfortunatly_co_ it took too much ressources for my purpose _dd_/\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a way to _qt_wait_qt_ the depth Texture to be ready_co_ before refreshing procedural texture ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t( for instance_co_ generate SSAO in a depthbuffer onAfterRender function_co_ or something else ?)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-27T18:52:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tdo you mind sharing what you did on the PG? There must be no difference between using a renderTarget and a depthRenderer\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-27T20:28:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tUnfortunatly_co_ i_t_m not able to share the entire project (which is necessary to show you the effective perf cost).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ i have an idea. In my opinion_co_ the main problem is that i push the entire scene in the renderlist (like your depthbuffer). But it is totaly useless in my case.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ if I push a simple plane facing the screen in my render list instead of the entire scene_co_ and apply SSAO shader on it_co_ it should works_co_ right ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-27T20:35:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCorrect _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-28T16:38:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tArf_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tested what I said_co_ and I now have exactly the same result has procedural workflow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI made a PG &gt_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1TDGFQ%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1TDGFQ#15_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs you can see_co_ I use RenderTarget Texture instead of procedurals_co_ but I still have _qt_latency_qt_ between the texture and the main render. _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAny idea ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-03-28T18:10:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thi  \n_lt_/p_gt_\n\n_lt_p_gt_\n\ti wanna make a  latency effect and need to make close my   imagining  and yours  i wanna  know more about your imagining\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(any video sample or other media ) for latency effect ( like speed blur for objects or all scene texture have this effect when camera move ?)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-28T18:33:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi NasimiAsl_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll scene have this effect when camera move (you can see it in my two playgrounds).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI understand what happens. Each frames_co_ my texture is refreshed before the depth Buffer_co_ but it should be did after.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis implies an offset of 1 frame between the two textures (my texture use the previous result of the depth Buffer since it is not refreshed yet).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am actually playing with the refresh rate of the depth Buffer_co_ but obviously it is not a good idea.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a way to manage the renderTarget Textures order ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-03-28T19:00:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_s_gt_test this_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_1. create scene with all texture_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_2. create render target for depth Buffer_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_3. make two postprocess_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_  one for get your real texture_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_and 2 for make your second material_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_4 use getTextureFromPostProcess to give it back_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_i have a sample (long time ago )_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1HECPU%2346_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1HECPU#46_lt_/a_gt_ real textures and make post process and render target_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1HECPU%2345_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1HECPU#45_lt_/a_gt_  color_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1HECPU%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1HECPU#4_lt_/a_gt_  set effect for my wanted color _lt_/s_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-28T19:02:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYEAH_co_ finally I did it ! _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI simply pushed manually depth buffer in the scene customRenderTargets_co_ before pushing mine to re-order them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s a little bit crappy i guess_co_ but no matter_co_ it works !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t&gt_sm_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1TDGFQ%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1TDGFQ#16_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you everybody for your time !\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-28T19:05:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt works! everything else does not matter _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Olgo","Date":"2016-03-28T19:05:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThx NasimiAsl_co_ we replied in the same time _lt_img alt_eq__qt_^_^_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_happy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/happy@2x.png 2x_qt_ title_eq__qt_^_^_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tYou_t_re suggestion is interesting_co_ i keep it in mind for special effects !\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]