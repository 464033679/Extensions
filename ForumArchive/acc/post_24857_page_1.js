[{"Owner":"Virtuell","Date":"2016-08-30T08:05:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi! First time posting.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI ran in to an issue I_t_ve battled with for a several days. When calling the canvas2d.dispose the error_dd_ _qt_Uncaught TypeError_dd_ Cannot read property _t_modelKey_t_ of null_qt_ sometimes occur. I did a fair bit of research but I don_t_t see that I am calling anything incorrecly. While posting I realised that I can probably circumvent the problem by creating a _qt_RepositionGUI_qt_ function but I would like to understand the problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the example the error occurs in chrome after the button is pressed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_&lt_sm_html&gt_sm_\n&lt_sm_head&gt_sm_\n    &lt_sm_meta http-equiv_eq__qt_Content-Type_qt_ content_eq__qt_text/html_qt_ charset_eq__qt_utf-8_qt_/&gt_sm_\n    &lt_sm_title&gt_sm_Babylon - Getting Started&lt_sm_/title&gt_sm_\n    &lt_sm_!--- link to the last version of babylon ---&gt_sm_\n    &lt_sm_script src_eq__qt_babylon.2.5-alpha.js_qt_&gt_sm_&lt_sm_/script&gt_sm_\n    &lt_sm_style&gt_sm_\n        html_co_ body {\n            overflow_dd_ hidden_sm_\n            width   _dd_ 100%_sm_\n            height  _dd_ 100%_sm_\n            margin  _dd_ 0_sm_\n            padding _dd_ 0_sm_\n        }\n\n        #renderCanvas {\n            width   _dd_ 100%_sm_\n            height  _dd_ 100%_sm_\n            touch-action_dd_ none_sm_\n        }\n    &lt_sm_/style&gt_sm_\n&lt_sm_/head&gt_sm_\n&lt_sm_body&gt_sm_\n    &lt_sm_canvas id_eq__qt_renderCanvas_qt_&gt_sm_&lt_sm_/canvas&gt_sm_\n    &lt_sm_script&gt_sm_\nwindow.addEventListener(_t_DOMContentLoaded_t__co_ function() {\n    // get the canvas DOM element\n    var canvas _eq_ document.getElementById(_t_renderCanvas_t_)_sm_\n    // load the 3D engine\n    var engine _eq_ new BABYLON.Engine(canvas_co_ true)_sm_\n    var scene_sm_\n    var canvas2d_sm_\n\n    var createScene _eq_ function() {\n        scene _eq_ new BABYLON.Scene(engine)_sm_\n        var light _eq_ new BABYLON.PointLight(_qt_Omni_qt__co_ new BABYLON.Vector3(20_co_ 20_co_ 100)_co_ scene)_sm_\n        var cam _eq_ new BABYLON.ArcRotateCamera(_qt_ArcRotateCamera_qt__co_ Math.PI / 3_co_ Math.PI / 3_co_ 200_co_ new BABYLON.Vector3(-10_co_ 30_co_ 10)_co_ scene)_sm_\n\n        cam.attachControl(canvas)_sm_\n        scene.executeWhenReady(createGUI)_sm_\n        return scene_sm_\n    }_sm_\n\n  \nvar createGUI _eq_ function() {\n            canvas2d _eq_ new BABYLON.ScreenSpaceCanvas2D(scene_co_ {\n                id_dd_ _qt_ScreenCanvas_qt__co_\n                enableInteraction_dd_ true\n            })_sm_\n\n\n            //buttons\n            var button1 _eq_ new BABYLON.Rectangle2D({\n                parent_dd_ canvas2d_co_\n                id_dd_ _qt_button1_qt__co_\n                x_dd_ canvas.width /2 - 150_co_\n                y_dd_ canvas.height / 2 _co_\n                width_dd_ 300_co_\n                height_dd_ 80_co_\n                fill_dd_ _qt_#ffffffff_qt__co_\n                border_dd_ _qt_#DADDDEFF_qt__co_\n                borderThickness_dd_ 8_co_\n                children_dd_ [new BABYLON.Text2D(_qt_Button 1_qt__co_ { fontName_dd_ _qt_32pt Arial_qt__co_ defaultFontColor_dd_ new BABYLON.Color4(0.2_co_ 0.2_co_ 0.2_co_ 2)_co_ marginAlignment_dd_ _qt_h_dd_ center_co_ v_dd_ center_qt__co_ fontSuperSample_dd_ true })]\n            })_sm_\n           \n            var text1 _eq_ new BABYLON.Rectangle2D({\n                parent_dd_ canvas2d_co_\n                id_dd_ _qt_text1_qt__co_\n                x_dd_ canvas.width /2 - 125_co_\n                y_dd_ canvas.height / 2 - 300_co_\n                width_dd_ 250_co_\n                height_dd_ 80_co_\n                fill_dd_ _qt_#e4e4e4ff_qt__co_\n                border_dd_ _qt_#DADDDEFF_qt__co_\n                borderThickness_dd_ 8_co_\n                children_dd_ [\n                    new BABYLON.Text2D(_qt_Text 1_qt__co_ { fontName_dd_ _qt_24pt Arial_qt__co_ defaultFontColor_dd_ new BABYLON.Color4(0.2_co_ 0.2_co_ 0.2_co_ 2)_co_ marginAlignment_dd_ _qt_h_dd_ center_co_ v_dd_ center_qt__co_ fontSuperSample_dd_ true })\n                ]\n            })_sm_\n\n           \n            var text2 _eq_ new BABYLON.Rectangle2D({\n                parent_dd_ canvas2d_co_\n                id_dd_ _qt_text2_qt__co_\n                isVisible_dd_ false_co_\n                x_dd_ canvas.width /2 - 125_co_\n                y_dd_ canvas.height / 2 - 300_co_\n                width_dd_ 250_co_\n                height_dd_ 80_co_\n                fill_dd_ _qt_#e4e4e4ff_qt__co_\n                border_dd_ _qt_#DADDDEFF_qt__co_\n                borderThickness_dd_ 8_co_\n                children_dd_ [\n                    new BABYLON.Text2D(_qt_TempText2_qt__co_ { fontName_dd_ _qt_24pt Arial_qt__co_ defaultFontColor_dd_ new BABYLON.Color4(0.2_co_ 0.2_co_ 0.2_co_ 2)_co_ marginAlignment_dd_ _qt_h_dd_ center_co_ v_dd_ center_qt__co_ fontSuperSample_dd_ true })\n                ]\n            })_sm_\n\n\n            /*specific button function*/\n            button1.actionManager.registerAction(new BABYLON.SetValueAction(BABYLON.ActionManager.OnPickTrigger_co_\n                text1_co_ _qt_levelVisible_qt__co_ false))_sm_\n            button1.actionManager.registerAction(new BABYLON.SetValueAction(BABYLON.ActionManager.OnPickTrigger_co_\n                text2_co_ _qt_levelVisible_qt__co_ true))_sm_\n        }_sm_\n\n    // call the createScene function\n    scene _eq_ createScene()_sm_\n\n\n    // run the render loop\n    engine.runRenderLoop(function() {\n        scene.render()_sm_\n    })_sm_\n\n    // the canvas/window resize event handler\n    window.addEventListener(_t_resize_t__co_ function() {\n        engine.resize()_sm_\n        canvas2d.dispose()_sm_//this is not working_co_ some of the canvas is not disposed_co_ textfield disapears bottommenu does not\n        createGUI()_sm_\n    })_sm_\n})_sm_\n    &lt_sm_/script&gt_sm_\n&lt_sm_/body&gt_sm_\n&lt_sm_/html&gt_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-08-30T13:06:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/23177-virtuell/?do_eq_hovercard_qt_ data-mentionid_eq__qt_23177_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/23177-virtuell/_qt_ rel_eq__qt__qt__gt_@Virtuell_lt_/a_gt__co_ welcome to the forum.  I don_t_t have any good news for you_co_ yet... but we forum helpers REALLY like having the code put into a Babylon.js Playground_co_ and that way everyone can easily experiment/test._lt_/span_gt_  So_co_ I did one_dd_  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#2BFQLS%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#2BFQLS#0_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI changed a few things... nothing too drastic.  You can do edits_co_ hit RUN many times_co_ SAVE as often as you like_co_ grab a ZIP version_co_ you cannot hurt anything in the BJS playground.  Experiment freely_co_ and share URL_t_s of future SAVES... in this thread... if you discover something interesting.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne way to test this... is to put the playground window into _qt_restored_qt_ condition (so it is edge-drag resizable)_co_ and do some window drag resizing.  The screenSpaceCanvas2D should disappear upon drag-size_co_ then re-appear after about 2 seconds.  It seems to work... _lt_u_gt_once_lt_/u_gt_.  hmm.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter the first time_co_ all further window resizing... act differently.  Things don_t_t seem to dispose well. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt could be a mistake by me_co_ though.  I do those often.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_   I_t_m still testing and learning. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBesides the color/corner changes in lines 9-10_co_ I tried a cachingStrategy in line 11_co_ fishing for a solution.  No joy.  More testing ahead... we_t_ll talk.  Help from ANYONE... certainly welcome.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Virtuell","Date":"2016-08-30T15:00:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for taking interest _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ I see that the playground is clearly superior to just dumping the code in a box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI did implement my previous idea of a reposition function and ended up not calling the dispose function at all to quicker get to a different solution since this one is very hard to debug.\n_lt_/p_gt_\n\n_lt_p_gt_\n\texample_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#2BFQLS%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#2BFQLS#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne problem with the solution is that I can_t_t get it to work together with the canvas2d marginAlignment and everything has to use the default origin_dd_ bottom_co_ left .\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t understand why the previous solution is not working.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]