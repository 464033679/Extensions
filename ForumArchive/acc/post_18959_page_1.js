[{"Owner":"Stvsynrj","Date":"2015-11-30T16:58:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi guyz !_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_    I have to clean up a bit and optimize the code_co_ but here is what i get playing with the particles system updateFunction._lt_/p_gt__lt_p_gt_    Maybe someone was looking for something similar_co_ so i decided to post it._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_   Any feedbacks/comments are welcome _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_&lt_sm_fileStore.core_Emoticons&gt_sm_/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_   _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#JVH6E%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#JVH6E#6_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_  _lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_11_2015/post-17349-0-58060200-1448902689.png_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_11_2015/post-17349-0-58060200-1448902689_thumb.png_qt_ data-fileid_eq__qt_5693_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-17349-0-58060200-1448902689_thumb.p_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-30T17:31:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_sayboooo_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-12-12T23:20:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tVery nice!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-12-13T09:49:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Here is an implementation of the flocking algo _dd_ the (solid) particles (should work with classical particles too) aggregate together when they are close enough._lt_/p_gt__lt_p_gt_Moreover they get the same direction and velocity and keep at a coherent distance from each other._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2335_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#35_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-12-13T12:30:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Oh yeah_co_ I_t_ve seen this before_co_ and I forgot it existed.  Sorry Jerome_co_ and thanks for the reminder. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Yeah_co_ that works nice.  If you have a moment more_co_ Jerome_co_ can you tell us a bit?  I can_t_t seem to tell what they are flocking-toward.   But maybe this is one of those _qt_Do not open the case.  No user-serviceable parts inside._qt_ -situations.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_   _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-12-13T13:26:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_What_t_s happening actually _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For each particle_co_ we consider its current neighbours defined by a given distance from this particle._lt_/p_gt__lt_p_gt_Then we add to the particle velocity all the neighbour velocities and we normalize this result. This makes the particle go the same global direction than the group it  belongs to. This is called _qt_alignement_qt__lt_/p_gt__lt_p_gt_We also compute the barycenter of all the particle positions in the neighbourood. We add the vector particle_position-barycenter to the current particle position. This makes the particle near the center of the group. This is called _qt_cohesion_qt_._lt_/p_gt__lt_p_gt_At last_co_ we add to the particle position the average vector of all particle-to-neighbour vectors. This makes the particle keep a certain average distance from the others within the group. This is called _qt_separation_qt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Each correction (alignement_co_ cohesion_co_ separation) can be weighted to give more effect to one or the other aspect of the flocking_dd_ line 18 to 20_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So each particle adjust its behavior (velocity and position) according to its neighbours... it_t_s a kind of IA._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Moreover_co_ in this example_co_ the flocking computation isn_t_t done in the render loop but in the separate process called each _lt_em_gt_delay_lt_/em_gt_ ms (line 22) for performance reasons _dd_ we have here to iterate_co_ just for the physics_co_ n² times for n particles._lt_/p_gt__lt_p_gt_So you can choose to call it only each 5 frames for instance._lt_/p_gt__lt_p_gt_You can even choose not to compute it for the whole pool of particles but only for a bunch of them each call with the _lt_em_gt_pool_lt_/em_gt_ value (line 21) if your computer isn_t_t fast enough. If the pool is too small regarding the total number of particles_co_ each particle will take a lot of time to be aware of its neighbours and the flocking will happen only a long time after... or never if the particles are too fast._lt_/p_gt__lt_p_gt_So don_t_t set the pool lower than 1/2 or  1/3 of the global particle number._lt_/p_gt__lt_p_gt_If it_t_s equal or greater than the particle number_co_ it will just compute all the particles at once._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So you_t_ve to play with both the delay and the pool regarding the total number of particles to manage and your computer speed._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As a side note_co_ all temporary results are stored in only 3 object variables (SPS.vars) in order to lower the GC activity._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Stvsynrj","Date":"2015-12-13T22:16:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi guyz ! i_t_ll be back tomorow on this conversation._lt_/p_gt__lt_p_gt_Btw_co_ +1 @jerome for the example and the _qt_sa mémé cowboy_qt_ great explanation ! _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Just for a test_co_ i added reppel to jerome_t_s example_co_ congrats guys_co_ we got now an IA fishes _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2346_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#46_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2015-12-14T01:12:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_It remains to make a neural network to do a real IA  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Lib here _lt_a href_eq__qt_https_dd_//github.com/harthur/brain_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/harthur/brain_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]