[{"Owner":"Fedor","Date":"2017-06-02T07:42:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat I am trying to do here is a bit too complex to simulate it in a playground. I hope i can explain it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a mesh that was build from raw vertices and polygon data. I have added the bones weights and indices. I am sure these two arrays are fine_co_ they come from the same original model as the vertices and polygons. I have checked this too.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_// The code to add the indices and weights to the mesh\nbase_model.mesh.setVerticesData(BABYLON.VertexBuffer.MatricesIndicesKind_co_ base_model.bonesIndices_co_ true)_sm_\nbase_model.mesh.setVerticesData(BABYLON.VertexBuffer.MatricesWeightsKind_co_ base_model.bonesWeights_co_ true)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI then load a skeleton - also from the same origin_co_ so the bones indices match those in the indices array. The skeleton is attached to the mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I rotate bone #0_co_ the entire mesh rotates accordingly. No surprises there_co_ and to me this is proof that the weights and indices are effective. when I scale the bones_co_ parts of the body also scale.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ when I rotate bone#1- upper leg -_co_ nothing at all happens. And nor does rotating the other bones have any effect.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_//The rotation command I use_dd_ \nrig.bones[1].rotate(BABYLON.Axis.X_co_ .01_co_ BABYLON.Space.WORLD_co_ base_model.mesh)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tscreenshot #1_dd_ you can see the bone rotates_co_ but the mesh does nothing.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tscreenshot #2_dd_ this is the original model_co_ that does rotate the leg with the bone.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tscreenshot #3_dd_ rotating bone #0 rotates the entire model.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI know I am doing something strange here_co_ but I assure you it is necessary to the application I am working on. I hope any of you have some suggestions where to look for an answer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_06/5931148c58c7c_Schermafdrukvan2017-06-0209-29-55.png.b30d95eb8f4ff95e41f53ee5774a508d.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_13262_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_06/5931148dbf956_Schermafdrukvan2017-06-0209-29-55.thumb.png.a246354b202a12bb35ff556e8b847720.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Schermafdruk van 2017-06-02 09-29-55.png_qt__gt__lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_06/5931148f443ee_Schermafdrukvan2017-06-0209-28-52.png.a6c1daed140ae8ea3d8ea8392fe6c260.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_13263_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_06/5931148f443ee_Schermafdrukvan2017-06-0209-28-52.png.a6c1daed140ae8ea3d8ea8392fe6c260.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Schermafdruk van 2017-06-02 09-28-52.png_qt__gt__lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_06/5931148fa2442_Schermafdrukvan2017-06-0208-49-46.png.381bec8071113ba06b25431920be79e8.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_13264_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_06/593114918dde2_Schermafdrukvan2017-06-0208-49-46.thumb.png.568c411c20d872b82cf8fad650bad529.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Schermafdruk van 2017-06-02 08-49-46.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Fedor","Date":"2017-06-02T08:41:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI noticed something interesting_dd_ when iterating through all the bone indices and set the first of every four indices to 1_co_ the entire mesh is deforming (messy but that was to be expected.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I checked if there were no #1 indices in there at the start_co_ but there are_co_ and they do have significant weight. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI then tested rotating some other bones_co_ and quite a few of them do get the mesh deformed...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-06-02T12:15:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI would get a very simple 2 bone model working the traditional way and then recreate it using the technique you are using now.  You should then be able to identify what is going on by comparing the two meshes.  It will also be much easier to put this on the PG so that others can play with your code.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-06-02T13:29:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI would really love to help but we clearly need a small repro _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Fedor","Date":"2017-06-04T08:27:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi DK &amp_sm_ rest_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI figured it out... it had something to do with that other question_dd_ \n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/30313-no-error-messages-in-callback-functions/?do_eq_embed_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\tOnce I detected a callback was broken somewhere in the middle_co_ I was well on my way fixing it. It now works. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]