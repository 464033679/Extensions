[{"Owner":"santarcade","Date":"2016-05-07T15:20:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tafter beating my head against this for a while_co_ I came to the conclusion that I need a break and possibly some support._lt_br /_gt_\n\tI want to calculate the position of theObject mesh in the local space of theBone which is attached to theMesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe code I write for it is_dd__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_// combine the bone World Matrix with the transform of the mesh\nvar boneInverse _eq_ theBone.getWorldMatrix().multiply(theMesh.getWorldMatrix())_sm_\nboneInverse.invert()_sm_\n\n// calculate object position relative to the bone joint\nconsole.log(_t_object world position_dd_ _t_+objectMesh.position)_sm_\nvar relPos _eq_ BABYLON.Vector3.TransformCoordinates(objectMesh.position_co_ boneInverse)_sm_\nconsole.log(_t_object rel position_dd_ _t_+relPos)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut the problem is I keep getting weird results..._lt_br /_gt_\n\tI tried switching theBone.getWorldMatrix() with theBone.getAbsoluteMatrix() with no luck._lt_br /_gt_\n\tIt is still unclear the difference between the two me and I could not find anything in the doc.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHalp!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-09T23:45:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis class could be helpful_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Debug/babylon.skeletonViewer.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Debug/babylon.skeletonViewer.ts_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(mainly this function_dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Debug/babylon.skeletonViewer.ts#L40_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Debug/babylon.skeletonViewer.ts#L40_lt_/a_gt_)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"santarcade","Date":"2016-05-10T07:39:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDeltakosh!_lt_br /_gt_\n\tThank you very much for the reply_dd_ this is exactly what I ended up coding_co_ a skeleton visualizer and a bone matrix updater._lt_br /_gt_\n\tTurned out_co_ my calculations were correct the problem I experienced instead was related to how I override bone matrixes while an animation is playing_dd_ basically when calculating how to dynamically adjust the rotation of a bone_co_ I was using theBone.getWorldMatrix() but the resulting matrix was not up-to-date._lt_br /_gt_\n\tSo my bone adjustment looked wrong_co_ while it was just the matrix that was out-dated_dd_ so a small function such as this one _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Debug/babylon.skeletonViewer.ts#L119_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Debug/babylon.skeletonViewer.ts#L119_lt_/a_gt_ solved!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow I_t_m experiencing a new issue though_dd_ I have an additional mesh attached to a bone of the skeleton for which I override the matrix of the animation_dd_ while the main mesh animates using my adjusted values_co_ the attached mesh plays the original animation_co_ without my overrides. I_t_m running 2.3.0_dd_ any clue?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will try to update to 2.4.0 preview_co_ just to see if it changes._lt_br /_gt_\n\tThanks so far!_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-10T21:23:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\thard to tell but if you can provide a PG it_t_s gonna help me a lot _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"santarcade","Date":"2016-05-11T15:30:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOk_co_ I will try to extract an example as soon as I can._lt_br /_gt_\n\tThanks so far!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]