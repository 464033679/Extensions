[{"Owner":"royibernthal","Date":"2018-05-02T23:25:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve been working with a blender guy for quite a while now_co_ every one of his models worked properly when exported to bjs_co_ until now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHe created an animated model which is slightly more complex than his previous ones_co_ and he can_t_t seem to figure out what_t_s wrong with it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt looks great in blender_co_ but when exported to bjs the animation looks twisted.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can download the .blend here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.dropbox.com/s/9b5ucks6v7elj39/data.blend?dl_eq_0_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.dropbox.com/s/9b5ucks6v7elj39/data.blend?dl_eq_0_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s a video of how it looks when rendered in bjs after exported using the latest Blender Exporter (5.6.2)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.dropbox.com/s/e9cm7rpljppsw6i/isolated%20animation.webm?dl_eq_0_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.dropbox.com/s/e9cm7rpljppsw6i/isolated animation.webm?dl_eq_0_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you please help us understand what_t_s wrong and how to fix it?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-05-03T12:52:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI just noticed the warning_co_ I have a feeling I already encountered a similar issue in the past.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is the reason right? If so_co_ how can I find where the extra influencers are? Will reducing them require re-animating everything?\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tWARNING_dd_ Maximum # of influencers exceeded for 317 vertices_co_ extras ignored_lt_br /_gt_\n\t\t\t            Total Influencers_dd_  31944_lt_br /_gt_\n\t\t\t            Avg # of influencers per vertex_dd_  3.0028_lt_br /_gt_\n\t\t\t            Highest # of influencers observed_dd_  15_co_ num vertices with this_dd_  317_lt_br /_gt_\n\t\t\t            exported as 8 influencers_lt_br /_gt_\n\t\t\t            num skeletonWeights and skeletonIndices_dd_  85104\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-03T13:58:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes_co_ the animation looks fine.  Going thru the matrix weights of each bone in weight paint mode_co_ &amp_sm_ subtracting out vertices which really should not be affecting them is the problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBJS has a max of 8 bones per vertex.  You can set it to less than the max observed for efficiency_co_ and it will try to pick the least weights.  Trying to throw out 7 bones (15 - 7) for 317 vertices is not going to end well.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-05-03T14:43:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_213630_qt_ data-ipsquote-contentid_eq__qt_37367_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1525355897_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t44 minutes ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tGoing thru the matrix weights of each bone in weight paint mode_co_ &amp_sm_ subtracting out vertices which really should not be affecting them is the problem._lt_span_gt_﻿_lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tIs that something a blender artist will know how to do?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_213630_qt_ data-ipsquote-contentid_eq__qt_37367_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1525355897_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t43 minutes ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tTrying to throw out 7 bones (15 - 7) for 317 vertices_lt_span_gt_﻿_lt_/span_gt_ is not going to end well._lt_span_gt_﻿_lt_/span_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tWould you suggest redoing the rig with less bones or am I misunderstanding the issue?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-03T15:02:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes_co_ Weight Painting mode is just like Edit mode.  There are YouTube videos on it.  Reducing bones is more work than Weight Painting.  It also does not alleviate checking that the weights are assigned correctly.  Checking weight so should be part of the process for any commercial characters.  If the automatic weights added when parenting the mesh to the skeleton are mostly good_co_ then there is not much to do.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-05-06T22:47:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHe got rid of the warning following this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//blender.stackexchange.com/questions/14250/how-to-restrict-vertex-weights-to-no-more-than-n-number-of-bones_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//blender.stackexchange.com/questions/14250/how-to-restrict-vertex-weights-to-no-more-than-n-number-of-bones_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think he limited to the default of 4 instead of 8 though.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tEverything in the blender file looks fine_co_ no warning is thrown anymore in the export log_co_ and the result is even weirder.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t.blend\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.dropbox.com/s/jyw1ubagcz4sasl/data.blend?dl_eq_0_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.dropbox.com/s/jyw1ubagcz4sasl/data.blend?dl_eq_0_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tvideo\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.dropbox.com/s/r7obfdz0yoawyek/video.webm?dl_eq_0_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.dropbox.com/s/r7obfdz0yoawyek/video.webm?dl_eq_0_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-07T20:46:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNot going to look at your stuff_co_ since not convinced a BJS problem.  Still need to go through each bone weighting by_dd_\n_lt_/p_gt_\n\n_lt_ol_gt_\n\t_lt_li_gt_\n\t\tPut armature into pose mode\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tSelect mesh &amp_sm_ put into Weight Paint mode\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tright click each bone in skeleton_co_ and you will vertices which have that bone as an influencer be non-blue.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tWhen stray verts are affected where they should not _qt_Subtract Blend_qt_ them to Blue.\n\t_lt_/li_gt_\n_lt_/ol_gt_\n\n_lt_p_gt_\n\tSee where arm verts are affected by having finger bone selected?  How tough is that?  I am not a Blender tutor.  You are on your own.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_18159_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/weight_paint.jpg.f06f91af3cb625e6d3db02a907d6503f.jpg_qt_ alt_eq__qt_weight_paint.jpg.f06f91af3cb625e6d3db02a907d6503f.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-05-15T14:03:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI went over every single bone_co_ the weight paint looks perfect. I don_t_t think that_t_s the problem here.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.dropbox.com/s/vb48uyx09ie2htt/data.blend?dl_eq_0_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.dropbox.com/s/vb48uyx09ie2htt/data.blend?dl_eq_0_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/ss.png.c230742e1354aa73b166d3fd8accc816.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_18288_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/ss.png.c230742e1354aa73b166d3fd8accc816.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_ss.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-15T19:50:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis works for me_co_ though I changed some things.  I used_dd_\n_lt_/p_gt_\n\n_lt_ul_gt_\n\t_lt_li_gt_\n\t\tCreated a new .blend Appended your objects in.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tAdded arcrotate camera an light.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tDeleted the pose library_co_ which added 4 frames onto the end.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\texported in Javascript format_co_ instead of JSON (.babylon)\n\t_lt_/li_gt_\n_lt_/ul_gt_\n\n_lt_p_gt_\n\tThe eyes are not following along with the body.  Do not know if that your next problem_co_ or something I messed up along the way.  Will try exporting just adding the light &amp_sm_ camera to the original blend tomorrow_co_ but I cannot reproduce this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-05-15T20:32:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWith only adding a camera &amp_sm_ light_co_ &amp_sm_ exporting as JSON to the original .blend_co_ things work fine.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-05-15T23:35:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_215097_qt_ data-ipsquote-contentid_eq__qt_37367_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1526416335_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t10 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tWith only adding a camera &amp_sm_ light_co_ &amp_sm_ exporting as JSON to the original .blend_co_ things work fine.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI added a camera and a light_co_ the issues remain.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAre you sure it works fine for you? Are the eyes there? Are the fingers no longer twisted? (attached)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhy does it matter if I add light &amp_sm_ camera in the .blend? Do they affect the export of the mesh? Or is it simply for easier testing?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRegardless_co_ I_t_ll also try tomorrow what you suggested in your first reply.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/ss.png.59499d08bf2379cbf62ec1b4c33b8090.png_qt_ data-fileid_eq__qt_18291_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_ss.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_18291_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_05/ss.png.59499d08bf2379cbf62ec1b4c33b8090.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"royibernthal","Date":"2018-05-16T19:36:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSolved by a blender freelancer..\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]