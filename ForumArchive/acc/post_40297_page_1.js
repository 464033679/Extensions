[{"Owner":"ssaket","Date":"2018-09-27T20:27:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ I have a use case where I would want to -\n_lt_/p_gt_\n\n_lt_ul_gt_\n\t_lt_li_gt_\n\t\tcreate a mesh (for example- Cube)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tremove a vertex on some event (say mouse click)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\treconstruct the mesh\n\t_lt_/li_gt_\n_lt_/ul_gt_\n\n_lt_p_gt_\n\tI am able to remove the vertex¬†from the mesh_t_s verdata but when I use¬†Delaunay triangulation to find the new Indices_co_¬†the mesh geometry gets distorted. Not sure what to do here?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny help is much appreciated.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-27T20:31:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe will need a sample in the Playground to help here _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ssaket","Date":"2018-09-28T10:58:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere_t_s the awesome playground -¬†_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#5WUV7S_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#5WUV7S_lt_/a_gt_¬†- click on any vertex to see how it works _lt_span_gt__lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTL_sm_DR\n_lt_/p_gt_\n\n_lt_p_gt_\n\tokay_co_ here_t_s what I am currently doing-¬†\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst_co_ I try to find the facets from pickInfo_co_ after that_co_¬†I try to find¬†the nearest vertex from the pickPoint -&gt_sm_ then¬†the corresponding triangles_co_ which contains that vertex -&gt_sm_ and delete them from the mesh indices.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am not able to use the earcut_t_s triangulation function_co_ I don_t_t know why but I thick it_t_s because of the duplicated vertices.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t¬†Also_co_ I don_t_t remove the vertex from the verdata_dd_ _qt_BABYLON.VertexBuffer.PositionKind_qt_-¬†\n_lt_/p_gt_\n\n_lt_p_gt_\n\t¬†\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can think of an another long approach-¬†find all the coplaner faces-&gt_sm_ apply 2d triangulation -&gt_sm_ push them into vertexbuffer. But I don_t_t¬† wanna use this ! Any inputs on how to use the¬†earcut_t_s triangulation function or any other idea?¬†\n_lt_/p_gt_\n\n_lt_p_gt_\n\t¬†\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-28T15:54:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/31816-ssaket/?do_eq_hovercard_qt_ data-mentionid_eq__qt_31816_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/31816-ssaket/_qt_ rel_eq__qt__qt__gt_@ssaket_lt_/a_gt_ and a warm welcome from me. I have taken a different approach_co_ why re-triangulate when you can just re-position the vertex to delete_co_ _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#5WUV7S%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#5WUV7S#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps the PG does not do exactly what you want but perhaps you can gain something from it. My style of coding is a little different to yours but you can soon change anything to the way you want it done.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst step is to make the mesh updatable_co_ this means the vertexData can be overwritten ( but quantities cannot be altered)_co_ then minimize the number of vertices by removing duplicates (_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/resources/normals_qt_ rel_eq__qt_external nofollow_qt__gt_this has issues_lt_/a_gt_) so that any vertex position has only one index. Next using the faceId check which vertex of that faceId is the one to be _t_deleted_t_. Find all faces that have this vertex and store all vertices joining to this one. For all such connecting vertices average out their x_co_ y and z positions and set the position of the vertex to be deleted to this average_co_ effectively deleting it but keeping the same triangulation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT Opps _lt_span class_eq__qt_ipsEmoji_qt__gt_üôÅ_lt_/span_gt_. Not working correctly. There is a problem where a vertex is joined to a diagonally opposite one and not just along an edge. Need more time to sort this out.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-28T17:14:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHaving given it even more thought the PG above does work correctly in that it does what it says on the tin and re-positions the vertex with respect to the average of the connecting vertices. What I have not thought through is how I want the cube to appear when I _t_delete_t_ a vertex. Here is a new PG¬† _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#5WUV7S%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#5WUV7S#4_lt_/a_gt_ that works on the same basis but minimizes vertices after the click and reverts to a flat shaded one after _t_deleting_t_ the vertex. On running the PG and clicking on the top left of the face towards you I got what I expected_co_ clicking on the top right of the face towards you gets the result that surprised me. (same result in #3) So I had an expectation that did not follow through but even worse I have no idea of your expectations. So a question I should have asked first\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGiven a cube from which you delete one corner (corner might have one or more vertices) what do you expect your mesh to look like?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ssaket","Date":"2018-09-28T17:21:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you so much for such a fast response. This community is really great !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYour coding style is definitely better than mine _lt_span_gt__lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt_¬†_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_I liked your approach of projecting the vertex on to the plane and then updating the same. Though_co_ I wanted the previous approach because_co_ I may in future want to add an extra vertex also.¬†_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_¬†Have a look at this play ground -¬†_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#5WUV7S%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#5WUV7S#5_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_you see those newly created spheres(which are just for reference)¬†after you select a vertex_co_ I would wanna connect them(basically the verdata-&gt_sm_ like 123_co_ 235 in mesh.indices_sm_ hope you getting my point). It work perfectly for the vertex which is shared by 3 facets(triangles). But when we have a vertex which is being shared by 6 facets¬†(triangles) it fails. That_t_s why I am curious to know how babylonjs connects_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_the vertices.¬†_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ssaket","Date":"2018-09-28T17:34:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI tried reading about this on¬†_lt_a href_eq__qt_https_dd_//www.davrous.com/2013/06/14/tutorial-part-2-learning-how-to-write-a-3d-soft-engine-from-scratch-in-c-ts-or-js-drawing-lines-triangles/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.davrous.com/2013/06/14/tutorial-part-2-learning-how-to-write-a-3d-soft-engine-from-scratch-in-c-ts-or-js-drawing-lines-triangles/_lt_/a_gt_¬†but still I am not able to figure it out. Just started working on 3d _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_¬†_lt_/span_gt__lt_span_gt_¬† Lot to learn _lt_span_gt__lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_¬†_lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-28T17:36:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhichever way you do it_co_ true delete or simulated delete you still need to come up with a way to determine which of the vertices that connect to the _t_to be deleted vertex_t_ are the significant ones in terms of re-triangulation.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-28T17:38:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI do not know enough about Delaunay triangulation in 2D or 3D to know if its use would produce the shapes you require. This may be of interest _lt_a href_eq__qt_https_dd_//www.kiv.zcu.cz/site/documents/verejne/vyzkum/publikace/technicke-zpravy/2002/tr-2002-02.pdf_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.kiv.zcu.cz/site/documents/verejne/vyzkum/publikace/technicke-zpravy/2002/tr-2002-02.pdf_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ssaket","Date":"2018-09-28T17:38:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTotally_co_ that_t_s why you see whose spheres in #5(_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#5WUV7S%235_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#4588c5_sm_font-size_dd_14px_sm__qt__gt_http_dd_//playground.babylonjs.com/#5WUV7S#5_lt_/a_gt_)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]