[{"Owner":"Nockawa","Date":"2018-06-17T08:16:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everyone_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s been a while_co_ I_t_m glad that I can be (a little) back.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI summon _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt__co_ I believe this one is for you.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want to cast shadow with the content of a SPS_co_ but apparently I can_t_t configure it the right way because I have no cast shadow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s the code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var sps _eq_ new BABYLON.SolidParticleSystem(_qt_Bots_qt__co_ this.scene)_sm_\nvar circle _eq_ BABYLON.MeshBuilder.CreateDisc(_qt_botCircle_qt__co_ { radius_dd_ 1_co_ tessellation_dd_ 18_co_ sideOrientation_dd_ BABYLON.Mesh.DOUBLESIDE}_co_ this.scene)_sm_\nlet particleCount _eq_ this.botPerCircle*this.botCircleCount_sm_\nsps.addShape(circle_co_ particleCount)_sm_\nthis.botsSPSMesh _eq_ sps.buildMesh()_sm_\nthis.botsSPSMesh.position.y _eq_ 20_sm_\nthis.botsSPSMesh.material _eq_ partMat_sm_\nthis.shadowmapGen.addShadowCaster(this.botsSPSMesh)_sm_\n\nsps.initParticles _eq_ () _eq_&gt_sm_ {\n    for (let i _eq_ 0_sm_ i &lt_sm_ sps.nbParticles_sm_ i++) {\n        sps.recycleParticle(sps.particles[i])_sm_\n    }\n}_sm_\n\nsps.recycleParticle _eq_ p _eq_&gt_sm_ {\n    let b _eq_ allBots[p.idx]_sm_\n    p.position.x _eq_ b.position.x_sm_\n    p.position.y _eq_ b.position.y_sm_\n    p.position.z _eq_ b.position.z_sm_\n\n    return p_sm_\n}\n\nsps.initParticles()_sm_\nsps.setParticles()_sm_\n\nthis.shadowmapGen.addShadowCaster(this.botsSPSMesh)_sm_\n\nsps.billboard _eq_ true_sm_\nsps.computeParticleRotation _eq_ false_sm_\nsps.computeParticleColor _eq_ false_sm_\nsps.computeParticleTexture _eq_ false_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tUnfortunately the result is not the expected one.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_image.png.b1993e8dd7338a18db2350d6a3907a9a.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_18770_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_06/image.png.b1993e8dd7338a18db2350d6a3907a9a.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks guys!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_EDIT_dd_ _lt_/strong_gt__lt_br /_gt_\n\tThe SPS doesn_t_t seem to also support Glow effect set by _lt_span_gt__lt_span_gt__lt_span_gt__lt_span_gt__lt_span_gt__lt_span_gt__lt_span_gt__lt_span_gt__lt_span_gt__dd__lt_/span_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt_ var gl _eq_ new BABYLON.GlowLayer(_qt_glow_qt__co_ this.scene)_sm__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-06-17T10:09:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe SPS is just a standard updatable mesh. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe issue is probably due to the SPS bouding box that_t_s not updated in your case _dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/how_to/solid_particle_system#sps-visibility_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/how_to/solid_particle_system#sps-visibility_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSPS.computeBoundingBox _eq_ true should bo the job anyway\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\thappy to see back _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2018-06-17T10:23:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe bounding box was indeed not properly computed (the SPS was clipped as soon as its center was out of frustum).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow the SPS is clipped correctly_co_ but the shadows still doesn_t_t work! _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-06-17T12:53:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tmmmh... weird_co_ it usually works. Can you reproduce this in a PG ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can see you_t_re using the billboard mode. Billboarding means that an automatic rotation is applied to each solid particle. If these particles are planar (ex_dd_ quads)_co_ maybe the light source is in the same geometric plane than the 2D particles_co_ so they don_t_t cast any shadow at all ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust check with box particles (3D) instead of disc ones (2D).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr add a pointlight set at the current camera position to cast shadows from the 2D particle surfaces\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]