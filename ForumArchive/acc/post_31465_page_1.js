[{"Owner":"Wildstyle","Date":"2017-07-06T06:20:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi there! I_t_m new to the community_co_ and also to Blender and Babylon.js.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI made my first model in Blender v 2.78 (a basic creature_co_ humanoid type)_co_ rigged it and animated a simple walk movement (or a half one_co_ right foot forward_co_ left foot back). I baked my IKs_co_ then exported the whole animation and mesh with the babylon exporter (v. 4.6.1).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I import the animation in Babylon it gets distorted. When the arms and legs goes forward/backward_co_ they move too much upwards. I attached the .blend file_co_ and i have a working online demo also_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//thyalie.ro/node/babylon/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//thyalie.ro/node/babylon/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is password protected_dd_ thyalie_dd_iso88591\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst of all_co_ I want to find out that the babylon settings cause this_co_ or the blender exporter_co_ or i did something wrong in blender (this last seems the most likely_co_ but i dont know what i missed).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for helping in advance!\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_13763_qt__gt_cube.blend_lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_13764_qt__gt_cube_baked.blend_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wildstyle","Date":"2017-07-06T08:39:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_strong_gt_UPDATE_dd__lt_/strong_gt_ Appplied rotation and Location/Rotation/Scale to the mesh_co_ it got better_co_ but still the hands and feets goes upward _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt_ I updated the demo also.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"V!nc3r","Date":"2017-07-06T12:41:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have _lt_em_gt_Mesh_dd_ Cube has un-applied transformations. This will never work for a mesh with an armature. Export cancelled  _lt_/em_gt_when exporting.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI haven_t_t done yet armature animation in BJS_co_ but some little tips_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- in realtime 3D assets_co_ always apply scale (all scale values must be equal to 1)_co_ especially when doing some skinning_dd_ applying must be done _lt_strong_gt_before _lt_/strong_gt_starting skinning. Apply rotation if needed_co_ I think it must be done when doing skinning too.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- you_t_re using a subsurf modifier_co_ it seems excessive in realtime but why not _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ In that case it_t_s probably better to apply modifier_co_ then starting skinning. Keep in mind that _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/exporters/blender_tips#maximum-of-influencers-fix_qt_ rel_eq__qt_external nofollow_qt__gt_their_t_s some limitations_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn my opinion_co_ you have to delete armature &amp_sm_ subsurf modifiers_co_ cleaning mesh_co_ and re-doing armature.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMake some little tests on a simple object_co_ for trainning.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wildstyle","Date":"2017-07-06T14:17:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20526_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/_qt_ rel_eq__qt__qt__gt_@V!nc3r_lt_/a_gt_ you were exactly right. The most probably i dd not apply the transformations in a correct way. I separated the mesh from the armature_co_ and rejoined it. This time i did not apply IK_co_ and i applied the subsurf modifier also (wow_co_ export speed skyrocketed).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have to work on the influence exceed warning (thank you for the link_co_ once again!)_co_ but the deformation problem is gone now. You can see the demo also.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks! You were great help!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-07-06T14:44:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFYI_co_ the fact that you actually got an export means that you are using 4.6.1 of the exporter.  This is obsolete_co_ only kept for those requiring a version of Blender earlier than 2.7.4_co_ I think.  Remove it_co_ then install the zip file version using Blender preferences.  It actually blows itself up when there are un-applied transforms involving armatures.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_blenderUserPreferences.png_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_https_dd_//raw.githubusercontent.com/BabylonJS/Extensions/master/QueuedInterpolation/Blender/doc-assist/blenderUserPreferences.png_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2017-07-06T19:09:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/27577-wildstyle/?do_eq_hovercard_qt_ data-mentionid_eq__qt_27577_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/27577-wildstyle/_qt_ rel_eq__qt__qt__gt_@Wildstyle_lt_/a_gt_ _dd_ Hi and welcome to the forum.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI took a look at your basic blend file - and there are issues with un-applied transforms as _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20526_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/_qt_ rel_eq__qt__qt__gt_@V!nc3r_lt_/a_gt_ points out_co_ and you are using a very old version of the exporter as _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ points out. Add to that you have the subsurf modifier which gives the mesh &gt_sm_150K vertices. That is a lot!! I get worried when I have more than 20K vertices. And about 120K of those vertices are just the eyeballs!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow some additional stuff_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. The rig is parented to a _qt_Bezier Curve_qt_ which as far as I can tell is not exported.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Your IK is odd. You are using two _qt_Empties_qt_ to control the IK. These get exported as _lt_u_gt_meshes_lt_/u_gt_ along with their own animations. Y should use _lt_u_gt_IK bones_lt_/u_gt_. Have a look at this _lt_a href_eq__qt_https_dd_//www.youtube.com/watch?v_eq_Q9f-WVs3ghI_qt_ rel_eq__qt_external nofollow_qt__gt_YouTube video from Sebastian Lague_lt_/a_gt_ from about 5 minutes to 6 minutes which adds a couple of simple Ik bones to a leg. You don_t_t need to add the additional sophistication that he adds. As for the _qt_Pole Target_qt_ he talks about I usually call that Knee.IK.(R or L). See below.You can add those IK bones to both legs and arms just in the way he describes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. As he points out the IK bones do not _qt_deform_qt_ the mesh rather they give you easy control of a group of bones quickly.And note he sets a _qt_chain length_qt_ of 2 - you left it at zero.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo here is a quick rerigging of your character with just a simple leg IK set up and animation _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.3dworlds.ca/wildstyle/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_Character Animation_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd finally_co_ The legs of your character are very small and a tiny part of the mesh_co_ so I am not sure of you reall yreally need 3 bones per leg. One might easily work - in which case there maybe no need to to use IK for the legs.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can download the blend file that I created - no bezier curve _co_ no empties_co_ no subsurf modifier_co_ and  my simple IK rig _lt_a href_eq__qt_https_dd_//github.com/gryff1000/1webgl/blob/gh-pages/wildstyle/my_cube3.blend_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope some of that helps.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]