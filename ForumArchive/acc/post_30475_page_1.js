[{"Owner":"ua4192","Date":"2017-05-17T10:12:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi all.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am trying to apply different optimizations on my big complex scene with 4000 meshes and 40000 instances.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe scene is very complex (12.5M vertices )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy idea is to combine diferent optimization methods probided by babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAUTOLOD+MESHSUBDIVIDE+OCTREES+SCENEOPTIMIZATION.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy main problem is that when I try  to apply the scene optimization method SceneOptimizerOptions.HighDegradationAllowed I always get the message that the optimization has been successfully but many times the scene is cleaned and the number of scene total vertices decrease until 0. I think there is something wrong.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere the code_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBABYLON.SceneOptimizer.OptimizeAsync(scene_co_ BABYLON.SceneOptimizerOptions.HighDegradationAllowed(15_co_ 5000)_co_    function(){    _lt_br /_gt_\n\t    if ( mydebug ) {_lt_br /_gt_\n\t            console.log(_qt_Optimization successful_qt_)_sm__lt_br /_gt_\n\t        }_lt_br /_gt_\n\t    }_co_ function(){_lt_br /_gt_\n\t        console.log(_qt_Optimization failed_qt_)_sm__lt_br /_gt_\n\t})_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have also realize that the function provides the mesage only one time. I thought that the function was executed each 5 seconds (5000ms) if the target of FPS of 15 was not possible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am thing in serializing big scenes_co_ but I have never tried and don_t_t know if this will help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMany many thanks in advanced.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-05-17T12:51:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI think it is because you use a strong optimization by default_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_SceneOptimizerOptions.HighDegradationAllowed_lt_/span_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_Try custom optimization _dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var EngineOptimizer _eq_ function()\n\t{   \n\t\tlet result _eq_ new BABYLON.SceneOptimizerOptions(60_co_ 5000)_sm_\n\t\t\n\t\tresult.optimizations.push(new BABYLON.ShadowsOptimization(0))_sm_ // Priority 0\t\t\n\t\tresult.optimizations.push(new BABYLON.LensFlaresOptimization(1))_sm_ // Priority 1\t\t\n\t\tresult.optimizations.push(new BABYLON.PostProcessesOptimization(2))_sm_ // Priority 2\t\n\t\tresult.optimizations.push(new BABYLON.TextureOptimization(3_co_ 512))_sm_\t // Priority 3_co_ texture size 512 sur les textures superieur à 512_co_ 1024 ...\n\t\tresult.optimizations.push(new BABYLON.TextureOptimization(4_co_ 256))_sm_\t // Priority 4_co_ texture size 256 sur les textures superieur 256 ...\t\n\t\tresult.optimizations.push(new BABYLON.ParticlesOptimization(5))_sm_ // Priority 5\t\t\n\t\tresult.optimizations.push(new BABYLON.RenderTargetsOptimization(6))_sm_ // Priority 6 \t\n\t\tresult.optimizations.push(new BABYLON.HardwareScalingOptimization(7_co_ 2))_sm_ // Priority 7_co_ HardwareScaling 2\n\t\tresult.optimizations.push(new BABYLON.HardwareScalingOptimization(8_co_ 4))_sm_ // Priority 8_co_ HardwareScaling 4\n\t\t\n\t\treturn result_sm_\t\n\t}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAnd \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.SceneOptimizer.OptimizeAsync(scene_co_ EngineOptimizer()_co_ function(){    \n    if ( mydebug ) {\n            console.log(_qt_Optimization successful_qt_)_sm_\n        }\n    }_co_ function(){\n        console.log(_qt_Optimization failed_qt_)_sm_\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ua4192","Date":"2017-05-17T15:24:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMany thanks.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_dd_ )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will try and give you feedback\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ua4192","Date":"2017-05-17T17:54:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAfrter many tries The scene is still too big to be managed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCould I do anything else?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBest regards\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-05-17T19:00:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou will have in this case to create objects lowpoly to your scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe try adding SIMD too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ua4192","Date":"2017-05-18T13:55:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt seems very interesting_co_ despites it seems not to be compatible with all browsers.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have tried to load an example_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt__lt_a href_eq__qt_https_dd_//www.babylonjs.com/demos/simd/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs.com/demos/simd/_lt_/a_gt__lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt_But it doesn_t_t work._lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt_It gets hang while loading_co_ no progress._lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt_Do you have any other example?_lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt_I have not found too much documentation._lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt_Many thanks in advanced._lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt_You are the master_lt_/cite_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_cite_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/cite_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-05-18T15:00:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYou_t_ll have to create lowpoly objects. I do not see any other solution.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ua4192","Date":"2017-05-18T15:14:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDo you mean to use LOD?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am already using 4 levels of detail.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy problem with this approach is that LOD cannot be used with closes and with instances now I have the same problem than before about inherited transformations.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnothe problem is that I am using an arcrotatecamera and the LOD distance seems not to be working properly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSometimes I have to be very near from the object to make it visible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBest regards\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-05-18T16:22:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI cannot comment on the screen optimizer per say_co_ but having 8000 meshes is a LOT of render loop CPU overhead.  This CPU takes away time that could be spent at the GPU.  Even though instances only have the single draw call of the regular mesh_co_  they each must be accounted for in Javascript.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf an mesh / instance never moves_co_ then you could_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_mesh.freezeWorldMatrix()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIf multiple instances_co_ or meshes sharing the same material_co_ do not move independently_co_ you could merge them into one mesh.  This reduces the Javascript overhead and draw calls.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]