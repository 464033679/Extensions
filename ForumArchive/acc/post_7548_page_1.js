[{"Owner":"gryff","Date":"2014-07-02T16:40:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_JCPalmer asked me if I could create some Blender files that demonstrated specific features of babylon.js that he could use for his TOB project - including camera animation and multi-materials. This was relatively easy to do_co_ but before I said I was finished_co_ I wanted to test them with BJS._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Here is the original_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/jcp/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_Camera Animation with multi-materials_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_&lt_sm_Edit&gt_sm__lt_/p_gt__lt_p_gt__lt_strike_gt_As you can see objects pop in and out - and it is the objects with multi-materials (the 8 sided cylinders with 4 different colours_co_ and the oblong boxes 2 materials_co_ one with a texture)._lt_/strike_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_With Babylon.1.13-beta.js it is now working fine - displaying the multi-material 8 sided cylinders and the oblong boxes with 2 materials and one one textured face. _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_&lt_sm_/Edit&gt_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So_co_ my first thought was I had an issue with the multi-material objects_co_ so I created a babylon file that had no multi-materials _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/jcp/index2.html_qt_ rel_eq__qt_external nofollow_qt__gt_Camera Animation with no mulltimaterials_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It works fine_co_ no popping in and out - same animation_co_ same objects but just one material on each object._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you look at the javascript in the HTML file you will see that there is an animated cube that the camera is attached to. I can in Blender drive the camera animationdirectly_co_ but that produces another issue which I can save for later._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_strike_gt_Any thoughts on this multi-material issue?_lt_/strike_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Ohh and I_t_m using Blender 2.69_co_ _lt_strike_gt_Babylon.1.12.js (downloaded last night)_lt_/strike_gt__co_  Babylon.1.13-beta.js and the latest exporter._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-02T17:13:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Strange!!!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_could you just remove the animation and move the camera where an object should be displayed (and is not displayed)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I think I have a bug with mesh selection and multimat_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-02T17:31:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok I found and fixed it _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-07-02T17:46:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_gryff_dd_  Thanks!  Having these kind of regression testing blend files can be useful downstream_co_ in BabylonJS itself_co_ as well.  References to animation not related to bones is pretty sparse.  The only place I found it was in the actual code of the blender export script.  Having some tests at the ready to run thru before a new version goes to production is vital to have._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I am guessing from your note that you tried the direct camera animation in the man1 blend.  I am assuming_co_ when it had some other issue_co_ then you went to this new blend. right?  Sometimes issues only show when multiple things are taking place.  That_t_s why I suggested all that stuff go into the one model._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Deltakosh_dd_  That was quick.  I see 5 files have changed since yesterday.  Ignoring the two 1.13s_co_ scene &amp_sm_ babylonFileLoader were changed.  Have you pushed yet?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Jeff_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-02T17:50:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yes I did _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-02T17:51:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The bug was when loading a mesh with Flat shading and multimat_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-02T18:06:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt_Ok I found and fixed it_lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In Babylon.1.12.js (last change 8 days ago) or Babylon.1.13-beta.js (which changed 20 minutes ago) ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-07-02T18:08:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Just diffed it.  The part of my python script where the Javascript class is being written for a mesh_co_ I was only just setting a .useFlatShading property.  I missed this_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_        if (mesh._shouldGenerateFlatShading) {            mesh.convertToFlatShadedMesh()_sm_            delete mesh._shouldGenerateFlatShading_sm_        }_lt_/pre_gt__lt_p_gt_Are .useFlatShading &amp_sm_ ._shouldGenerateFlatShading eqivalent?  Should I be adding this code?  See you moved computeWorldMatrix() to after the code above.  I was not even doing it at all.  Should I do it.  FYI_co_ this python code is based on babylonFileLoeader to a great degree_co_  the resemblance is pretty noticeable.  The difference is all the branching is done in python.  There is not an if to be found in the .js other than to ensure things like materials or skeletons do not get loaded more than once._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Jeff_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-02T21:16:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt_I am guessing from your note that you tried the direct camera animation in the man1 blend.  I am assuming_co_ when it had some other issue_co_ then you went to this new blend. right?_lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Not really Jeff. I started off with a new file just to see how doable it was with the Babylon system - export and running./loading the scene._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In addition_co_ I knew that I was going to face an issue illustrated in the image below._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Now this is a simple example but it will illustrate the issue. In the scene there are two fans - both are animated but the animation lengths are different - 30 and 180 frames (see red boxes). Now if you export as a babylon file with the end box reading 180 then you get two animations in the file with the proper keys for frames except that the 30 frame animation ends like this_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt__qt_keys_qt__dd_[{_qt_frame_qt__dd_0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-0.1031]}_co_{_qt_frame_qt__dd_1.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-0.1031]}_co_{_qt_frame_qt__dd_5.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-1.2751]}_co_{_qt_frame_qt__dd_10.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-2.3038]}_co_{_qt_frame_qt__dd_15.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-3.3510]}_co_{_qt_frame_qt__dd_20.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-4.3982]}_co_{_qt_frame_qt__dd_25.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-5.4793]}_co_{_qt_frame_qt__dd_30.0_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-6.2832]}_co_{_qt_frame_qt__dd_180_co__qt_values_qt__dd_[-0.0000_co_-0.0000_co_-6.2832]}]}_lt_/pre_gt__lt_p_gt_and at the end of the 30 frame animation stuff you also get _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt__qt_autoAnimate_qt__dd_true_co__qt_autoAnimateFrom_qt__dd_0_co__qt_autoAnimateTo_qt__dd_180_co__qt_autoAnimateLoop_qt__dd_true_lt_/pre_gt__lt_p_gt_which will screw up the 30 frame animation - it won_t_t loop until frame 180._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Now there are several workarounds _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_1. Edit the babylon file manually - not useful to you._lt_/p_gt__lt_p_gt_2. Load the scene containing only one fan then import a mesh containing the other fan._lt_/p_gt__lt_p_gt_3. Create both animations on one timeline. Stop the animation on loading then get each mesh and animate them using the appropriate range on the single timeline for each fan._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_While it is an issue that can be handled - it is to my way of thinking messy. Think of the walking man with some additional animations - say idle_co_ run and jump. Do I want to add the camera animation to that timeline as I may decide later to add a punch and kick animation? And if the scene changes_co_ do I want this guy burdened with the camera animation when no such animation is called for?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_To my way of thinking it would be nice to have the autoAnimateTo to be based on the last frame in the animation (frame 30 in this case ) and not calculate a value for frame 180._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So those were my thoughts that led to the way I approached creating a camera animation._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_&lt_sm_fileStore.core_Emoticons&gt_sm_/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_07_2014/post-7026-0-15483300-1404333671.jpg_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_07_2014/post-7026-0-15483300-1404333671_thumb.jpg_qt_ data-fileid_eq__qt_2122_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-7026-0-15483300-1404333671_thumb.jp_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-02T23:45:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__shouldGenerateFlatMesh is set from useFlatShading _dd__lt_/p_gt__lt_p_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_mesh_lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt__shouldGenerateFlatShading_lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_ _lt_/span_gt__lt_span style_eq__qt_font-weight_dd_bold_sm_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt__eq__lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_parsedMesh_lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_useFlatShading_lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt__sm__lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm_font-size_dd_12px_sm__qt__gt_@Gryff_dd_ use bjs 1.13_lt_/span_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-03T01:00:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Consolas_co_ _t_Liberation Mono_t__co_ Menlo_co_ Courier_co_ monospace_sm__qt__gt_@Gryff_dd_ use bjs 1.13_lt_/span_gt__lt_/span_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You want me to live dangerously_co_ right_co_ DK ? _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Working fine now - see first link above._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]