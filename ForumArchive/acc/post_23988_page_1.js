[{"Owner":"JohnK","Date":"2016-07-21T17:16:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOK so happy with mirrors now stuck on refraction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoing refraction I expected something like this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_p5GYyb0.jpg_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//i.imgur.com/p5GYyb0.jpg_qt_ /_gt_  but got this _lt_img alt_eq__qt_ynx613Y.jpg_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//i.imgur.com/ynx613Y.jpg_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\there_t_s the playground _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#12_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tplayed around with\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_waterMaterial.refractionTexture.depth _eq_ 10_sm_\nwaterMaterial.indexOfRefraction _eq_ 5_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tbut am getting nowhere. Any suggestions?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2016-07-21T19:11:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYour playground still use reflection... it should use refractionTexture and to work the refracted objects as to be placed behind (it is not a mirror but a glass).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI ll try to create pgs for you.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-07-21T20:34:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_span_gt_@Sebavan sorry posted wrong link have edited in correct one._lt_/span_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2016-07-21T20:42:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs you can see here_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#10_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\trefraction (blue plane) and reflection (red plane) can be achieved through respectively one render target texture and one mirror texture. On the previous pg both are not mixed to prevent confusion and planes are semi transparent to also see the original through them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn the following PG_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#11_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBoth refraction and reflection are actives making it weird. This is due to the fact that Fresnel laws prevents this to happen in real life (_lt_a href_eq__qt_https_dd_//en.wikipedia.org/wiki/Fresnel_equations_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//en.wikipedia.org/wiki/Fresnel_equations_lt_/a_gt_).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAdding the fesnel parameter on both gives the following result (the more you are at grazing angle_co_ the more reflection only)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#14_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd to avoid all the manual fresnel setup and so on_co_ and ensure your energy conservation_co_ you can also use the PBR material.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#15_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor far away reflect/refract_co_ it is recommened to use cube map or probes_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#QJS2W%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#QJS2W#16_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope that helps\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-07-22T08:03:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt_ thank you for the PGs and I have learnt some new techniques such as you can create refraction with RenderTargetTexture_co_ Frsenel I will have to spend more time on. However playing around with your PGs I still cannot get the effect I am looking for. My posting the wrong link in the first place probably caused confusion. My earlier post\n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/23985-cracked-mirror/?do_eq_embed_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\thopefully showed that I was OK with reflections and this post was just to deal with refraction and what I expected. Something along the lines of what is happening to the pencil in the image below.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_p023hqnk.jpg_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//ichef.bbci.co.uk/images/ic/640xn/p023hqnk.jpg_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTrying to do this in the (correct) PG _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#12_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand I could not get this effect. Is it possible? How do you do it?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2016-07-22T09:29:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSorry for the confusion_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is the issue_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1YAIO7%2317_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1YAIO7#17_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUnfortunately the fact that each point bends differently would normally require one dedicated texture for each (this could only work well with ray tracers). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can only approximate here and this is annoying cause this creates artifacts for really close objects.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother method will consist to compute it from a second camera but not through the rafract channel for your use case.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]