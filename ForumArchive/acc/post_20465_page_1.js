[{"Owner":"onetrickwolf","Date":"2016-02-11T21:49:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey I am coming from three.js and have been working with Babylon on and off for about a month.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe are making a 3D model viewer and are interested in using PBRMaterials because they really make the models look amazing.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am trying to figure out the best way to let users choose a model_co_ have that model loaded_co_ the textures loaded_co_ then apply the textures as PBRMaterials to the model.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere seems to be A LOT of ways to approach this and was wondering someone could just give me some light advice on how they would do this?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI was converting the models and textures to Babylon files using the FBX converter and also the OBJ importer_co_ but those try to set up materials automatically.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have been looking at using the AssetManager.  Perhaps converting JUST the mesh to FBX_co_ then convert to .babylon_co_ load the babylon file in_co_ load the textures in_co_ then create PBRMaterials out of the textures and apply them to the mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWould this be a good approach?  Any examples out there that might help me?  Thanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-02-11T23:47:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ I think there is no better than others solution.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI like your approach but I guess it will be easier to help you if you describe your options or the questions you may face\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"onetrickwolf","Date":"2016-02-12T15:17:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell one thing I am having a bit of trouble with is how to load a model then apply a texture...it makes sense to me on paper but can_t_t seem to get it working...this is what I_t_ve tried_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var model_sm_\nvar assetsManager _eq_ new BABYLON.AssetsManager(scene)_sm_\nvar meshTask _eq_ assetsManager.addMeshTask(_qt_skull task_qt__co_ _qt__qt__co_ _qt_./_qt__co_ _qt_models/skull/skull.babylon_qt_)_sm_\nmeshTask.onSuccess _eq_ function(task){\n    model _eq_ task.loadedMeshes[0]_sm_\n}\nvar textureTask _eq_ assetsManager.addTextureTask(_qt_image task_qt__co_ _qt_models/skull/elongated_skull_D.png_qt_)_sm_\ntextureTask.onSuccess _eq_ function(task) {\n    model.material.diffuseTexture _eq_ task.texture_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tGetting_dd_ _lt_strong_gt_Uncaught TypeError_dd_ Cannot set property _t_diffuseTexture_t_ of null_lt_/strong_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-02-12T15:44:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis means that your texture is loaded faster_co_ so before_co_ than the skull (big file) and that the model doesn_t_t exist yet when you try to set its material texture.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-12T16:25:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo_co_ the textureTask should be put inside-of meshTask.onSuccess?   I bet so.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"onetrickwolf","Date":"2016-02-12T16:58:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay little confused.  So I have a .babylon file that includes textures and the AssetLoader automatically loads the textures it seems.  However_co_ I tried manipulating the textures and it_t_s not working_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var meshTask _eq_ assetsManager.addMeshTask(_qt_skull task_qt__co_ _qt__qt__co_ _qt_./_qt__co_ _qt_models/skull/elongated_skull.babylon_qt_)_sm_\nmeshTask.onSuccess _eq_ function(task){\n    model _eq_ task.loadedMeshes[0]_sm_\n    console.log(model.material)_sm_ //returning null\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAny ideas?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-02-12T17:31:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thello\n_lt_/p_gt_\n\n_lt_p_gt_\n\tare they other meshes in your file or just one?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-02-12T17:34:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt appears as though the skull model does not have a default material.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#SXEV7_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#SXEV7_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-02-12T17:36:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCorrect _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-02-12T18:02:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt is working in this example_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#SXEV7%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#SXEV7#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is the image I used for a texture_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_0UsP1sa.jpg_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//i.imgur.com/0UsP1sa.jpg_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"onetrickwolf","Date":"2016-02-12T18:38:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAh thanks I will play around with it and let you know what I find!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-02-12T18:53:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI rarely use a .babylon &amp_sm_ never used AssetManager_co_ but was having an issue with multiple meshes_co_ head / eyes / eye lashes / teeth/ tongue / hair_co_ showing up before everything was ready.  Looked interesting to see eyes / teeth flash briefly_co_ but not very professional.   I used a scene.executeWhenReady() to launch my render loop_co_ so nothing shows till all are ready.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_scene.executeWhenReady(function() {\n    engine.runRenderLoop(function () { scene.render()_sm_ })_sm_\n    recorder _eq_ QI.AudioRecorder.getInstance(resetPhonemeControls)_sm_\n})\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI do know if waiting till everything is done defeats the purpose of an asset manager_co_ cause I do not know what its purpose is.  Might not you just submit all your tasks_co_ specifying only on errors_co_ then just put your material assignment / start your render loop inside the executeWhenReady?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]