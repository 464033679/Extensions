[{"Owner":"PeapBoy","Date":"2017-03-09T14:36:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi everybody !_lt_br /_gt__lt_br /_gt_\n\tFirst of all_co_ I_t_m not sure if I should begin a new thread or up these ones _dd__lt_br /_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/19285-create-screenshot-with-post-processing/_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/19285-create-screenshot-with-post-processing/_lt_/a_gt__lt_br /_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/17404-babylon-screenshot/_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/17404-babylon-screenshot/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWith the new support of WebGL 2 by BabylonJS_co_ I got interested in the multisample render target._lt_br /_gt_\n\tUntil now_co_ I used my own version of createScreenshotUsingRenderTarget() function which performs MSAA manually (actually_co_ it pixel perfect downscales a 4x bigger renderTargetTexture than the requested size)._lt_br /_gt_\n\tNow_co_ I would like to rewrite it using the latest available features.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tWhat should I do to get an antialiased screenshot using multisample render target ?_lt_br /_gt__lt_br /_gt_\n\tJust increasing the samples property of the RenderTargetTexture is not enough_co_ I_t_ll always get the following error _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_[.Offscreen-For-WebGL-098CA170]GL ERROR _dd_GL_INVALID_OPERATION _dd_ glReadPixels_dd_ _lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tWhich comes obviously from this line _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var data _eq_ engine.readPixels(0_co_ 0_co_ width_co_ height)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Tools/babylon.tools.ts#L627_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Tools/babylon.tools.ts#L627_lt_/a_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tHere is a PG where I copy/pasted a lighter version of createScreenshotUsingRenderTarget() function. The only real difference is the sampleCount parameter which is used to increase the samples property _dd__lt_br /_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#SDTEU%2329_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#SDTEU#29_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust press 1_co_ 2_co_ 3 or 4 key to call the createScreenshot() function with 1_co_ 2_co_ 3 or 4 samples._lt_br /_gt__lt_br /_gt__lt_br /_gt_\n\tThanks for your help ! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-03-09T17:45:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tLet me check _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-03-09T18:09:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAnd it_t_s fixed _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2017-03-10T15:27:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello_co__lt_br /_gt__lt_br /_gt_\n\tI didn_t_t think it was a bug. But 1000 thanks. I love this commit ! _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PeapBoy","Date":"2017-03-10T16:45:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI just added a _qt_samples_qt_ parameter to the createScreenshotUsingRenderTarget() function._lt_br /_gt__lt_br /_gt_\n\tI see that the value is already checked in updateRenderTargetTextureSampleCount() and _setupFramebufferDepthAttachments() functions (value in [1_co_ gl.MAX_SAMPLES] range) therefore no need to check it again._lt_br /_gt_\n\tSo it_t_s a one line change._lt_br /_gt__lt_br /_gt_\n\tOr maybe did you intend to create a new screenshot function ?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-03-10T16:59:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tthis is fine _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_ thanks a lot\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]