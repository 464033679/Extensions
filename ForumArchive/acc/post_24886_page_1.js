[{"Owner":"PierreDuc","Date":"2016-08-31T12:44:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis is a problem which I_t_ve been struggling for too long now. Probably my approach is completely wrong_co_ and my knowledge of matrices are lacking.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt_Scenario_dd__lt_/u_gt_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tTwo parent meshes in a scene\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tEach parent has one so called connector mesh as a child\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tBoth parents have a pivotMatrix which is _lt_u_gt_not_lt_/u_gt_ equal to Matrix.Identity()\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tBoth child connectors have a pivotMatrix which is _lt_u_gt_not_lt_/u_gt_ equal to Matrix.Identity()\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\t_lt_u_gt_Problem_lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMoving the second parent in such a way that both child connectors have the same global position. Unfortunately this does not come out okay_co_ because the pivotMatrix is _t_messing_t_ things up.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_u_gt_What have I tried_lt_/u_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe models are made using 3DS Max and then exported to .babylon. When I apply a ResetXForm within 3DS Max on the connectors it all works fine_co_ and the models connect at the right position. Unfortunately I do not have the possibility to do this for all the models I have.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve tried using this piece of code (TypeScript)_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_let subject_dd_ BABYLON.Mesh _eq_ &lt_sm_BABYLON.Mesh&gt_sm_con2.parent_sm_\nlet con1pos_dd_ BABYLON.Vector3 _eq_ con1.getAbsolutePosition()_sm_\nlet con2pos_dd_ BABYLON.Vector3 _eq_ con2.getAbsolutePosition()_sm_\nlet pos2_dd_ BABYLON.Vector3 _eq_ subject.getAbsolutePosition()_sm_\n\nsubject.setAbsolutePosition(pos2.add(con1pos.subtract(con2pos)))_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tWhat I would really like is a way to make the pivotMatrix _eq__eq_ Matrix.Identity() and have the mesh/geometry stay at the same position. Because before I can move these_co_ I also need to rotate the subject_co_ in such a way that con2 faces the exact opposite direction as con1. And I am pretty sure that the pivotMatrix is going to mess up that as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Edit_dd__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve created two playgrounds. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1UMJXS%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1UMJXS#0_lt_/a_gt_ (3ds max export where the connectors have an altered pivot)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1UMJXS%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1UMJXS#_lt_/a_gt_1 (3ds max export where the connectors are reset using resetXform)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI was very convinced that I did get values using the getPivotMatrix() method_co_ but checking today_co_ I was horribly wrong. Apparently that data is not output by the babylon 3ds max exporter. Which gives me the feeling there is little I can do about it. Perhaps the exporter needs to be adjusted so that the adjusted pivot matrix gets exported as well\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2016-09-01T07_dd_06_dd_26Z_t_ title_eq__t_09/01/2016 07_dd_06  AM_t_ data-short_eq__t_2 yr_t__gt_September 1_co_ 2016_lt_/time_gt_ by PierreDuc_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jellix","Date":"2016-08-31T15:40:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI don_t_t know exactly what you want to achieve.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou want to turn the subject opposite to the second parent and then place the subject to a position where the children get the same position_co_ right?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo what happens by using your current code?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-08-31T20:36:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello_co_ to be more efficient to help you we need a repro in the Playground\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PierreDuc","Date":"2016-09-01T07:07:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_142247_qt_ data-ipsquote-contentid_eq__qt_24886_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1472675770_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t10 hours ago_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHello_co_ to be more efficient to help you we need a repro in the Playground\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI_t_ve updated my question_co_ but i seem to have hit a deadend_co_ considering the pivot values do not get exported from 3ds max to babylon\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-09-02T17:02:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCorrect_co_ pivot is integrated into world matrix but not exported separately.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can still export your meshes from 3dsmax and then setup pivot manually with mesh.setPivotMatrix()\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]