[{"Owner":"vtange","Date":"2017-11-01T04:23:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#SVHR8A_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#SVHR8A_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m trying to create a simple (at least in my mind) scene where I have a ball rolling within the confines of a single mesh _qt_room_qt_ I built in blender and exported as .gltf.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ no matter what I do_co_ the ball seems to always go through the imported mesh and hit the ground below (which I kept to make sure the ball doesn_t_t fall forever).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAm I doing something wrong? In the playground there isn_t_t a physics engine but locally I_t_ve tried cannon.js after reading that it supports MeshImpostors but I get the same result with or without a physics engine.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-11-01T13:19:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHowdy_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twelcome to the forum _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI noticed one problem with the playground and tried fixing it_co_ but the mesh impostor simply wouldn_t_t work correctly. Let me go through the first fix_co_ and then explain the problem_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyour model is built using a root node as a parent of the actual mesh. parenting in Babylon and the physics engine imply compound (a  _qt_merge_qt_ of many impostors to a single one). But this is not what you wanted to achieve. You wanted a mesh impostor on the second mesh_co_ the one with the parent. Since you didn_t_t implement the onError callback_co_ you didn_t_t see the error. For that we introduced the ignoreParent flag_co_ which is a boolean that simply cancels the compound-creation and treat every mesh as an individual_co_ assuming (!!) the parent node has no impostor. It should look something like this_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#SVHR8A%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#SVHR8A#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou will notice_co_ however_co_ that it didn_t_t really solve anything _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI ran some tests. The first one was to use the box impostor instead of the mesh impostor. This works perfectly. So I assumed there was something wrong during the creation of the mesh impostor. Then I noticed that your parent node has a negative scale on the z axis (-1) and that your mesh is downscaled to ca. 0.02 on all axis. I am not sure why the negative scaling is needed_co_ and I assume this is the problem with the impostor_co_ as the mesh impostor is reading straight out of the vertex data of the mesh. A negative scaling might make it look correctly_co_ but it seems to break the vertex data. Is there any way of you exporting this mesh with a 1_co_1_co_1 scale_co_ 0_co_0_co_0 position and no rotation just to make sure what the problem is (babylon_co_ the physics engine_co_ or the mesh itself).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2017-11-02T01:30:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey Raanan_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you for testing around and explaining the .ImportMesh stuff to me. Yeah I didn_t_t know about the ignoreParent flag and the details about how the meshes are structured after import. Is there a reason why the Blender exporter just exports things the way it did with a parent-child relationship. I had a feeling thru skimming the .gltf and debugging that there was a mesh in my imported mesh_co_ but couldn_t_t tell which was the _t_official_t_ one_co_ so I assumed it was the one at the highest level.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyways_co_ apparently when you draw with Sketchup_co_ everything is in negative space_co_ so we ended up with the negative scales and funky stuff.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s a new playground with everything in positive space. Same box room_co_ just rotated 180 degrees in Sketchup and exported.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#SVHR8A%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#SVHR8A#2_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-11-02T12:47:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGreat _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ I am not sure what was updated_co_ but the mesh_t_s parent_t_s scaling is still negative on the z axis_co_ and the rotation is still Math.PI on the y axis. Also_co_ it seems like the object is not centered.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt shouldn_t_t be a problem (!!)_co_ but I really want to first check with a mesh I am sure SHOULD work before I get into fixing this issue. I believe I know what the issue is  - the vertex data being provided to the physics engine is totally off (I have been experimenting today quite a lot in that regards).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny chance of getting the mesh centered_co_ with no negative scaling?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2017-11-02T15:56:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHmm_co_ that_t_s weird. So the scaling is still off even when the model is not in negative space? In the playground it clearly is in (55_co_ Y_co_ 55) instead of -55 now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow are you checking the scaling_co_ rotation_co_ centering_co_ of the mesh? Is there a specific part of the .gltf file you_t_re reading?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t* I got work right now and won_t_t be able to work on the mesh soon_co_ but I_t_d like to know so I can get something done quick once I_t_m home\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-11-02T16:01:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI did find the reason (thanks to oh_t_ mighty deltakosh _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ ). This is the way to support left and right handed systems. Should stay_co_ cannot be avoided.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need a way around it! Working on it right now.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2017-11-03T04:23:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhat did deltakosh tell you? So is there anything I should fix in my playground or regarding the mesh?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks so much for working on this. I_t_m a newb in BJS so from my POV you and deltakosh are both awesome. If there_t_s anything I can do to help_co_ do tell _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-11-03T21:47:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28964-vtange/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28964_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28964-vtange/_qt_ rel_eq__qt__qt__gt_@vtange_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tseems like I found the problem and fixed it. I am still in the process of running tests_co_ and your mesh really helped a lot in understanding what_t_s going on. Your mesh has all of the _qt_problems_qt_ I needed in order to find a working solution_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. parent with awesomely weird transformation (negative z scaling_co_ Math.PI on y)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Your mesh is not centered. At all _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Wonderful!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. Your mesh is downscaled. 0.025 times to be exact.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t4. It is relatively complex! Which is good for testing.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is the current working state _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15534_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/59fce38867432_Nov3201710-38PM-Edited-Edited-Edited.gif.b976abf581b483cfd3bfa93e911ba45a.gif_qt_ alt_eq__qt_59fce38867432_Nov3201710-38PM-Edited-Edited-Edited.gif.b976abf581b483cfd3bfa93e911ba45a.gif_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tYou will notice the collisions are working correctly. There are walls that are not seen due to back face culling_co_ but you know the model better than me _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI will PR _qt_soonish_qt_. I want to make sure everything is working_co_ as this is a rather big change in the way I am calculating the initial physics bodies.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2017-11-04T03:14:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh my god _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard_qt_ data-mentionid_eq__qt_10310_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt__gt_@RaananW_lt_/a_gt_ you are a GOD.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m glad my mesh helped you find the problem and fix it. Yeah I_t_m aware of the invisible walls - I kept them there on purpose to see if the balls would go through them in one direction or something.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWith this fix_co_ we can theoretically make a pinball game with a Sketchup Model and 1 ball _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-11-06T14:31:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/3085_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/pull/3085_lt_/a_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28964-vtange/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28964_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28964-vtange/_qt_ rel_eq__qt__qt__gt_@vtange_lt_/a_gt__co_ I used your mesh as an example. I also tried playing with its transformation (rotation_co_ position)_co_ and it works wonderfully out of the box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/5a00724ad7759_Nov620173-15PM-Edited.gif.b2cbe6ba1082040a48da8f23ca17fd2a.gif_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_15559_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/5a00724ad7759_Nov620173-15PM-Edited.gif.b2cbe6ba1082040a48da8f23ca17fd2a.gif_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Nov 6 2017 3-15 PM - Edited.gif_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-11-06T14:58:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHere is the playground - _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#SVHR8A%2313_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#SVHR8A#13_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-11-06T18:06:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tMerged and published to PG _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"stephanedemotte","Date":"2018-06-21T14:49:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#SVHR8A%2313_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#SVHR8A#13_lt_/a_gt_ dont work anymore_co_ any news on this ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2018-06-21T15:24:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ the #13 has temporary fixes that were already merged into the framework so - _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#SVHR8A%2320_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#SVHR8A#20_lt_/a_gt_ is now working\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]