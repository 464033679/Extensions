[{"Owner":"SteveS","Date":"2017-09-26T01:54:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIs it possible to get the position and rotation of an attached HP mixed reality headset after using the scene.createDefaultVRExperience() call?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve been unable to get the content using scene.activeCamera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso is it possible to use a different webCam - the default is the front looking camera on my laptop.  I_t_d like to use a USB webcam instead.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLove babylon.js\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-09-26T09:01:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe device_t_s rotation and position can be retrieved using the current (active) camera_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tdevicePosition (_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/3.0/webvrfreecamera#deviceposition-vector3-classes-3-0-vector3-_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/classes/3.0/webvrfreecamera#deviceposition-vector3-classes-3-0-vector3-_lt_/a_gt_)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tdeviceRotationQuaternion (_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/3.0/webvrfreecamera#devicerotationquaternion-any_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/classes/3.0/webvrfreecamera#devicerotationquaternion-any_lt_/a_gt_)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAbout the webcam - you can provide a device ID in the constraints when initializing the video texture - _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/3.0/videotexture#static-createfromwebcam-scene-onready-constraints-rarr-void_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/classes/3.0/videotexture#static-createfromwebcam-scene-onready-constraints-rarr-void_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope this helps!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-26T20:41:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the quick response.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet me elaborate a bit more about the issue.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBefore the _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_scene.createDefaultVRExperience() call (which I believe was created in early August) one would use the webvrfreecamera call and a few other calls to setup the VR device connection._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_What is nice about the createDefaultVRExperience call is that all the VR configuration setup is done for you by that single call.  It also creates a button in the lower right corner that when pressed immerses you if a compatible headset is attached.  We received our HP mixed reality headset in early August and set about creating a number of apps using babylonjs and they work with that single call - when the button is pressed you immerse in the headset. Now this only works in the Edge browser not released versions of Firefox_co_ Opera and Chrome._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_One of the apps we created displays a 360 picture on the inside and outside of a sphere of diameter 6.  The HP headset has inside out tracking and provides continuous position and rotation information with position in  metric units just like the Hololens.  When immersed you can walk around the sphere and even go inside the sphere and look around.  _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_The app has a text panel displaying the position and rotation of the parameters scene.activeCamera.position and scene.activeCamera.rotation.  scene.activeCamera.position never changes but scene.activeCamera.rotation does change based on mouse movement before immersion but doesn_t_t change while immersed._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_I think what is happening is the createDefaultVRExperience call is creating a private scene camera but only partially updating it_t_s public parameters in activeCamera under certain conditions._lt_/span_gt_  I_t_ve only briefly looked at the code for that function and not being a javascript expert haven_t_t been able to see what might be missing.   Possibly the author of the function could shine some light on this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll look into the webCam device ID and see if I can change the CAM selection.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for the help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-26T22:17:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_createDefaultVRExperience_lt_span_gt_ _lt_/span_gt__lt_/span_gt_should work flawlessly on chrome or firefox with Oculus or HTC vive. HP device is only supported by Edge (not a limitation of babylon.js per se)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt does not create a private camera but instead replace the scene.activeCamera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe WebVRCamera does not update its position / rotation but instead keeps the deviceOrientation and devicePosition updated. The camera.position and camera.rotation only specify offsets from the deviceOrientation and devicePosition values.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-26T23:32:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for responding.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_createDefaultVRExperience works beautifully with the HP headset.  My problem is I don_t_t know how to reference the headset orientation and position._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_I want to use the deviceOrientation and devicePosition information to control other functions inside the render loop - I just don_t_t know how to get that information._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_I_t_ve tried scene.activeCamera.devicePosition.x_co_  scene.devicePosition.x_co_ etc.  Everything I_t_ve tried doesn_t_t work._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA code example would be terrific.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-09-27T12:30:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe enterVR() function of the VRHelper (that is being initialized when calling createDefaultVRExperience()  sets the active camera to be the webvr camera. Are you calling this function? Can you check the name of the camera_t_s class (scene.activeCamera.getClassName() ) ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe following interface is exposed on the WebVRCamera objcet_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_export interface PoseControlled {\n        position_dd_ Vector3_sm_\n        rotationQuaternion_dd_ Quaternion_sm_\n        devicePosition?_dd_ Vector3_sm_\n        deviceRotationQuaternion_dd_ Quaternion_sm_\n        rawPose_dd_ DevicePose_sm_\n        deviceScaleFactor_dd_ number_sm_\n    }_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\trawPose_co_ and both device*** are the variables you can use to get the device_t_S position. The rest is to set a _qt_world offset_qt_ for your scene.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-27T19:13:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSome progress.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_scene.activeCamera.getClassName()   pre-immersion  returns  DeviceOrientationCamera._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_post immersion (after pressing the lower right hand side googles - which I assume executes the enterVR() function)    returns  WebVRFreeCamera._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI added a delay before attempting to access the headset data after immersion but still no success.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tscene.activeCamera.WebVRFreeCamera.devicePosition.x\n_lt_/p_gt_\n\n_lt_p_gt_\n\tscene.WebVRFreeCamera.devicePosition.x  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tscene.WebVRFreeCamera.rawPose.position.x  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tand a bunch of other permutations.  In all cases the render loop still halts.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tClearly I_t_m not be using the correct reference syntax.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-27T21:30:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tafter immersion_co_ you just need to use_dd_ _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_scene.activeCamera.devicePosition.x_lt_/span_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-27T21:37:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat works! Thanks alot\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI actually tried that before immersion and_co_  of course_co_ it failed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne last question.  Is there a bool I can test indicating immersion?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-09-28T10:28:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyou can use the (protected/public) _vrDisplay variable on the WebVRCamera_co_ which is the native VRDisplay object from your browser. It has a flag called _t_isPresenting_t_ which is a boolean_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (camera._vrDevice &amp_sm_&amp_sm_ camera._vrDevice.isPresenting) {\n    doThisAmazingThingThatNeedsToBeDone()_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-28T18:22:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTried scene.activeCamera.isPresenting  but no success.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUsed  if(scene.activeCamera.getClassName()_eq__eq__qt_WebVRFreeCamera_qt_) {\n_lt_/p_gt_\n\n_lt_p_gt_\n\t     dosomestuff()_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand it works.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-09-28T18:25:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHi Steve_co_ this works too_co_ but I did give you a code sample on how to get the flag_t_s value _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ isPresenting is not a property of the camera_co_ but of the VRDevice object. It is also on only when the device is connected and presenting_co_ making it a better candidate for many use cases.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-28T23:30:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI can_t_t use camera._vrDevice as I don_t_t declare a camera object in my code - I use the camera created by the scene.createDefaultVRExperience() call.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFrom there (courtesy of Deltakosh_t_s post) I reference properties of the camera by using scene.activeCamera.devicePosition\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo it_t_s not clear to me how to reference _vrDevice.isPresenting in my code as  _qt_if(camera._vrDevice&amp_sm_&amp_sm_camera._vrDevice.isPresenting)_qt_ fails. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would prefer to use .isPresenting I just don_t_t how to reference it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2017-09-29T09:49:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthe camera object is scene.activeCamera_co_ after calling the vr experience function.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tso_co_ whenever I say _qt_camera_qt_ I actually mean the active camera. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is the modified code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_if (scene.activeCamera._vrDevice &amp_sm_&amp_sm_ scene.activeCamera._vrDevice.isPresenting) {\n    walkLikeAnEgyptian()_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"SteveS","Date":"2017-09-29T17:04:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThat worked!  Thank you.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]