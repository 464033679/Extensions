[{"Owner":"Nikos123","Date":"2017-01-29T09:48:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFollowing on from this comment about how to animate agar server-side_co_ I was wondering if anyone had attempted to use Babylon in such a way? I ask because this would seem useful in future versions of my Babylon RTS game.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/huytd/agar.io-clone/issues/288#issuecomment-275858908_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/huytd/agar.io-clone/issues/288#issuecomment-275858908_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p style_eq__qt_margin-bottom_dd_16px_sm_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_-apple-system_t__co_ BlinkMacSystemFont_co_ _t_Segoe UI_t__co_ Helvetica_co_ Arial_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\tHere is the common way used in most multiplayer game_dd_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p style_eq__qt_margin-top_dd_0px_sm_margin-bottom_dd_16px_sm_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_-apple-system_t__co_ BlinkMacSystemFont_co_ _t_Segoe UI_t__co_ Helvetica_co_ Arial_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\tServer has an_lt_span_gt_ _lt_/span_gt__lt_strong style_eq__qt_font-weight_dd_600_sm__qt__gt_update loop_lt_/strong_gt__lt_span_gt_ _lt_/span_gt_(60FPS)_co_ where it computes the authoritative physics of all the entities._lt_br /_gt_\n\t\t\tThen_co_ there is a_lt_span_gt_ _lt_/span_gt__lt_strong style_eq__qt_font-weight_dd_600_sm__qt__gt_broadcast loop_lt_/strong_gt__lt_span_gt_ _lt_/span_gt_to send all states (but optimally_co_ only states that have changed should be sent). Ideally_co_ a broadcast loop at 60FPS would be nice_co_ but that_t_s too much for the bandwidth. A lot of games (like Overwatch) put it at 20FPS.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p style_eq__qt_margin-top_dd_0px_sm_margin-bottom_dd_16px_sm_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_-apple-system_t__co_ BlinkMacSystemFont_co_ _t_Segoe UI_t__co_ Helvetica_co_ Arial_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\tSo the client receives states at ~20FPS. The direct rendering of that would be not smooth._lt_br /_gt_\n\t\t\tOne solution would be to_lt_span_gt_ _lt_/span_gt__lt_strong style_eq__qt_font-weight_dd_600_sm__qt__gt_interpolate_lt_/strong_gt__dd_ for each entity to interpolate_co_ buffer all the states received in an array of updates (with limited size). Server should have sent the_lt_span_gt_ _lt_/span_gt__lt_strong style_eq__qt_font-weight_dd_600_sm__qt__gt_timestamp_lt_/strong_gt__lt_span_gt_ _lt_/span_gt_along the_lt_span_gt_ _lt_/span_gt__lt_strong style_eq__qt_font-weight_dd_600_sm__qt__gt_state_lt_/strong_gt__co_ so the client can interpolate. The last timestamp received will be stored as the serverTime_co_ in the client. As the client needs at least 2 updates to interpolate_co_ he should define an interpolationTime (i.e. 100ms). So the client will render 100ms in the past_dd_ renderTime _eq_ serverTime - 100.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p style_eq__qt_margin-top_dd_0px_sm_margin-bottom_dd_16px_sm_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_-apple-system_t__co_ BlinkMacSystemFont_co_ _t_Segoe UI_t__co_ Helvetica_co_ Arial_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\tThen_co_ there is the_lt_span_gt_ _lt_/span_gt__lt_strong style_eq__qt_font-weight_dd_600_sm__qt__gt_rendering loop_lt_/strong_gt__lt_span_gt_ _lt_/span_gt_(client slide_co_ ~60FPS)_dd_ the client should update the states here as he has arrays of updates(serverTime_co_ state). To update one state before rendering it in the current frame_co_ he loops over the updates and find the 2 ones such that_dd_ updates_lt_em_gt_.serverTime &lt_sm_ renderTime &lt_sm_ updates[i+1].serverTime. Do linear interpolation with renderTime as the factor_co_ and update the state. _lt_/em_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p style_eq__qt_margin-top_dd_0px_sm_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_-apple-system_t__co_ BlinkMacSystemFont_co_ _t_Segoe UI_t__co_ Helvetica_co_ Arial_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\t_lt_em_gt_Client-side prediction is more difficult as the server and the client are not synchronized. Very difficult for entities that use timestamp (in fact_co_ idk if it is possible). _lt_/em_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n\t_lt_div_gt_\n\t\t_lt_div_gt_\n\t\t\t_lt_div title_eq__qt_Protected by Grammarly_qt__gt_\n\t\t\t\t \n\t\t\t_lt_/div_gt_\n\t\t_lt_/div_gt_\n\t_lt_/div_gt_\n\t_lt_div_gt_\n\t\t_lt_div_gt_\n\t\t\t_lt_div title_eq__qt_Protected by Grammarly_qt__gt_\n\t\t\t\t_lt_em_gt_  _lt_/em_gt_\n\t\t\t_lt_/div_gt_\n\t\t_lt_/div_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_  _lt_/em_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-01-29T10:20:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI know that Three.js can run server-side using Node.js.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo can Cannon.js_co_ making all physics calculations authoritative on your Node.js server_co_ while using Cannon.js on the client as well_co_ to do prediction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI haven_t_t tried Oimo.js_co_ so I have no idea whether that would work as well.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nikos123","Date":"2017-01-30T19:14:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThanks_co_ I imagine this would be a pretty big task if Babylon doesn_t_t already do it.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nikos123","Date":"2017-02-05T09:59:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAnyone know if Babylon plans to add anything like this?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2017-02-05T13:02:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/15986-nikos123/?do_eq_hovercard_qt_ data-mentionid_eq__qt_15986_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/15986-nikos123/_qt_ rel_eq__qt__qt__gt_@Nikos123_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheck this out_sm_ _lt_a href_eq__qt_http_dd_//www.gabrielgambetta.com/fpm_live.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.gabrielgambetta.com/fpm_live.html_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t// enable Prediction &amp_sm_ Reconciliation_co_ use left &amp_sm_ right arrow keys._lt_br /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nikos123","Date":"2017-02-05T17:27:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWow nice_co_ thanks for that_co_ will study and get back to you!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nikos123","Date":"2017-02-12T19:55:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t I_t_m just gonna start from this tutorial _lt_a href_eq__qt_http_dd_//buildnewgames.com/real-time-multiplayer/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//buildnewgames.com/real-time-multiplayer/_lt_/a_gt_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17943-aweirdo/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17943_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17943-aweirdo/_qt_ rel_eq__qt__qt__gt_@aWeirdo_lt_/a_gt_ @Ragger\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI liked the animations that Babylon provides with the easing but I guess I will have to work that out on the server now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know what the issues with these forums are_co_ I never get email notifications.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nikos123","Date":"2017-02-12T20:50:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve discovered this_dd_ _lt_a href_eq__qt_https_dd_//github.com/OpherV/Incheon_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/OpherV/Incheon_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve asked some questions_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/OpherV/Incheon/issues_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/OpherV/Incheon/issues_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhat do you think?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]