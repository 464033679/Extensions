[{"Owner":"Raggar","Date":"2016-08-20T11:48:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have trouble getting the code to work properly in the playground_co_ so I hope you get an idea of what I mean.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m using cannon direcly_co_ and not as the plugin in Babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a cannon body and a sphere shape_co_ and I_t_m controlling the movement on the X and Z axis using keyboard input.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn top of that I have a sphere mesh in order to verify the changes to the body.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ I use the below handler to rotate the body itself according to the mouse.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_window.addEventListener(_qt_mousemove_qt__co_ function(e) {\n\t//\tconsole.log(_qt_mouse_qt_)_sm_\n              \n              \n        var movementX _eq_ event.movementX || event.mozMovementX || event.webkitMovementX || 0_sm_\n        var movementY _eq_ event.movementY || event.mozMovementY || event.webkitMovementY || 0_sm_\n\n        this.sphereBody.rotation.y +_eq_ movementX * 0.002_sm_\n        this.sphereBody.rotation.x +_eq_ movementY * 0.002_sm_\n    \n\t})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ the problem is_co_ that if I rotate_co_ let_t_s say 50 degrees to the left_co_ and press the key bound to the forward movement_co_ the body moves directly forward_co_ and not in the direction that the body rotated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m a little unsure as of what and how to accomplish this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis should be able to run server-side using node_co_ which it already does_co_ but this has it_t_s limits_co_ as I_t_m not planning to run babylon on the node server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need a way to assign the Z and X axis to the way the body is currently rotated. I guess I could use a camera on the client_co_ but then the rotation has to be useable on the body server-side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI already checked quite a few examples_co_ one being the Cannon.js FPS example.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can upload the files somewhere if needed.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2016-08-20T11:52:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22713_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/_qt_ rel_eq__qt__qt__gt_@Raggar_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSince this is a issue with movement_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCould you share your movement code please? More specificly_co_ the code which actually moves the mesh_co_ i_t_m not interested in keybindings_co_ etc^^\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2016-08-20T12:49:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22713_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/_qt_ rel_eq__qt__qt__gt_@Raggar_lt_/a_gt_ I played with some stuff in the PG_co_ this should help you out_co_ whether you are using cannon or babylon the math should be the same.. (note that cannon will probably need to use rotationQuaternion instead of _qt_normal_qt_ rotation.)_lt_br /_gt__lt_br /_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1OP2LK%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1OP2LK#1_lt_/a_gt_ //Control box with left_co_ up and right arrow keys.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-20T14:05:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tProblem is_co_ I_t_m working with velocities in order to move the object.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just cleaned the code a bit and got rid of all the irrellevant functions and object_co_ and this is a working example_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_&lt_sm_!doctype html&gt_sm_\n&lt_sm_html&gt_sm_\n&lt_sm_head&gt_sm_\n   &lt_sm_meta charset_eq__qt_utf-8_qt_&gt_sm_\n   &lt_sm_title&gt_sm_Babylon - Basic scene&lt_sm_/title&gt_sm_\n   &lt_sm_style&gt_sm_\n      html_co_ body {\n         overflow_dd_ hidden_sm_\n         width_dd_ 100%_sm_\n         height_dd_ 100%_sm_\n         margin_dd_ 0_sm_\n         padding_dd_ 0_sm_\n      }\n      #renderCanvas {\n         width_dd_ 100%_sm_\n         height_dd_ 100%_sm_\n         touch-action_dd_ none_sm_\n      }\n   &lt_sm_/style&gt_sm_\n   &lt_sm_script src_eq__qt_https_dd_//cdnjs.cloudflare.com/ajax/libs/babylonjs/2.4.0/babylon.js_qt_&gt_sm_&lt_sm_/script&gt_sm_\n   &lt_sm_script src_eq__qt_https_dd_//cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.js_qt_&gt_sm_&lt_sm_/script&gt_sm_\n   &lt_sm_script src_eq__qt_https_dd_//cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.js_qt_&gt_sm_&lt_sm_/script&gt_sm_ &lt_sm_!-- optional physics engine --&gt_sm_\n&lt_sm_/head&gt_sm_\n&lt_sm_body&gt_sm_\n   &lt_sm_canvas id_eq__qt_renderCanvas_qt_&gt_sm_&lt_sm_/canvas&gt_sm_\n   &lt_sm_script type_eq__qt_text/javascript_qt_&gt_sm_\n       var sphere_sm_\n     //  var keys_sm_\n     //  keys.left_eq_1_sm_\n       this.playerDirection _eq_ [0_co_0_co_0_co_0]_sm_\n       quat _eq_ new CANNON.Quaternion()_sm_\n\n       \n       \n     //  keys _eq_ [0_co_0_co_0_co_0]_sm_\n      // Get the canvas element from our HTML below\n      var canvas _eq_ document.querySelector(_qt_#renderCanvas_qt_)_sm_\n      // Load the BABYLON 3D engine\n      var engine _eq_ new BABYLON.Engine(canvas_co_ true)_sm_\n      // -------------------------------------------------------------\n      // Here begins a function that we will _t_call_t_ just after it_t_s built\n      var createScene _eq_ function () {\n         // Now create a basic Babylon Scene object\n         var scene _eq_ new BABYLON.Scene(engine)_sm_\n         // Change the scene background color to green.\n         scene.clearColor _eq_ new BABYLON.Color3(0_co_ 1_co_ 0)_sm_\n         // This creates and positions a free camera\n         var camera _eq_ new BABYLON.FreeCamera(_qt_camera1_qt__co_ new BABYLON.Vector3(0_co_ 5_co_ -10)_co_ scene)_sm_\n         // This targets the camera to scene origin\n         camera.setTarget(BABYLON.Vector3.Zero())_sm_\n         // This attaches the camera to the canvas\n         camera.attachControl(canvas_co_ false)_sm_\n         // This creates a light_co_ aiming 0_co_1_co_0 - to the sky.\n         var light _eq_ new BABYLON.HemisphericLight(_qt_light1_qt__co_ new BABYLON.Vector3(0_co_ 1_co_ 0)_co_ scene)_sm_\n         // Dim the light a small amount\n         light.intensity _eq_ .5_sm_\n         // Let_t_s try our built-in _t_sphere_t_ shape. Params_dd_ name_co_ subdivisions_co_ size_co_ scene\n         this.sphere _eq_ BABYLON.Mesh.CreateSphere(_qt_sphere1_qt__co_ 16_co_ 2_co_ scene)_sm_\n         this.box _eq_ BABYLON.MeshBuilder.CreateBox(_qt_box_qt__co_ {height_dd_ 5}_co_ scene)_sm_\n         // Move the sphere upward 1/2 its height\n         this.sphere.position.y _eq_ 2_sm_\n         this.box.position.y _eq_ 2.5_sm_\n         this.box.position.z _eq_ 2_sm_\n         this.box.parent _eq_ this.sphere_sm_\n         // Let_t_s try our built-in _t_ground_t_ shape. Params_dd_ name_co_ width_co_ depth_co_ subdivisions_co_ scene\n         this.ground _eq_ BABYLON.Mesh.CreateGround(_qt_ground1_qt__co_ 6_co_ 6_co_ 2_co_ scene)_sm_\n         this.ground.rotation _eq_ new CANNON.Vec3(-0_co_0_co_0)_sm_\n         //this.socket _eq_ io.connect(_qt_http_dd_//localhost_dd_4004_qt_)_sm_\n          \n        \n         \n          window.addEventListener(_qt_keydown_qt__co_ handleKeyDown_co_ false)_sm_\n          window.addEventListener(_qt_keyup_qt__co_ handleKeyUp_co_ false)_sm_\n          \n          \n          \n        \n          \n          \n          window.addEventListener(_qt_mousemove_qt__co_ function(e) {\n\t   //\tconsole.log(_qt_mouse_qt_)_sm_\n              \n              \n             var movementX _eq_ event.movementX || event.mozMovementX || event.webkitMovementX || 0_sm_\n             var movementY _eq_ event.movementY || event.mozMovementY || event.webkitMovementY || 0_sm_\n\n             this.sphereBody.rotation.y +_eq_ movementX * 0.002_sm_\n             this.sphereBody.rotation.x +_eq_ movementY * 0.002_sm_\n\n\t})_sm_\n\n          \n          \n          \n          \n          \n          \n          function handleKeyDown(evt){   \n              \n              if (evt.keyCode_eq__eq_65){\n                  this.playerDirection[0] _eq_ 1_sm_\n             }\n              \n             if (evt.keyCode_eq__eq_68){  \n                 this.playerDirection[1] _eq_ 1_sm_\n           \n             }\n              \n              if (evt.keyCode_eq__eq_87){  \n                  this.playerDirection[2] _eq_ 1_sm_\n            \n              }\n                          \n              if (evt.keyCode_eq__eq_83){  \n                  this.playerDirection[3] _eq_ 1_sm_\n        \n                                  }\n          }\n                              \n        function handleKeyUp(evt){    \n            if (evt.keyCode_eq__eq_65){  \n            this.playerDirection[0] _eq_ 0_sm_\n            }\n                                 \n            if (evt.keyCode_eq__eq_68){ \n            this.playerDirection[1] _eq_ 0_sm_\n               \n            }\n            if (evt.keyCode_eq__eq_87){ \n            this.playerDirection[2] _eq_ 0_sm_\n           \n            }\n            if (evt.keyCode_eq__eq_83){  \n            this.playerDirection[3] _eq_ 0_sm_\n            }\n                              }\n                              \n     \n         return scene_sm_\n      }_sm_\n       \n       \n    \n       \n       \n       \n var createPhysics _eq_ function(){\n  \nconsole.log(_qt_createPhysicsFunction Called!_qt_)_sm_        \nworld _eq_ new CANNON.World()_sm_\nworld.gravity.set(0_co_-9.82_co_0)_sm_\n        world.broadphase _eq_ new CANNON.NaiveBroadphase()_sm_\n        \nvar mass _eq_ 5_co_ radius _eq_ 1_sm_\nsphereShape _eq_ new CANNON.Sphere(radius)_sm_ // Step 1\nsphereBody _eq_ new CANNON.Body({mass_dd_ 1_co_ shape_dd_ sphereShape})_sm_ // Step 2\nsphereBody.position.set(0_co_2_co_2)_sm_\nsphereBody.rotation _eq_ new CANNON.Vec3()_sm_    \nworld.add(sphereBody)_sm_ // Step 3\nconsole.log(_qt_sphereBodyPosition0_dd_ _qt_ + sphereBody.position)_sm_  \n     \n     //SPHEREQUAT\nsphereBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1_co_0_co_0)_co_-Math.PI/2)_sm_     \n     \n     \n     \n// var worldPoint _eq_ new CANNON.Vec3(0_co_0_co_0)_sm_\n// var force _eq_ new CANNON.Vec3(5_co_0_co_0)_sm_\n// this.sphereBody.applyForce(force_co_worldPoint)_sm_                                \n                                  \ngroundShape _eq_ new CANNON.Plane()_sm_\ngroundBody _eq_ new CANNON.Body({ mass_dd_ 0_co_ shape_dd_ groundShape })_sm_\nconsole.log(groundBody.rotation)_sm_\n\ngroundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1_co_0_co_0)_co_-Math.PI/2)_sm_\n\nconsole.log(groundBody.quaternion)_sm_     \nworld.add(groundBody)_sm_\n        \n        \ntimeStep _eq_ 1.0 / 60.0_sm_ // seconds\nvelocity _eq_ sphereBody.velocity_sm_      \n        \nsphereBody.velocity _eq_ new CANNON.Vec3(0_co_0_co_0)_sm_    \n\nreturn world_sm_ \n     \n }      \n       \n       \n       \n       \n       \n       \n     var onsocketConnected _eq_ function() {\n         \n         console.log(_qt_connected_qt_)_sm_\n     }  \n     \n      var onsocketDisconnect _eq_ function() {\n         \n         console.log(_qt_connected_qt_)_sm_\n     } \n      \n      \n       \n      // -------------------------------------------------------------\n      // Now_co_ call the createScene function that you just finished creating\n      var scene _eq_ createScene()_sm_\n      this.world _eq_ createPhysics()_sm_ \n      // Register a render loop to repeatedly render the scene\n       \n        inputVelocity _eq_ new CANNON.Vec3()_sm_\n      velocity _eq_ sphereBody.velocity_sm_  \n       inputVelocity.quaternion _eq_ new CANNON.Quaternion()_sm_\n\n       \n       \n      engine.runRenderLoop(function () {\n         \n    \n            euler _eq_ sphereBody.rotation_sm_\n          \n         scene.render()_sm_\n          world.step(1.0 / 60.0)_sm_\n          this.sphere.position _eq_ sphereBody.position_sm_\n          this.sphere.rotation _eq_ sphereBody.rotation_sm_\n    \n        euler.x _eq_ sphereBody.rotation.x_sm_\n        euler.y _eq_ sphereBody.rotation.y_sm_\n     \n   \n          \n          \n        if (this.playerDirection[0] !_eq_ 0){\n            inputVelocity.x _eq_ -5_sm_\n        }  \n          \n          if (this.playerDirection[0] !_eq_ 1){\n            inputVelocity.x _eq_ 0_sm_\n        }\n          \n          if (this.playerDirection[1] !_eq_ 0){\n            inputVelocity.x _eq_ 5_sm_\n        } \n          \n            if (this.playerDirection[2] !_eq_ 0){\n            inputVelocity.z _eq_ 5_sm_\n           \n        }\n          \n             if (this.playerDirection[2] !_eq_ 1){\n            inputVelocity.z _eq_ 0_sm_\n        }\n          \n                 if (this.playerDirection[3] !_eq_ 0){\n            inputVelocity.z _eq_ -5_sm_\n        }\n       // sphereBody.quaternion.copy(sphereBody.rotation)_sm_ \n        console.log(sphereBody.quaternion)_sm_ //(new CANNON.Vec3(0_co_ 0_co_ 1)_co_ 500)_sm_\n        velocity.x _eq_ inputVelocity.x_sm_\n        velocity.z _eq_ inputVelocity.z_sm_  \n          \n    \n          \n      })_sm_\n      // Watch for browser/canvas resize events\n      window.addEventListener(_qt_resize_qt__co_ function () {\n         engine.resize()_sm_\n      })_sm_\n       \n    \n\n       \n       \n   &lt_sm_/script&gt_sm_\n&lt_sm_/body&gt_sm_\n&lt_sm_/html&gt_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you try it you_co_ you can see what I mean_co_ I want the axis of the object to follow the rotation of the object_co_ so that I can _t_walk_t_ in a new forward direction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s probably something stupidly easy_co_ as this is basic FPS movement. But for some reason I keep messing it up.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is what I used for reference_dd_ _lt_a href_eq__qt_https_dd_//schteppe.github.io/cannon.js/examples/js/PointerLockControls.js_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//schteppe.github.io/cannon.js/examples/js/PointerLockControls.js_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd the cannon physics work perfectly on node so far.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-20T20:34:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/Pryme8/TERIABLE/blob/gh-pages/Infinity/teriable-infinity-0.0.1.js_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/Pryme8/TERIABLE/blob/gh-pages/Infinity/teriable-infinity-0.0.1.js_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tControls start at line 391\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-20T22:20:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tProblem is_co_ I wanna find the new direction without having a camera present_co_ as this should be running on my node server_co_ with as little code as possible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve been trying for a few days now without any progress. I_t_m new to babylon_co_ but I believe this should be possible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOtherwise_co_ there might be a better way of doing it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s see_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tInput is sent to the server using sockets.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo far the basic input is keys pressed (WSAD)_co_ which based on the velocity moves the sphere on the server_co_ as well as the client.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI first thought you_t_d do the same thing with mouse movement in the X and Y directions_co_ but I see this comes with the cost of responsiveness.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tInstead_co_ sending the actual rotations should be used. Now_co_ in the above code_co_ let_t_s say I rotate to the left about 25%/90 degrees. If I then press the forward(W) key_co_ I now actually move left_co_ instead of forward_co_ in the new direction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there any smart way of doing this_co_ so I can send only the rotation to the server_co_ and the server then_co_ as the client_co_ calculated the new direction as being Z or something.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes it have anything to do with world vs. local space?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-20T22:56:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIm assuming your trying to track position with websockets?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif so_co_ you should do some research because the actual manipulation of the object should be client side_co_ and most of the operations as well_co_ you have the server validate every once and a while and just confirm if things can happen or not.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-20T23:07:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI_t_d prefer having it the way it is now. With input being sent to the server -&gt_sm_ server moves the _t_player_t_ object -&gt_sm_ then sends the new position back to the client. The client runs the same calculations_co_ but the server is the authority. I know your suggested model might be easier_co_ but I prefer this model. Lag compensation_co_ inter/extrapolation etc. comes later. I_t_m in no rush.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-20T23:12:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tits not going to work correct... and its not scalable_co_ but heh what do i know?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-20T23:21:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCare to elaborate on that? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIsn_t_t that the model most games use nowadays?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-21T05:31:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//learn.goocreate.com/tutorials/create/multiplayer-fps/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//learn.goocreate.com/tutorials/create/multiplayer-fps/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNope the client handles movements and hit tests.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tthen sometimes check with the server to make sure everything is still legit.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-21T10:04:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tBut if you read the linked articles from that tutorial_co_ they discuss the authoritative client-server model_co_ and the fact that the server should handle physics(movement) based on input_co_ and send the states to the clients. And that is what I_t_m trying to achieve. I might misunderstand you?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd if the client handles movement and hit registration_co_ then any player will be able to teleport and fake kill between server checks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-21T11:02:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIn case I expressed myself in some odd way_co_ here_t_s a little illustrative way of showing what I want to accomplish_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t[_lt_img alt_eq__qt_zZglgDm.png_qt_ class_eq__qt_ipsImage_qt_ height_eq__qt_503_qt_ src_eq__qt_http_dd_//i.imgur.com/zZglgDm.png_qt_ width_eq__qt_1000_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tA1 is the starting rotation and position.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA2 is the rotation after I move the mouse a bit to the left.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ if I press the forward(W) key_co_ I want the body to move in the direction it is facing_co_ and end up in the position of that of Illustration B.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ it is moving in the Z direction_co_ and thereby ending up in the position of C.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is the rotation and the quaternion of the cannon body after I move the mouse and thereby rotate the object_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_gBDOLWS.png_qt_ class_eq__qt_ipsImage_qt_ height_eq__qt_704_qt_ src_eq__qt_http_dd_//i.imgur.com/gBDOLWS.png_qt_ width_eq__qt_1000_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHow do I translate these into new directions for the object to move?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe box is just a way of telling which way it is facing btw. Nothing of importance here.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would prefer to be able to calculate these directions purely with Cannon and Javascript_co_ as I would like it to run server-side on Node.js.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut at this point_co_ anything is appreciated.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-08-21T13:58:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIt would help us help you if you created a PG.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-21T15:04:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_140791_qt_ data-ipsquote-contentid_eq__qt_24597_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1471787936_qt_ data-ipsquote-userid_eq__qt_4289_qt_ data-ipsquote-username_eq__qt_adam_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ adam said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tIt would help us help you if you created a PG.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#15U9CT%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#15U9CT#1_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-21T15:43:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI understand what you are trying to do_co_ and have told you several ways your doing i wrong posted information that also supported that. You can keep trying to do something that no one else is doing and for good reason_co_ or you could learn the correct way and do it._lt_br /_gt__lt_br /_gt_\n\tYes no server in the world can handle that much information_co_ why do you think there are wall hacks and aim bots..._lt_br /_gt__lt_br /_gt_\n\tIm not trying to come off rude_co_ but why even ask for help if you just know better?_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-21T17:36:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHmm. I think we have some kind of communication problem here. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWhat I_t_m trying to achieve is the following_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlayer1 presses the _t_forward_t_ key for 5 seconds while using the mouse to look around.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat he sends to the server is_dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_t_W-key pressed_t_ and 5 seconds later _t_W-key released_t_ while sending his rotational data. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe server now applies these inputs to the light-weight physics world_co_ and sends back the position to make sure they are synced.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe client updates its position accordingly to the information from the server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is no need to apply new rotational data on the client_co_ as long as the server is the authority of the position.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOtherwise you might end up with laggy mouse movement_co_ and we don_t_t want that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBased on what I_t_ve read_co_ this is how it_t_s done in most fast-paced shooters. Battlefield even uses actual bullets instead of rays. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOf course this won_t_t prevent wall-hacks and aimbots. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet me know where it is you think I am dead wrong.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-21T21:21:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOk so you let the client handle all movements_co_ and then just send the position at intervals back to the server to make sure they are not _qt_out of bounds_qt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-22T13:09:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_140827_qt_ data-ipsquote-contentid_eq__qt_24597_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1471814476_qt_ data-ipsquote-userid_eq__qt_19199_qt_ data-ipsquote-username_eq__qt_Pryme8_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t15 hours ago_co_ Pryme8 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tOk so you let the client handle all movements_co_ and then just send the position at intervals back to the server to make sure they are not _qt_out of bounds_qt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNo I don_t_t. That would require coding bounds for every single wall_co_ box etc. in the game.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_140809_qt_ data-ipsquote-contentid_eq__qt_24597_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1471800993_qt_ data-ipsquote-userid_eq__qt_22713_qt_ data-ipsquote-username_eq__qt_Raggar_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t19 hours ago_co_ Raggar said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_t_W-key pressed_t_ and 5 seconds later _t_W-key released_t_ while sending his rotational data.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-08-22T13:45:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tMaybe this will come in handy? _lt_a href_eq__qt_http_dd_//buildnewgames.com/real-time-multiplayer/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//buildnewgames.com/real-time-multiplayer/_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2016-08-22T14:26:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNo you have dead zones. A simplified set of regions that are an absolute no go\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2016-08-22T22:12:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_140899_qt_ data-ipsquote-contentid_eq__qt_24597_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1471873526_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t8 hours ago_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tMaybe this will come in handy? _lt_a href_eq__qt_http_dd_//buildnewgames.com/real-time-multiplayer/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//buildnewgames.com/real-time-multiplayer/_lt_/a_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAlready read it a few times. And having someone host a lobby is of course one way of doing it. It is the way I_t_m planning on doing my current project (If I ever get this far).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ I wanted to see if it_t_s possible to run the actual physics on the server_co_ as I_t_m a fan of that model.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI figured out a solution to my problem by using sin and cos to calculate the new positions. I_t_m sure this is a bad solution_co_ as I_t_m now moving the physics body directly instead of using velocity/forces. But it works_co_ and still collides with other bodies in the cannon world. So I_t_ll leave it at this for the moment.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]