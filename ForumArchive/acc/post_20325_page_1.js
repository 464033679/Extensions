[{"Owner":"Davin","Date":"2016-02-03T23:35:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tQuick question to clarify.....   is the built in physics engine still the only one that supports height maps?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Davin","Date":"2016-02-04T01:04:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI retract my question!   I should read the release notes closer...\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_ul style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ _t_Segoe UI_t__co_ Arial_co_ freesans_co_ sans-serif_co_ _t_Apple Color Emoji_t__co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_16px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_23.2727px_sm_text-align_dd_left_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_padding_dd_0px 0px 0px 2em_sm_margin-top_dd_0px_sm_margin-bottom_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_li_gt_\n\t\t\t\tnew Heightmap Impostor for Cannon.js physics engine._lt_span_gt_ _lt_/span_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/78_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_color_dd_rgb(64_co_120_co_192)_sm_text-decoration_dd_none_sm_background-color_dd_transparent_sm__qt__gt_PR_lt_/a_gt__co__lt_span_gt_ _lt_/span_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#D3LQD%233_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_color_dd_rgb(64_co_120_co_192)_sm_text-decoration_dd_none_sm_background-color_dd_transparent_sm__qt__gt_Demo_lt_/a_gt__lt_span_gt_ _lt_/span_gt_(_lt_a href_eq__qt_https_dd_//github.com/RaananW_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_color_dd_rgb(64_co_120_co_192)_sm_text-decoration_dd_none_sm_background-color_dd_transparent_sm__qt__gt_RaananW_lt_/a_gt_)\n\t\t\t_lt_/li_gt_\n\t\t_lt_/ul_gt__lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Davin","Date":"2016-02-04T01:12:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t--- side note_co_ the version of cannon.js bundled with babylon needs updating to work with the new heightmap impostors.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-04T02:59:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  Hi Davin!  Yep_co_ it_t_s all _qt_crossing over_qt_ at the moment.  I_t_m sure the playground will have all the newest toys_co_ soon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe playground is where I get my freshest babylon.js_co_ cannon.js_co_ oimo.js_co_ and hand.js.  The playground is one of the first places to get the newest stuff... because testing is done there_co_ too.  Demos for the BJS 2.3 release are being made as we speak.  It_t_s a time of great transition and unexplored horizons.  Clear your browser cache_co_ so when you hit some of the new playground demos in the new 2.3 release list_co_ they_t_ll work great_co_ and give you a good zip (bundle?) to take home.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo clear things up a bit_co_ Babylon.js has no built-in physics engine (though it does have built-in gravity_co_ collide_co_ and intersect). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat we have is _qt_plugins_qt_ (interface objects) to two popular add-on physics engines... Cannon.js and Oimo.js.  Both have their use... and are commanded from Babylon.js... about the same.  We also have a _qt_physicsEngine_qt_ class here_co_ that is a common point between the two plugins. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere_t_s really only 6 commands to drive either add-on physics engine.  Scene.enablePhysics()_co_ scene.createCompoundImpostor()_co_ mesh.setPhysicsState()_co_ mesh.setPhysicsLinkWith_co_ mesh.applyImpulse()_co_ and mesh.updatePhysicsBodyPosition().  No matter which add-on physics engine is being used_co_ those 6 basic commands... will give you the power to take over the world.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIf you please_co_ take a LONG look at this...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#DLBW7%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#DLBW7#10_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat_t_s a CannonJS demo which has a little bit of everything in it_co_ except physics links and compound Imposters.  Click the sphere to impulse it around.  Change power_co_ hit RUN again_co_ make more saves_co_ show_t_n_t_tell _t_em to us_co_ and have fun. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tParticularly notice how a physics _qt_body_qt_ is returned from calls to .setPhysicsState.  They are ghost-like things... and they love Quaternion rotation methods (yaw_co_ pitch_co_ and roll)_co_ but they HATE Euler rotation methods (Vector3 - x-y-z)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  Once you .setPhysicsState on some mesh... that ghostly _qt_body_qt_ is the boss_co_ to a degree.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe have SOME power over that boss.  Once per frame_co_ we check the .position of the ball in line 52.  If its &lt_sm_ 0_co_ then it has fallen off the landscape.  Then in lines 53-55_co_ we re-position the ball... but the physics _qt_body_qt_ is still the boss.  Line 57 is the line that tells the physics body to get a fresh .position from the mesh itself (ease-up on the bossing while we put the ball back into the sky above the land). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tRecently_co_ the updatePhysicsBodyPosition() function decided change its name to updatePhysicsBody() (although the old name will be honored for a while).  This was done because updatePhysicsBody() updates position _lt_strong_gt_AND_lt_/strong_gt_ _lt_u_gt_rotation_lt_/u_gt_.  It updates rotation from the mesh.rotationQuaternion values_co_ and not from mesh.rotation.  Mesh.rotation CAN be used to control physics body (though unorthodox and unpredictable)... via a method such as _lt_em_gt_mesh.rotationQuaternion _eq_ mesh.rotation.toQuaternion().  _lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ monitoring the physics body rotation Quaternion... via monitoring mesh.rotation... can give bad or no results.  I_t_m not an expert in this area_co_ but I believe that having the physics body Quaternion do continuous .toEuler() and send that value to mesh.rotation... would bog the physics.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLooks like heightmap physics is working in the playground.  Better grab the zip.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  Party on!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Davin","Date":"2016-02-04T06:39:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFantastic answer!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m having a little issue applying this to imported meshes -- My guess is_co_ because its trying to use the parent mesh as the bounding box?  I was able to replicate it using the playground you gave as an example.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#ROVSJ_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#ROVSJ_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-02-04T08:54:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thi Davin_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tImported meshes are sometimes not centered or have weird transformation (it is very easy to scale in a weird way in Blender just to get the mesh to look like you want it to _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ ).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTry baking the current mesh transformation and then applying the impostor like suggested here - \n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/19192-mesh-impostors-on-3d-object-like-path/?do_eq_embed#comment-108856_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-02-04T08:57:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tRemember you could also code light functions and use a heightmap without any physic engines _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RBXBG%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RBXBG#6_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif just need some simple features like _qt_following the relief_qt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-11T13:44:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDavin_co_ and others_co_ I recently updated my previous post.  I forgot about mesh.setPhysicsLinkWith()... so there are actually SIX basic commands.  I_t_m getting old.  There is also new information there about mesh.updatePhysicsBody()... which was previously called updatePhysicsBodyPosition().  Its name was changed because _t_position_t_ is not the only property it can update.  It also updates the physics body _lt_u_gt_rotation_lt_/u_gt_... from values found in mesh.rotationQuaternion.   The old name still works_co_ but it_t_s likely being phased toward eventual deprecation  (its death is on the far horizon).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy previous post is 4 posts north of here.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThanks to Raanan for LOTS of physics knowledge_co_ including clarifying function names_co_ adding tons of new physics features_co_ and fixing my misconceptions and mistakes.  He reminded me about setPhysicsLinkWith()_co_ even though I did some huge train locomotive wheel experiments recently.... that used setPhysicsLinkWith() OFTEN.  Go fig.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThose Oimo-based link experiments begin with _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2571-the-wingnut-chronicles/?do_eq_findComment&amp_sm_comment_eq_104662_qt__gt_THIS_lt_/a_gt_ forum post and continue for 6-8 posts.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-11T14:32:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again!  Davin_co_ if you don_t_t mind me commandeering your thread... I have a question for all the physics Gods.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen the _lt_a href_eq__qt_http_dd_//www.babylonjs.com/Demos/Physics/physics.js_qt_ rel_eq__qt_external nofollow_qt__gt_first physics demo_lt_/a_gt_ arrived at the BabylonJS website_co_ it had walls around the play area_co_ and those walls all used...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tborder.checkCollisions _eq_ true_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ I rarely/never set .checkCollisions when I do physics experiments.  AbstractMesh sets this property default _lt_em_gt_false._lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes anyone know the story with this (or a pointer to some docs)? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWHEN should users (like me) set .checkCollisions... when working with physics engines?  When needed?  When not?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for info!  Maybe this question belongs in its own thread in Q/A... to make it easier for others to find this answer?  *shrug*\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-02-11T16:52:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello checkCollisions is for collisions (with the FPS camera) and is not related to physics simulation\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo short answer_dd_ checkCollisions is not required for physics\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]