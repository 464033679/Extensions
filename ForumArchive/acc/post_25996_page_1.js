[{"Owner":"Mazax","Date":"2016-10-24T21:11:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_Hello everyone!_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_I_t_m working on a BabylonJS project and having problems with the movement of the 3D-model. _lt_em_gt_I have used tens of hours to find a solution with poor results_lt_/em_gt_. The projects goal is to get 3D-model/avatar move according to the movement data from Kinect-sensor. I_t_m using a C#-server to send Kinect data through WebSocket to JS and BabylonJS for visualization._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_The problem _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_what I_t_m having is that I don_t_t know how to correctly move the model. BJS documentation seems to focus only to ready-made animations and not to the manual deforming of meshes with skeletons. _lt_/span_gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt__lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_I_t_ve moved and deformed the skeleton in BJS_co_ but cannot get the meshes to move with the skeleton. Everything works fine in Blender (moving the skeleton deforms the mesh)_co_ but not in BJS. I_t_ve also tried to make custom animations for the skeleton in BJS to animate the model frame by frame with the data_co_ but it_t_s so complex I_t_m having a hard time understanding it (with no proper tutorial)._lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt__lt_strong_gt_What is the correct way to manually deform models with skeletons in BabylonJS?_lt_/strong_gt_ If the right way is to make custom animations can you help me understand how to build an animation for a skeleton in BJS? (I_t_m familiar with the BJS tutorials and documentations for animating meshes with no skeletons)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/19043-avatar-animation-via-kinect-v2/?page_eq_2#comment-147195_qt_ rel_eq__qt__qt__gt_My previous post about the problem_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#769DA%234_qt_ rel_eq__qt_external nofollow_qt__gt_Here_lt_/a_gt_ is a bit creepy custom animation I_t_m working on. (How to delete the ready-made animation?)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt__lt_a href_eq__qt_https_dd_//drive.google.com/drive/folders/0B_a-ZhdRoe2qOGdWVkl0NHFGelE_qt_ rel_eq__qt_external nofollow_qt__gt_Here_lt_/a_gt_ is one debug-model I_t_m using. How to make skeleton animation from scratch if your model doesn_t_t have one?_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_Thank you for your help._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p style_eq__qt_margin-bottom_dd_0px_sm_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_Mazax_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-02T16:18:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHiya Mazax...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   Man_co_ sorry you have gotten no replies to this.  hmm.  Not much recent activity in your previous thread_co_ either.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI wish I knew about skeletons_co_ but I am weak in that area (and many other areas)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  A _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/search/?&amp_sm_type_eq_forums_topic&amp_sm_nodes_eq_28_co_16_co_29_co_30_co_31_qt_ rel_eq__qt__qt__gt_forum search_lt_/a_gt_ for _t_bone_t__co_ _t_skeleton_t__co_ _t_weighted_t__co_ _t_armature_t__co_ etc... might bring results.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHave you had any success/advancement in this issue?  Any satisfaction?  I will try to _qt_assemble_qt_ a decent response... and provide some playground links... soon.  Sorry for the delay.  Maybe others will respond to the _qt_bump_qt__co_ too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-02T16:34:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello Mazax_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsorry for the late response. Did you check this demo_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#I6RJJ%2344_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#I6RJJ#44_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Mazax","Date":"2016-11-02T21:16:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again and thank for your answers!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_  I_t_m glad to be able to inform you that I_t_ve found part of the answer I was looking for myself from the BabylonJS GitHub-site. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI found out that the new BJS 2.5 features include bone rotation and scaling (Added to GitHub 5 days ago_co_ Oct 29 2016 by abow. _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/1477#issue-186055039_qt_ rel_eq__qt_external nofollow_qt__gt_Link_lt_/a_gt_). There I found basically the same demo that _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ linked previously and used that information to find the solution to set transformations_co_ rotations and scales to the bones in my project. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat i found out is_dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tYou need to update the _lt_em_gt_bone.getLocalMatrix_lt_/em_gt_ to set the values to bone_co_ however I cant get the bone.getWorldMatrix work the same way. (Why?)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tTo update the mesh with it_t_s skeleton data you need to call the _lt_em_gt_bone.markAsDirty()_lt_/em_gt_. This was my main problem what I was having and it isn_t_t told in the BJS documentation (I didn_t_t find it at least).\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tThe new BabylonJS 2.5 (now in beta) version has at least some support of the manual bone transformation (_lt_em_gt_Bone.rotate_lt_/em_gt_ and _lt_em_gt_Bone.scale_lt_/em_gt_). Hopefully the new version will cover more about the subject (_lt_em_gt_Bone.translate_lt_/em_gt_ maybe? And hopefully something to ease the work with the matrices like in _lt_em_gt_Bone.scale_lt_/em_gt_).\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tThe code I_t_m using now to deform the model is_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre class_eq__qt_ipsCode prettyprint lang-javascript prettyprinted_qt__gt_\n_lt_span class_eq__qt_com_qt__gt_//get translation matrix_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_\n_lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ matrix _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ bone_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_getLocalMatrix_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_()_sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ \n_lt_/span_gt__lt_span class_eq__qt_com_qt__gt_//set position values_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_\nmatrix_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_m_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_12_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ joint_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_x_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_\nmatrix_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_m_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_13_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ joint_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_y_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_\nmatrix_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_m_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_14_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ joint_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_z_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_\n_lt_/span_gt__lt_span class_eq__qt_com_qt__gt_//set mesh to be updated_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_\nbone_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_markAsDirty_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_()_sm__lt_/span_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThe rotation and scale values can be set in BJS 2.5 by calling the _lt_em_gt_Bone.rotate_lt_/em_gt_ and _lt_em_gt_Bone.scale._lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis problem now solved_co_ my project faces a new issue_dd_ I noticed that the skeleton I_t_m using doesn_t_t have the right rotation coordinate system compatible with Kinect v2 data and it might be constructed wrong in some other way too (I think I know how to fix it and am currently working with it. I_t_m new to blender_co_ but learning fast!). The next step in my project would be to fix that skeleton. If someone have one spare Kinect v2 compatible Blender armature I_t_m more than happy to have it _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll update my progress again when I get something major done.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_Thank you for your help._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p style_eq__qt_margin-bottom_dd_0px_sm_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t_lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_Mazax_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-02T22:17:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWelcome_co_ I wish you good luck in your project.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]