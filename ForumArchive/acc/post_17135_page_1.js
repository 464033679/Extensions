[{"Owner":"Gugis","Date":"2015-09-13T16:49:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I_t_m trying to create bone animation programatically which will be used for interpolation between two animations._lt_/p_gt__lt_p_gt_My code_dd__lt_/p_gt__lt_div_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var bone _eq_ skeleton.bones[0]_sm_var bone_animation _eq_ bone.animations[0]_sm_var current_frame _eq_ Math.round(bone_animation.currentFrame)_sm_if(!current_frame) current_frame _eq_ 0_sm_var animationArm _eq_ new BABYLON.Animation(_qt_myAnimation_qt__co_ _qt__matrix_qt__co_ 30_co_ BABYLON.Animation.ANIMATIONTYPE_MATRIX)_sm_animationArm.setKeys([    {frame_dd_ 0_co_ value_dd_ bone_animation._keys[current_frame].value}_co_    {frame_dd_ 30_co_ value_dd_ bone_animation._keys[100].value}])_sm_bone.animations.push(animationArm)_sm_animationArm.animate(0_co_ 0_co_ 30_co_ true_co_ 1)_sm__lt_/pre_gt__lt_p_gt_And i get this error_dd_ Uncaught TypeError_dd_ Cannot set property _t__matrix_t_ of undefined_lt_/p_gt__lt_p_gt_Can someone tell me what i_t_m doing wrong. Or give some tips how interpollation between two skeletal animations can be achieved._lt_/p_gt__lt_/div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-14T01:38:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_can you try with this_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var bone _eq_ skeleton.bones[0]_sm_var bone_animation _eq_ bone.animations[0]_sm_var current_frame _eq_ Math.round(bone_animation.currentFrame)_sm_if(!current_frame) current_frame _eq_ 0_sm_var animationArm _eq_ new BABYLON.Animation(_qt_myAnimation_qt__co_ _qt__matrix_qt__co_ 30_co_ BABYLON.Animation.ANIMATIONTYPE_MATRIX)_sm_animationArm.setKeys([    {frame_dd_ 0_co_ value_dd_ bone_animation._keys[current_frame].value}_co_    {frame_dd_ 30_co_ value_dd_ bone_animation._keys[100].value}])_sm_bone.animations.push(animationArm)_sm_scene.beginAnimation(bone_co_ 0_co_ 30_co_ true)_sm__lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gugis","Date":"2015-09-14T12:59:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi Deltakosh _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ No error_co_ but nothing happens. I guess problem is that bone has two animations (first is original skeletal animation and second is created programatically) and beginAnimation function tries to play them both. I need to find solution how to ignore the first one animation. Well maybe I_t_m wrong_co_ that_t_s just my speculations._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-14T15:41:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Can you share your code on the playground?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gugis","Date":"2015-09-14T17:27:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I couldn_t_t load my scene in playground so i uploaded my code here_dd_ _lt_a href_eq__qt_http_dd_//mmo.impressive.lt/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//mmo.impressive.lt/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I track bone matrix via console.log() inside render function and you can see that matrix data is not changing._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//snag.gy/cncRN.jpg_qt_ alt_eq__qt_cncRN.jpg_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-14T20:27:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_can you reference babylon.max.js (the unminified version) ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gugis","Date":"2015-09-14T20:44:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_96615_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_17135_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1442262464_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_can you reference babylon.max.js (the unminified version) ?_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_Sure. Done._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-09-14T22:09:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Can you add more keys in your animation ? By default matrices are not interpolated_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gugis","Date":"2015-09-15T09:53:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_96626_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_17135_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1442268576_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Can you add more keys in your animation ? By default matrices are not interpolated_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_Wow. It works!!!! Thank you _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ I don_t_t know if I am doing this right_co_ but at least something is working _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_My code looks like that now_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_\t\t\tvar player _eq_ scene.getMeshByName(_t_player_t_)_sm_\t\t\tvar bone _eq_ get_bone_by_name(player.skeleton_co_ _t_LeftShoulder_t_)_sm_\t\t\tvar bone_animation _eq_ bone.animations[0]_sm_\t\t\tvar current_frame _eq_ Math.round(bone_animation.currentFrame)_sm_\t\t\tif(!current_frame)\t\t\tcurrent_frame _eq_ 0_sm_\t\t\tvar animationArm _eq_ new BABYLON.Animation(_qt_myAnimation_qt__co_ _qt__matrix_qt__co_ 30_co_ BABYLON.Animation.ANIMATIONTYPE_MATRIX)_sm_\t\t\tvar steps _eq_ new Float32Array(16)_sm_\t\t\t// Generate single step values\t\t\tfor(var n in bone_animation._keys[current_frame].value.m) {\t\t\t\tvar s_val _eq_ bone_animation._keys[current_frame].value.m[n]_sm_\t\t\t\tvar e_val _eq_ bone_animation._keys[90].value.m[n]_sm_\t\t\t\tvar val _eq_ (e_val - s_val) / 30_sm_\t\t\t\tsteps[n] _eq_ val_sm_\t\t\t}\t\t\t// Generate keys\t\t\tvar keys _eq_ []_sm_\t\t\tfor(var i _eq_ 0_sm_ i &lt_sm__eq_ 30_sm_ i++){\t\t\t\tvar arr _eq_ new Float32Array(16)_sm_\t\t\t\tfor(var n in steps) {\t\t\t\t\tarr[n] _eq_ bone_animation._keys[current_frame].value.m[n] + (i * steps[n])_sm_\t\t\t\t}\t\t\t\tvar obj _eq_ new BABYLON.Matrix()_sm_\t\t\t\tobj.m _eq_ arr_sm_\t\t\t\tvar key _eq_ {frame_dd_ i_co_ value_dd_ obj}_sm_\t\t\t\tkeys.push(key)_sm_\t\t\t}\t\t\tanimationArm.setKeys(keys)_sm_\t\t\tbone.animations.push(animationArm)_sm_\t\t\tscene.beginAnimation(bone_co_ 0_co_ 30_co_ false_co_ 1_co_ function(){\t\t\t\t// Remove interpolation animation\t\t\t\tbone.animations.pop()_sm_\t\t\t\t// Continue looped animation\t\t\t\tscene.beginAnimation(bone_co_ 90_co_ 105_co_ true)_sm_\t\t\t})_sm__lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]