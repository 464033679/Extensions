[{"Owner":"ichbinrob","Date":"2018-06-06T14:16:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy first post on a forum since..... lot of time. But i_t_m totally lost about a little problem and I need your help !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(first_co_ i_t_m not a native english speaker_co_ so sorry if I do mistake)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m a newbie_co_ it_t_s doing lot of time I would like to try webGL_co_ but I hadn_t_t opportunity to work on a real project.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ I need to make a box from a template (like this _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#192VEQ%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#192VEQ#5_lt_/a_gt_ ). Each faces are made with the Meshbuilder. And I need to bend and close the box (for animate it and make it interactive). Ideally the template will be not defined (with less / more faces_co_ different size_co_ but not the problem now)_co_ and I search a process who not need tinker with improbable translation for example.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnnd I_t_ve real problem to have a good understanding with rotation and pivot. I think my lack of knowledge in 3D and in english don_t_t really help ...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo for the moment I_t_ve made that _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#192VEQ%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#192VEQ#6_lt_/a_gt__lt_br /_gt_\n\tFor example_co_ why the flap (the red mesh) rotate like that_co_ I use the same process than _qt_plaque 4_qt_ (blue mesh next to the red). And I don_t_t understand why there are a shift.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_d just want to do a 90deg rotation from the side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI know there already lot of stuff about pivot and rotation_co_ but I_t_m really stuck_co_ and they don_t_t answer to my questions. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSorry if it_t_s not really clear . But I hope you can point me on the good solution or/and explain me (I continue to search_co_ so I_t_ll update the post if I found something haha).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand thank you for your help in advance !\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-06-06T16:32:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello and welcome back _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSorry there is a lot of code and I_t_m not sure to get the problem_dd_ How do you expect your _qt_plaque5_qt_ to rotate?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcan you reduce the PG and pinpoint the issue? I will be pleased to help\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-06-06T17:52:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHiya ichbinrob_co_ welcome.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t     I have to say... this scene is indeed a challenge.  I think you have done a marvelous job so far.  You are experimenting with parenting MUCH_co_ and it is hard work... with geometry like this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tParenting_co_ as you likely know_co_ causes child to inherit .position_co_ .rotation_co_ and .scaling... FROM the parent.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsetPivotMatrix and setPivotPoint... I believe... CAN/DO move mesh origin/center_co_ and this can affect mesh.position (often_co_ unexpectedly). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am no pro at that_co_ and setPivotPoint has some extra params at the end... for _qt_move the mesh_qt_ or _qt_don_t_t move the mesh_qt__co_ I believe.  The most-recent versions of BJS... made some changes in those things_co_ and I have not learned the changes well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not sure HOW to figure a plan... for the forum helpers to help.  YOU might be the leading expert in these things_co_ right now.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMAYBE... hmm... goodbye to parenting_co_ hello to custom _qt_grouping manager_qt_.   ??  hmm.  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#192VEQ%237_qt_ rel_eq__qt_external nofollow_qt__gt_#7 playground_lt_/a_gt__co_ all parenting removed... ready for grouping manager... erf.  _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Actually_co_ lines 354-356 parent almost all mesh_co_ to _lt_strong_gt_this._base_lt_/strong_gt__co_ and this._container was removed.  Dunno why I did that.  Typing while thinking_co_ I guess.  _lt_span_gt__dd_)_lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps someone has an alternative idea... something to simplify this challenge... without all the parenting/un-parenting.  Let_t_s listen for more comments.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"trevordev","Date":"2018-06-07T00:56:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFor rotation pivots I_t_ve had success when using a parent mesh_co_ positioning the child mesh inside it and then rotating the parent mesh. See _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#4MSL22%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#4MSL22#2_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ichbinrob","Date":"2018-06-07T09:17:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo I cleaned up the PG a little _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#192VEQ%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#192VEQ#8_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLine 39 to 181 are to draw each 13 faces of the box template.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthen I need to build the box from the template_co_ with a _qt_realistic_qt_ way (I want to animate it to see all the bend process)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s I try to do with line 183 to 248.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI started to chain rotation and parenting. It  looked quite easy to do_co_ but at the plaque4  (and it_t_s the same problem for plaque5_co_ and all flaps). If I just set pivot_co_ like I do before. The rotation is good_co_ but I_t_ve an unwanted translation and i need to compensate with _qt_manual_qt_ positioning. And I don_t_t want to do this manual positioning.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo a little code (line 239 - 242)\n_lt_/p_gt_\n\n_lt_div style_eq__qt_background-color_dd_#fffffe_sm_color_dd_#000000_sm_font-size_dd_14px_sm__qt__gt_\n\t_lt_div_gt_\n\t\t_lt_div style_eq__qt_background-color_dd_#fffffe_sm_color_dd_#000000_sm_font-size_dd_14px_sm__qt__gt_\n\t\t\t_lt_div_gt_\n\t\t\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_plaque4.setPivotPoint(_lt_/span_gt__lt_span style_eq__qt_color_dd_#0000ff_sm__qt__gt_new_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_ BABYLON.Vector3( - _lt_/span_gt__lt_span style_eq__qt_color_dd_#09885a_sm__qt__gt_6_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_/_lt_/span_gt__lt_span style_eq__qt_color_dd_#09885a_sm__qt__gt_2_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__co_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#09885a_sm__qt__gt_0_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__co_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#09885a_sm__qt__gt_0_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_))_sm__lt_/span_gt_\n\t\t\t_lt_/div_gt_\n\n\t\t\t_lt_div_gt_\n\t\t\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_plaque4.position.z -_eq_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#09885a_sm__qt__gt_3_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__sm_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#008000_sm__qt__gt_// it_t_s what I don_t_t want to do_lt_/span_gt_\n\t\t\t_lt_/div_gt_\n\n\t\t\t_lt_div_gt_\n\t\t\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_plaque4.position.x +_eq_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#09885a_sm__qt__gt_3_lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__sm_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#008000_sm__qt__gt_// it_t_s what I don_t_t want to do_lt_/span_gt_\n\t\t\t_lt_/div_gt_\n\n\t\t\t_lt_div_gt_\n\t\t\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_plaque4.rotation.y _eq_ - Math.PI_sm__lt_/span_gt_\n\t\t\t_lt_/div_gt_\n\t\t_lt_/div_gt_\n\t_lt_/div_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\tBut ! I didn_t_t know the SetPivotPoint could take some parameters (like world / local axes).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand thank you for your answers ! I going to try somethings with this_co_ and I keep you informed _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tps _lt_span_gt__dd_ _lt_/span_gt_It_t_s an example of what it looks like build (but I _qt_cheat_qt_ to build it_co_ it_t_s too much specific to this template) _dd_ _lt_a href_eq__qt_https_dd_//www.jill.beer/e/carton/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.jill.beer/e/carton/_lt_/a_gt_ (long time to load texture_co_ aren_t_t optimize)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-06-07T13:09:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah_co_ good reply... thx.  You ARE an expert.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe sort-of need... mesh.useBoundingBoxCenterAsOrigin _eq_ true_sm_  _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Or maybe... .lockedOrigin _eq_ true_sm_   After that_co_ pivotPoints would be free to fly_co_ without mesh-translation issues._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI said something incorrect_co_ earlier_co_ regarding the _qt_move object_qt_ and _qt_don_t_t move object_qt_ parameter.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe parameter is called _qt_postMultiplyPivotMatrix_qt_ and it is on the _lt_strong_gt_setPivotMatrix()_lt_/strong_gt_ func.  (I thought it was on setPivotPoint)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.abstractmesh#setpivotmatrix_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/api/classes/babylon.abstractmesh#setpivotmatrix_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt counter-acts position/origin mesh-moves (unwanted translations) that might happen during the matrix transform.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think this might be good news for you.  Sorry for the mistake in an earlier post.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA_lt_span_gt_nd YES_co_ definitely report your progress/discoveries... thx!_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-06-07T17:29:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/31045-ichbinrob/?do_eq_hovercard_qt_ data-mentionid_eq__qt_31045_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/31045-ichbinrob/_qt_ rel_eq__qt__qt__gt_@ichbinrob_lt_/a_gt_ as a simple minded man here is a simplified PG with simple code simply using TransformNode instead of setPivot. May not be exactly what you want but could give you some ideas or another approach.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RIUM9U_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RIUM9U_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ichbinrob","Date":"2018-06-08T12:08:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you so much _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_ ! It_t_s exactly what I need. So I think I can change this topic to _qt_solved_qt_._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_It took me 2 hours to build the box with this method. and I work on it since Monday _lt_span class_eq__qt_ipsEmoji_qt__gt_😅_lt_/span_gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#192VEQ%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#192VEQ#10_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-06-08T12:59:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_217401_qt_ data-ipsquote-contentid_eq__qt_38073_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1528392591_qt_ data-ipsquote-userid_eq__qt_14282_qt_ data-ipsquote-username_eq__qt_JohnK_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 6/7/2018 at 12_dd_29 PM_co_ JohnK said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tas a simple minded man\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tDon_t_t believe that for a second_co_ forumers.  JohnK is a genius.  A great teacher_co_ a great thinker/inventor_co_ a pivotMaster_co_ and a darned nice guy.  If he_t_s simple at all_co_ he_t_s simply wonderful.  I try to be like him as much as possible.  Nice transformNode demos_co_ guys!  Power bookmarked.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.transformnode_qt_ rel_eq__qt_external nofollow_qt__gt_TransformNodes_lt_/a_gt_ are pretty cool!  I have never seen them used like this (or much at all).  They are a fairly new feature in Babylonia.  They seem to do MUCH of the work for the powerful Babylon.Mesh class_co_ and perhaps lights and cameras_co_ too.  _qt__lt_a href_eq__qt_https_dd_//www.youtube.com/watch?v_eq_eaVcpfncOWs_qt_ rel_eq__qt_external nofollow_qt__gt_Transformers - more than meets the eye!_lt_/a_gt__qt_  (robots in disguise)  _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood to hear you_t_re rolling_co_ ich!  YAY!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]