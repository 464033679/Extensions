[{"Owner":"jerome","Date":"2015-06-22T16:24:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_a working version _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US#3_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-06-22T17:43:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Just to be sure_dd__dd_ We can do the same with the current particles system_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US_qt_ title_eq__qt_External link_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs...ound.com/#T80US_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Or I_t_m missing something?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-22T18:14:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_yep_co_ you_t_re missing something  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For now_co_ I just coded a mesh based particle system with the same behavior (less features actually) than the current one_co_ it is to say _dd_ display plane quad particles. Mine is less powerful in terms of particles than the current also..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So why to do this ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Because it has other properties the current one doesn_t_t have._lt_/p_gt__lt_p_gt_As it is a single mesh blowed in parts_co_ each particle here has the same capabilities than a mesh face _dd_ it reflects light_co_ can be textured_co_ rotated_co_ etc._lt_/p_gt__lt_p_gt_Above all it has the same z-sort and alpha blending than a mesh !_lt_/p_gt__lt_p_gt_Look closely at the two boxes _dd_ the particles are hidden by the opaque box and are visible through the transparent one _dd_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US#5_lt_/a_gt__lt_/p_gt__lt_p_gt_This solve a problem of the current system _dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/13628-particles-and-material-alpha/_qt__gt_http_dd_//www.html5gamedevs.com/topic/13628-particles-and-material-alpha/_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Moreover_co_ it can handle simultaneously different particle shapes in the same system (for now triangles and quads only_co_ the generalization to any plane shape is possible yet) and soon solid particles (cubes_co_ pyramids and maybe any model of existing meshes) _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US#4_lt_/a_gt__lt_/p_gt__lt_p_gt_And if I can achieve it_co_ it will handle a per-particle texture feature too._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So the goal of this system (I will probably keep it in a BJSX extension only) is to provide the ability to deal with few solid particles (hundreds to few thousands max) with all mesh properties._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It won_t_t implement any behavior (trajectories_co_ physics_co_ etc)_co_ so it won_t_t be that straight forward for newbee/impatient users _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-22T18:29:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_86799_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_15154_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1434994985_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Or I_t_m missing something?_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Same thing we talked about a while back - current particles perform great but don_t_t composite with transparent meshes or sprites._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-06-22T19:19:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok gotcha..this is perfectly clear _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-22T23:04:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_@wingy _dd_ BAAAAOOOMMMMM   _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US#6_lt_/a_gt_  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-22T23:56:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok_co_ ya ready for this?  How about...the particles take-on the material of the subMaterials... on the emitter?  Woah._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//webpages.charter.net/wingthing/img/pstart11.jpg_qt_ alt_eq__qt_pstart11.jpg_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Ok_co_ that_t_s a little too... something.  Notice that the streams of particles... are coming from vertex points_co_ likely aimed by... maybe... the normal?  I just set the checkbox to _lt_em_gt_use vertex points_lt_/em_gt_ and the _lt_em_gt_randomly across surface_lt_/em_gt_ choice turned off_co_ best I can remember.  (about 10 years ago)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Did someone say per-particle texturing?  OMG!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//webpages.charter.net/wingthing/img/mcp02.jpg_qt_ alt_eq__qt_mcp02.jpg_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That_t_s all 3D Max... but... I just wanted to make sure that _qt_the bar_qt_ wasn_t_t getting too reachable too soon.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-23T13:47:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Very nice demo_co_ Wingy !!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Big code refactoring here to plan the integration of the next features._lt_/p_gt__lt_p_gt_So new demo _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#4_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As you can see in the code below_co_ some things have changed _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_    var PS _eq_ new SolidParticleSystem(_t_SPS_t__co_ scene)_sm_    PS.addTriangles(500_co_ 1)_sm_    PS.addQuads(500_co_ 1)_sm_    PS.addTriangles(10_co_ 8)_sm_    var mesh _eq_ PS.buildMesh()_sm_    mesh.material _eq_ mat_sm_    mesh.freezeWorldMatrix()_sm_    //mesh.freezeNormals()_sm_        PS.initParticles()_sm_        //scene.debugLayer.show()_sm_    // animation    scene.registerBeforeRender(function() {    PS.setParticles(true)_sm_    pl.position _eq_ camera.position_sm_    })_sm__lt_/pre_gt__lt_p_gt_The SPS constructor just creates an empty particle system._lt_/p_gt__lt_p_gt_You have then to add particles to it (here_co_ we add some pre-build types _dd_ 500 triangles_co_ size _eq_ 1). I wish I can then implement a feature to add an external particle geometry (not only pre-build ones)_lt_/p_gt__lt_p_gt_You can add different or same particle types as many times you need._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_When finished_co_ you call the SPS mesh builder which returns the SPS underlying mesh. This one has now support for _lt_em_gt_freezeWorldMatrix_lt_/em_gt_ (if it is immobile)_co_ _lt_em_gt_freezeNormals_lt_/em_gt_ (if you don_t_t need normals re-computation each frame) and of course to all the Mesh type properties._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You can then call the over-writable _lt_em_gt_initParticles()_lt_/em_gt_ function to set each property of all the particles._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Then the _lt_em_gt_setParticles()_lt_/em_gt_ function will set the particle in space according the current particle property values._lt_/p_gt__lt_p_gt_Some custom function like _lt_em_gt_updateParticle()_lt_/em_gt_ and _lt_em_gt_recycleParticle()_lt_/em_gt_ can be overwritten and will ba called on each particle by _lt_em_gt_setParticles_lt_/em_gt_._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I think I will add calls to custom _lt_em_gt_beforeUpdateParticle(particle_lt_/em_gt_) and _lt_em_gt_afterUpdateParticle(particle)_lt_/em_gt_ functions too. These will be useful if the user wants to do to things  within _lt_em_gt_setParticles()_lt_/em_gt_ before or after the iteration on the whole pool of particles._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note _dd_ I added a little trick to import the script instead of to copy/paste it. So please reload (F5) as necessary if the script isn_t_t loaded before the engine starts and press the _t_RUN_t_ button after each F5 as the error label doesn_t_t disappear._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The current version of this code is available here _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem/blob/master/solidparticlesystem.js_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJSX/SolidParticleSystem/blob/master/solidparticlesystem.js_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-23T14:34:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Nice!  And what an innovative way to do an external script include in the PG!  Interesting!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-23T14:44:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_working on a cubic particle now _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  _dd_ the first real solid particle type_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_[EDIT] I put the script importator at the start as it works better on some browser._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-23T15:23:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_cubes added _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#5_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_(won_t_t work in billboard mode_co_ some bug somewhere)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_and you can merge triangles with cubes _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#6_lt_/a_gt_ _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-06-23T16:39:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_All demos failed for me as the script is longer to load than expected_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-06-23T16:40:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Fixed for you_dd_ )_lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%237_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#7_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-23T16:46:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_how did you fix it ? in the PG engine ? Thaaaannk you  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_usually_co_ the error is displayed but you can still press _qt_RUN_qt_ and it works because the script has been downloaded meanwhile and is cached in the browser._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_[EDIT] ooopss.. _lt_em_gt_s.onload_lt_/em_gt_ in the code !_lt_/p_gt__lt_p_gt_didn_t_t notice at first sight_co_ sorry_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-23T18:04:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I realize that in this example_co_ all particles have the same rotation_co_ although the rotation is per particle. It_t_s because I just forgot to set an initial random rotation to each particle in the _lt_em_gt_initParticle()_lt_/em_gt_ function_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So here is an improvement _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#8_lt_/a_gt__lt_/p_gt__lt_p_gt_I just overwrite the _lt_em_gt_updateParticle()_lt_/em_gt_ function and give each particle a rotation according to its own velocity _dd_ line 63._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This example throws 600 transparent cubes and 1000 triangles and still runs at 60 fps in Chrome on my pushcart old laptop  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-06-23T18:42:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_This smells like a great new feature of bjs 2.2...._lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2015-06-23T19:10:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_C_t_est tip top. nice _lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_feature_co_ _lt_/span_gt_het is geweldig_co_ _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-23T20:03:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_thanks_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It looks like BJS 2.2_co_ it smells like BJS 2.2_co_ it tastes like BJS 2.2 but is only _lt_strike_gt_Canada Dry_lt_/strike_gt_ BJSX for now  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The list of requested features by Jahow and Fenomas_co_ who both have different goals_co_ is long like a day with no bread  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt_ (I like translating french idiomatics because they have no sense in english _dd_ self fun_co_ sorry). I_t_m still just at the beginning for now..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thinking well ... I_t_m simply wondering why I started this stuff since I don_t_t really need for myself  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_Maybe just for the challenge and because solid particle fountains are so beautiful_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-06-23T21:14:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_That_t_s awesome! I already loved the normal particles and now I can_t_t wait to play around with cubes _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ Keep going_co_ I really wanna see what else you do with that. And I want it In BJS...now!! ...well_co_ as soon as possible _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-24T12:47:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi people_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__qt_a feature a day keeps the deltakosh away_qt_ _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#9_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_today the per particle color _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_In this example (500 cubes_co_ 200 triangles and 200 quads)_co_ I don_t_t use any material for the SPS mesh (SPS _eq_ solid particle system_co_ please follow tssss)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I code the custom functions in purpose in the PG (from the line 50) as the SPS has now no more default behavior. Each SPS function returns directly if not over-written._lt_/p_gt__lt_p_gt_As you can see_co_ I just set a random Color4 value (yes_co_ color 4_co_ alpha is enabled !) per particle on each _lt_em_gt_recycleParticle()_lt_/em_gt_ call._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I updated the doc here _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"qqdarren","Date":"2015-06-24T13:02:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Jerome_co_ that is a pretty demo (_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%239_qt_ title_eq__qt_External link_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs...d.com/#2KSQ1R#9_lt_/a_gt_). On Firefox it is going at 60fps_co_ but every 2-3 seconds it freezes (perhaps for 0.2s_co_ enough to drop the frame rate to 45fps) then goes straight back to spewing out pastel cubes. It is fine on Chrome_dd_ constantly 60fps_co_ and no freezes at all._lt_/p_gt__lt_p_gt_I went back a bit in this discussion_co_ and it is not new today. E.g. the same thing is happening on_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2LFJES%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2LFJES#3_lt_/a_gt_   (though_co_ not quite as regular or distinctive there) _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This is different to the Firefox differences from Chromium I_t_ve noticed on my own tests_co_ where it is simply a lower FPS. Could it be a garbage-collection issue?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-24T13:27:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_It smells like a GC collection issue_co_ but I can_t_t find it. I will check the CPU profiler._lt_/p_gt__lt_p_gt_However_co_ I noticed the PG editor script has side effects on FF. I remarked that when I did the computeNormals() optimization... when you put the finger into mesh live updates_co_ things don_t_t get right in FF is the editor is running._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If I run the same example locally (outside the PG)_co_ I can_t_t reproduce this FF behavior._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I will yet check the CPU profiler._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_[EDIT] _dd_ tested... definetly not the GC._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-24T14:26:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Added tetrahedrons _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#10_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_line 45_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I still notice this little lag in FF_co_ don_t_t get why _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_here is direct sample with more particles _dd_ _lt_a href_eq__qt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_@jahow _dd_ as explained in the doc _lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_lt_/a_gt_ _co_ you can now add your  _lt_em_gt_submesh_index_lt_/em_gt_ property to every particle in the _lt_em_gt_initParticles()_lt_/em_gt_ function_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-24T16:44:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_86999_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_15154_qt_ data-ipsquote-username_eq__qt_jerome_qt_ data-cite_eq__qt_jerome_qt_ data-ipsquote-timestamp_eq__qt_1435155967_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_I still notice this little lag in FF_co_ don_t_t get why _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_here is direct sample with more particles _dd_ _lt_a href_eq__qt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_lt_/a_gt__lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Short answer_dd_ profile in Chrome. _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  I mean we all have our favorite browsers for browsing but chrome_t_s profiler is just light years beyond FF. Unless I_t_m missing something - would be happy to be wrong._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_With that said_co_ on my machine your demo above spends ~16% time in the GC. I_t_m no expert at memory debugging but it seems to create and destroy a lot of numbers. It seemed to be happening inside an object/function with an obfuscated name_co_ so if you hunt for it try using debug builds of babylon._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Also it spends &gt_sm_30% in computeNormals. You might try doing that analytically - I imagine that the babylon builtin is more complicated than needed for this use case? I_t_d have thought you could just transform them exactly the way you_t_re transforming positions (but I haven_t_t looked closely..)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-24T17:33:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_By the way_co_ I have been iterating on this too_co_ in a much different direction. _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#QPQQC_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#QPQQC_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This is a much lighter_co_ simpler version which just tries to emulate regular particles (except the blend mode and the compositing issues)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note that it takes _qt_capacity_qt_ and _qt_rate_qt_ parameters_co_ so as not to shoot out everything at the beginning. It_t_s meant to billboard the particles_co_ but that bit_t_s broken_co_ so that they rotate with camera angle. Need to dig into the matrixey stuff in the core loop and monkey with it._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_On my machine it stress tests okay up to ~30k particles_sm_ past that the GC gets too heavy. I haven_t_t looked at why yet_co_ but if the GC can be resolved it should go a lot higher.._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]