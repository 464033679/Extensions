[{"Owner":"Deltakosh","Date":"2015-06-24T17:57:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_THIS DEFINITELY SOUNDS LIKE a BJS 2.2 feature _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-24T18:38:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Nice demo and thank you for the feedback  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I will look into the CPU profiler with Chrome._lt_/p_gt__lt_p_gt_I usually take care about not allocating anything (except some tiny var with scalar types_co_ but no array nor object) once the render loop is started._lt_/p_gt__lt_p_gt_Maybe I missed something this time ... not that simple to keep concentration when people come and chat in the office_co_ pfffff_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I will review my code_co_ I have yet a lead to avoid the anymous function call (a closure actually). I need to check if I can reduce the number of total iterations. Iterations take time when we deal with dozen of thousands vertices. _lt_/p_gt__lt_p_gt__lt_em_gt_ComputeNormals() _lt_/em_gt_does this kind of iteration also. The right way would be to integrate the normal computation within the global vertex iteration_co_ instead of doing it twice successively. Definetly not a DRY approach to recode the computeNormals() method  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_And as the SPS can handle as well plane particles as well solide ones (unpredictable shape if I can achieve the _lt_em_gt_duplicate_lt_/em_gt_ method for any mesh model)_co_ it_t_s quite impossible to implement a new (new algo) dedicated _lt_em_gt_computeNormals()_lt_/em_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BTW_co_ if the light doesn_t_t need to reflect on the particles (emissive color or whatever)_co_ we can ever set _lt_em_gt_mesh.freezeNormals()_lt_/em_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My SPS has no rate nor capacity. It is possible not to shoot everything at the beginning._lt_/p_gt__lt_p_gt_Actually everything is possible and nothing is implemented by default. I want to keep it behavior agnostic  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note you can make a different behavior per particle_co_ per shape_co_ per color_co_ etc ..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-25T07:47:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_CPU Profiling done ...._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As I focused on the GC activity_co_ I modified the custom _lt_em_gt_recycle_lt_/em_gt_ function here _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#11_lt_/a_gt__lt_/p_gt__lt_p_gt_As you can see_co_ there is no more object creation (I mean no _lt_em_gt_new BABYLON.Vector3_lt_/em_gt_) by the user_co_ I just set directly numeric values to particle properties. This means that the GC collector activity_co_ if any_co_ will now be only related to the internal _lt_em_gt_SPS.setParticles()_lt_/em_gt_ function._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The CPU profiler result shows absolutely no difference _dd_ 16% GC with this modification._lt_/p_gt__lt_p_gt_Reviewing the _lt_em_gt_setParticles()_lt_/em_gt_ code_co_ I note there is no object creation_co_ except the use of 4 temporary variables for storing index integers... this wouldn_t_t disturb the GC !_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So I just tried to set _lt_em_gt_mesh.freezeNormals()_lt_/em_gt_ before calling _lt_em_gt_setParticles()_lt_/em_gt_. Light reflection on particles is not mandatory in many cases._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What happened then in the CPU profiler ?_lt_/p_gt__lt_p_gt_No more GC activity ! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ alt_eq__qt__dd_o_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This means the GC activity is related to the _lt_em_gt_computeNormals()_lt_/em_gt_ usage on really big meshes updated (changing shape) each frame._lt_/p_gt__lt_p_gt_As I am one the gulty guy to have coded this method_co_ I just reviewed it here _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.mesh.vertexData.ts#L1206_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.mesh.vertexData.ts#L1206_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As you can read it (if you_t_ve got the courage to do it)_co_ you can notice that _lt_em_gt_computeNormals()_lt_/em_gt_ only creates 9 temporary Vector3 each call_co_ it is to say each frame here._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So I wonder why these poor object creations could generate 16 % GC activity ?_lt_/p_gt__lt_p_gt_Or am I missing someting ...?_lt_/p_gt__lt_p_gt_Yet_co_ I stressed a lot the _lt_em_gt_computeNormals_lt_/em_gt_ method when I optimized it and never noticed any GC pertinent activity at this time_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Unless there is another cause I just can_t_t see ..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-25T08:21:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_here is a pure computeNormals test_lt_/p_gt__lt_p_gt_line 56 comment/uncomment _lt_em_gt_freezeNormals()_lt_/em_gt__lt_/p_gt__lt_p_gt_line 44_co_ set a decent mesh size for your own machine_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Feeling confused about the GC behavior on heavy meshes_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That said... the SPS runs yet quite well (60 fps) up to 2-3000 real 3D particles here with Chrome. It_t_s not intended to compete with the current ultra powerful particle system but to provide something else_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-06-25T09:21:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_lt_/a_gt_ - It_t_s getting more and more interesting _dd_-) _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"qqdarren","Date":"2015-06-25T09:55:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_jerome I started a new thread for discussion of the computeNormals() function_co_ which might hopefully fix the GC problem_dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/15377-optimizing-computenormals/_qt__gt_http_dd_//www.html5gamedevs.com/topic/15377-optimizing-computenormals/_lt_/a_gt_   There seemed to be lots of low-hanging optimization fruit_co_ so I suspect I_t_m missing something important _dd_-) _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-25T09:56:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I changed my lighter model to store all its data in one contiguous float32Array_co_ and along with some other changes this greatly reduced the memory usage and solved the GC issues. It will now happily do 100K particles locally (but far fewer in the playground for some reason)._lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#QPQQC%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#QPQQC#1_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_From the looks of things maybe I_t_d better rename this one_co_ eh?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-25T13:07:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_yep the PG has side effects ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You stored everything in one float32Array ? vertex positions ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I can_t_t see where you update an pass the normals here. Don_t_t you do it ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-25T15:00:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I played with profiling in the PG a little but gave up. Some stuff I could get around but as a whole my app profiles way differently there than in a local page._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For data_co_ yeah_co_ I stored everything in one big Float32Array( capacity * 7 )_co_ stored as [ x_co_ y_co_ z_co_ dx_co_ dy_co_ dz_co_ size ]. Next I should probably add alpha and color_co_ which would make it 11 floats per particle_co_ I guess. And rotation/rotationSpeed_co_ if I can fix the billboarding bug. But I haven_t_t played with alpha or colors yet to see if they_t_re possible and feasible._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For normals_co_ yeah_co_ typically particles aren_t_t shiny so I just left them out. But even before I wasn_t_t using computeNormals_co_ I was just setting them analytically (since the particles are all separate quads there_t_s nothing to calculate)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-25T20:40:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_nice choice_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For my part_co_ I will keep the particle property system because I want to provide to the user the way to add its own properties and own behavior to the SPS._lt_/p_gt__lt_p_gt_So my idea is to have something the more possible versatile_co_ the more possible accurate and as powerful as possible. If it deals with 1000 complex 3D particles_co_ the job will be done imho. For dozens or hundreds of thousands particles_co_ well_co_ the current BJS system or yours will be better.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-26T02:19:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Sure_co_ and I guess I should probably rename what I_t_m doing._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_To be clear_co_ I_t_m not actually expecting anyone to use 100k particles in a scene_co_ it just lets me find where the stresses are. A real scene will have lots of other stuff besides particles_co_ each of which loads the CPU and the GC_co_ so the whole scene will perform better if each individual part deals well with stress._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T07:53:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi people_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_em_gt__qt_a feature a day keeps the DK away_qt__lt_/em_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Today _dd_ addPolygons(nb_co_ size_co_ vertexNumber)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#12_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As there are only plane particles_co_ I reset this PG in billboard mode._lt_/p_gt__lt_p_gt_As you can see from the line 42 _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_      PS.addPolygons(200_co_ 5_co_ 5)_sm_     // adds 200 ploygons sized 5 with 5 vertices each _dd_ pentagons      PS.addPolygons(200_co_ 5_co_ 6)_sm_     // adds 200 polygons sized 5  with 6 vertices each _dd_ hexagons      PS.addPolygons(200_co_ 4_co_ 16)_sm_   // adds 200 polygons sized 4 with 16 vertices each... they look like discs_lt_/pre_gt__lt_p_gt_So why to keep dedicated triangle and quad shapes then (_lt_em_gt_addTriangles_lt_/em_gt_ and _lt_em_gt_addQuads_lt_/em_gt_) if we can do polygons with 3 or 4 vertices each ?_lt_/p_gt__lt_p_gt_Because the _lt_em_gt_addPolygons()_lt_/em_gt_ function has an automatic texture uvs computation around the polygon center whereas triangle and quad shapes have a dedicated uvs computation process based on the sides of the figure._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BJSX doc updated _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T13:26:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi again_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I can_t_t resist to introduce you this new feature from a Jahow_t_s original idea _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_SPS.addShape(mesh)_sm__lt_/pre_gt__lt_p_gt_Before I write a decent post and a nice PG_co_ just take a look at this _dd_ _lt_a href_eq__qt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_lt_/a_gt__lt_/p_gt__lt_p_gt_Runs at 60 fps in my chrome here_lt_/p_gt__lt_p_gt_100 spheres + 100 torus knots emitted _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T13:40:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_here is the PG _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2313_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#13_lt_/a_gt__lt_/p_gt__lt_p_gt_I reduced in purpose the number of particles so it could run in the PG on many machines._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As you can read from the line 38_co_ I create 3 mesh models._lt_/p_gt__lt_p_gt_I just add them to the SPS system_co_ line 47_co_  with _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_SPS.addShape(mesh_co_ nb_co_ optional_shape_id)_sm__lt_/pre_gt__lt_p_gt_Then remove them (line 51)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_And that_t_s all ... _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The _lt_em_gt_addShape()_lt_/em_gt_ function copies into the SPS the original mesh geometry_co_ uvs and vertex colors if any._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-26T13:42:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Looking good _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ great work_co_ Jerome!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-26T13:43:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_That... is friggin_t_ awesome!  Well done!  But...  every 3 seconds... my scene freezes for about 1/4 second.  I also see this happen with MY demented mesh-spewing things_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/particlefun/splode/pharticles02.htm_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/particlefun/splode/pharticles02.htm_lt_/a_gt__lt_/p_gt__lt_p_gt_  &amp_sm__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/particlefun/splode/thump02.htm_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/particlefun/splode/thump02.htm_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_MY stuttering is faster than YOUR stuttering.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The stuttering might be a _qt_Wingnut only_qt_ thing.  Anyone else seeing stutter?  (thx).  Again_co_ awesome scene_co_ J!  AND_co_ Jerome is using a new background color!  Did he FINALLY leave behind his world-famous _qt_putty gray_qt_?  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T13:48:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_thanks guys_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You may perhaps reduce the mesh definition ex _dd_ have sphere with lower tessellation_co_ idem for knots which are really heavy in terms of vertices_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There_t_s no magic _dd_ the more vertices to update_co_ the slower_lt_/p_gt__lt_p_gt_Here I have a local demo running for 8_t_ now in Chrome at 60 fps with 200 spheres sized 4 and tessellated 4_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_huu.. I wouldn_t_t try with the skull mesh _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"qqdarren","Date":"2015-06-26T14:04:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Wingnut_co_ I see the stuttering in Firefox_co_ but not in Chrome. I believe this is the garbage collection issue mentioned earlier in this thread. (BTW_co_ it is happening with Jerome_t_s own link_co_ _lt_a href_eq__qt_http_dd_//jerome.bousquie.fr/BJS/SolidParticleSystem/solidparticles.html_qt_ title_eq__qt_External link_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jerome.bousqu...dparticles.html_lt_/a_gt__co_ not just in the playground.)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If that issue can be fixed it_t_ll be great_dd_ this demo looks like an explosion in a balloon factory... I_t_m sure it is 80% of the way to a great game. Perhaps add a flamethrower or machine gun_co_ and your job is to make sure none of the balloons hit the ground by destroying them first. _dd_-)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T14:10:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_mmh... ballons or anything else_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Let_t_s try a parametric shape_co_ well_co_ a ribbon (what a surprise !)_lt_/p_gt__lt_p_gt_Not any ribbon... our famous SH !_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_iiihhhaaaaa _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#15_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_line 66 _dd_ number of SH types_lt_/p_gt__lt_p_gt_line 67 _dd_ number of particles in each type_co_ so the total particles number will be the multiplication of these two values_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_the SH tessellation is related to the two lat_co_ long parameters line 77_lt_/p_gt__lt_p_gt_you can reduce them_co_ ex with 8_co_8 instead of  16_co_ 16 _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#16_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As each SH is randomly computed_co_ you will get different shapes each time you run the PG_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_reduce the initial speed line 70_co_ if you want them jump lower ex _dd_ speed _eq_ 1.2_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_have fun _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_[EDIT] _dd_ this demo runs at 60 fps in the PG in my Chrome here _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2317_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#17_lt_/a_gt__lt_/p_gt__lt_p_gt_nbSH _eq_ 5_lt_/p_gt__lt_p_gt_nbPartPerSH _eq_ 150_lt_/p_gt__lt_p_gt_SH _eq_ 8_co_8_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-26T14:10:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_div_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_87252_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_15154_qt_ data-ipsquote-username_eq__qt_jerome_qt_ data-cite_eq__qt_jerome_qt_ data-ipsquote-timestamp_eq__qt_1435326510_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_huu.. I wouldn_t_t try with the skull mesh  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt__lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That is sad. This mesh is 75% of why I love BJS._lt_/p_gt__lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T14:19:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok_co_ I delete the SPS repo then ... _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-26T16:54:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Fantastic!  So now_co_ on to the _qt_emit from emitter vertex points in the normal_t_s direction_qt_ feature? (spray from 6 corners of a box_co_ for starters)  And then_co_ the _qt_particle uses vertex color_qt_ feature?  And then... _qt_cycle through this array of materials_qt_ or _qt_use the emitter_t_s material on the particles_qt_?  And the subMesh emitter... and subMaterial emitter... where each vertex emitter uses the material of its subMesh or subMaterial.  Wow! _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There_t_s a whole new section of SPS... that starts with the new Babylon.Tools.AdvancedParticleEmitter  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  Maybe it_t_s a smart emitter.  Just send it a wad of particles_co_ and IT will material them_co_ launch them on its vertices_co_ and update them itself.  Woah.  Shared workload between particleSystem and emitter.  Err... maybe not._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What is taking so long?  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T18:36:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_aarrff...Wingy_co_ you_t_re laughing at me but I like this  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Actually_co_ I don_t_t know if you read the _lt_a href_eq__qt_https_dd_//github.com/BabylonJSX/SolidParticleSystem_qt_ rel_eq__qt_external nofollow_qt__gt_github doc_lt_/a_gt__co_ it is really user-friendly to choose the particle types _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_SPS.addCubes(nb_co_ size)_sm_SPS.addQuads(nb_co_ size)_sm_// or from an existing mesh_co_ say a sphereSPS.addShape(sphere_co_ nb)_sm__lt_/pre_gt__lt_p_gt_I have to admit it is less user-friendly then to design one_t_s own SPS behavior (trajectories_co_ physics or nothing if you just want static particles set somewhere)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_can_t_t stop playing... this one runs at 60 fps on my pushcart laptop _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2318_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#18_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-26T20:53:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_the same with random SH tessellations each run _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KSQ1R%2319_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KSQ1R#19_lt_/a_gt__lt_/p_gt__lt_p_gt_60 fps on my pushcart_co_ 120 complex _qt_particles_qt_ only but a random total number of vertices each run_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-26T23:15:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_hehe.  I love it.  It_t_s so flamboyant and joyous and pastel!  Like a Martha Stewart parade/party.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  (_lt_a href_eq__qt_https_dd_//www.youtube.com/watch?v_eq__uzNOQUlCdM_qt_ rel_eq__qt_external nofollow_qt__gt_South Park - Queef Sisters ep_lt_/a_gt_)  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Jerome_co_ what I am laughing-at... is a phenomena called _qt_creaping featurism_qt_... and by making suggestions about smart emitters and thinking-up a thousand new features to add... I_t_m feeding that... and it makes me chuckle.  But so does the look of the demos.  They are... something.   Gleeful.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  Nice work... I_t_m enjoying the show._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]