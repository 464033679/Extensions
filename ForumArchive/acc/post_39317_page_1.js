[{"Owner":"Muribundi","Date":"2018-08-07T18:39:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co__lt_br /_gt_\n\t_lt_br /_gt_\n\tDo anyone know why this operation in the PhysicsImpostor.beforeStep and afterStep can_t_t be skipped even on a translate of 0_co_0_co_0_lt_br /_gt_\n\t_lt_br /_gt_\n\t_this.object.translate(_this._deltaPosition_co_ -1)_sm__lt_br /_gt_\n\t_this.object.translate(_this._deltaPosition_co_ 1)_sm__lt_br /_gt_\n\t_lt_br /_gt_\n\tWhenÂ _deltaPosition is 0_co_0_co_0 there will be no translation to do_co_ but if I skip it_co_ all the physics stop working correctly. The contact between object are not properly transfered anymore. There is lot of calculation happening in the translate_co_ but I fail the see theÂ point of needing them for the physics._lt_br /_gt_\n\t_lt_br /_gt_\n\tTake note that as long as one of the two are not skip_co_ everything is fine. Whatever I keep the beforeStep or the afterStep translate_co_ the physics is ok_co_ but if the two are skipped every contact are broken...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-08-07T22:55:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think there is a misunderstanding here_dd_ object.translate does not use physics simulation. It only changes the position property of your mesh_dd_Â _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.transformNode.ts#L711_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.transformNode.ts#L711_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you provide a repro of what you get in the playground? So we can better understand how to help _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt__gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Muribundi","Date":"2018-08-10T13:24:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo it does not use the physics_co_ but it is used by the physics_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t/**_lt_br /_gt_\n\tÂ * this function is executed by the physics engine._lt_br /_gt_\n\tÂ */_lt_br /_gt_\n\tthis.beforeStep _eq_ function () {_lt_br /_gt_\n\tÂ Â  Â if (!_this._physicsEngine) {_lt_br /_gt_\n\tÂ Â  Â Â Â  Â return_sm__lt_br /_gt_\n\tÂ Â  Â }_lt_br /_gt_\n\tÂ Â  Â _this.object.translate(_this._deltaPosition_co_ -1)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ Â  Â /*** Other code done in the engine here ***/_lt_br /_gt_\n\t}_sm__lt_br /_gt_\n\t/**_lt_br /_gt_\n\tÂ * this function is executed by the physics engine._lt_br /_gt_\n\tÂ */_lt_br /_gt_\n\tthis.afterStep _eq_ function () {_lt_br /_gt_\n\tÂ Â  Â if (!_this._physicsEngine) {_lt_br /_gt_\n\tÂ Â  Â Â Â  Â return_sm__lt_br /_gt_\n\tÂ Â  Â }\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ Â  Â /*** Other code done in the engine here ***/_lt_br /_gt_\n\tÂ Â  Â _lt_br /_gt_\n\tÂ Â  Â _this.object.translate(_this._deltaPosition_co_ 1)_sm__lt_br /_gt_\n\t}_sm__lt_br /_gt_\n\t_lt_br /_gt_\n\tThese two functions come from the babylon side. I made sure thatÂ _this._deltaPosition is always at 0_co_0_co_0. So normally these two translates should be useless. But they are still needed it seems. Our game is a ball that bounce and if I remove these two functions_co_ the ball do not bounce anymore_co_ it slide on the ground as soon as it touch it and never stop..._lt_br /_gt_\n\t_lt_br /_gt_\n\tBut if I keep one of the two_co_ the physics is ok again... (I can remove the one in beforeStep or afterStep it is not important)_lt_br /_gt_\n\t_lt_br /_gt_\n\tThe thing is_co_ the translate should do nothing_co_ because it is doing a 0_co_0_co_0 translate. But yet it still do_co_ it pass by a lot of _qt_refresh_qt_ matrix call to make sure they are up to date... but again why would it need to do that if there is no need for a translate\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-10T13:59:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis is a rather good and intriguing question _lt_span_gt__lt_span class_eq__qt_ipsEmoji_qt__gt_ðŸ™‚_lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Let s add our Physics Guru to the thread _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard_qt_ data-mentionid_eq__qt_10310_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt__gt_@RaananW_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2018-08-10T16:01:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you are asking why it is needed - some objects are not centered_co_ but physics engines don_t_t support it. so_co_ before sttep _qt_centers them_qt_ for the physics engine to have the right data_co_ and after step is putting back in place.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo your question (if I understood correctly) - why is it still executed when the delta is 0_co_0_co_0? no reason_co_ not needed_co_ you can submit a PR and add me to review and skip this step if it_t_s 0_co_0_co_0 _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Muribundi","Date":"2018-08-12T14:08:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah_co_ that part I figured out_co_ but I_t_m still trying to figure out why not doing it still break the physics on delta of 0_co_0_co_0_lt_br /_gt_\n\t_lt_br /_gt_\n\tIt seems something is dirty and refreshed by the translate_co_ but I can_t_t find why... Doing one is enough_co_ this is why I lean toward a needed refresh._lt_br /_gt_\n\t_lt_br /_gt_\n\tMaybe we do something wrong with the physics_co_ I_t_m still trying to figure it out...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-08-13T12:12:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard_qt_ data-mentionid_eq__qt_10310_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt__gt_@RaananW_lt_/a_gt_Â for follow up _lt_span class_eq__qt_ipsEmoji_qt__gt_ðŸ™‚_lt_/span_gt_Â Thx\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-08-13T13:47:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys.Â  A quick note_co_ if I may_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIS _lt_strong_gt__this._deltaPosition_lt_/strong_gt_ an AMOUNT_co_ or a worldSpace .POSITION?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIF it IS a worldSpace position... then setting it to 0_co_0_co_0 will put the shape-mesh AT that .position... bad thing.Â  _lt_span_gt__dd_)_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Muribundi","Date":"2018-08-13T14:59:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt is an amount_co_ a delta... like the name of the variable suggest. It is the difference between mesh center and collision center._lt_br /_gt_\n\t_lt_br /_gt_\n\tAlso_co_ the function is called translate_co_ not set position_co_ so no it will not put it at world center...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2018-08-19T15:49:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twould you be able to reproduce a case where_co_ if not running the translate_co_ the impostor doesnt work correctly? would be great to see what you mean and check if it can be fixed.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Muribundi","Date":"2018-08-21T15:02:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYes_co_ I will try to build a small scene with impostor to show. I doubt it is relate to something special we do on our side_co_ it just seems to happen. Funny thing_co_ I tried with Oimo and Cannon and the same thing happen. The _qt_ball_qt_ stop bouncing and start sliding when we remove the two translate calls with identity delta._lt_br /_gt_\n\t_lt_br /_gt_\n\tWe have a static box collider (The Groun)Â and a dynamic sphere collider (The ball). We give an impulse to the ball_co_ when the ball drop back and hit the plane_co_ it start sliding instead of bouncing. The only difference is in one instance_co_ we do a translate in the afterStep and in the other we don_t_t do it. (So the beforeStep never have the translate) and yes we made sure the delta is always 0_co_0_co_0 (I log it if it is not identity)_lt_br /_gt_\n\t_lt_br /_gt_\n\tDo I have a fix no_co_ not for now_co_ because I still haven figured out why it is needed\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]