[{"Owner":"learn3d","Date":"2017-12-11T15:06:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tim new in Babylon and i have problems with my pivot points.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried to rebuild it in a playground - my first question - why is the pivot not in the middle of the second cylinder? Its shown with a sphere at 0_co_0_co_0\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RLT22Z_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RLT22Z_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUnfortunately my obj file doesnt save the pivot of my 3ds max object - so i tried to position it manually. After i positioned it up on the y axis and control the slider - the parent(cylinder01) and the world coordinates moves around my positioned pivot(cylinder02)...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI wish i could show you the scene - but in playground the sliders didnt work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#FG1ECQ_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#FG1ECQ_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope somebody can help me _dd_/\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-12-11T16:41:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHi and welcome.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_198223_qt_ data-ipsquote-contentid_eq__qt_34504_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1513004818_qt_ data-ipsquote-userid_eq__qt_29629_qt_ data-ipsquote-username_eq__qt_learn3d_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI tried to rebuild it in a playground - my first question - why is the pivot not in the middle of the second cylinder? Its shown with a sphere at 0_co_0_co_0\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYou are positioning the sphere using _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_cylinder02.getPivotPoint()_sm_ but as you haven_t_t set the pivot point this returns 0_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RLT22Z%233_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RLT22Z#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSecondly using the developer tools inspection panel in the browser quickly shows these errors in the console\n_lt_/p_gt_\n\n_lt_p_gt_\n\tReferenceError_dd_ Cylinder01 is not defined\n_lt_/p_gt_\n\n_lt_p_gt_\n\tReferenceError_dd_ Cylinder02 is not defined\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou used c for your cylinder variables not C.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#FG1ECQ%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#FG1ECQ#1_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-12-11T16:51:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys.  I_t_ve been working this a bit_co_ too... using the other playground.  _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RLT22Z%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RLT22Z#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn line 51_co_ I try to set sphere position AT cylinder02 getAbsolutePosition() + getPivotPoint() (pp is 0_co_0_co_0)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot doing so well_co_ am I?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPosition cylinder02_t_s parent (which is cylinder01) back to 0_co_0_co_0 (disable lines 37/38)_co_ and the sphere locates to cylinder02 pivotpoint/position... perfectly.  Does THAT seem normal?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI thought getAbsolutePosition() could get a mesh.position value_co_ no matter what parenting-hell was applied.  Strange... maybe.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Update_dd_  _lt_/strong_gt_Oops_co_ yep_co_ thx _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt__co_ I meant to link to #2.  link fixed_co_ now._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-12-11T17:32:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tgetPivotPoint should probably have an optional space param.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"learn3d","Date":"2017-12-12T12:04:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t@JohnK Does it mean if i havent set a pivot point its automatically 0_co_0_co_0?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk.. I can manually set them because i have only a few models in my scene and the 3ds max coordinates of the pivots.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut the problem is now that my second playground works great(after C_eq_c _sm_)) - but in my project the parents rotate when i change the slider of the childs - around the corrected pivot of the child...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs obj. the problem?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t@Wingnut No Log shows the correct position of cylinder02 _dd_/ there must be a way to get the position\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-12-12T12:35:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_198357_qt_ data-ipsquote-contentid_eq__qt_34504_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1513080275_qt_ data-ipsquote-userid_eq__qt_29629_qt_ data-ipsquote-username_eq__qt_learn3d_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ learn3d said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t@Wingnut No Log shows the correct position of cylinder02 _dd_/ there must be a way to get the position\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYeah_co_ I thought cylinder2.getAbsolutePosition() would do that_co_ but it doesn_t_t.  I_t_m still puzzled_co_ or confused (that_t_s more likely)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAbout the other stuff_co_ you need to do a little study about _qt_worldSpace_qt_ and _qt_localSpace_qt_.  Good reading on a rainy day.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s a couple things that could be handy for you.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tmesh.bakeCurrentTransformIntoVertices()_sm_  Generally_co_ no matter HOW a mesh is transformed (positioned_co_ rotated_co_ scaled)... this command _qt_resets_qt_ all those values... back to default.  poz 0 0 0_co_ rot 0 0 0_co_ scale 1 1 1\n_lt_/p_gt_\n\n_lt_p_gt_\n\tExperiment.  Try moving a mesh sideways 10 units_co_ call the bake_co_ and move it back to previous location_co_ and spin it.  What did the pivotPoint/origin do?  Did it shift sideways?  yep.  Rotate it in a renderLoop spinner.... like I did in my previous playground.  (I spin nearly everything_co_ to check pivotPoints/origins)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can _qt_bake-in_qt_ rotations_co_ positions_co_ and scalings.  Although possibly technically _qt_illegal_qt__co_ mesh don_t_t need to be set updatable... to do bakes.  (I don_t_t think).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSPEAKING of pivotPoints and origins... read about the differences between those two things... IF there are some... in 3D Max help files.  After you export a .babylon file... view it in Notepad_co_ whateverPad_co_ or an online JSON file viewer.  See what exported... examine things.  The 3D Max exporter is still in-dev_co_ so perhaps stuff is done wrong_co_ or uniquely_co_ regarding the export of pivots and origins. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tGot parents set in Max_co_ before export?  Did _lt_em_gt_that_lt_/em_gt_ get exported? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe recently added _qt_transformNodes_qt_ to BJS_co_ and although they promised to be impact-free_co_ they COULD affect Max exports.  (actually_co_ unlikely_co_ but bugs is bugs)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s another little story.  mesh.rotationQuaternion  .  That property is only added to BJS mesh_co_ when needed.  But some say.... working with _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/3.1/quaternion_qt_ rel_eq__qt_external nofollow_qt__gt_Quaternion_lt_/a_gt_ rotation... is NICE.  And it is... if you can _qt_feel it_qt_.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Is 3D Max exporting its mesh... with .rotationQuaternions already installed?  Probably not_co_ but there may be a checkbox in the exporter screen.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIF you decide to set a mesh.rotationQuaternion _eq_ BABYLON.Quaternion.Identity()   ... or maybe .Zero()  ... then you are ready for a brand new type of rotation command_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcylinder02.rotate(new BABYLON.Vector3(0_co_ 1_co_ 0)_co_ .03_co_ BABYLON.Space.LOCAL)_sm_  // param1 is axes_co_ param2 is amount_co_ param3 is space (probably can use numeric 0 or 1 or 2_co_ there).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA quaternion localSpace Y-axis rotater.  WOW!  Once you have this_co_ now you can do rotation experiments in LOCAL and WORLD space.  For example_co_ I think the above line... would work great on your slider.  Remember... some mesh have .rotationQuaternion property already installed by something else_co_ and some need one added... before that .rotate() thing works.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGenerally_co_ when a .rotationQuaternion exists_co_ AND has a value other-than .Identity()_co_ then the _lt_span style_eq__qt_color_dd_#c0392b_sm__qt__gt_.rotation_lt_/span_gt_ property is ignored and _lt_strong_gt_not continuously value-updated_lt_/strong_gt_.  Mesh_lt_span style_eq__qt_color_dd_#c0392b_sm__qt__gt_.rotation_lt_/span_gt_ sort-of goes stupid.  At least that is MY experience... but sometimes I_t_m bonkers.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  You can convert a Quat value... back to Euler angles_co_ with... mesh.rotationQuaternion.toEulerAngles() or something like that. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t.rotate() has a sister method... .translate().  But no Quaternions are involved in .translate()_co_ as far as I know.  Still_co_ it allows translation in either LOCAL or WORLD space.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLastly_co_ I was recently fighting-with this same issue.  I needed to get my pivot/origin... re-centered.  _qt_Squared-up_qt_.  Local genius Adam... _lt_strong_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2571-the-wingnut-chronicles/?do_eq_findComment&amp_sm_comment_eq_194133_qt_ rel_eq__qt__qt__gt_helped me here_lt_/a_gt__lt_/strong_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ that_t_s just some assorted weird information... which might be important to you_co_ now or soon.  I hope I didn_t_t say too many wrong things. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Cya later.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-12-14T00:39:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again.  I built _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#0KNNS7%236_qt_ rel_eq__qt_external nofollow_qt__gt_a little playground_lt_/a_gt_ that compares _lt_em_gt_position_lt_/em_gt_ and _lt_em_gt_getAbsolutePosition()_lt_/em_gt_ on a single-line of inheritance.  (child of child of child)_co_ etc.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGetAbsolutePosition() seems to be doing things right_co_ as best I understand its use.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor a moment_co_ a few posts ago_co_ I had some doubts about getAbsolutePosition()_co_ so I needed a fresh testing PG. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyone_co_ feel free to do edits and saves - do your own experiments_co_ and have some fun with Babylon GUI at the same time.  kbye again.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"learn3d","Date":"2017-12-18T10:02:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey Wingnut\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for all the tips. I read a lot about world/local space_co_ rotation/position methods and euler/quaternion._lt_br /_gt_\n\tI logged mesh.position_co_ mesh.getAbsolutePosition()_co_ mesh.getPivotPoint()_sm_ mesh.getAbsolutePivotPoint()_co_ mesh.getPositionExpressedInLocalSpace() and rotate all the meshes(with and without child/parent). Got a better understanding buts its also still complicated._lt_br /_gt_\n\tAt this time everything is ok for me but of course i will come back to this thread again _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI cant imagine a situation for mesh.bakeCurrentTransformIntoVertices()\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]