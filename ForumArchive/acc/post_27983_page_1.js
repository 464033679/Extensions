[{"Owner":"JohnK","Date":"2017-01-25T14:44:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIn this PG _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#N4TFF_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#N4TFF_lt_/a_gt_ I get lots of things I do not expect. Probably because I do not fully understand what I am doing or what I should expect_co_ or maybe not!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe little boxes indicate the points at which I am trying to find the closest facet.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy expectations.\n_lt_/p_gt_\n\n_lt_ol_gt__lt_li_gt_\n\t\tUsing show partitions would show partitions that would match the shape of the mesh.\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tUsing the values for (x_co_ y_co_ z) given they would all return an index as they are all close to the mesh. (See console results for box2 and box4)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tDifferent positions of (x_co_ y_co_ z) would return different index numbers. (see console results for box1 and box3)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tThe projected variable would be non zero.\n\t_lt_/li_gt_\n_lt_/ol_gt__lt_p_gt_\n\tSorry _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_ but I think this is just for you.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAm I missing the point somewhere and doing something wrong (most likely)? Is it because I am using an extruded mesh with a few large facets?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2017-01-25T15:04:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ there some things here ...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#N4TFF%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#N4TFF#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou forgot to pass the reference of the vector _qt_projected_qt_ to getClosestFacetAtCoordinates(x_co_ y_co_ z_co_ _lt_strong_gt_projected_lt_/strong_gt_) so it can be set the right values.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd you_t_re right _dd_ the extrusion facets are too big for the internal partitioning. I set it to 3 instead.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ you_t_re not in the best configuration to get accurate results for some collisions with facetData here. It would better to have far smaller facets (or more numerous) in the extrusion mesh_co_ imho.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2017-01-25T15:10:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#N4TFF%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#N4TFF#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just changed a bit the model shape so it_t_s not built on x _eq_ 0 and we get a result for projected4 now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe number of facets and their size bring to too limit cases here. A simple AABB algo would probably better for this kind of collisions.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-01-25T16:27:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span_gt_Thank you @jerome for that. What a dummy to forget to add projected to the function_lt_/span_gt__lt_img alt_eq__qt__dd_wacko_dd__qt_ data-emoticon_eq__qt__qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wacko.png_qt_ title_eq__qt__dd_wacko_dd__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_What I am working towards doing is looking at where the two shapes as in _lt_/span_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#N4TFF%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#N4TFF#4_lt_/a_gt_ will touch. Am currently thinking of using the central point of the overlap of the bounding boxes and seeing how far it is from the closet facets to it_co_ or something like that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks to you I now have a better idea of what to do with projection and partitions.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_160862_qt_ data-ipsquote-contentid_eq__qt_27983_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1485357032_qt_ data-ipsquote-userid_eq__qt_5453_qt_ data-ipsquote-username_eq__qt_jerome_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ jerome said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI just changed a bit the model shape so it_t_s not built on x _eq_ 0 and we get a result for projected4 now.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tDoes this mean I cannot use negative positions?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWill keep playing and find out where the limits are.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2017-01-25T17:35:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tof course_co_ you can use negative positions... Well in your case_co_ we had a conjunction of very specific cases _dd_ the mesh located at x _eq_ 0_co_ the partitioning edge at x _eq_ 0 and a big facet_co_ maybe too big for the block\n_lt_/p_gt_\n\n_lt_p_gt_\n\tactually it should even work better with facets distributed everywhere in the mesh local space\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m thinking about a way to improve the facet storing in the partitioning _dd_ to store facets near the block edges also in the adjacent blocks (blocks touching the current block)_co_ but I_t_m afraid this impacts the dynamic partitioning in the case of mesh morphed each frame (a lot of tests to do _dd_ each facet is tested on its 3 vertices + its center and there are 26 adjacent blocks to a given 3D block !) \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]