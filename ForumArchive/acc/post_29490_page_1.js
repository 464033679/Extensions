[{"Owner":"Numa","Date":"2017-04-03T03:03:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi there_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tit looks like the _qt_pointerout_qt_ event is not fired while the mouse is clicked_co_ is that expected?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow would I go about detecting when the mouse is dragged (and released) outside the canvas?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy canvas is in an iframe which is in an outside domain_co_ so I can_t_t send messages back and forth.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny ideas?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"yuccai","Date":"2017-04-03T15:32:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMaybe if the position your pointer is beyond your canvas dimension.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf your canvas is WxH_co_ your callback associated to your onpointerup is _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_function(evt) {\n    if(evt.clientX &gt_sm_ W || evt.clientY &gt_sm_ H) {\n        //you_t_re out your canvas\n    }\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tYou may be sure that you click origin was on the canvas.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//mobiforge.com/design-development/html5-pointer-events-api-combining-touch-mouse-and-pen_qt_ rel_eq__qt_external nofollow_qt__gt_Here_lt_/a_gt_ are some informations related to pointers event.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-04-03T17:43:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCool_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/9254-yuccai/?do_eq_hovercard_qt_ data-mentionid_eq__qt_9254_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/9254-yuccai/_qt_ rel_eq__qt__qt__gt_@yuccai_lt_/a_gt_!  Yeah_co_ you don_t_t need to look for pointerUp event on things off-iframe or off-iframeCanvas... if you monitor the client X/Y.  But_co_ you won_t_t be _qt_dragging_qt_ any information gotten from pointDown evt over iframeCanvas.  In other words_co_ you might know you are off-canvas_co_ but you won_t_t know what mesh (token) was dragged off canvas.  Information (What Numa calls messages) won_t_t cross that border.  hmm.  I think Numa wants to get data across the border... but with iframe... that border is a STRONG one.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI started quite a test scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#16MOW9%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#16MOW9#15_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI forced an iframe (red background doc) into the canvasZone element of the playground (same container that holds renderCanvas).  The upper green document... is the local scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLots of mess_co_ lots of listeners.  Sorry for mess.  Tests_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1.  Click and hold-down top button_co_ drag it onto white editor area_co_ and drop (pointerUp).  Button reports _qt_Editor Up_qt_... because mainline code added pointerup event to jsEditor on lines 105-107.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2.  Do the same thing with lower button.  There is no JsEditor eventListener added by the iFramed doc.  It doesn_t_t know jsEditor exists_co_ nor does it know that mainline doc added a pointerUp listener to jsEditor element.  Again_co_ the iFramed doc can_t_t find jsEditor.  It can_t_t ref things that are outside its tight scope.  So_co_ no _qt_editor up_qt_ seen anywhere... when pointerUp over editor.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ yeah_co_ all I have done... is POSSIBLY verify Numa_t_s findings_co_ and give us a playground to play-in.  A JsFiddle might be a better way to play with this.  If someone would like to convert it to a jsFiddle_co_ that would be alright with me.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSorry that I wasn_t_t able to find a miracle.  I_t_ll keep thinking_co_ and maybe do further tests... but... iframe is a tight box.  Be well_co_ guys.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_PS_dd__lt_/strong_gt_  If anyone sees a wide-stretched top (green) document upon LOAD_co_ that fixes itself after clicking RUN... that is caused by... um... canvasZone forced wide by over-wide iframe_co_ and then... um...  hehe.  I have no idea WHAT causes all that.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-04-03T21:18:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#16MOW9%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#16MOW9#16_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOops_co_ I forgot to re-activate pointerUP on editor area.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Now top button... etc etc.   Sorry.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Numa","Date":"2017-04-03T21:52:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks everyone_co_ it_t_s fixed now _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  clientX/clientY did the trick. All I needed to detect was that the mouse was out so I could fire a mouse up event_co_ no need for any babylon/mesh info.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ Interesting test scene _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\there_t_s the working code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var OnPointerMove _eq_ function (e) {\n\n    if (!pointerIsDown)\n        return_sm_\n\n    if (e.clientX &gt_sm_ engine.getRenderWidth() || e.clientY &gt_sm_ engine.getRenderHeight() ||\n        e.clientX &lt_sm_ 0 || e.clientY &lt_sm_ 0) {\n\n        // Create pointerUp event\n        var pointerUpEvent _eq_ document.createEvent(_qt_MouseEvents_qt_)_sm_\n        pointerUpEvent.initMouseEvent(_qt_pointerup_qt_)_sm_\n        \n        canvas.dispatchEvent(pointerUpEvent)_sm_\n    }\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAlso when I said _qt_messages_qt_ I meant actual messages_co_ that you can use to communicate between an iframe and its parent (but as I said I couldn_t_t use that_co_ as my iframes might end up on random domains and I can_t_t authorize them manually one by one^^). Here_t_s how they work_dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_document.getElementById(_t_myIframe_t_).contentWindow.postMessage(_t_myMessage_t__co_ _t_*_t_)_sm_ _lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tyou then authorize on your iframe_t_s page by checking the origin_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_window.addEventListener(_t_message_t__co_ function(event) {\n        // Check origin of the data\n\tif (~event.origin.indexOf(_t_https_dd_//www.myFriendlyDomain.com_t_){\n\t\t\t\n\t\t// The data sent with postMessage is stored in event.data\n\t\tif (event.data _eq__eq__eq_ _t_myMessage_t_){\n\t\t\tdoSomething()\n\t\t}\n\t} else {\n\t\t// The data hasn_t_t been sent from a trusted source_co_ don_t_t use it.\n\t\treturn_sm_\n\t}\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]