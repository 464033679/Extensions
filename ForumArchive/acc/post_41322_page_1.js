[{"Owner":"servusdei","Date":"2018-11-16T21:13:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1-In the example below_co_ I load a small mesh_co_ then I clone it and set the clone_t_s parent to an AbstractMesh. then I position the parent to be outside of the camera frustum.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy issue is why does camera.isInFrustum(parent) returns true even if the parent is outside the camera_t_s viewport ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#ZJYNY%2395_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#ZJYNY#95_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2- Another issue I noticed_co_  sometimes camera.isInFrustum(mesh) does not return true_co_ after the mesh (which is in the camera frustum) has loaded.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-11-16T22:14:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\ttry this_dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_parent.computeWorldMatrix()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#ZJYNY%2396_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#ZJYNY#96_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tlogs. true_co_ false. check the frustum computation _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"servusdei","Date":"2018-11-17T00:45:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat also drived me crazy is that if the camera is created in the assetsManager.onFinish()_co_ the _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_camera.isInFrustum() does not work as expected. so I had to create it before assets are loaded._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"servusdei","Date":"2018-11-17T05:24:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_span_gt_@brianzinn_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_In this example_co_ camera.isInFrustum(mesh) keeps returning true when it should not _lt_span_gt__dd_ _lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#ZJYNY%2397_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#ZJYNY#97_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMoreover_co_ If I swap these lines_co_ it works but the meshe does not render to x _eq_ 10_sm_\n_lt_/p_gt_\n\n_lt_div style_eq__qt_background-color_dd_#1e1e1e_sm_color_dd_#d4d4d4_sm_font-size_dd_14px_sm__qt__gt_\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#d4d4d4_sm__qt__gt_mesh_lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcdc_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_sm__qt__gt_computeWorldMatrix_lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcdc_sm__qt__gt_()_sm__lt_/span_gt_\n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#d4d4d4_sm__qt__gt_mesh_lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcdc_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_sm__qt__gt_position_lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcdc_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_sm__qt__gt_x _lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcdc_sm__qt__gt__eq__lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_sm__qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#b5cea8_sm__qt__gt_10_lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcdc_sm__qt__gt__sm__lt_/span_gt_\n\t_lt_/div_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\tWhy would that be the case ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-11-19T02:11:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_In this example_co_ camera.isInFrustum(mesh) keeps returning true when it should not_lt_span_gt_ _lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__dd_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is because the new value (10) is not taking in account here for the isInFrustum compute. Indeed the computeWorldMatrix will cache the wrong value for the function call but it is recomputed during the rendering.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_Moreover_co_ If I swap these lines_co_ it works but the meshe does not render to x _eq_ 10_sm__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_Here the opposite happens_co_ the computeWorldMatrix will fill the cache with the correct value but then during rendering as the rendered mesh is a child of the one you are computing the value on_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_21066_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.08bfd03a99400bcb5f4f70595f18b867.png_qt_ alt_eq__qt_image.png.08bfd03a99400bcb5f4f70595f18b867.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_It does not compute its matrix anymore. What you want is force the compute of the entire hierarchy_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#ZJYNY%23100_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#ZJYNY#100_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"servusdei","Date":"2018-11-19T09:24:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span_gt_@Sebavan_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Thanks a lot for your explanation. Even when you have _lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_forced compute the entire hierarchy _lt_/span_gt__lt_span_gt_I still see the mesh. (should be at x_eq_10)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want to check one final time with a simple sphere_co_  and _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_camera.isInFrustum(sphere) unexpectedly returns true._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#ZJYNY%23102_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#ZJYNY#102_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat do I do in this case ? the sphere does not have any parent.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-11-19T10:12:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis is because the camera has just been created  but none of its information has been computed at the time of your call to isInFrustrum.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyou can either force the camera to update at least once with _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_camera.getViewMatrix()_sm__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_div style_eq__qt_background-color_dd_#fffffe_sm_color_dd_#000000_sm_font-size_dd_14px_sm__qt__gt_\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_camera.getProjectionMatrix()_sm__lt_/span_gt_\n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\t \n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#ZJYNY%23103_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#ZJYNY#103_lt_/a_gt_\n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\t \n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\tor you could do your check AfterRender to ensure that all your required info would have been computed.\n\t_lt_/div_gt_\n_lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]