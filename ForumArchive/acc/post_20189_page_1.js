[{"Owner":"jerome","Date":"2016-01-28T16:25:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI retrieve this old post because I wasn_t_t satisfied by my result _dd_\n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/15255-is-it-possible-to-set-the-size-of-the-bounding-box/?do_eq_embed#comment-86351_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\tActually_co_ I_t_m trying to set some fixed values to a mesh bounding box_co_ different from the computed ones. I would like these fixed values to keep stored then forever_co_ so not recomputed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1OOAYL_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1OOAYL_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhat I did ? I created a mesh_co_ then scaled its BB_co_ then froze its World Matrix so it isn_t_t computed any longer._lt_br_gt_\n\tI expected to keep and display the BB scaled values... this is not what I get.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhere_t_s my error ? and is this possible to set forever a fixed BB for a given (frozen) mesh ?_lt_br_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-28T16:54:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWrong use of Scaling_dd_)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tand you should freeze THEN update (else freeze will force a computation of the worldmatrix which in turn will update the BB)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1OOAYL%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1OOAYL#1_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-28T17:19:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tcrystal clear !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tthanks a lot _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-28T18:46:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tbut... is there a way to set BB fixed values (at least scaling ones) whatever the mesh world matrix would be recomputed or not ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t[EDIT] I_t_m reading the BBox code and I understand that its 8 vertices are recomputed on the call to _lt_em_gt__update(matrix)_lt_/em_gt_ _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Culling/babylon.boundingBox.ts#L56_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Culling/babylon.boundingBox.ts#L56_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAFAIUndersand_co_ these 8 vertices are compared in turn with the transformed (by the passed matrix) 8 world vertices. Ok_co_ this means we apply the same transformation to the BBox than the one applied to its embedded mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat I don_t_t find in the code is where the BBox is recomputed if the mesh has its World matric frozen and don_t_t even move_co_ rotate or scale_co_ but is updated_co_ so when the mesh vertices change their positions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JFDFW%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1JFDFW#2_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-28T21:21:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tit is because of that guy_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.geometry.ts#L90_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.geometry.ts#L90_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-29T05:47:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDamn ! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI read this part of code twice yet but didn_t_t understand what the variable _lt_em_gt_meshes_lt_/em_gt_ was about. I thought it was about subMeshes or something like this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot about iterating over each mesh vertex here.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-29T09:40:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThere is still something I don_t_t get about the BBox and Pickability (or visibility).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease have a look at this _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JFDFW%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1JFDFW#6 _lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEverything is done from the line 216 _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_sps.setParticles()_sm_                   // set them\ns.freezeWorldMatrix()_sm_                // freeze the mesh world matrix\nsps.refreshVisibleSize()_sm_\t      // force BB recomputation once\ns.getBoundingInfo().update(BABYLON.Matrix.Scaling(5_co_ 5_co_ 100))_sm_ // set BB fixed values\ns.showBoundingBox _eq_ true_sm_\t// show the BB_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAs you can see_co_ the mesh World Matrix is frozen_co_ the BBox is computed once from the current vertex positions and then scaled once.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you try the PG_co_ you can blow the wall particle mesh. Then once the particles are on the ground AND still within the BBox they aren_t_t pickable any longer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ if I uncomment the line 210 what forces the BBox recomputation each frame_co_ I get this _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JFDFW%237_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1JFDFW#7_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you try to pick the particles on the ground they are still pickable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI thought that the pickability was related to the current BBox size. Did I miss something anywhere ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-01-29T21:54:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo you did it right BUT the picking use ray casting in local object coordinates. So you also have so setup the local world bounding info values like here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JFDFW%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1JFDFW#12_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-01-30T09:07:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis works perfectly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHuge thanks !!! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]