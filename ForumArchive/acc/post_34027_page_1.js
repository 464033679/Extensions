[{"Owner":"Pryme8","Date":"2017-11-15T19:32:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//pryme8.github.io/TileMaster/editor/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//pryme8.github.io/TileMaster/editor/_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tSo If you go ahead and create a new project_co_ then add a stage_co_ then add a plane.  You will see the bug.  Notice you see no change and if you have the console open you will see NAN outputs for the aspectRatio._lt_br /_gt__lt_br /_gt_\n\tNow the second you resize the scene it fixes this and starts correctly outputting the aspectRatio_lt_br /_gt__lt_a href_eq__qt_https_dd_//github.com/Pryme8/TileMaster/blob/gh-pages/editor/js/tm.editor.js#L394_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/Pryme8/TileMaster/blob/gh-pages/editor/js/tm.editor.js#L394_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tIs where the function is used and_lt_br /_gt__lt_a href_eq__qt_https_dd_//github.com/Pryme8/TileMaster/blob/gh-pages/editor/js/tm.editor.js#L34_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/Pryme8/TileMaster/blob/gh-pages/editor/js/tm.editor.js#L34_lt_/a_gt__lt_br /_gt_\n\tIs where it fires from... the odd part is technically I fire the resize manually before anything happens so shouldn_t_t this work?_lt_br /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-11-15T19:41:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAFAIC_co_ the only way to get NAN would be to call getAspectRatio too early (when the canvas is not yet attached to the DOM).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L1294_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L1294_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-11-15T19:42:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tits after DOM creation_co_ I added _lt_br /_gt_\n\tthis._core.engine.resize()_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tto the _buildMesh function and that _qt_fixed_qt_ it but proves that there is a bug somewhere._lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-11-15T19:50:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSomewhere _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I step into getAspectRatio I see that the engine.getRenderingCanvas().width _eq__eq__eq_ 0\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot good\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-11-15T19:55:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tso did i find a bug?!?! woot!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-11-15T20:01:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWhy does _dd__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L1294_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#3d6594_sm_font-size_dd_14px_sm__qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L1294_lt_/a_gt__lt_br /_gt_\n\tnot just use _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L1319_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Engine/babylon.engine.ts#L1319_lt_/a_gt__lt_br /_gt_\n\tand do something like_dd__lt_br /_gt__lt_br /_gt_\n\tvar rect _eq_ this._lt_span style_eq__qt_background-color_dd_#fffbdd_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_getRenderingCanvasClientRect()_sm__lt_/span_gt__lt_br /_gt_\n\treturn rect.width / rect.height_sm__lt_br /_gt__lt_br /_gt_\n\t?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-11-15T20:35:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tfor the time being i replaced the line_dd__lt_br /_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#d73a49_sm_font-size_dd_12px_sm__qt__gt_var_lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_ aspectRatio _lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#d73a49_sm_font-size_dd_12px_sm__qt__gt__eq__lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_ _lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_engine_lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#6f42c1_sm_font-size_dd_12px_sm__qt__gt_getAspectRatio_lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_(c)_sm__lt_br /_gt_\n\twith_dd__lt_/span_gt__lt_br /_gt_\n\tvar rect _eq_ _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_engine_lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_._lt_/span_gt__lt_span style_eq__qt_background-color_dd_#fffbdd_sm_color_dd_#24292e_sm_font-size_dd_12px_sm__qt__gt_getRenderingCanvasClientRect()_sm__lt_/span_gt__lt_br /_gt_\n\tvar aspectRatio _eq_ rect.width/rect.height_sm__lt_br /_gt__lt_br /_gt_\n\tand it seems to be adequate as a work around so no rush on this problem... but I am kinda wondering what the root cause of it is still._lt_br /_gt__lt_br /_gt_\n\t*EDIT*_lt_br /_gt_\n\tthat did not fix it actually_co_ but I made a work around.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-11-15T21:52:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIt is not a bug on my side _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ I_t_m not responsible to set the canvas.width _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-12-13T19:45:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIm bringing this topic back... there is something odd in this behavior._lt_br /_gt__lt_br /_gt_\n\tSo basically my scenes are broken until I fire a engine.resize()_sm__lt_br /_gt__lt_br /_gt_\n\tI am thinking this is because the canvas elements are set to display_dd_none initially and are enabled later.  _lt_br /_gt__lt_br /_gt_\n\tBut here is where things get odd_co_ if I do a engine resize prior to the display of the canvas its like nothing effectively happens._lt_br /_gt__lt_br /_gt_\n\tI am forced then to do this_dd__lt_br /_gt__lt_a href_eq__qt_https_dd_//github.com/Pryme8/TileMaster/blob/gh-pages/editor/js/tm.editor.js#L104_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/Pryme8/TileMaster/blob/gh-pages/editor/js/tm.editor.js#L104_lt_/a_gt__lt_br /_gt_\n\twhich seem really kinda dumb... I mean it works but if I nerf these lines when you select a tile it displays it in the preview block like its a single pxl from the center of the tile is the only one that displays over the whole canvas._lt_br /_gt__lt_br /_gt_\n\tBut if I include these lines everything _qt_works_qt__lt_br /_gt__lt_a href_eq__qt_http_dd_//pryme8.github.io/TileMaster/editor_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//pryme8.github.io/TileMaster/editor_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tI am focused on the sheetEditor part if your looking for the working example.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-12-15T00:07:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThis is expected. The engine cannot resize until the canvas has an actual size. I don_t_t know how to do it differently unfortunately\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-12-15T00:45:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOk so doing a manual resize after the canvas is being displayed on the dom would be the best work around?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-12-15T16:45:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tcorrect\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]