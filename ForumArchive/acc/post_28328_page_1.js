[{"Owner":"JohnK","Date":"2017-02-09T14:01:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHaving had a look at the playgrounds using Jerome_t_s new addRotation I started wondering about line 39 in _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1PON40%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1PON40#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_torus.rotation.copyFromFloats(0.0_co_ 0.0_co_ Math.PI / 2)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tthe torus had already been set as vertical so why was it necessary to re-do it. On commenting out this line and running the PG again the wheel wobbles (quite a lot very soon). So I decided it had to do with stopping error accumulation. My next thought was why copyFromFloats and not just use.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_torus.rotation _eq_ new BABYLON.Vector3(0_co_ 0_co_ Math.PI/2)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThis does work as in _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1PON40%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1PON40#9_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFrom advice about something else that Jerome gave me I decided that it had something to do with avoiding constructing new variables and garbage collection. My next thought was would this be avoided if I set a variable to be the vector3 (0_co_ 0_co_ Math.PI/2) and used this each time.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I created\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var vRot _eq_ new BABYLON.Vector3(0_co_ 0_co_ Math.PI/2)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tand then in the render loop used\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_torus.rotation _eq_ vRot_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tresult more extreme wobbling as in _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1PON40%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1PON40#10_lt_/a_gt_. If you do a console.log(vRot) in the loop its value changes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe simple question is why? What fundamental misunderstanding have I made this time? (Probably something to do with my use of Javascript rather than BJS)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-02-09T14:23:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tJavascript is _qt_pass by reference_qt_ when setting objects.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-02-09T14:38:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOf course any changes in torus.rotation are also made to vRot. Thank you _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ knew it was something simple I should already know.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2017-02-09T17:31:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ the goal of addRotation() is to compute the final value of mesh.rotation step by step.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know this final value (and I don_t_t care)_co_ I just want my mesh rotated this way_co_ then this way_co_ etc.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ I need to begin each frame from a starting state rotation.z _eq_ PI /2_co_ then to add my steps to reach the final wanted orientation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can_t_t keep the last stored values_co_ because the next use of addRotation() will accumulate a new rotation on this last state what will lead to something unpredictable (by me).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust keep in mind that the WorldMatrix needs only a final value in the property rotation (or rotationQuaternion) whatever the way this value is set _dd_ manually or by using addRotation() or rotate()\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve added a summary in the rotation doc here _dd_Â _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Documentation/blob/master/content/overviews/Standard/How_Rotations_and_Translations_Work.md_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Documentation/blob/master/content/overviews/Standard/How_Rotations_and_Translations_Work.md_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]