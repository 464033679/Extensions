[{"Owner":"Sparky","Date":"2015-07-13T21:49:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_First of all_co_ I_t_m new to WebGL and Babylon_co_ so apologies for any noobisms. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Basically_co_ i_t_m trying my hand at an RTS_co_ I_t_ve done a bunch of reading on Babylon and at the moment I_t_m just getting to grips with some of the basics. My plan is to get a very simple world in babylon that I can use to test and code some of the game mechanics._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ve so far created a simple world with a heightmap and texture as per the example in the tutorials. Where I_t_m struggling is how to approach setting that world to a grid. So any buildings etc have to snap to grid when being placed. I_t_ll also want to be able to detect clicks on grid squares so I can display information about what_t_s there_co_ resources etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Really_co_ I_t_m just looking for help with approach here. Should I be looking at a tiled ground? (I_t_m not sure how that would work_co_ splitting up the height map image etc.) or should all the work be done with the detection of the mouse cursor and the grid can just be aesthetic only? _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks for any help you can give!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_(p_co_s&gt_sm_ I_t_ve also looked at a bunch of examples_co_ but haven_t_t yet found anything that does what i_t_m after). _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-07-14T09:10:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi Sparky and welcome_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What you_t_re describing has much in common with a project I_t_ve worked on_co_ take a look at it here_dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/6557-babylon-projects/?p_eq_87090_qt__gt_http_dd_//www.html5gamedevs.com/topic/6557-babylon-projects/?p_eq_87090_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My approach was to subdivide the game world into cells_co_ each cell having its own set of meshes (ground layer_co_ water layer_co_ building_co_ etc.). Basically_co_ nothing can exist out of those cells (it_t_s not exactly true because there are vehicles). Each cell is then referenced with a set of (x_co_y) coordinates in the grid._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_When you need to access game data_co_ for example _qt_is there a building on the cell next to me_qt__co_ you can just look up the cell at (x-1_co_ y) and access its set of data. It can be the type of building it holds_co_ terrain data_co_ or any other thing._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Also_co_ rendering is theoretically simple_co_ because you can just attach any mesh you want to the cell parent node. If something on the cell is changed_co_ it can change its set of meshes on its own to reflect that. In fact things are a bit more complicated for performance reasons_co_ but I could give you more details if you like._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For click detection_co_ I associated an invisible box to each cell_co_ and when doing the _qt_picking_qt_ in the scene (i.e. finding out what is under the cursor) I only check these invisible boxes_co_ also for performance reason. It works quite well. You can even add more precise boxes_co_ for example if you have a building that_t_s tall and you want to be able to select it on all its height._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That was my general approach_co_ not the only one for sure but it worked reasonably well. Hope that helped!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sparky","Date":"2015-07-14T10:10:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi jahow_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks for sharing_co_ I_t_m going for a completely different MO_co_ but the general gameplay will share a lot of features with what you_t_re building (managing resources_co_ buildings etc). I_t_m going for a more co-op vibe where it_t_s all about the player interaction._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What you_t_ve built so far looks great_co_ I_t_m definitely going to have a play when I get home from work and see what you_t_ve managed to get going so far. Should be a great help to me_co_ thanks!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_d be keen to hear whatever detail you_t_ve got_co_ I_t_m desperately trying to get the babylon side of things to the state where I can start talking to a server and this work on the co-op mechanics. I_t_ll have a look at your code and see if I can figure out the cells approach._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Cheers!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-07-14T12:57:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_One of the things that caused me the most trouble was achieving acceptable performance with many cells. I used a 32x32 grid which is not that big_co_ and it amounted to 1024 cells._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Now_co_ my first method was attaching meshes by layers on each cell_dd_ one parent (empty) mesh_co_ one mesh for the terrain_co_ one for water_co_ one for the current building_co_ one for vegetation. and one for the picking detection._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The thing is_co_ because some of these layers were actually composed of several meshes_co_ I often had around 10k meshes in the scene_co_ and it was bringing the FPS down. Note that this was not related to how many polygons the meshes had. So I ended up merging as many meshes together as possible_co_ and it worked_co_ although I had to code a way to _qt_unmerge_qt_ a mesh_co_ for example if a cell_t_s terrain changed from ground to water._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Bottom line is_dd_ you need to think early of a way to have as few meshes in your scene as possible. 10_co_ 100 is OK_co_ but a thousand and above will probably cause you trouble._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sparky","Date":"2015-07-14T13:10:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Good to know_co_ being a multiplayer_co_ I want to have a fairly large map. I_t_m hoping only loading visibile parts of the scene will help with that. For now I really just need a workable test world that I can use to build on my ideas for how the multiplayer works and then I_t_ll go back to the game world and optimise that once my 3D buddy has had time to put some buildings etc together._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I had a bit more of a go on your game_co_ it_t_s cool_co_ love the vehicles. I just couldn_t_t figure out what to do! I guess that_t_s just the joys of a demo. Makes you realise how useful the first-use tutorials really are!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_P.S&gt_sm_ Love the construction animation _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-07-14T13:16:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yeah_co_ there_t_s not much to do... well there are things to do_co_ but not a proper goal (yet) _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Anyway_co_ putting together a simple map to test multiplayer shouldn_t_t be a problem_co_ there_t_s a ton of knowledge lying in these forums and also a complete documentation for BJS_dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/page.php?p_eq_29_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/page.php?p_eq_29_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sparky","Date":"2015-07-14T13:58:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yeh_co_ I got the little vehicles running about_co_ but they stopped and I_t_ve no idea why! They are cool though!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Cheers_co_ have been looking at the docs_co_ just when you_t_re new to this_co_ working out which bit to read is the hardest step _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_. It_t_s like a whole new vocabulary. I_t_m sure after a flick through your code and the doc_t_s for the bits you_t_ve used_co_ I_t_ll be flying _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_. Then I can give my server buddy a nudge to get his end up and running so I can start sending him data._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]