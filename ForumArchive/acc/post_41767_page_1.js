[{"Owner":"timetocode","Date":"2018-12-08T11:01:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI must be doing something incorrect with the water_co_ as it is rendering black_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_21413_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_12/chrome_2018-12-08_03-00-16.png.cf13072ac137a9ca1049b26ea5dd2a8a.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_chrome_2018-12-08_03-00-16.thumb.png.a885071ac882843f6238a35d7df7af76.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_21413_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_12/chrome_2018-12-08_03-00-16.thumb.png.a885071ac882843f6238a35d7df7af76.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI pasted the code from this playground_co_ and included the files for the waterbump.png and skybox_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1SLLOJ%2317_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1SLLOJ#17_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_image.png.c6cf6bb87193f59d060830aa65b77d1b.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_21412_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_12/image.png.c6cf6bb87193f59d060830aa65b77d1b.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s my code_co_ although its very similar to the PG. My guess is the error isn_t_t in this code_co_ though I_t_m not sure what else would affect the water. It is as if it has nothing in its render list -- but I can definitely see the sky_co_ and the sky is added to the list.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.canvasEle _eq_ document.getElementById(_t_main-canvas_t_)\nthis.engine _eq_ new BABYLON.Engine(this.canvasEle_co_ true)\nthis.engine.enableOfflineSupport _eq_ false\nthis.engine.setHardwareScalingLevel(1)\nthis.scene _eq_ new BABYLON.Scene(this.engine)\n//this.scene.freezeActiveMeshes()\n//this.scene.collisionsEnabled _eq_ true\n//this.scene.clearColor _eq_ new BABYLON.Color4(0.3_co_ 0.5_co_ 0.75_co_ 1.0)\nthis.scene.fogMode _eq_ BABYLON.Scene.FOGMODE_EXP\nthis.scene.fogDensity _eq_ 0.0005\nthis.camera _eq_ new BABYLON.TargetCamera(_t_camera_t__co_ new BABYLON.Vector3(0_co_ 0.5_co_ 0)_co_ this.scene)\nthis.camera.fov _eq_ 0.8\nthis.camera.minZ _eq_ 0.1       \n//this.scene.autoClear _eq_ false\n//this.scene.autoClearDepthAndStencil _eq_ false   \n\nvar light _eq_ new BABYLON.DirectionalLight(_qt_dir01_qt__co_ new BABYLON.Vector3(0.66_co_ -0.75_co_ 1.25)_co_ this.scene)\nlight.position _eq_ new BABYLON.Vector3(1_co_ 40_co_ 10)\nlight.intensity _eq_ 0.5\n\nvar light3 _eq_ new BABYLON.DirectionalLight(_qt_dir01_qt__co_ new BABYLON.Vector3(-0.5_co_ 0.75_co_ -1.25)_co_ this.scene)\nlight3.position _eq_ new BABYLON.Vector3(1_co_ 40_co_ 1)\nlight3.intensity _eq_ 0.5\n\nvar light2 _eq_ new BABYLON.HemisphericLight(_t_h_t__co_ new BABYLON.Vector3(0_co_ 1_co_ 0)_co_ this.scene)\nlight2.intensity _eq_ 0.6\n\nvar skybox _eq_ BABYLON.Mesh.CreateBox(_qt_skyBox_qt__co_ 5000.0_co_ this.scene)\nvar skyboxMaterial _eq_ new BABYLON.StandardMaterial(_qt_skyBox_qt__co_ this.scene)\nskyboxMaterial.backFaceCulling _eq_ false\nskyboxMaterial.reflectionTexture _eq_ new BABYLON.CubeTexture(_qt_images/TropicalSunnyDay_qt__co_ this.scene)\nskyboxMaterial.reflectionTexture.coordinatesMode _eq_ BABYLON.Texture.SKYBOX_MODE\nskyboxMaterial.diffuseColor _eq_ new BABYLON.Color3(0_co_ 0_co_ 0)\nskyboxMaterial.specularColor _eq_ new BABYLON.Color3(0_co_ 0_co_ 0)\nskyboxMaterial.disableLighting _eq_ true\nskybox.material _eq_ skyboxMaterial\n\nvar waterMesh _eq_ BABYLON.Mesh.CreateGround(_qt_waterMesh_qt__co_ 2048_co_ 2048_co_ 16_co_ this.scene_co_ false)\nvar water _eq_ new BABYLON.WaterMaterial(_qt_water_qt__co_ this.scene_co_ new BABYLON.Vector2(512_co_ 512))\nwater.backFaceCulling _eq_ true\nwater.bumpTexture _eq_ new BABYLON.Texture(_qt_images/waterbump.png_qt__co_ this.scene)\nwater.windForce _eq_ -10\nwater.waveHeight _eq_ 1.7\nwater.bumpHeight _eq_ 0.1\nwater.windDirection _eq_ new BABYLON.Vector2(1_co_ 1)\nwater.waterColor _eq_ new BABYLON.Color3(0_co_ 0_co_ 221 / 255)\nwater.colorBlendFactor _eq_ 0.0\nwater.addToRenderList(skybox)\nwaterMesh.material _eq_ water_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAny ideas?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-12-08T15:00:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell I see nothing wrong if I compare with _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1SLLOJ#20_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1SLLOJ#20_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you share a repro?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-12-09T02:59:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tEverything seems to work in the PG. Multiple times I_t_ve taken some seemingly encapsulated function out of a PG and pasted into my game and not had it do quite the same thing. I_t_m not sure how to reproduce it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m starting to think I may have a more fundamental issue_co_ like perhaps I accidentally have multiple instances of BABYLON_t_s global scope_co_ engine_co_ or scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe this is a hint_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBABYLON.Engine.audioEngine.setGlobalVolume(0.1) does not change the volume of sounds in my game. I have to invoke setVolume on every sound individually to change volume.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes that point at any general type of issue? I_t_m using const BABYLON _eq_ require(_t_babylonjs_t_) in most files instead of an html script tag_co_ as most of the code runs in node... i wonder if that is related.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-12-09T03:35:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTough to say /_lt_span_gt__lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt__gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Can you make sure to have the latest (and same) version for all your bjs packages?_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-12-09T08:39:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_21420_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_12/2018-12-09_00-25-19.gif.753df106e1db8e8e3862fdbccd4f960e.gif_qt_ alt_eq__qt_2018-12-09_00-25-19.gif.753df106e1db8e8e3862fdbccd4f960e.gif_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt looks awesome!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI took your advice and tried to make sure that babylon was the same version everywhere that I was using it. I_t_m not sure what I really did_co_ but somewhere along the process of trying to change out 3.3 for 4_co_ and then undoing it_co_ little things started working.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the end I made a new custom deploy of babylon 4.0_co_ and then I copied and pasted *just* the water material from that directly above my own code. This gave the water reflections_co_ but no animation. I couldn_t_t really figure out a way to get 4.0 running NullEngine (I_t_ll just wait until it is released on npm_co_ and then untangle things).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs for the water animation_co_ that part does make sense to me now_co_ I was missing this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_engine.runRenderLoop(() _eq_&gt_sm_ {})_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t^ my previous code only called scene.render()_co_ which might explain why some pg code doesn_t_t work the same for me... i_t_m not sure what invoking runRenderLoop with an empty function does_co_ but i_t_m guessing it triggers some important core-level update logic..? in this case passing variables to the water shader maybe.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI also learned that I *can* setGlobalVolume if I do it inside of setTimeout -- I_t_m not sure what mess I_t_ve made_co_ but I_t_m either accidentally overwriting the audioEngine or things aren_t_t initialized quite when I think they are.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-12-09T17:59:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk so at least it works_dd_)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]