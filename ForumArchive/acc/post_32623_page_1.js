[{"Owner":"JonathanRev","Date":"2017-08-29T02:06:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello good day / night guys_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am new on the comunity of babylonjs _co_ really happy to have found a great tool to make some games  _co_ i have a concern about if there is a way that according to the camera.position.y  it can change the scene_t_s properties _co_ for example like the fog if i am underwater and change it back to less fog if i am outside the water ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti_t_ve tried this _dd_  _qt_scene.getCameraByName(_qt_FreeCamera_qt_).position.y&lt_sm__eq_0_qt_     and   _qt_scene.getCameraByName(_qt_FreeCamera_qt_).position.y&gt_sm_0_qt_  _co_ but not sure if it is okey to set it inside the _dd_ scene.registerBeforeRender ? like this _dd_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tscene.registerBeforeRender(function() {\n_lt_/p_gt_\n\n_lt_p_gt_\n\t            if(scene.getCameraByName(_qt_FreeCamera_qt_).position.y&lt_sm__eq_0){\n_lt_/p_gt_\n\n_lt_p_gt_\n\t                // properties for camera when is inside water_lt_br /_gt_\n\t            }_lt_br /_gt_\n\t            if(scene.getCameraByName(_qt_FreeCamera_qt_).position.y&gt_sm_0){\n_lt_/p_gt_\n\n_lt_p_gt_\n\t                // properties for camera when is outside water_lt_br /_gt_\n\t            }_lt_br /_gt_\n\t    })_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twill this affect performance? _co_ or there is another way to detect camera positions to change properties according to the high level ? _co_ thanks in advance\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-08-29T18:15:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHiya JR_co_ welcome to the forum.  Good questions_co_ and you are doing it properly.  (although you can probably use _lt_em_gt_camera _lt_/em_gt_variable name... instead-of _lt_em_gt_scene.getCameraByName(_qt_FreeCamera_qt_)._lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYes_co_ it WILL affect performance_co_ so get your property changes done quickly_co_ and don_t_t do TOO MANY slow things inside of a registered before-render code-block.  But_co_ I think you_t_ll be pleasantly surprised at BJS_t_s _qt_motor power_qt_.  It_t_s a _qt_hot rod_qt_... and it usually wins every drag-race it enters.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tBe sure to _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/search/?&amp_sm_type_eq_forums_topic&amp_sm_nodes_eq_28_co_16_co_29_co_30_co_31_qt_ rel_eq__qt__qt__gt_search the forum_lt_/a_gt_ well_co_ on the subject of simulating underwater camera.  I know _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5292_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/_qt_ rel_eq__qt__qt__gt_@Dad72_lt_/a_gt_ has done some serious research into this_co_ so maybe he will come visit_co_ and tell us what he discovered.  Aside_dd_  PERHAPS fog is an engine-based effect_co_ and might not allow on-the-fly _qt_live_qt_ adjustments_co_ but I could easily be wrong._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_SOME folk might say that a post-process/shader would be best... for this challenge.  When your _qt_tests_qt_ indicate that the camera is under water_co_ you turn on a _qt_blue_co_ smeary_co_ wavy_qt_ post-process.  When out of the water_co_ you turn it off.  A docs search for _t_post-process_t_ returns _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/search?q_eq_post-process_qt_ rel_eq__qt_external nofollow_qt__gt_quite a large pile of information_lt_/a_gt_ about post-processes and renderPipeLine fun._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Welcome again!  I hope smarter people than I... respond soon.  Meantime_co_ you are doing just fine.  There is a feature in the F12 dev tools area of browsers... called _qt_profiling_qt_ or something like that.  Although I am not overly familiar with it_co_ rumor has it... that IT is THE BEST performance-testing thing ever.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Learn it well_co_ for God-like speed-testing/tweaking._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Hope this helps.  Stay tuned for more._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2017-08-29T18:43:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI use postprocess to make a realistic underwater effect. The fog did not give the effect I expected.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is what I do in the loop registerBeforeRender\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.scene.registerBeforeRender(() _eq_&gt_sm_ {\n\t// Underwater\n\tif(this.camera.position.y &lt_sm_ this.levelWater &amp_sm_&amp_sm_ this.blurIsActive _eq__eq_ false)\n\t{\n\t\tthis.postProcessblur0 _eq_ new BABYLON.BlurPostProcess(_qt_Horizontal blur_qt__co_ new BABYLON.Vector2(1.0_co_ 0)_co_ 20.0_co_ 1.0_co_ this.camera)_sm_\n\t\tthis.postProcessblur1 _eq_ new BABYLON.BlurPostProcess(_qt_Vertical blur_qt__co_ new BABYLON.Vector2(0_co_ 1.0)_co_ 20.0_co_ 1.0_co_ this.camera)_sm_\n\t\tthis.scene.ambientColor _eq_ new BABYLON.Color3(0_co_ 0.1_co_ 0.33)_sm_\n\t\tthis.blurIsActive _eq_ true_sm_\n\t} \n\telse if(this.camera.position.y &gt_sm_ this.levelWater &amp_sm_&amp_sm_ this.blurIsActive _eq__eq_ true){\n\t\tif(this.postProcessblur0)\n\t\t{\n\t\t\tthis.postProcessblur0.dispose()_sm_\n\t\t\tthis.postProcessblur1.dispose()_sm_\t\t\t\n\t\t\tthis.scene.ambientColor _eq_ new BABYLON.Color3(0.33_co_ 0.33_co_ 0.33)_sm_\n\t\t\tthis.blurIsActive _eq_ false_sm_\n\t\t}\n\t}\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tWhen the camera goes under water_co_ we activate BlurPostProcess and when the camera comes out of the water we dispose the effect.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-08-29T19:59:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWhy not just use scene.activeCamera to access the camera?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JonathanRev","Date":"2017-08-30T23:23:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWow it was a fast answer_co_ yes i_t_ve been trying this now _co_ you were right @_lt_strong_gt__lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/?do_eq_hovercard&amp_sm_referrer_eq_http%253A%252F%252Fwww.html5gamedevs.com%252Ftopic%252F32623-how-to-change-properties-on-the-scene-according-to-the-camera-position%252F%253Ftab%253Dcomments_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/_qt_ style_eq__qt_background-color_dd_transparent_sm_color_dd_inherit_sm__qt_ title_eq__qt_Go to Pryme8_t_s profile_qt_ rel_eq__qt__qt__gt_Pryme8_lt_/a_gt_ _lt_/strong_gt_ about the _qt_scene.activeCamera_qt_ _co_ it would be great to use the variable camera name as well _co_ not sure what you think guys ? i_t_ve also created the variables of the colors of the fog outside the scene.registerBeforeRender cause until i know if i set it inside it _co_ it will create that colors ilimited times? not sure if i am wrong?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    scene.fogMode _eq_ BABYLON.Scene.FOGMODE_EXP2_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    var colorfogwater _eq_ new BABYLON.Color3(10/255_co_ 80/255_co_ 130/255)_sm_  // blue underwater\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    var colorfogAmbient_eq_ new BABYLON.Color3(0.8_co_ 0.8_co_ 0.9)_sm_                     \n_lt_/p_gt_\n\n_lt_p_gt_\n\t    scene.registerBeforeRender(function() {\n_lt_/p_gt_\n\n_lt_p_gt_\n\t            if(scene.activeCamera.position.y&lt_sm__eq_0){\n_lt_/p_gt_\n\n_lt_p_gt_\n\t                scene.fogColor _eq_ colorfogwater_sm__lt_br /_gt_\n\t                scene.fogDensity _eq_ 0.008_sm__lt_br /_gt_\n\t            }_lt_br /_gt_\n\t            if(scene.activeCamera.position.y&gt_sm_0){\n_lt_/p_gt_\n\n_lt_p_gt_\n\t                scene.fogColor _eq_ colorfogAmbient_sm__lt_br /_gt_\n\t                scene.fogDensity _eq_ 0.00001_sm__lt_br /_gt_\n\t            }_lt_br /_gt_\n\t    })_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tit is not a profetional looks cause i am new _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ _co_ but i think i will try as @_lt_strong_gt__lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/?do_eq_hovercard&amp_sm_referrer_eq_http%253A%252F%252Fwww.html5gamedevs.com%252Ftopic%252F32623-how-to-change-properties-on-the-scene-according-to-the-camera-position%252F%253Ftab%253Dcomments_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5292-dad72/_qt_ style_eq__qt_background-color_dd_transparent_sm_color_dd_inherit_sm__qt_ title_eq__qt_Go to Dad72_t_s profile_qt_ rel_eq__qt__qt__gt_Dad72_lt_/a_gt_  _lt_/strong_gt_says about using postprocess instead \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/underwater.jpg.7e9e048ba2edc0d7ebf64b02fce7ffb1.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_14677_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/underwater.thumb.jpg.957977418276c54b3e44f6684bcc4ffc.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_underwater.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JonathanRev","Date":"2017-08-30T23:33:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tBtw anyone knows how to do the effect of refraction when i am underwater? cause i can not see the mountains from undertwater as you can see on the last image _co_ i_t_ve tried to use _dd_ water.backFaceCulling _eq_ true_sm_ but i get this result on the image _co_ the red line is supposed to be the ocean level as well\n_lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/underwater.jpg.847305e28c7d8c5292dc1ba8f062ecaf.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_14678_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/underwater.thumb.jpg.7dd266b97bc4563d073052afaf701ca1.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_underwater.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]