[{"Owner":"rainerpl","Date":"2016-10-05T02:23:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHi_co__lt_br /_gt__lt_br /_gt_\n\tIm relatively new to babylon_co_ and i find its animation_t_s api somewhat confusing._lt_br /_gt__lt_br /_gt_\n\tAtm_co_ my problem is making a game object jump forward. _lt_br /_gt_\n\tI managed to do that_co_ but the animation is applied to the object_t_s position coordinates in using world orientation._lt_br /_gt_\n\tIf my game object rotates e.g 90 degrees_co_ then the jump will be animated sideways_co_ not forward._lt_br /_gt__lt_br /_gt_\n\tHow can i tell the animation api to use local coordinates(translate property value ).\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-10-05T13:56:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi and very welcome to the forum. One thing that helps everybody to help you is for you to do an example in the Playground which people can then edit.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRead about it _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/generals/The_Playground_Tutorial_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_In the meantime there are alternatives to using the animation api. Use scene.registerAfter(Before)Render instead_co_ perhaps these will suit you better. These pages may help_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjsguide.github.io/intermediate/Translate_qt_ rel_eq__qt_external nofollow_qt__gt_Rotate and Translate_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjsguide.github.io/advanced/Rotate_qt_ rel_eq__qt_external nofollow_qt__gt_Rotate and Translate in Detail_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-10-05T13:58:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/23837-rainerpl/?do_eq_hovercard_qt_ data-mentionid_eq__qt_23837_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/23837-rainerpl/_qt_ rel_eq__qt__qt__gt_@rainerpl_lt_/a_gt__co_ welcome to the forum.  I_t_m no expert in animations_co_ either_co_ but I wanted to show you something.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1JBLBL%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1JBLBL#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis does not use animations_co_ but it uses .rotate and .translate_co_ done in local space.  Click on canvas_co_ then try your WASD keys.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe this will help you_co_ and maybe not.  For now_co_ let_t_s pretend spacebar is your _qt_do jump_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSOME experts know how to code keypress inputs... so you can hold W key (forward) and STILL use A_co_ D keys to steer_co_ and STILL use spacebar to jump.  I_t_m not sure how to do that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIF you CAN get steering to happen WHILE continuously moving forward or backward_co_ then the same can be done for jumping.  In other words... jumping would ONLY animate up and down... not forward or backward.  If coded better than I_co_ and IF spacebar is pressed WHILE moving forward or backward_co_ then it becomes a forward or backward jump.  (Because forward and backward keys are still held and remain operating WHILE the spacebar-jump happens.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ forward jump would be W key held... and tap spacebar.  Backward jump is S key held... and tap spacebar.  Left and right turns could do the same... HOLD W or S_co_ and STILL use A and D keys without interrupting backward/forward movement.  Maybe others will have ideas.  Perhaps someday_co_ someone will write the _qt_Driving A Player/Vehicle_qt_ tutorial_co_ eh?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSorry I could not be more help.  Here is an animation playground I once made_dd_  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#HH1U5%2357_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#HH1U5#57_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt shows some easing functions on the positional and rotational animation.  To make a good _qt_jump_qt_... I think you will need two animations.  First is the animation from ground... to height of jump.  It would use an ease-out.  You want player to leave the ground quickly_co_ and slow... as the player arrives at the jump height. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOnce at the jump height_co_ another animation would start... using ease-in.  Player would slowly leave jump height_co_ and arrive back at ground... at full speed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tANYWAY... I think... if you use these .translate and .rotate methods_co_ your local space problem will be gone_co_ but you will have a few more challenges ahead.  Good luck_co_ keep us posted.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPS_dd_  Here is a basic _lt_strong_gt_mouse_lt_/strong_gt_-based forward/backward/left/right thing... made specifically for a playground-sized canvas.  It can be adjusted for full screen.  Maybe not useful for you_co_ but I thought I should show it to you.  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1X4ODI%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1X4ODI#5_lt_/a_gt_   It uses .rotation _lt_strong_gt_property_lt_/strong_gt_ and not .rotate _lt_strong_gt_method_lt_/strong_gt__co_ but you know how to change that_co_ now_co_ if wanted. _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"rainerpl","Date":"2016-10-05T15:35:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHi_co__lt_br /_gt__lt_br /_gt_\n\tThanks for the answers._lt_br /_gt_\n\tAs i mentioned_co_ i already know how to make the character jump. I also have the character move with wasd_co_ and rotate using mouse._lt_br /_gt_\n\tWhat doesnt work_co_ is that rotating character does not effect the jump direction_co_ and thats the problem._lt_br /_gt_\n\tCharacter runs forward...jumps...everything works fine. _lt_br /_gt_\n\tIf character turns right...jumps...then he still jumps forward(sideways) according to world coordinates._lt_br /_gt__lt_br /_gt_\n\tSimple playground example is here._lt_br /_gt__lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#EPOE7_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#EPOE7_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tThe cube keeps moving back and forth between 2 points. Now_co_ press space and the cube will rotate. As you can see_co_ the rotation has no effect on the movement direction. I need to tell my animation api to use BABYLON.Space.LOCAL_co_ the same way i do in_dd_ object.translate(BABYLON.Axis.Z_co_ 0.4_co_ BABYLON.Space.LOCAL)_sm_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-10-05T16:16:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_146338_qt_ data-ipsquote-contentid_eq__qt_25594_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1475681712_qt_ data-ipsquote-userid_eq__qt_23837_qt_ data-ipsquote-username_eq__qt_rainerpl_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 10/5/2016 at 10_dd_35 AM_co_ rainerpl said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tand rotate using mouse.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tWhen you do this rotation_co_ are you use .rotation property... or .rotate() function?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(Wingy looks at the playground finally).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee_co_ I was hoping... that when using .rotate() ... the animation would magically correct itself.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#EPOE7%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#EPOE7#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(See my line 71.)  It didn_t_t work.  _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt_   Then I tried to trigger a done() function_co_ by setting the animation_t_s loop parameter to false.  What I was hoping... is that IF the animation was reset and restarted... it would use the rotated box local coordinates for its animation.  That failed also.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFellow forum helpers_co_ tap key to rotate animated box.  Notice that after box rotation_co_ animation still remains doing same motion.  rainerpl would like the animation to change orientation... after the box has changed orientation.  hmm.  *scratch scratch*  Good challenge.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-10-05T17:25:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTo use a local space animation I suggest not using the animations library but instead a small timeout function.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnimation library is here to animate value regardless of the meaning of this value. Here you aniamte object.position which is the position of the mesh in the world. So you animate world position _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tBut now let_t_s add a parent for your box_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#EPOE7%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#EPOE7#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs you can see_co_ now position is relative TO the parent and this could fix your issue\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"rainerpl","Date":"2016-10-05T18:39:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThanks for the reply._lt_br /_gt__lt_br /_gt_\n\tI ended up not using Babylon_t_s animation_co_ since it cant use local scope. _lt_br /_gt_\n\tI could use it by creating helper objects like Deltakosh suggested_co_ but i have lots of jumping/moving objects_co_ and that would add significant extra geometry and complexity._lt_br /_gt__lt_br /_gt_\n\tSo i decided to use GreenShock_t_s JS TimelineMax library to tween the positio property from n to n + 50_co_ and use the onUpdate callback to do the actual translation._lt_br /_gt_\n\tIt seems to work well.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-10-07T14:35:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tthat_t_s why I love Javascript_dd_) there is always a framework for your need.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"dbawel","Date":"2016-10-07T21:20:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m glad you found a solution. However for future reference_co_ as DK mentioned - I always use a parent node to provide the coordinate system by which objects are animated. And I often create a seperate parent for each of the 3 axis_t_ as this will often if not always provide as much flexbility in determining how your animation is defined and avoid reference to the world axis when necessary. Another method is to create a seperate parent for each type of transform - translate_co_ rotate_co_ and scale - as this will solve issues such as flipping and gimble lock - especially when utilizing Euler angles beyond -179 and 179 for rotations. Regarless of the framework_co_ I personally recommend to always provide additional center axis_t_ as parents for most any animated object - considering the animation and object type_co_ of course.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDB\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]