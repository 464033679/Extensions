[{"Owner":"ozRocker","Date":"2016-05-06T01:32:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve been exporting my animations using Babylon exporter 4.4.4.  I notice that the end result is missing a frame at the beginning or end so when the animation is looping there is a noticeable skip.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis is what my Blender animation looks like_dd_\n_lt_/p_gt_\n\n_lt_div class_eq__qt_ipsEmbeddedVideo_qt__gt_\n\t_lt_div_gt_\n\t\t_lt_iframe allowfullscreen_eq__qt_true_qt_ frameborder_eq__qt_0_qt_ height_eq__qt_344_qt_ src_eq__qt_https_dd_//www.youtube.com/embed/cyzbeDnL8ZY?feature_eq_oembed_qt_ width_eq__qt_459_qt__gt__lt_/iframe_gt_\n\t_lt_/div_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s a playground with those animations exported_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IGIDN_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IGIDN_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThese are my ranges_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__qt_ranges_qt__dd_[{_qt_name_qt__dd__qt_Idle_qt__co__qt_from_qt__dd_1_co__qt_to_qt__dd_199}_co_{_qt_name_qt__dd__qt_Run_qt__co__qt_from_qt__dd_201_co__qt_to_qt__dd_214}_co_{_qt_name_qt__dd__qt_Walk_qt__co__qt_from_qt__dd_216_co__qt_to_qt__dd_238}]_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI noticed there_t_s a frame gap between the ranges so I removed the gap.  \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__qt_ranges_qt__dd_[{_qt_name_qt__dd__qt_Idle_qt__co__qt_from_qt__dd_1_co__qt_to_qt__dd_199}_co_{_qt_name_qt__dd__qt_Run_qt__co__qt_from_qt__dd_200_co__qt_to_qt__dd_214}_co_{_qt_name_qt__dd__qt_Walk_qt__co__qt_from_qt__dd_215_co__qt_to_qt__dd_238}]_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBoth walk and run look smoother without that gap which you can see here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IGIDN%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IGIDN#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever they still appear to be missing a frame.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny ideas how I can fix this?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-06T14:47:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThis seems to be an issue with the exporter. I let _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ commenting here as he is the father of this exporter\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-05-06T15:11:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGuess that makes you the grandfather.  Yes_co_ the skipping frame issue was talked about 3 weeks ago.  Fact is I do not have a blend where the animation is smooth enough to know whether a frame was missing or not.  The change is probably going to be very small change to some looping check.  The gap is intentional though_co_ as just a sanity check.  Look at your .babylon.  Bet there is no frame 200_co_ or 215 in the file.  As of 4.4.4_co_ line breaks are put in every frame to make this easy to check.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe are still suffering are from the intro of Blender Actions as BJS animation ranges_co_ and support for inverse kinetics which were introduced in version 4.2.  It looks to bad to have a fifth bug fix version_co_ 4.4.5_co_ so I have already added a quick enhancement from 5.0 TOB to allow it to be 4.5.0 (an additional 10% in .babylon size).  If you provide a blend_co_ I can get to the bottom this.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-06T15:57:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ if it helps you can have a play with the Blender file I was using\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.punkoffice.com/downloads/blender_animations.zip_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.punkoffice.com/downloads/blender_animations.zip_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIts a 2MB .ZIP with .blend file and .jpg texture\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-06T23:16:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tGrandfather or godfather is fine to me _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ But you did so many great improvements that I could not be the father anymore !\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-05-09T16:37:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ I found the missing last frame.  Basically each action has a range element_co_ which is a 2 element array.  I was generating all the frame #_t_s from a function_co_ whose 2nd argument was an _qt_up to but including_qt_ type.  Add one_co_ and you get your missing frame.  I have also made the gap between animations ranges wider_co_ in addition to reducing the export file size about 10% more.  There will now be a gap of at least 5 frames_co_ starting on an even multiple of 10.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe exporter now logs more info for each action in_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_processing action Idle_dd_  in[0 - 200]_co_ out[0 - 200]\nprocessing action Run_dd_  in[0 - 15]_co_ out[210 - 225]\nprocessing action Walk_dd_  in[0 - 24]_co_ out[230 - 254]_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI have noticed that whatever you are doing to get the motion capture loaded_co_ there are non-integer frames being generated in the .blend.  The ranges are actually_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_action.frame_range 0.0 - 200.0\naction.frame_range 0.0 - 15.199993133544922\naction.frame_range 0.0 - 24.799991607666016_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tFYI_co_ I also listed each frame &amp_sm_ none of them is an integer.  Now when the export happens_co_ the exporter sets the scene to an integer _qt_frame_qt_ in time.  Blender interpolates between the 2 closest data points.  That is what is in the export. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need to build my own test before I PR.  Google drive is https_co_ so I doubt the browser is going to let me modify your playground.  You_t_re probably sleeping now.  Likely PR will be done by the time you are up.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-05-09T17:46:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOk_co_ no file reduction size for .babylon file users.  Here is the entire _lt_a href_eq__qt_https_dd_//googledrive.com/host/0B6-s6ZjHyEwUWjlZWFk1Q3I4SjA/_qt_ rel_eq__qt_external nofollow_qt__gt_scene_lt_/a_gt_ on google drive.  Still looks good_co_ even though _t_Walk_t_ is missing 0.799991607666016 frames.  Much better than missing 1.799991607666016 frames as before.  PR eminent.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-05-09T20:16:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ PR in progress.  Also noticed that my scene does not have for lack of a better term _qt_fucked up_qt_ left foot.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEven in the idle action_co_ the foot is wrong.  Did I do anything?  I am running a version of 2.4 that I built myself from Gulp on May 5th.  What is the playground running?  I saw something on Matrix.Lerp being wrong.  Do not know if this is in my file_co_ but I do have the companion max file_co_ if needed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-05-09T20:17:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI have noticed that whatever you are doing to get the motion capture loaded_co_ there are non-integer frames being generated in the .blend. \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYes Jeff I noticed that too when I looked at the files. Oz is using some Mixamo animation files - looks like the _qt_free samples_qt_ that include an _qt_idle_qt_ animation. I have this free sample so I imported it into Blender 2.76 in different two ways. ( A &amp_sm_ B in image below.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_A_dd__lt_/strong_gt_ animation loaded with the _qt_frame rate_qt_ in Blender set at 24fps. Result the last frame is 200 in the action editor.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_B_dd_ _lt_/strong_gt_animation loaded with the _qt_frame rate_qt_ in Blender set at 30fps. Result the last frame is 250 in the action editor.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I look at this idle animation in the Autodesk FBX Convertor - the last frame is 250.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tChecking the file oz posted above - it has that _qt_frame rate_qt_ value set to 24 which may explain those non-integer frames and why the last frame is 200.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_05/framerate1.png.d44b4acff2190827bc3a87e2cbed477b.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_7592_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_05/framerate1.png.d44b4acff2190827bc3a87e2cbed477b.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_framerate1.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-09T23:08:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThat_t_s correct.  They are standard Mixamo animations.  Yep_co_ I left the Blender framerate as the default.  I didn_t_t even think of changing it but I can see how that would cause some problems.  So there_t_s a fix for me to do.  thanks guys!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-05-10T06:47:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI left the Blender framerate as the default\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tOpen your Blender default scene_co_ change that setting to 30fps then go to File -&gt_sm_ Save Startup File. It will become the new default. I delete the Cube too and set the light to a Hemi.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-05-10T15:53:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYeah_co_ I should probably change my start up file too.  I must deleted that camera_co_ light_co_ &amp_sm_ cube a hundred times.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]