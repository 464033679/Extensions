[{"Owner":"vinhpt","Date":"2017-10-30T03:59:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi all!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease tell me what is Difference  between position_co_ rotationQuaternion of mesh and bone. Because when I apply same position and rotationQuaternion animations to same hierarchy parent-child meshes vs bones I get difference results - (bone-animations result seem wrong).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow to correct bone-animations?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-10-30T05:57:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi vinhpt!  Could you please show us the problem... using a BJS playground scene?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps you could start... with _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#E49AL%237_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#E49AL#7_lt_/a_gt_ and do some adjusting?  Feel free to make more SAVEs in that PG series_co_ and paste the new URL_t_s to this thread.  ie.  #8_co_ #9_co_ etc\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr perhaps that demo will answer your questions?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWingnut guess_dd_  One or many of your bones... already have unnoticed transformations applied.  Their rotationQuaternions are not 0_co_0_co_0_co_1 when animation starts.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am newbie for bones/skeleton stuff.  Smarter people will likely comment_co_ soon_co_ but... everyone LOVES having a _lt_em_gt_simple_lt_/em_gt_ playground that shows the problem.  thx.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vinhpt","Date":"2017-10-30T15:05:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy .babylons files is quite big so the playground not allow to save. So please see the .babylons file in this post_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- ken_box2.babylon (no bone and animation playing is correct). This can run auto direct on _lt_a href_eq__qt_http_dd_//sandbox.babylonjs.com/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//sandbox.babylonjs.com/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- ken_box.babylon (has bone but animation playing is wrong - compare bones positions with above meshes positions). Cannot run auto on sandbox so add this lines in function BABYLON.SceneLoader.Load\n_lt_/p_gt_\n\n_lt_p_gt_\n\t          scene.beginAnimation(_scene.skeletons[0].bones[0]_co_ 0_co_ 300_co_ false_co_ 1)_sm__lt_br /_gt_\n\t          scene.beginAnimation(_scene.skeletons[0].bones[1]_co_ 0_co_ 300_co_ false_co_ 1)_sm__lt_br /_gt_\n\t          scene.beginAnimation(_scene.skeletons[0].bones[2]_co_ 0_co_ 300_co_ false_co_ 1)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBoth files have the same X_co_ Y_co_ Z and Animations (the only difference is replace meshes &lt_sm_-&gt_sm_ bones)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want correct the has-bone file. Help me please! Thanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ data-fileid_eq__qt_15474_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_15474_qt_ rel_eq__qt__qt__gt_ken_box.babylon_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ data-fileid_eq__qt_15475_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_15475_qt_ rel_eq__qt__qt__gt_ken_box2.babylon_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-10-30T15:32:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbones matrix must be a difference matrix.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe final matrix used in shaders is the following one_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfinal _eq_ meshMatrix * (bone1Matrix * weight1 + .. + boneXMatrix * weightX)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vinhpt","Date":"2017-10-31T03:04:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Deltakosh!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for your reply but can you explain more in detail.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-10-31T22:26:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThe bone matrices are not full matrices but just a representation of the difference between a state (the current mesh world matrix) and new state\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]