[{"Owner":"JCPalmer","Date":"2017-11-20T22:21:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have been experimenting using the IK bone controller for moving legs.  The best I have been able to achieve is the knee going correctly with the foot facing backward.  I went back to the doc scene_co_ and wanted to replicate the problem_co_ but there are too many bones for Dude_co_ &amp_sm_ they are all named _t_bonexx_t__co_ where xx is the index.  First question_co_ what are the indexes of a calf &amp_sm_ thigh bones?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNext thing I did was turn off the animation_co_ leaving only the ik controller update in the before render.  Without the animation it is completely wrong_co_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1EVNNB%23103_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1EVNNB#103_lt_/a_gt_.  I know having a nice demo can be nice_co_ but more difficult if building up your own stuff where you are adding things as you get them worked out.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ I am using 3.0.  Were there any changes for this area for 3.1_co_ I need to be aware of?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-11-20T22:29:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAh_co_ Looking closer_co_ I am pretty sure why the pg is wrong when animation is turned off.  The animation turned the body_co_ so the target mesh is now in the wrong place.  Still leaves the othe 2 questions though.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-11-20T23:30:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPinging _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ id_eq__qt_ips_uid_2345_5_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ who designed the IK Bone controller for us\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(regarding 3.0 to 3.1 I see no change that should be a problem here)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-11-21T01:24:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_195865_qt_ data-ipsquote-contentid_eq__qt_34127_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1511216465_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t3 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tAlso_co_ I am using 3.0.  Were there any changes for this area for 3.1_co_ I need to be aware of?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tNo\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_195865_qt_ data-ipsquote-contentid_eq__qt_34127_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1511216465_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t3 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\twhat are the indexes of a calf &amp_sm_ thigh bones?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI don_t_t know.  What I did to find the arms was trial and error.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-11-21T15:54:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ after a few attempts of checking each bone in Dude in ascending order_co_ I guessed legs were last.  left calf is 55_co_ and left thigh is 54.  Turns out I can get it to work here_co_ so now I have something to go back and check against.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIMO_co_ I think this pg is much better than the one in the docs.  Especially since there is no animation which also turns the character 180 degrees.  _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1EVNNB%23104_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1EVNNB#104_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-11-21T19:36:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIMO_co_ it is important to show a demo where the animation is playing.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-11-21T20:23:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSorry_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt__co_ but had to un-solve.  I have problems getting this to work with my skeleton_co_ which comes from MakeHuman.  I constructed a very similar playgound_co_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#UVQWEI%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#UVQWEI#1_lt_/a_gt_.  Results are not as good.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe only thing I see different_co_ other than the mesh scaling_co_ is the differences in orientation. I thought x was red_co_ y was green_co_ &amp_sm_ z was blue.  Not sure what might need to be done.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_nate.jpg.5515091a124c2e0736a195a9f256f4e6.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15837_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/nate.jpg.5515091a124c2e0736a195a9f256f4e6.jpg_qt_ /_gt__lt_img alt_eq__qt_dude.jpg.881434a65ddb3cd6790f9e0725e5252e.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15838_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/dude.jpg.881434a65ddb3cd6790f9e0725e5252e.jpg_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2017-11-21T20:40:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tset up a function to swizzle the axes?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-11-21T21:20:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAlso went back to Blender.  I was expecting the Y &amp_sm_ Z axis to be swapped from the export_co_ but not the case. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/inBlender.jpg.665cfa348e8d1a9e6926983fff4ed913.jpg_qt_ data-fileid_eq__qt_15842_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15842_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/inBlender.thumb.jpg.b7f54f5e6d959cd1a38c99b6823272ee.jpg_qt_ alt_eq__qt_inBlender.thumb.jpg.b7f54f5e6d959cd1a38c99b6823272ee.jpg_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-11-22T02:37:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI’m on my phone right now so I wasn’t able to view the PG_co_ but it sounds like you may need to use the bendAxis feature.  That allows you to define the local axis the joint will bend on.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-11-22T15:41:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis looks better_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#UVQWEI%233_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#UVQWEI#3_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-11-22T15:59:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat did it.  After putting bendAxis in the GUI_co_ and trying  a few combinations_co_ I found setting x to -1 did it.  _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#UVQWEI%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#UVQWEI#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere are many different ways to come up with a good location for pole target.  Found could get one by only changing the Z axis to -1.  Actually the sliders really only did whole numbers.  Going to switch to fractions next to refine.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ I am going to need to do the same with the right leg_co_ so I thought I could use the same pole target for both_co_ saving a mesh.  There is still the poleTargetLocalOffset in case I wished different between the controllers.  When I went to check the source code for that_co_ I saw that you could also use a bone for pole target.  I have a root bone at 0_co_ 0_co_ -0.226.  Using 0 meshes sounds even better_co_ as long as getAbsolutePositionFromLocalToRef() is not vastly more expensive than TransformCoordinatesToRef().\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/bendAxis.jpg.4bf1f5c0aa121ed05a17dbb76fa0ffe5.jpg_qt_ data-fileid_eq__qt_15865_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15865_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/bendAxis.thumb.jpg.a762eda4f1c92a322a08632173db2e5d.jpg_qt_ alt_eq__qt_bendAxis.thumb.jpg.a762eda4f1c92a322a08632173db2e5d.jpg_qt_ /_gt__lt_/a_gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15866_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/root_bone.jpg.d4d173a75a061f9f7e084deafd416b04.jpg_qt_ alt_eq__qt_root_bone.jpg.d4d173a75a061f9f7e084deafd416b04.jpg_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-11-22T16:36:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tEpilogue_dd_  Using the root bone was perfect.  It worked for both feet.  The only thing I had to change for the right leg is pole angle from PI to 0.  I like when magic numbers work.  See (probably me 3 mos from now) _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#UVQWEI%235_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#UVQWEI#5_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]