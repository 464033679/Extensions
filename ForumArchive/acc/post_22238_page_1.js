[{"Owner":"Dal","Date":"2016-04-29T00:50:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m finding I need to have a direction light to light my scene and then a hemispheric light to add more natural ambient lighting. That only leaves 2 lights left for things like torches_co_ which is too limiting for what I_t_m trying to do._lt_br /_gt_\n\tAre there any plans to increase that limit? This seems to be the biggest limiting factor of the engine for me at the moment. Most other webgl engines seem to have multipass systems that allow a lot more lights in the scene._lt_br /_gt_\n\tFor example_co_ here_t_s a nice typescript example of mulitpass lighting in away3d_dd_ _lt_a href_eq__qt_https_dd_//github.com/awayjs/awayjs-examples/blob/master/src/Advanced_MultiPassSponzaDemo.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/awayjs/awayjs-examples/blob/master/src/Advanced_MultiPassSponzaDemo.ts_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m considering digging into the code to try to increase that limit somehow but I wonder if there_t_s a reasoning behind it?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2016-04-29T12:29:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Dal_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo increase the light limit you will have to change the default shader to support more than 4 lights.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe reason for the 4 lights limit is (mainly) performance. Light calculations are relatively expensive. If you simply add a light_co_ even a small point light with a distance limit_co_ it actually affects all of the meshes_t_ rendering.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can_co_ however_co_ overwrite those limitations in a different way - each light has a list of meshes it influences OR a list of meshes it should ignore. So if you have a torch on a wall_co_ it should only influence the wall and (maybe) your character. This way you will have better performance and you could define as many lights as you wish.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe lists are called_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tlight.includedOnlyMeshes AND/OR light.excludedMeshes . Add meshes to those lists to control which meshes the light influences.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-29T15:39:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126739_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1461932964_qt_ data-ipsquote-userid_eq__qt_10310_qt_ data-ipsquote-username_eq__qt_RaananW_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ RaananW said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHi Dal_co_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tTo increase the light limit you will have to change the default shader to support more than 4 lights.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tThe reason for the 4 lights limit is (mainly) performance. Light calculations are relatively expensive. If you simply add a light_co_ even a small point light with a distance limit_co_ it actually affects all of the meshes_t_ rendering.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tYou can_co_ however_co_ overwrite those limitations in a different way - each light has a list of meshes it influences OR a list of meshes it should ignore. So if you have a torch on a wall_co_ it should only influence the wall and (maybe) your character. This way you will have better performance and you could define as many lights as you wish.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tThe lists are called_dd_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tlight.includedOnlyMeshes AND/OR light.excludedMeshes . Add meshes to those lists to control which meshes the light influences.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHey thats cool! I didnt know about that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat gives me an idea for a script that goes through all meshes in the scene_co_ picks which lights influence it most and _qt_subscribes_qt_ itself to those. Could that work? The only issue I can see is what about things like the terrain... the mesh can be very large and_co_ even though we can turn off lights that are far away_co_ with the terrain they might still be very much visible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow do other engines achieve lots of lights in their forward renderers? From what I_t_ve read_co_ deferred lighting would cause a lot headaches with transparency and PBR but could we maybe implement a better multipass approach like Away3d? _lt_a href_eq__qt_http_dd_//typescript.away3d.com/examples/Advanced_MultiPassSponzaDemo.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//typescript.away3d.com/examples/Advanced_MultiPassSponzaDemo.html_lt_/a_gt__lt_br /_gt_\n\tThey_t_ve already ported it all to Typescript and it_t_s under Apache license too_co_ so perhaps we could use it? _lt_a href_eq__qt_https_dd_//github.com/awayjs/awayjs-renderergl/blob/master/lib/shaders/LightingShader.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/awayjs/awayjs-renderergl/blob/master/lib/shaders/LightingShader.ts_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBeing able to add lots of lights to the scene is really the only weakness I can see in Babylon now vs all the other webgl engines out there... in most other ways it complete dominates _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tp.s. They also have cascading shadows implement which we also need in Babylon _lt_a href_eq__qt_https_dd_//github.com/awayjs/awayjs-display/blob/master/lib/materials/shadowmappers/CascadeShadowMapper.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/awayjs/awayjs-display/blob/master/lib/materials/shadowmappers/CascadeShadowMapper.ts_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-04-29T16:30:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126763_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1461944392_qt_ data-ipsquote-userid_eq__qt_17567_qt_ data-ipsquote-username_eq__qt_Dal_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t46 minutes ago_co_ Dal said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tbut could we maybe implement a better multipass approach like Away3d? _lt_a href_eq__qt_http_dd_//typescript.away3d.com/examples/Advanced_MultiPassSponzaDemo.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//typescript.away3d.com/examples/Advanced_MultiPassSponzaDemo.html_lt_/a_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThis might be a good idea. . .\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-29T16:38:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHow do other engines achieve lots of lights in their forward renderers? \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAre you really sure of that?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe can have 10000 lights per scene. The limitation is only per mesh.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-04-29T16:40:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI do not know if that works_co_ but remember this question_dd_ _qt_Is a mesh really being lit if it cannot be seen in the current frame?_qt_ (similar to does a falling tree make a sound if there is no one there to hear it?)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne way to seemingly get more lights than you actually have_co_ is to put a light on the camera.  Call it _qt_just in time lighting_qt_.  The customers of your game will neither know nor care_co_ that unseen parts of your scene are being virtual photon starved.  The camera light does not have to be the only light or full strength_co_ but now everything does not have to be lit at all times. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would argue if those other webgl games force the simpleton concept that you have to have lights all over the place_co_ they are the weak ones.  In webgl 1.0_co_ the # of vertex uniforms is very limited on mobile platforms.  Lights compete with bones.  Bad things can happen when you run out.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var camera _eq_ new BABYLON.FreeCamera(...)_sm_\nscene.activeCameras.push(camera)_sm_ \ncamera.attachControl(canvas)_sm_\n        \nvar light _eq_ new BABYLON.PointLight(_qt_spot_qt__co_ BABYLON.Vector3.Zero()_co_ scene)_sm_\nlight.intensity _eq_ 1_sm_\nlight.specular _eq_ new BABYLON.Color3(.1_co_ .1_co_ .1)_sm_\n        \nscene.beforeCameraRender _eq_ function () {\n    light.position _eq_ camera.position_sm_\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-29T16:53:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCan_t_t agree more with JCPalmer. We are under a really limited resources constraint.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHaving 4 lights already generate shaders almost not renderable on some devices_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs.com/Demos/Lights/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/Demos/Lights/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo the real question is_dd_ Do you REALLY need 4 dynamics lights on a specific object? Dynamic means_dd_ the light HAS to move. Else you are wasting resources. If lights are not moving_co_ just use a baked texture _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-29T17:44:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tPerhaps what I am looking for is more like a light manager system in that case..._lt_br /_gt_\n\tMaybe when lights or meshes are added/removed/moved in the scene_co_ the LightingManager will evaluate which meshes should be affected by the light. For a pointlight or spotlight we should only get the meshes within a radius. For a moving player character_co_ we should only pick the most important lights rather than an arbitrary first 4 in the scene?).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve just made a little test in PlayCanvas_dd_ _lt_a href_eq__qt_https_dd_//playcanvas.com/project/395318/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playcanvas.com/project/395318/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not familiar with their tools so its not very good_co_ but what I am trying to show is that given a large terrain with lots of lights_co_ it would be hard to pick which lights to use... in this playcanvas scene the _qt_terrain_qt_ receives more than a dozen different lights - because of its size it comes under the influence of a lot of different lights._lt_br /_gt_\n\tFor an outdoor scene_co_ if we assume a directional light for the sun is essential_co_ and then we probably need a hemispherical light to give us some basic global illumination_co_ we only have 2 light slots left on that huge terrain. Sure we can switch them off based on distance but its going to be noticable. _lt_br /_gt__lt_br /_gt_\n\tAlso_co_ why not enable the shader to support more lights but have some flags to limit them rather than hard limits? The scene optimizer could limit the lights or enable more as part of the auto-optimization process.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-29T18:40:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tActually... thinking about it_co_ in most cases where I need _qt_dynamic_qt_ lights_co_ I don_t_t need them completely dynamic... lightmapping could work_co_ they just need to be updatable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps baking the lights to a texture could allow a lot of lights on the terrain but then the map would need to be updated for night/day transitions and when lights are switched on/off and such._lt_br /_gt_\n\tIf we had something like we have with the shadow renderer where we can cast shadows but set it to update 0 to render only once....we could render lights to a texture but only update them when something changes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen the character walks close to a fire_co_ the dynamic light can be enabled and set to affect ONLY the character(s) in range_co_ but when no character is in range the light can be switched off and fall back to the lightmap. Perhaps an octree could be used to pick which lights should be considered by the camera_co_ and then the light manager should check to see which of those lights are within range of a character_co_ and if they are_co_ it enables a dynamic light but ONLY affecting those characters which are in range.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes that kind of system sound like it might work?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-04-29T18:44:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ is there a way to _qt_freeze_qt_ a light (or the material(s) regarding the given light) in the scene if we know it is immobile for ever once created in order to get best perfs ?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-29T23:09:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo it could be cool to have an automatic lightmapper_co_ I agree_dd_) need to add it to our roadmap\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut so far_co_ you can already have some kind of light manager_dd_ every light has a range. Objects outside the range are automatically removed from light influence list. So you can have dozens of lights. As long as you limit the range_co_ this could work \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-29T23:10:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt__dd_ the perf cost is inside the shader unfortunately. The only way to freeze it is with a lightmap\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-29T23:51:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126800_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1461955202_qt_ data-ipsquote-userid_eq__qt_17567_qt_ data-ipsquote-username_eq__qt_Dal_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t18 hours ago_co_ Dal said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tPerhaps baking the lights to a texture could allow a lot of lights on the terrain but then the map would need to be updated for night/day transitions and when lights are switched on/off and such.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHi guys.  Sorry to butt-in_co_ but I _lt_em_gt_had to_lt_/em_gt_ show Dal my _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#KVRKS%236_qt_ rel_eq__qt_external nofollow_qt__gt_stupid streetlight demo_lt_/a_gt_.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe the important thing to note... is that each white circle on the roadway... is a texture on a plane... blended with the roadway material beneath.  Take note that I made this demo LONG before I knew anything about textures_co_ so I just blindly activated everything until it worked.  I_t_m sure there are many wasted properties set on my _qt_light circle_qt_ material.  The main thing is... I got it done.  I faked 15 lights on a single material... and without any baking or lightmap crap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s pretend a hallway in a fancy hotel... gaslights lining the walls... a nice patterned wallpaper.  You could use my _qt_white-out_qt_ circle on the walls behind each gaslight.  Then add a single REAL directional light... parented to the player.  Then_co_ as a player passes the gaslight_co_ you light-them up with the directional light that they are actually carrying with them. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee how my box lights-up as it passes under the street lights?  Pure fake_co_ baby.  The light that lights the box... is carried _lt_u_gt_by_lt_/u_gt_ the box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBUT... my roadway is NOT a paisley print wallpaper.  SOME testing would need to happen... to see how well the wallpaper pattern behind the gaslights... would show-through the white circle.  Sure_co_ the white circle over-layed texture _lt_u_gt_could_lt_/u_gt_ be bright enough to _qt_wash out_qt_ the wall paper pattern.  But_co_ in reality_co_ the wall paper pattern SHOULD remain somewhat visible_co_ even with the white circle texture layered atop.  Fine tuning.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI LOVE foolery_co_ don_t_t you?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  All in all_co_ I just wanted to give you some other options to think about.  There is another user who is/was grappling-with multi-lights_co_ recently_co_ too.  His forum thread is _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/20896-lights-for-my-horror-corridor/_qt_ rel_eq__qt__qt__gt_right here_lt_/a_gt_.  Good light discussions went-on in that thread.  Be well!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-30T02:52:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGreat example!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut you know what? I decided to give more flexibility here !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo please let me introduce with StandardMaterial.maxSimultaneousLights!!!! By default this parameter is 4 to keep everything backward compatible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut guess what? YOU CAN NOW CHANGE IT_dd__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#IRVAX%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#IRVAX#0_lt_/a_gt_ (yeah there is 6 dynamics lights here!)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut you must be warned_dd_ with great power comes great responsibility. With more lights_co_ it will be easier to reach mobile devices limitation. Babylon.js will take care of it by deactivating lights but it will do it blindly (ohohoh! blindly with lights)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-30T12:50:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWow!  THANKS DK!  This is great!  And what a fun introduction post!  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_  You are a _qt_nut_qt_!  Well on your way to earning your _qt_Wing_qt_.  Congrats on the quality feature-add_co_ and congrats to Dal on the back-alley contribution to BJS.  Well done_co_ guys.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2016-04-30T12:58:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWoaw_co_ super. Thanks DK\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-30T13:01:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWow! Thanks _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ this is really useful! So now in theory_co_ if I increase the limit a little_co_ and make all the pointlights have a range the same size as the area they light_co_ then it should allow me to have quite a lot of lights running in the scene? I will have to test this out._lt_br /_gt_\n\tI guess with a large terrain_co_ we really do need to use lightmapping though_co_ since we could have e.g. 20 houses on our terrain and all of them need to cast lights_co_ and they could theoretically all been seen at once as we approach the town_co_ but it will be too expensive to run 20 lights._lt_br /_gt__lt_br /_gt_\n\tAs a temporary hack_co_ could the shadowrenderer be inverted somehow? So instead of painting the black region into the shadow map we paint a light area in the lightmap of everything inside a cone and subtract the shadow? That wouldn_t_t take care of bounces and proper falloff and such_co_ but it might be enough to make a spot on the terrain like in Wingnut_t_s demo without having to do it manually?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-30T13:05:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Dal.  Did you mean to say... _qt_All of the houses need to cast _lt_strong_gt_shadows_lt_/strong_gt__qt_ (not lights)?  One point light sun_co_ 10_co_000 houses with shadows... no problem.  _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tOh wait_co_ do point lights do shadows?  I forget.  I think they do... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LYCSQ%2312_qt_ rel_eq__qt_external nofollow_qt__gt_hot new feature_lt_/a_gt_. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t(see line 41_co_ Dal?  Ya just cram all your buildings into the shadow generator_t_s renderList.  You probably knew all this already_co_ and I have wandered off-topic)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-30T13:23:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126875_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462021559_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t9 minutes ago_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHi Dal.  Did you mean to say... _qt_All of the houses need to cast _lt_strong_gt_shadows_lt_/strong_gt__qt_ (not lights)?  One point light sun_co_ 10_co_000 houses with shadows... no problem.  _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tOh wait_co_ do point lights do shadows?  I forget.  I think they do... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#LYCSQ%2312_qt_ rel_eq__qt_external nofollow_qt__gt_hot new feature_lt_/a_gt_. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t(see line 41_co_ Dal?  Ya just cram all your buildings into the shadow generator_t_s renderList.  You probably knew all this already_co_ and I have wandered off-topic)\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tNo_co_ I do mean cast lights... if you think about it_co_ in your streetlight demo_co_ a pointlight really just draws a circle of light onto the ground. Its kind of like casting an anti-shadow _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t The pointlight shadow mapper works out all the areas that should be dark and draws it to the shadow map. I_t_m wondering if its code could be hacked so that it just makes everything lighter that is within its radius_co_ EXCEPT the shadow area.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-04-30T13:35:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh...  you mean... the houses/buildings cast light through their windows?  ohhh.  Sorry.  Yeah_co_ an inverse shadow map...  interesting.  A pointLight inside the building_co_ shining through a tiled window_co_ would make tile-shaped brighter-spots on the ground outside.  Yeah_co_ that would be... something to behold.  Good idea.  Well_co_ an interesting idea... kind of scary.  heh\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWould .shadowColor do it?  I don_t_t think it exists_co_ but maybe.  Or_co_ as you suggested... a lightShadowRendererThingy.  _lt_a href_eq__qt_https_dd_//www.getawaytoday.com/content/blog/images/crafts/IndoorFireworks/finished.jpg_qt_ rel_eq__qt_external nofollow_qt__gt_Silhouetter v1.0_lt_/a_gt_  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_anti-shadow_qt_  haha.  Good comedy_co_ but good description_co_ too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-30T13:55:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126878_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462023301_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t13 minutes ago_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tWould .shadowColor do it?  I don_t_t think it exists_co_ but maybe.  Or_co_ as you suggested... a lightShadowRendererThingy.  Silhouetter v1.0  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tWell_co_ it would have to be a bit smarter than that... shadowColor would just mean our trees will shine a tree-shaped light onto the ground beside them. We need to invert the shape.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe way I would probably attempt it (with no previous knowledge of this kind of thing) is to create a sphere around the light which has its area of effect_co_ then apply light to the lightmaps of all objects that fall inside it_co_ and subtract the shadowmap from it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-30T14:09:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126835_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1461984767_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t11 hours ago_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tBabylon.js will take care of it by deactivating lights but it will do it blindly (ohohoh! blindly with lights)\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tCan you make it switch off lights in order of light type?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf we switch off pointlights first_co_ then hemispheric_co_ then directional I think it would be much better.  Most scenes have a sun directional light and/or hemispheric ambient lighting so those should switch off last. The point lights are used more for light sources that move around in the scene_co_ so those are less important. We should never switch the sun off just because we_t_re too close to a fireplace _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tp.s. Can this also work with the PBRMaterial?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-04-30T14:22:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tjust a side question _dd_ how do we edit a topic title in this forum ?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-04-30T14:24:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126882_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462026128_qt_ data-ipsquote-userid_eq__qt_5453_qt_ data-ipsquote-username_eq__qt_jerome_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tJust now_co_ jerome said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tjust a side question _dd_ how do we edit a topic title in this forum ?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\ti think this is one of impossible stuffs in world _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-04-30T14:24:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_126882_qt_ data-ipsquote-contentid_eq__qt_22238_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1462026128_qt_ data-ipsquote-userid_eq__qt_5453_qt_ data-ipsquote-username_eq__qt_jerome_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 minute ago_co_ jerome said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tjust a side question _dd_ how do we edit a topic title in this forum ?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI did it by just editing the first post. If you edit the OP you have the option to edit the topic.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]