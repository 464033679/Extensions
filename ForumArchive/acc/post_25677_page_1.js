[{"Owner":"rainerpl","Date":"2016-10-10T16:41:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co__lt_br /_gt__lt_br /_gt_\n\tIm looking for a way to place objects relatively to other nested objects. ( objects that have a chain of parents that have been moved_co_ rotated )._lt_br /_gt_\n\tI searched the docs but couldnt find anything that could do what im looking for._lt_br /_gt__lt_br /_gt_\n\tIve tried position.add / addToRef etc but they dont take object_t_s rotation/parent chain into account._lt_br /_gt__lt_br /_gt_\n\tAn example of what id like to do_dd__lt_br /_gt_\n\t  A player turns 90 degrees in x direction. A weapon that is parented to the player_co_ turns another _qt_n_qt_ degrees._lt_br /_gt_\n\t  Now_co_ how would i put a bullet at the tip of the weapon. ( without setting its parent _eq_ weapon )._lt_br /_gt_\n\t  After the bullet is created_co_ it would move/follow objects in global space/coordinate system._lt_br /_gt_\n\t  _lt_br /_gt_\n\tin pseudo code_dd__lt_br /_gt_\n\tbullet _eq_ new Bullet()_sm_//extends Mesh._lt_br /_gt_\n\tbullet.position _eq_ player.weapon.position.clone().translate(BABYLON.Axis.Z_co_ weapon_barrel_length_co_ BABYLON.Space.LOCAL)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNote_dd_ position object doesn_t_t have translate function_co_ only mesh. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy actual case is a bit different but this example explains it better._lt_br /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-10-10T16:44:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor every mesh_co_ you can get mesh.getWorldMatrix().\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFrom this world matrix_co_ just call matrix.getTranslation(0 and you_t_re good to go _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"rainerpl","Date":"2016-10-10T17:06:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tGreat_co_ ill give it a try soon and see how it works._lt_br /_gt__lt_br /_gt_\n\tI was looking at the source code for_dd__lt_br /_gt_\n\tlocallyTranslate_eq_function(t){this.computeWorldMatrix(!0)_co_this.position_eq_e.Vector3.TransformCoordinates(t_co_this._localWorld)}_co__lt_br /_gt__lt_br /_gt_\n\tLooks like it does something similar_co_ but yeah_co_ i didnt know what _qt_e_qt_ is was in the code_co_ and whats the thing with ( !0 ) in compute matrix call.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"rainerpl","Date":"2016-10-10T17:43:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_146815_qt_ data-ipsquote-contentid_eq__qt_25677_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1476117892_qt_ data-ipsquote-userid_eq__qt_4442_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t4 hours ago_co_ Deltakosh said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHello\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tFor every mesh_co_ you can get mesh.getWorldMatrix().\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tFrom this world matrix_co_ just call matrix.getTranslation(0 and you_t_re good to go _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI tried the matrix.getTranslation_co_ but it returns exactly the same object that i can get using _lt_br /_gt__lt_span style_eq__qt_color_dd_rgb(34_co_34_co_34)_sm_font-family_dd_Consolas_co_ _t_Lucida Console_t__co_ monospace_sm_font-size_dd_12px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_pre-wrap_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_mesh.getWorldMatrix().getTranslation() seems to be same as mesh.position_lt_/span_gt__lt_br /_gt__lt_br /_gt_\n\tIm not sure how i can use it to get a point relative to the mesh._lt_br /_gt_\n\tAll changes to _lt_span style_eq__qt_color_dd_rgb(34_co_34_co_34)_sm_font-family_dd_Consolas_co_ _t_Lucida Console_t__co_ monospace_sm_font-size_dd_12px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_pre-wrap_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_mesh.position are done in global space_co_ not local._lt_br /_gt__lt_br /_gt_\n\tI could probably do something like this to get the point_co_ but its a hack and id rather use a nicer solution._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt__lt_span style_eq__qt_color_dd_rgb(34_co_34_co_34)_sm_font-family_dd_Consolas_co_ _t_Lucida Console_t__co_ monospace_sm_font-size_dd_12px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_pre-wrap_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_mesh.translate(BABYLON.Axis.Z_co_ 2_co_ BABYLON.Space.LOCAL)_sm__lt_/span_gt__lt_br /_gt_\n\tvar relative_point _eq_ mesh.position.clone()_sm__lt_br /_gt_\n\t//move mesh back to undo the translation._lt_br /_gt__lt_span style_eq__qt_color_dd_rgb(34_co_34_co_34)_sm_font-family_dd_Consolas_co_ _t_Lucida Console_t__co_ monospace_sm_font-size_dd_12px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_pre-wrap_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_mesh.translate(BABYLON.Axis.Z_co_ -2_co_ BABYLON.Space.LOCAL)_sm__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t/* Quick Update - I found a solution that works in my case. Below is what i used for future readers. */_lt_br /_gt_\n\trelative_pos _eq_ player.calcMovePOV(0_co_ 0_co_ 10)_sm__lt_br /_gt_\n\tworld_matrix _eq_ player.getWorldMatrix()_sm__lt_br /_gt_\n\tworld_translation _eq_ world_matrix.getTranslation()_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tworld_obj.position _eq_ world_translation.add(relative_pos)_sm_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]