[{"Owner":"Ericky14","Date":"2018-01-17T18:12:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am trying to create a TextBlock with textwrapping and wait until the _lines property has been calculated. Is there any sure way of doing that? Maybe some function I can call to have it calculated instead of having to use an observable. (Also_co_ the TextBlock is child to a StackPanel)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRight now I am creating the TextBlock and using TextBlock.onDirtyObservable and inside that I check TextBlock._lines. However_co_ this value can sometimes be wrong as I have seen. This seems to be due to _context.measureText returning different values at times. I observed this behavior when I force reload the page_co_ if I just reload it normally the _lines property is properly computed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe there is some kind of caching on the canvas context or something that makes it return different text widths?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny help on this would be appreciated.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-01-18T12:47:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHiya E.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    Let me imagine-up something...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tscene.executeWhenReady(function(){_lt_br /_gt_\n\t     myTextBlock.isVisible(false)_sm__lt_br /_gt_\n\t     var linesArray _eq_ myTextBlock._lines_sm__lt_br /_gt_\n\t     [...demented before-textBlock-display experiments...]_lt_br /_gt_\n\t     myTextBlock.isVisible(true)_sm__lt_br /_gt_\n\t})_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWould THAT give you a solution?  You could do stuff to the _lines array... prior to textBlock display.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut don_t_t expect the textBlock to update its measurements... AFTER you adjust stuff.  Babylon GUI doesn_t_t enjoy trying automatic _qt_late-measuring_qt_. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you really know what you are doing_co_ you can tweak the measurement numbers manually_co_ yourself.  The tweaks might not respond as you want_co_ though.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ again_co_ it_t_s better to dispose stale/unwanted textBlocks_co_ and make new ones_co_ whenever CERTAIN changes are wanted.  There is no HTML browser-like _qt_automatic re-flow_qt_... in BABYLON GUI.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope this helps.  I think you might be wishing-for GUI features... that are impossible_co_ due to the way GUI operates.  Not sure_co_ though.  If you can give us a few more details about what you wish to do_co_ that might help.  Are you going to try re-wrapping_co_ or maybe in-text font sizings/colorings?  Do tell more_co_ if you would/can.  Thx.  Party on.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Ericky14","Date":"2018-01-18T15:16:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSorry_co_ that_t_s not what I meant.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI meant I want to do something like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var panel _eq_ new StackPanel\n\nvar myTextBlock _eq_ new TextBlock\n\nmyTextBlock.fontSize _eq_ _t_20px_t_\n\nmyTextBlock.text _eq_ _t_Testing text_t_\n\nmyTextBlock.textWrapping _eq_ true\n\nvar height _eq_ myTextBlock._lines.length * 20\n\npanel.height _eq_ `${height}px`\n\npanel.addControl(myTextBlock)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tBut this is not currently possible because the _lines property is not even set as soon as you create the TextBlock. You have to wait for the next few frames.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ I was wondering if there is an internal function I can call to take the measurements as soon as I set all the TextBlock properties.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2018-01-18T15:31:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThe internal function that initializes lines is _parseLineWithTextWrapping - it_t_s protected_co_ so API could change any time_dd__lt_br /_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/gui/src/controls/textBlock.ts#L160_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/gui/src/controls/textBlock.ts#L160_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tThe WebGL call to measure text only returns width_co_ but you could write your own loop like that to measure height - just need width of container.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-01-18T21:34:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tWe could imagine adding an observable that could be raised when the lines array is built?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Ericky14","Date":"2018-01-18T21:38:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat makes sense _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/25365-brianzinn/?do_eq_hovercard_qt_ data-mentionid_eq__qt_25365_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/25365-brianzinn/_qt_ rel_eq__qt__qt__gt_@brianzinn_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ That would be very helpful _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-01-18T21:53:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIt will be in next commit _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_1_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]