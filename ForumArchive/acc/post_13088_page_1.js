[{"Owner":"JCPalmer","Date":"2015-03-12T20:19:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Am playing with a 2 camera playground that I did not originally write.  Made it so there was a layerMask on one of the cameras that matched that of the 2 meshes.  Thought I should have only gotten 2 visible meshes_co_ but both cameras saw the meshes &amp_sm_ got 4.  What am I going wrong?_lt_/p_gt__lt_p_gt_Thanks_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Jeff_lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IG874%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IG874#14_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-12T23:18:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Nothing wrong but by default camera has a mask of 0xFFFFFF which works with all meshes because the selection is done with a binary and_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_if (cam.layerMask &amp_sm_ mesh.layerMask) then render mesh_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-03-13T17:14:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok_co__lt_/p_gt__lt_p_gt_So as far as making a dialog system goes_co_ dialog meshes can be excluded from the application_t_s / scene camera by setting the layerMask of the scene camera with no bits lining up to the dialog meshes._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I also have a requirement to implement a modal stack of dialogs. Dialog panels not on the top of the stack can have layerMask of 0_co_ and no one can see them._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Still have an issue of the dialog system_t_s camera drawing scene meshes too_co_ since default layerMask of Mesh is also 0xFFFFFF.  Perhaps the camera.viewport setting could help (not familiar with its use in BJS yet).  What if I positioned all dialog meshes near (0_co_ 0_co_ 100000)?  Then the dialog sys camera would have to be so far away from scene meshes_co_ as to not be visible._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If a way cannot be found_co_ will just have to switch off scene camera._lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IG874%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IG874#15_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-03-13T18:12:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thinking about it_co_ switching the scene camera off will not get the scene meshes out of the dialog system_t_s camera.  But looking at that 0xFFFFFF.  It is way too small to include everything.  Max of  signed integer is 0x7FFFFFFF.  I tried a mask of 0x10000000_co_ but did not work.  Seems like the mesh default is so aggressive.   Could its scope be backed off by a few bits?  Or am I just missing something?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-13T22:06:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_Can you repro on the playground? I did not get why 0xFFFFFF is too small. If you want multi-layer dialogs_co_ you can set 0x000001 to layer 1_co_ 0x000002 to layer 2 and so on_lt_/span_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-03-14T17:14:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The issue is not the dialog system_t_s meshes.  Want to be able to add this as an extension into a scene written by anyone.  I can restrict the extensions meshes_co_ because I explicitly assigned them a layerMask.  Extension meshes only show up in the extensions camera_co_ by temporarily setting the game camera_t_s layer mask to something that will not show them._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The games meshes are assumed to be defaulting on layermask.  What can I do so that they do not show in BOTH cameras?  In repo_co_ changed game camera mask to 0x000001. Repo has 3 meshes_dd__lt_/p_gt__lt_ol_gt__lt_li_gt_Colored ground representing game mesh_co_ default mask (shows in both cameras)_lt_/li_gt_\t_lt_li_gt_Box representing dialog on stack_co_ mask 0_co_ seen by none_lt_/li_gt_\t_lt_li_gt_sphere representing current dialog_co_ seen only by dialog camera._lt_/li_gt__lt_/ol_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IG874%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IG874#16_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-14T17:50:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_For this specific case_co_ the only solution I can see is to browse all meshes beforehand and set their layerMask_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-03-14T18:25:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I agree_co_ except for trying to build the Dialogs far from &amp_sm_ pointing the camera away from (0_co_ 0_co_ 0)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But cannot 1_co_ 2_co_ or 4 bits be carved out the Mesh default?  Defaulting Meshes would still be visible in millions of possible cameras.  Instead of_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_public layerMask_dd_ number _eq_ 0xFFFFFFFF_sm__lt_/pre_gt__lt_p_gt_In the case of 4 bits_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_public layerMask_dd_ number _eq_ 0x0FFFFFFF_sm__lt_/pre_gt__lt_p_gt_Think this would allow for 15 _qt_special_qt_ cameras_dd__lt_/p_gt__lt_p_gt_0x10000000_lt_/p_gt__lt_p_gt_0x20000000_lt_/p_gt__lt_p_gt_0x30000000_lt_/p_gt__lt_p_gt_0x40000000_lt_/p_gt__lt_p_gt_0x50000000_lt_/p_gt__lt_p_gt_0x60000000_lt_/p_gt__lt_p_gt_0x70000000_lt_/p_gt__lt_p_gt_0x80000000_lt_/p_gt__lt_p_gt_0x90000000_lt_/p_gt__lt_p_gt_0xA0000000_lt_/p_gt__lt_p_gt_0xB0000000_lt_/p_gt__lt_p_gt_0xC0000000_lt_/p_gt__lt_p_gt_0xD0000000_lt_/p_gt__lt_p_gt_0xE0000000_lt_/p_gt__lt_p_gt_0xF0000000_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-14T19:29:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_No problem on my side_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-03-16T16:33:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Ok.  Just verified by explicitly setting game mesh &amp_sm_ camera to proposed new default.  Then I set Dialog camera &amp_sm_ current dialog to 0x10000000.  Left suspended dialog  at 0.  Only 2 meshes seen_co_ by the appropriate camera.  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1IG874%2317_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1IG874#17_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Expect PR with 1 line change to AbstractMesh._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Could also change the default to Camera_co_ but is easy enough to change by the extension._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Am also thinking that I need a dedicated light.  I played with emissive materials_co_ but did not like the results. Thought I might not want to distort the scene with light the game maker did not create.  Would not matter if the dialog was temporary.  Once I start this part_co_ if I can figure out how to make sizing work_co_ you could up small permanent dialogs.  Like maybe a little scoreboard with LCD digit meshes._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_How does an includeOnlyWithLayerMask member for light sound?  Actually sounds more scalable than includedOnlyMeshes.indexOf._lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_    export class Light extends Node {        public includeOnlyWithLayerMask _eq_ 0_sm_        public includedOnlyMeshes _eq_ new Array&lt_sm_AbstractMesh&gt_sm_()_sm_        public excludedMeshes _eq_ new Array&lt_sm_AbstractMesh&gt_sm_()_sm_        public canAffectMesh(mesh_dd_ AbstractMesh)_dd_ boolean {            if (!mesh) {                return true_sm_            }            if (this.includedOnlyMeshes.length &gt_sm_ 0 &amp_sm_&amp_sm_ this.includedOnlyMeshes.indexOf(mesh) _eq__eq__eq_ -1) {                return false_sm_            }            if (this.excludedMeshes.length &gt_sm_ 0 &amp_sm_&amp_sm_ this.excludedMeshes.indexOf(mesh) !_eq__eq_ -1) {                return false_sm_            }                        if (this.includeOnlyWithLayerMask !_eq__eq_ 0 &amp_sm_&amp_sm_ this.includeOnlyWithLayerMask !_eq__eq_ mesh.layerMask){                return false_sm_            }            return true_sm_        }_lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-16T20:28:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Sounds perfect!! Do you want to PR or I can include directly_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-03-16T22:04:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I already had it written.  PRed_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]