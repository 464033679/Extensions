[{"Owner":"pichou","Date":"2018-09-14T00:04:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everybody! Hope everyone is going well in the Babylon community ! _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tMy issue is simple _dd__lt_br /_gt_\n\tI use the mesh.rotate() function in order to rotate a mesh in the BABYLON.Space.WORLD._lt_br /_gt_\n\tThe function works great and my mesh rotate exactly how I want.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe mesh.rotate() function use quaternion and so the rotation attribute is set to Vector0._lt_br /_gt_\n\tBut when the rotation is hover I would like to have the euler rotation back!_lt_br /_gt_\n\tTo do so I use the mesh.rotationQuaternion.toEulerAngles() function_lt_br /_gt_\n\tBut if I set the mesh.rotation _eq_ mesh.rotationQuaternion.toEulerAngles()_sm__lt_br /_gt_\n\tThen the mesh is rotating again on my screen like if the euler angles I get from the quaternion wasn_t_t right._lt_br /_gt_\n\t_lt_br /_gt_\n\tThere is a lot of topics in this forum concerning this toEulerAngles function but after hours of reading and testing (even changing ZYX_co_ YXZ orders)_co_ nothing is working!_lt_br /_gt_\n\t_lt_br /_gt_\n\tIs there an other way to get the euler rotation vector back from the quaternion? Or maybe a simplier way to rotate mesh around a world axis?_lt_br /_gt_\n\t_lt_br /_gt_\n\tThanks for your help! _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-09-14T15:03:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhenever the rotationQuaternion is set for a mesh then rotation values are ignored and  setting a value for mesh.rotation will have unpredictable results. So set a variable to mesh. rotationQuaternion.toEulerAngles() _co_ null the rotationQuaternion and then set the rotation to the stored value.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee the difference when you comment out line 48 is _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1ST43U%2377_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1ST43U#77_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"coolroar","Date":"2018-09-14T15:32:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI speculate that mesh_t_s rotation state is held in either mesh.rotation or mesh._lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(36_co_41_co_46)_sm__qt__gt_rotationQuaternion_lt_/span_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.transformNode.ts_qt_ rel_eq__qt_external nofollow_qt__gt_mesh.rotate source_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tApparently the _lt_strong_gt_first use_lt_/strong_gt_ of _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_strong_gt_mesh.rotate()_lt_/strong_gt__lt_/span_gt_ creates _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_strong_gt_mesh.rotationQuaternion_lt_/strong_gt__lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(36_co_41_co_46)_sm__qt__gt_ to hold the rotation state. Then _lt_/span_gt__lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_strong_gt_mesh.rotation_lt_/strong_gt__lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(36_co_41_co_46)_sm__qt__gt_ is no longer valid._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo now ALL rotations must be done with _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_strong_gt_mesh.rotate() _lt_/strong_gt__lt_/span_gt_and reading rotation must be done with _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_strong_gt_mesh.rotationQuaternion.toEulerAngles()_lt_/strong_gt__lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(53_co_60_co_65)_sm__qt__gt_._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(53_co_60_co_65)_sm__qt__gt_If this is true_co_ why doesn_t_t the ren_lt_/span_gt_dering engine now ignore _lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(36_co_41_co_46)_sm__qt__gt_mesh.rotation?_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo when you _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_strong_gt_mesh.rotate(a_co_b_co_c)_lt_/strong_gt__lt_/span_gt_ and then _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_strong_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_mesh.rotation _eq_  _lt_/span_gt__lt_/strong_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_strong_gt_mesh.rotationQuaternion.toEulerAngles()_lt_/strong_gt__lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(53_co_60_co_65)_sm__qt__gt__co_ maybe you are getting a double rotation effect. (?)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPossible work-a-round_dd_ _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_strong_gt_mesh.rotate(a/2_co_ b/2_co_ c/2)_lt_/strong_gt__lt_/span_gt_ and then _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt__lt_strong_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_mesh.rotation _eq_  _lt_/span_gt__lt_/strong_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt__lt_strong_gt_mesh.rotationQuaternion.toEulerAngles(). _lt_/strong_gt__lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_rgb(255_co_255_co_255)_sm_color_dd_rgb(53_co_60_co_65)_sm__qt__gt_(?)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood luck! _lt_span class_eq__qt_ipsEmoji_qt__gt_☘️_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEdit_dd_ Oops! JohnK posted as I was writing this.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-09-14T15_dd_36_dd_40Z_t_ title_eq__t_09/14/2018 03_dd_36  PM_t_ data-short_eq__t_Sep 14_t__gt_September 14_lt_/time_gt_ by coolroar_lt_/strong_gt_\n\t\n\t\t_lt_br_gt_JohnK might have made my post mute!\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"pichou","Date":"2018-09-14T15:37:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks a lot for you answers._lt_br /_gt_\n\t_lt_br /_gt_\n\t@JohnK your solution was perfect for my needs. I indeed didn_t_t know that we had to set the _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#000000_sm_font-size_dd_14px_sm__qt__gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm__qt__gt__lt_strong_gt_rotationQuaternion_lt_/strong_gt__lt_/span_gt__lt_/span_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#24292e_sm_font-size_dd_14px_sm__qt__gt_ _lt_/span_gt_to null before setting new rotation values._lt_br /_gt_\n\tBut now I get the exact result I want!_lt_br /_gt_\n\t_lt_br /_gt_\n\tCheers! _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"pichou","Date":"2018-09-14T18:35:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have another question link to quaternion calculation._lt_br /_gt_\n\t_lt_br /_gt_\n\tI am sure there is not a straight answer but how hard will rotationQuaternion be on CPU/GPU compare to basic rotation?_lt_br /_gt_\n\t_lt_br /_gt_\n\tI feel like maybe my last changes with quaternions made my computer less happy! _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"coolroar","Date":"2018-09-14T20:39:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have a program that makes several quaternion function calls per _lt_span style_eq__qt_color_dd_#000000_sm__qt__gt_engine.runRenderLoop()._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_font color_eq__qt_#000000_qt__gt_See it here_dd__lt_/font_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n_lt_iframe allowfullscreen_eq__qt__qt_ data-controller_eq__qt_core.front.core.autosizeiframe_qt_ data-embedcontent_eq__qt__qt_ data-embedid_eq__qt_embed3582566458_qt_ scrolling_eq__qt_no_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/39983-flight-simulation-experiment/?do_eq_embed_qt_ style_eq__qt_height_dd_339px_sm_max-width_dd_500px_sm__qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\tIt runs smoothly (60 fps) on my machine (an older e-machines (AMD Athlon II X2 235e 2.7GHz_co_ Radeon RX460 card).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow about googling _qt_babylonjs profiling_qt_?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood luck with your app!  _lt_span class_eq__qt_ipsEmoji_qt__gt_💡_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"pichou","Date":"2018-09-14T22:34:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tVery nice simulation!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\tIndeed it hasn_t_t change much my computer performance eventually._lt_br /_gt_\n\t_lt_br /_gt_\n\tI think this is more my curiosity which has pushed me to ask!_lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-09-17T16:05:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo worry_co_ the cost is the same (like no difference over 30000 iterations)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]