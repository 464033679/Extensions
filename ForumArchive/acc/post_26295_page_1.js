[{"Owner":"luknei","Date":"2016-11-09T12:35:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello guys_co__lt_br /_gt_\n\tI_t_m moving on with my scene and I got stuck on skeleton animations. I have situation when my soldier model is running and while running animation is playing (or any other animation) he is being hit. The results of such situation is that running animation is stopped and hit animation starts playing_co_ while my model is still moving forwards. So I have few different options here_dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\tStop model movement and continue run animation when hit animation finishes\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tBlend two animations with different weights. I know that this is possible with Three.js_t_ animation mixer but I could not get it to work with babylonjs is this even possible?\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\tAny other thoughts?\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tI was going thought this forum but I only found topics on blending when one animation changes other animation.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-10T19:05:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello\n_lt_/p_gt_\n\n_lt_p_gt_\n\tdid you check this documentation regarding animation blending_dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/tutorials/Animations#animation-blending_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/tutorials/Animations#animation-blending_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-15T01:34:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLuknei_co_ was your question answered?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI _lt_em_gt_think_lt_/em_gt_ Deltakosh was talking about blending SERIAL animations_co_ and you are talking about blending PARALLEL.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps parallel animation blending is not yet possible_co_ in BJS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s look at your example.  Pretend player is running_co_ and has classic arm movements of a runner (arm swing opposite each other).  THEN... arrows start arriving_co_ and running player must raise shield to block arrows.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen it is time for player to do the _qt_raise shield animation_qt__co_ you would start _lt_em_gt_that_lt_/em_gt_ animation.  But another animation is still running... which is the _qt_running player animation_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou will now have two animations doing a tug-o-war over WHICH animation is the boss of the arm.  The running player animation... wants to move the armature ONE way.  The _qt_raise-shield animation _qt_ wants to raise the arm/shield to block inbound arrows.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou want the two animations to _qt_average_qt_ or _qt_share_qt_ the arm bones.  But_co_ I do not think you will like the results... attempting to do this.  I think... if two animations are fighting over the same bones_co_ _lt_u_gt_both_lt_/u_gt_ arm animations will not be smooth.  It will be a _qt_mix_qt_ (blend) of running arm... and shield-raising arm_co_ and it might look like crap.  _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIf I were a game coder... (I_t_m not)_co_ I would write a _qt_player running animation_qt_... with NO arm bone animations at all.  Then_co_ swap in/out... separate arm-bone animations.  Sometimes you will do the shield-raise/shield-lower animation_co_ and when not doing that_co_ somehow restart the _qt_running player_qt_ arm animation_co_ and somehow try to sync it with the already running-player animation.  That re-sync will likely be a _qt_challenge_qt_... to do.  Got aspirin?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tGenerally_co_ a running player_t_s arms are out-of-phase (moving opposite directions).  When left arm is forward_co_ right arm is back_co_ and the opposite_co_ too.  SO... when it is time to end the shield-raise/lower animation_co_ then (if possible)... you will start monitoring (watching/peeking) the position value... of the OTHER arm. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s pretend we are raising the shield with the RIGHT arm. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen the LEFT arm is forward all the way_co_ THEN re-start the _qt_running player right arm_qt_ animation (in the arm-back position).  After that_co_ the two arms _lt_s_gt_are_lt_/s_gt_ _lt_em_gt_should be _lt_/em_gt_animating opposite-of each other_co_ once again.  The two arms of the running player... returned to proper sync... because your _qt_animation manager code_qt_ waited for the left arm to be fully forward... and THEN re-started the right arm running animation.  Perfect _qt_arm animation_qt_ insertion/injection.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Soon you will have 5_co_10_co_ 20 different _qt_arm bone animation modules_qt_... and your animation manager can swap them in/out at lightning speeds and ease. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLuknei_t_s Arm-bone Animation Modules_co_ Inc.  Each 200 frames_co_ plug_t_n_t_play into any Luknei Limp-Armed Skeleton/Armature.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tDoes this make any sense?  I could be COMPLETELY 100% wrong_co_ too... totally full of crap.  Been there_co_ done that.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ I thought there might be a misunderstanding about _qt_What is blending?_qt_  (and about serial blending vs. parallel blending).  Not sure... just checking.  Party on_co_ guys!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-15T16:54:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tCorrect I was mentioning serial animations.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBlending parallel is complex and not directly supported\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tcan you provide us a simple playground to highlight what you are trying to do?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-21T11:25:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat might be difficult_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_.  We have no facilities for _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24179-luknei/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24179_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24179-luknei/_qt_ rel_eq__qt__qt__gt_@luknei_lt_/a_gt_ to repro this.  _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Extensions/tree/master/QueuedInterpolation_qt_ rel_eq__qt_external nofollow_qt__gt_The QI system_lt_/a_gt_ might be the closest we have_co_ and it is barely _lt_em_gt_alpha_lt_/em_gt__co_ I suspect._lt_/span_gt__lt_span_gt_  I will attempt to describe_co_ using common example._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_While player-is-walking animation_dd__lt_br /_gt_\n\tPossibility#1_dd_  player_t_s arms gently swing at player_t_s side - no weapons._lt_br /_gt_\n\tPossibility#2_dd_  player_t_s arms gently swing at player_t_s side - holding sword and shield._lt_br /_gt_\n\tPossibility#3_dd_  one arm... animating to position where shield can block inbound shot.  Other arm swinging._lt_br /_gt_\n\tPossibility#4_dd_  one arm... animating to position where sword can block inbound shot.  Other arm swinging._lt_br /_gt_\n\tPossibility#5_dd_  both arms raise sword and shield to block shots from two directions_lt_/span_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Now... SAME 5 possibilities are needed when player is RUNNING.  Running is a different animation from walking.  Legs change shape differently and arms are bent at elbow and are _qt_pumping_qt_ and not _qt_swinging_qt_._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_AND... the same 5 possibilities with... perhaps... _qt_trotting_qt_ (a slow run)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_This is why I thought _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24179-luknei/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24179_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24179-luknei/_qt_ rel_eq__qt__qt__gt_@luknei_lt_/a_gt_ should use 2-3 primary animations... one running_co_ one trotting (if needed)_co_ and one walking... but all with NO ARM ANIMATION. Then_co_ plug_t_n_t_play the arm animations._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_This is NOT parallel blending_co_ or QI_co_ but it is _qt_hot swapping_qt_ the arm animations.  Sync would be a challenge... when hot-swapping arm animations.  Luknei would always have 3 animations running at the same time.  1. legs/body animation (cycling)_co_ 2. left arm animation (cycling if not raising/lowering a weapon)_co_ 3. right arm animation (cycling if not raising/lowering a weapon).  The arm animations would need to be _qt_swapped-out_qt_ for every arm-event trigger._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Not an easy thing to show in a simple playground scene.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_span_gt__lt_span_gt_Luknei_co_ I think _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Extensions/tree/master/QueuedInterpolation_qt_ rel_eq__qt_external nofollow_qt__gt_QI (Queued Interpolation) _lt_/a_gt_ will be your solution_co_ when it is ready.  POV is rather interesting.  I_t_ll invite _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_ to make sure I don_t_t say stupid/wrong things_co_ here.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_span_gt__lt_span_gt_POV stands for Point Of View... and the animations done with Queued Interpolation (QI) are POV animations. The movements are a deviation-from the _lt_em_gt_normal_lt_/em_gt_ _lt_strong_gt_p_lt_/strong_gt_oint _lt_strong_gt_o_lt_/strong_gt_f _lt_strong_gt_v_lt_/strong_gt_iew of the mesh/bone being animated.  In other words_co_ the values in an eventSeries... are _qt_differences from normal position_qt_ or _qt_differences from normal rotation_qt_ (or scaling).  NASA would call these _qt_deltas_qt_...  something different from the normal... a tweaking... an offset from normal... an adjustment... a bias. _lt_/span_gt__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_span_gt__lt_span_gt_So... let_t_s pretend your walking left-arm animation... takes 10 frames to move from straight down... to maximum forward swing.  Then another 10 frames to return-to straight down_co_ then another 10 frames to swing backwards_co_ then another 10 frames to return to straight down again.  One entire arm-swing requires 40 frames.  _lt_/span_gt__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_span_gt__lt_span_gt_Now pretend your raise/lower-shield arm animation requires 10 frames to raise_co_ is held raised for 20 frames_co_ and 10 frames to lower.  _lt_/span_gt__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_span_gt__lt_span_gt_Here_co_ you have a perfect syncPartner-able eventSeries.  Since the shield-raise/lower animation takes exactly the same amount of frames as one walking-arm swing_co_ it is easy to program the eventSeries.  No need to swap-out the entire skeleton animation just to raise and lower a shield.  Instead_co_ you would parent the shield to the player hand-bone_co_ and then _qt_run_qt_ the QI eventSeries named _qt_shieldRaiseHoldLower_qt_...  a pre-programmed series of (delta/offset) values to ADD TO the normal arm-swing animation.  It is an _qt_on-the-fly_qt_ adjustment to the normal animation_co_ calculated from the original animation_t_s _lt_strong_gt_p_lt_/strong_gt_oint _lt_strong_gt_o_lt_/strong_gt_f _lt_strong_gt_v_lt_/strong_gt_iew._lt_/span_gt__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow was that_co_ JC?  Did I make a mess of introducing the QI system and way of thinking?  I hope not.  I hurt my OWN brain_co_ doing it_co_ though. heh._lt_span_gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThose that learn to drive POV animation eventSeries and QI... will have the best skeletons_co_ ever.  We have NEVER seen computer-operated puppet strings... like these.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  I hope I_t_ve helped someone.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"luknei","Date":"2016-11-28T13:00:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tSorry for not responding for so long. I solved my problem with changing game logic a bit_co_ to not get stuck on this problem._lt_br /_gt_\n\tI_t_m using serial animations blending and it works fine_co_ but i was talking about parallel animations. I found Three.js demo of such thing_dd_ _lt_a href_eq__qt_https_dd_//threejs.org/examples/webgl_animation_skinning_blending.html_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//threejs.org/examples/webgl_animation_skinning_blending.html_lt_/a_gt__lt_br /_gt__lt_br /_gt_\n\tCheers_co__lt_br /_gt_\n\tLukas\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]