[{"Owner":"valepu","Date":"2015-09-16T12:12:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello_co__lt_/p_gt__lt_p_gt_I am learning how to use Babylon.js and i made this scene _lt_a href_eq__qt_http_dd_//mjzone.net/game/game.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//mjzone.net/game/game.html_lt_/a_gt_ by copy/pasting from different places_co_ i ended up with something i am somehow satisfied with. The problem now is that when the camera is facing the field performance goes down the drain._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So i_t_d like to know what i could do in order to improve performance. _lt_/p_gt__lt_p_gt_I might have to warn you the code is actually a mess_co_ as i_t_m just testing babylon and playing with it i didn_t_t care much about organizing the code (probably there_t_s even some code that needs to be deleted) so that might also cause performance issues._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I think the main culprit is this_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_for (var j _eq_ 0_sm_ j &lt_sm_ (dimensions.z/ cubeSize)_sm_ j++) {        for (var i _eq_ 0_sm_ i &lt_sm_ dimensions.x / cubeSize_sm_ i++) {                    var newCube _eq_ createCube(cubeSize)_sm_//cube.createInstance(_qt_cube_qt_ + _qt___qt_ + i + _qt___qt_ + j)_sm_         newCube.position.z _eq_ 2 -((dimensions.z) / 2) + (j * cubeSize)_sm_         newCube.position.x _eq_ 2 -((dimensions.x) / 2) + (i * cubeSize)_sm_         newCube.position.y _eq_ 2*cubeSize_sm_         newCube.origPos_eq_new BABYLON.Vector3(newCube.position.x_co_ newCube.position.y_co_ newCube.position.z)_sm_                     newCube.actionManager _eq_ new BABYLON.ActionManager(scene)_sm_            newCube.actionManager.registerAction(             new BABYLON.SetValueAction(BABYLON.ActionManager.OnPointerOverTrigger_co_ newCube_co_ _qt_material.subMaterials.4.diffuseColor_qt__co_ blue_co_ null)            )_sm_            newCube.actionManager.registerAction(               new BABYLON.SetValueAction(BABYLON.ActionManager.OnPointerOutTrigger_co_ newCube_co_ _qt_material.subMaterials.4.diffuseColor_qt__co_ white_co_ null)            )_sm_            newCube.actionManager.registerAction(               new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnLeftPickTrigger_co_ function(thisCube){               dragon.destination _eq_ thisCube.position.clone()_sm_               dragon.currTile_eq_thisCube_sm_               thisCube.overTile_eq_dragon_sm_               dragon.destination.y_eq_dragon.destination.y+getDimensions(thisCube).y_sm_               }.bind(this_co_ newCube)_co_ null)            )_sm_                        if(!(j_eq__eq_0 &amp_sm_&amp_sm_ i_eq__eq_0)){             cubes.push(newCube)_sm_            } else {             dragon.position.z _eq_ 2 -((dimensions.z) / 2) + (j * cubeSize)_sm_             dragon.position.x _eq_ 2 -((dimensions.x) / 2) + (i * cubeSize)_sm_             newCube.material.subMaterials[4].diffuseColor_eq_BABYLON.Color3.Red()_sm_             dragon.currTile_eq_newCube_sm_           newCube.overTile_eq_dragon_sm_            }         groundAnimationCount++_sm_        }    }_lt_/pre_gt__lt_p_gt_and this_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_function setCubeMaterial(cube){\tvar cubeMaterial _eq_ new BABYLON.StandardMaterial(_qt_cube_0_0_qt__co_ scene)_sm_    cube.material_eq_cubeMaterial_sm_    cubeMaterial.diffuseColor _eq_ new BABYLON.Color3(0_co_ 0_co_ 0)_sm_    cubeMaterial.specularColor _eq_ new BABYLON.Color3(0_co_ 0_co_ 0)_sm_        var textureName_eq__qt_textures/ground/ground.jpg_qt__sm_    var f_eq_new BABYLON.StandardMaterial(_qt_material0_qt__co_scene)_sm_\tf.diffuseTexture_eq_new BABYLON.Texture(textureName_co_ scene)_sm_\tf.diffuseTexture.uScale _eq_ -1_sm_\tf.diffuseTexture.vScale_eq_-1_sm_ \tvar ba_eq_new BABYLON.StandardMaterial(_qt_material1_qt__co_scene)_sm_\tba.diffuseTexture_eq_new BABYLON.Texture(textureName_co_ scene)_sm_\tba.diffuseTexture.uScale _eq_ 1_sm_\tba.diffuseTexture.vScale _eq_ 1_sm_\t\tvar l_eq_new BABYLON.StandardMaterial(_qt_material2_qt__co_scene)_sm_\tl.diffuseTexture_eq_new BABYLON.Texture(textureName_co_ scene)_sm_\tl.diffuseTexture.wAng _eq_ 0.5*Math.PI_sm_\t\tvar r_eq_new BABYLON.StandardMaterial(_qt_material3_qt__co_scene)_sm_\tr.diffuseTexture_eq_new BABYLON.Texture(textureName_co_ scene)_sm_\tr.diffuseTexture.wAng _eq_ 0.5*Math.PI_sm_\t\tvar t_eq_new BABYLON.StandardMaterial(_qt_material4_qt__co_scene)_sm_\tt.diffuseTexture_eq_new BABYLON.Texture(_qt_textures/ground/grass.jpg_qt__co_ scene)_sm_\tt.diffuseTexture.wAng _eq_ -0.5 * Math.PI_sm_\t\tvar bo_eq_new BABYLON.StandardMaterial(_qt_material5_qt__co_scene)_sm_\tbo.diffuseTexture_eq_new BABYLON.Texture(_qt_textures/ground/ground_full.jpg_qt__co_ scene)_sm_\tbo.diffuseTexture.wAng _eq_ 0.5 * Math.PI_sm_\tbo.diffuseTexture.uScale _eq_ 1_sm_\t\t//put into one\tvar multi_eq_new BABYLON.MultiMaterial(_qt_cubetexture_qt__co_scene)_sm_\tmulti.subMaterials.push(f)_sm_\tmulti.subMaterials.push(ba)_sm_\tmulti.subMaterials.push(l)_sm_\tmulti.subMaterials.push(r)_sm_\tmulti.subMaterials.push(t)_sm_\tmulti.subMaterials.push(bo)_sm_\t//apply material\tcube.subMeshes_eq_[]_sm_\tvar verticesCount_eq_cube.getTotalVertices()_sm_\tcube.subMeshes.push(new BABYLON.SubMesh(0_co_ 0_co_ verticesCount_co_ 0_co_ 6_co_ cube))_sm_\tcube.subMeshes.push(new BABYLON.SubMesh(1_co_ 1_co_ verticesCount_co_ 6_co_ 6_co_ cube))_sm_\tcube.subMeshes.push(new BABYLON.SubMesh(2_co_ 2_co_ verticesCount_co_ 12_co_ 6_co_ cube))_sm_\tcube.subMeshes.push(new BABYLON.SubMesh(3_co_ 3_co_ verticesCount_co_ 18_co_ 6_co_ cube))_sm_\tcube.subMeshes.push(new BABYLON.SubMesh(4_co_ 4_co_ verticesCount_co_ 24_co_ 6_co_ cube))_sm_\tcube.subMeshes.push(new BABYLON.SubMesh(5_co_ 5_co_ verticesCount_co_ 30_co_ 6_co_ cube))_sm_\tcube.material_eq_multi_sm_\t}_lt_/pre_gt__lt_p_gt_Which create the field_co_ composed of 625 different cubes_co_ each with its multi material and submeshes (i had to do this because i wanted to use a different texture for each side of the cube and change the top texture color on mouse over). When i started this test i had used instances and it worked fine (there were twice the cubes_co_ twice as big but it ran smoothly) but in order to do the color change on mouse over I had to make a new cube and a new material for each cube (at least_co_ it looked like so. Probably i could_t_ve just changed the top submesh)._lt_/p_gt__lt_p_gt_On top of that all the cubes are animated (they go up and down) and textures are 256x256 with no mipmap._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe I should find a minecraft-like project for babylon and study it_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As said above_co_ the code is a mess! I am actually ashamed of posting it but I wanted to sort this issue as soon as possible and i haven_t_t got the time to polish it. If you think it_t_s hard to read i_t_ll try to fix it._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Any help will be appreciated_co_ thanks! _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Convergence","Date":"2015-09-16T12:32:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I would try to find a way to make the createInstance() work_co_ since it would save on a lot of draw calls (currently 4000+ draw calls!)_co_ new materials_co_ etc. Perhaps only have one _t_mouseover_t_ cube_co_ that gets positioned whereever the mouse is in lieu of the default one._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"valepu","Date":"2015-09-16T13:49:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_96847_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_17205_qt_ data-ipsquote-username_eq__qt_Convergence_qt_ data-cite_eq__qt_Convergence_qt_ data-ipsquote-timestamp_eq__qt_1442406727_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_I would try to find a way to make the createInstance() work_co_ since it would save on a lot of draw calls (currently 4000+ draw calls!)_co_ new materials_co_ etc. Perhaps only have one _t_mouseover_t_ cube_co_ that gets positioned whereever the mouse is in lieu of the default one._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That sounds like a nice idea_co_ thanks!_lt_/p_gt__lt_p_gt_Maybe I can use that as starting point. Since in the future i will need to change the color of other cubes_co_ not just the one i have on (in a fashion similar to final fantasy tactics)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_img src_eq__qt_https_dd_//upload.wikimedia.org/wikipedia/en/a/a8/BattleGrid.jpg_qt_ alt_eq__qt_BattleGrid.jpg_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I was thinking that maybe the best solution would be to create planes and attach them on the cube faces (so_co_ for the mouseover cube it would place a plane with the same texture of the top cube face with blue coloring). Do you think it would work? _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"valepu","Date":"2015-09-16T20:52:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I made a blue plane that i set as child of the cube i have the mouse on and made the other cubes as instances_co_ now it_t_s quite smooth. Thanks for giving me a hint which led me to the solution_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]