[{"Owner":"Richard C","Date":"2017-09-07T17:03:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a box being used as an Empty with 4 children. I am using moveWithCollisions on all 4 using the box mesh as the collider. When collided with the ground I have particles emitted from the vertices of each child mesh. All works well EXCEPT the particles are emitted from the children_t_s original starting position rather than the point of collision where I want them to emit.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI assumed getVerticesData(BABYLON.VertexBuffer.PositionKind) followed by .updateVerticesData(BABYLON.VertexBuffer.PositionKind)_co_would establish the new position of each mesh but it doesn_t_t. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo my question is.......\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow to establish the new position of each child and therefore the vertices positions of each.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRichardC\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2017-09-07T21_dd_23_dd_23Z_t_ title_eq__t_09/07/2017 09_dd_23  PM_t_ data-short_eq__t_1 yr_t__gt_September 7_co_ 2017_lt_/time_gt_ by Richard C_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-07T17:32:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello_co_ why are you updating the geometry? Is mesh.position not enough?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-07T17:50:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSome insight_dd_  _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#2A4NUR%2331_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#2A4NUR#31_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis particles-from-verts demo was made by SOMEBODY.  I don_t_t know lots about it_co_ but I love it.  If FOUR of these were parented to a central gizmo/blank... that had a collision .ellipsoid re-sized to _qt_enclose_qt_ all 4 of its children (like 4 landing pads beneath a mini-submarine)... then... would this particles-from-verts move its vert-positions WITH the positioning of the parent?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there something in this particles-from-verts demo... that would cause problems IF its emitter box/sphere... were parented_co_ and the parent was used to move the children?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ll probably test... parent 4 of these _qt_sprayers_qt_ to a central mesh_co_ and try some stuff... if I get a chance.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think I would put checkCollisions on all 4 children_co_ and not use blank box ellipsoid to surround children.  I would monitor for each children_t_s collisions_co_ and then turn on the sprayer for that child.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  *shrug*  I_t_m probably off-topic.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs a side note... Richard... do you know that a particle emitter can spray in all directions from a single point... IF the .direction1 and .direction2 values are set properly?  You don_t_t NEED sphere doing particles-from-verts... to get a nice _qt_spray in all directions_qt_.  (in case you were trying to get a spray-in-all-directions).  Using non-particles-from-verts_co_ and instead doing a good .direction1 and .direction2... will be easier.  In other words_co_ if all-direction-emitting is what you are after_co_ I would advise saying goodbye to _qt_emit-from-verts_qt_ and hello to great particleSystem knob setting.  Also keep in mind that a particle system_t_s .emitter can be a vector3... which isn_t_t a mesh at all.  It_t_s just a place in space.  I love that.  kbye\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Richard C","Date":"2017-09-07T17:55:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ I am not updating the geometry per se. I am still on the same project as I have been in the recent opsts. I have a model submarine that dives from the surface to the seabed and the particles are to simulate the sand _t_cloud_t_ that is kicked up when the sub lands on the seabed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe sub dives and using moveWithCollisions to detect when the sub hits the seabed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-09-07T18:04:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tCan you repro in the PG? This is tough to help without seeing the issue\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-07T18:04:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah... .updateVerticesData(BABYLON.VertexBuffer.PositionKind) is probably not going to do anything useful.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe vert sprayers aren_t_t in the new location... after the move_co_ right?  They stayed in old position?  Yeah_co_ it has to be something with that spray-from-verts demo.  Did you borrow some code from that demo (to get your spray-from-verts happening)_co_ RC?  Bet so.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Richard C","Date":"2017-09-07T18:11:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks pal. That is the very PG I used to learn particle emission from vertices!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2 things ........\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe bottom of the sub is not rectangular.square so the verts are not linear. Additionally_co_ the children are not a plane but need to be an arc to get the correct sand cloud shape. If you picture such an event you will remember that sand _t_kicked_t_ up is far more of a cloud than square/rectangle/linear.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll would be well if I could establish the position of each child at the point of collision. The seabed isn_t_t flat of course- so the depth varies along the sub_t_s path. It seems that moveWithCollision is displaying as it should but not updating the actually position of each child/mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt will be helpful to see what you come up with if you get the chance.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-07T18:46:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ for a quickie... _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1PQT7P%236_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1PQT7P#6_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice that the shape of the mesh... isn_t_t important.  What IS important... is lines 52-56.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlthough understanding min/max emitbox (where upon the mesh... particles will emit-from) and direction1/2 (what direction ranges are the particles allowed to fly-within)... are not easy_co_ they are everything.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou_t_ve seen this demo before_co_ or one similar.  We have set our min/max emitbox so that particles are ONLY allowed to leave the box... at a _qt_belt-line_qt_ around the center of the box.  Line 55 and 56 are SIZES... and both my Y values are set to zero.  Set them to -.1 and +.1_co_ and the belt-line will get taller (wider belt)... but still be around center.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice that_co_ no matter WHERE on the mesh... the particles are emitted-from... they are ONLY allowed to fly upward and leftward.  Even particles that are emitted on the right side of the box... are NOT allowed to fly right-ward.  Our direction1 and direction2 _qt_range_qt_ (lines 52/53) are set so that particles can ONLY fly left and up.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHaving this new _qt_power_qt_... do you REALLY need particles-from-verts system?  Can_t_t you just use your emitbox powers and your direction powers... and leave behind particles-from-verts?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat_t_s that?  Emit from front upper left corner of box_co_ only?  That means my emitBox is -1_co_ 1_co_ -1_co_ to -1_co_ 1_co_ -1  ... for this 2 by 2 by 2 box_co_ right?  _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1PQT7P%237_qt_ rel_eq__qt_external nofollow_qt__gt_Let_t_s try it_lt_/a_gt_.  How about ps1.minEmitBox _eq_ new BABYLON.Vector3(-1.5_co_ 1.5_co_ -1.5)_sm_ and ps1.maxEmitBox _eq_ new BABYLON.Vector3(-1.5_co_ 1.5_co_ -1.5)_sm_   ... which should make the emit box/point be out in space... near the top left front corner.  _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1PQT7P%238_qt_ rel_eq__qt_external nofollow_qt__gt_Let_t_s try it._lt_/a_gt_  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Fun!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is my theory... that if you avoid particle-from-verts_co_ your _qt_emitter points left-behind after move_qt_ -problem will go away.  (and your particle clouds will have less _qt_stringy-ness_qt_ and more randomness.)  Also_co_ now you have the power to make your children be ANY shape_co_ because you know the 4 particleSystem knobs that control your spray nozzle direction and field-of-spray angle.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m easy.  I will still try to get your four parented _qt_from-verts_qt_ demo working_co_ if wanted.  Maybe somebody else will make that tester... I_t_m kind of lazy today.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Richard C","Date":"2017-09-07T19:21:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have tried various ways similar to your suggestion. The _t_from verts_t_ is giving me the _t_shape I want my only real issue is getting the positions of the verts onCollide after the moveWithCollisions. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo really there is only one Q to answer - how do I establish the actual position of the child mesh so that I can get to the verts.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-07T19:28:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOkay_co_ um... have you tried childmesh.getAbsolutePosition()  ?  What_t_s that do for ya?  Anything good?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Richard C","Date":"2017-09-07T20:02:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t@Wingnut - That_t_s the one my friend.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAn alternative I have just been playing with is based on what Deltkosh said........\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI know the position of the parent box on collision. The emitters are always the same distance/position away from the empty and therefore I could reposition the child relative to the empty and then emit.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut getAbsolutePosition is much easier and less code and works.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tProblem solved.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks again both.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPS How do I mark/tag this topic as solved?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-09-07T20:16:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGood deal!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBetter start a new thread to ask how to mark questions as solved.  _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tNo_co_ no_co_ don_t_t do it_co_ I was only joking-around_co_ of course.  hehe.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/28008-marking-questions-as-solved/?do_eq_findComment&amp_sm_comment_eq_180468_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/28008-marking-questions-as-solved/?do_eq_findComment&amp_sm_comment_eq_180468_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheck this out_dd_  _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#2A4NUR%2333_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#2A4NUR#33_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWow! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI discovered that each _qt_shape_qt_ used to spray-from-verts... is actually TWO shapes... a shape and a gizmo.  In the above supersprayer_co_ gizmos are parented to shapes_co_ and shapes are parented to shape0 box.  MoveWithCollisions on the box_co_ and weeeeeee.... away we go... flying confetti machine.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Too fun!  View from side and use control-dragging to stay with it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]