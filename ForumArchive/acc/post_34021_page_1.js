[{"Owner":"djeustice","Date":"2017-11-15T16:17:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello.  I exported a Kayak model from Substance Painter 2 as a glTF with the Metallic Roughness configuration.  The Kayak has a red/yellow gradient png texture on it.  Exporting from Substance Painter 2 gave me  Kayak_baseColor.png_co_ Kayak_co__normal.png_co_ and Kayak_occlusionRoughnessMetallic.png textures.  In my Babylon JS scene_co_ I import the model (Kayak.gltf)and am trying to switch the Kayak_baseColor.png  to Lime_baseColor.png on load.  The Kayak loads into the scene with it_t_s red/yellow gradient png texture on it_co_ but doens_t_t switch to the lime texture on load..  Am I missing PBR properties?  Or are my properties wrong?  Thanks.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    var myKayak2_sm__lt_br /_gt_\n\t        BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_models/_qt__co_ _qt_Kayak.gltf_qt__co_ scene_co_ function (newMeshes)  {_lt_br /_gt_\n\t            myKayak2 _eq_ newMeshes[0]_sm_ _lt_br /_gt_\n\t            _lt_br /_gt_\n\t            var LimeTexture _eq_ new BABYLON.PBRMetallicRoughnessMaterial(_qt_Lime_qt__co_ scene)_sm__lt_br /_gt_\n\t            LimeTexture.albedoTexture _lt_span_gt_ _lt_/span_gt__eq_ new BABYLON.Texture(_qt_models/Lime_b_lt_span_gt_ _lt_/span_gt_aseColor.png_qt__co_ scene)_sm__lt_br /_gt_\n\t            LimeTexture.metallic _eq_ 0_sm__lt_br /_gt_\n\t            LimeTexture.roughness _eq_ 1.0_sm__lt_br /_gt_\n\t            myKayak2.material _eq_ LimeTexture_sm__lt_br /_gt_\n\t        })_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried changing the PBR material definition to this but still no luck_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    var myKayak2_sm__lt_br /_gt_\n\t        BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_models/_qt__co_ _qt_Kayak.gltf_qt__co_ scene_co_ function (newMeshes)  {_lt_br /_gt_\n\t            myKayak2 _eq_ newMeshes[0]_sm_ _lt_br /_gt_\n\t            _lt_br /_gt_\n\t            var LimeTexture _eq_ new BABYLON.PBRMaterial(_qt_Lime_qt__co_ scene)_sm__lt_br /_gt_\n\t            LimeTexture.albedoTexture _eq_ new BABYLON.Texture(_qt_models/Lime_baseColor.png_qt__co_ scene)_sm__lt_br /_gt_\n\t            LimeTexture.metallic _eq_ 0_sm__lt_br /_gt_\n\t            LimeTexture.roughness _eq_ 1.0_sm__lt_br /_gt_\n\t            myKayak2.material _eq_ LimeTexture_sm__lt_br /_gt_\n\t        })_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/OriginalTexture.jpg.4ba5c3b748fb2067dad0c3fabcf5361f.jpg_qt_ data-fileid_eq__qt_15682_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_OriginalTexture.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15682_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/OriginalTexture.jpg.4ba5c3b748fb2067dad0c3fabcf5361f.jpg_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-11-15T17:43:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe material you are changing is not on the correct mesh_dd_ meshes[0] is the root node not having any material. So two choices_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. find in the list of meshes the correct one and update its material.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. listen to the material event on the loader and swap properties here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#Z5NWIE_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#Z5NWIE_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"mr_pinc","Date":"2017-11-15T18:21:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tEverything Sebana said is correct.  Also you_t_re going to lose the normal map and occlusion roughness maps when you reassign the material.  You should either make sure to copy them over or just modify the base color of the existing PBRMetallicRoughness\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"djeustice","Date":"2017-11-27T18:52:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI found the correct mesh.  It_t_s newMesh[6]_sm_  To modify the base texture of the existing PBRMetallicRoughness_co_ I_t_ve been trying out the code below.  It doesn_t_t work.  But is this the right idea?  I don_t_t want to reassign the material and lose the other maps_co_ just change the current texture.  Thank you.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t        myKayak2 _eq_ BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_models/_qt__co_ _qt_Kayak.gltf_qt__co_ scene_co_ function (newMeshes)  {_lt_br /_gt_\n\t            myKayak2 _eq_ newMeshes[6]_sm__lt_br /_gt_\n\t            myKayak2.albedoTexture _eq_ new BABYLON.Texture(_qt_models/Lime_baseColor.png_qt__co_ scene)_sm__lt_br /_gt_\n\t        })_sm_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"mr_pinc","Date":"2017-11-27T18:57:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tIn your example you are modifying the texture on the mesh_co_ you should modify it on the material.  I_t_m not sure if the default material has an albedoTexture property_co_ you should look at the docs to make sure but my first statement is still correct_co_ modify the material_co_ not the mesh.  \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2017-11-27T20:49:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_PBRMetallicRoughness uses baseTexture instead so it should be_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_myKayak2 _eq_ BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_models/_qt__co_ _qt_Kayak.gltf_qt__co_ scene_co_ function (newMeshes)  {_lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_            myKayak2 _eq_ newMeshes[6]_sm__lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_            myKayak2.material.albedoTexture _eq_ new BABYLON.Texture(_qt_models/Lime_baseColor.png_qt__co_ scene)_sm__lt_/span_gt__lt_br style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt_ /_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_        })_sm_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbut the importer imports materials as multimaterial not pbr and the submaterials are PBRMaterial not _lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_PBRMetallicRoughness so please use albedoTexture_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_div_gt_\n\t_lt_pre_gt_\n_lt_code_gt__lt_span_gt__lt_span_gt_function_lt_/span_gt_ _lt_span_gt_createScene_lt_/span_gt__lt_span_gt_()_lt_/span_gt_ {_lt_/span_gt_\n    _lt_span_gt_var_lt_/span_gt_ scene _eq_ _lt_span_gt_new_lt_/span_gt_ BABYLON.Scene(engine)_sm_\n    scene.createDefaultCameraOrLight(_lt_span_gt_true_lt_/span_gt__co_ _lt_span_gt_true_lt_/span_gt__co_ _lt_span_gt_true_lt_/span_gt_)_sm_\n\n    _lt_span_gt_// Load the model_lt_/span_gt_\n    _lt_span_gt_var_lt_/span_gt_ loader _eq_ BABYLON.SceneLoader.ImportMesh(_lt_span_gt__qt__qt__lt_/span_gt__co_ _lt_span_gt__qt_https_dd_//www.babylonjs.com/Assets/DamagedHelmet/glTF/_qt__lt_/span_gt__co_ _lt_span_gt__qt_DamagedHelmet.gltf_qt__lt_/span_gt__co_ scene_co_ _lt_span_gt__lt_span_gt_function_lt_/span_gt_ _lt_span_gt_(meshes)_lt_/span_gt_ {_lt_/span_gt_\n        _lt_span_gt_// Create a camera pointing at your model._lt_/span_gt_\n        scene.createDefaultCameraOrLight(_lt_span_gt_true_lt_/span_gt__co_ _lt_span_gt_true_lt_/span_gt__co_ _lt_span_gt_true_lt_/span_gt_)_sm_\n        scene.activeCamera.beta -_eq_ _lt_span_gt_0.2_lt_/span_gt__sm_\n\n        _lt_span_gt_var_lt_/span_gt_ helper _eq_ scene.createDefaultEnvironment()_sm_\n        helper.setMainColor(BABYLON.Color3.White())_sm_\n    })_sm_\n\n    loader.onMaterialLoaded _eq_ _lt_span_gt__lt_span_gt_function_lt_/span_gt__lt_span_gt_(material)_lt_/span_gt_ {_lt_/span_gt_\n        material.albedoTexture _eq_ _lt_span_gt_new_lt_/span_gt_ BABYLON.Texture(_lt_span_gt__qt_textures/tree.png_qt__lt_/span_gt__co_ scene)_sm_\n    }\n\n    _lt_span_gt_return_lt_/span_gt_ scene_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\t_lt_span style_eq__qt_background_dd_rgba(220_co_220_co_220_co_.5) url(&quot_sm_//www.html5gamedevs.com/applications/core/interface/ckeditor/ckeditor/plugins/widget/images/handle.png&quot_sm_)_sm__qt__gt__lt_/span_gt_\n_lt_/div_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt__lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#10D6YT%2353_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#10D6YT#53_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"djeustice","Date":"2017-11-28T15:23:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis code works!  Thank you guys for your help!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tmyKayak2 _eq_ BABYLON.SceneLoader.ImportMesh(_qt__qt__co_ _qt_models/_qt__co_ _qt_Kayak.gltf_qt__co_ scene_co_ function (newMeshes)  {_lt_br /_gt_\n\t      myKayak2 _eq_ newMeshes[6]_sm_ _lt_br /_gt_\n\t       myKayak2.material.subMaterials[0].albedoTexture _eq_ new BABYLON.Texture(_qt_models/Lime_baseColor.png_qt__co_ scene)_sm__lt_br /_gt_\n\t })_sm_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/kayak-01.png.aaa53f42a503914f31849b067cbc5e25.png_qt_ data-fileid_eq__qt_15998_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_kayak-01.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_15998_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_11/kayak-01.png.aaa53f42a503914f31849b067cbc5e25.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]