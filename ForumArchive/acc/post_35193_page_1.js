[{"Owner":"vtange","Date":"2018-01-21T00:40:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everyone!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m trying to learn how emissive textures work in BJS_co_ and through this tutorial (_lt_a href_eq__qt_https_dd_//github.com/KhronosGroup/glTF-Blender-Exporter/blob/master/docs/user.md_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/KhronosGroup/glTF-Blender-Exporter/blob/master/docs/user.md) m_lt_/a_gt_anaged to get a Blender model with an emissive texture (basically itself) loaded in BJS as a .gltf model.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ even though in Blender_t_s Cycles Render I can see some illumination from the light on the wall_co_ I don_t_t get any lighting in BJS. Why is that?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAlso_co_ is there a setting_co_ in Blender and in BJS_co_ that controls the range/brightness of the light? I_t_d light it bright enough to light the floor _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_16703_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/sconce.png.f22e514d9939fd5deb6a739608fe245d.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_sconce.thumb.png.f911cd901972abd370d09dd34ffff157.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16703_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/sconce.thumb.png.f911cd901972abd370d09dd34ffff157.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s the bare-bones playground_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#F2H81M_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#F2H81M_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-01-21T02:18:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi vtange.  I_t_m pretty sure that using ONLY an emissiveTexture... cannot light-up nearby _t_other things_t_.  You need to have a light inside the mesh... to get _qt_real_qt_ lighting_co_ and with it_co_ shadowCasting power.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut_co_ there_t_s a _qt_cheat_qt_ way.  _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#F2H81M%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#F2H81M#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is your scene.... with a highlightLayer activated.  No light is inside the sconce.  It won_t_t light-up anything_co_ but it does add a _qt_backlighting_qt_ effect that is pretty decent.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#F2H81M%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#F2H81M#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is one with a real pointLight near or inside the sconce.  I did some experimenting with its range... sort of failed.  But_co_ I turned-off the hemi light and let ONLY the pointLight... light the scene.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt manages to light-up the front of the column and the floor.  Not too bad. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you have a long hallway/street lined with lights like these... you may need to do some work or light faking (painting light glows onto your textures)_co_ which i think is called baked lightMaps).  There is a 4-lights-per-single-material limit in webGL_co_ as far as i know.  Anyway_co_ I am rushed for time atm_co_ but will be back in a while.  Now you have some things to think about and play-with.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m curious... when you saw light-on-the-column in Blender_co_ did you have a real light inside the sconce?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is rare/impossible for an emissiveTexture to _qt_cast_qt_ light_co_ as far as I know.  But_co_ I_t_m old_co_ and I don_t_t stay very aware of newest GL features.  We_t_ll talk.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2018-01-21T02:30:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Wingnut.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe Highlight layer trick is pretty neat! It certainly makes the sconce look more like how I originally envisioned it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt now just needs to light up that side of the wall/the ground below.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo emissiveTextures aren_t_t as strong as I thought...I was hoping I didn_t_t have to rely on adding lots of lights in a scene. (The playground we have here is a small piece of a larger room with multiple columns and sconces.) My worry is relying on a pointLight for every lamp might impact performance...plus I read somewhere that materials in BJS only react to 4 light sources?? Wouldn_t_t that mean that given a room I can only have four columns with lights?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT_dd_ I was writing this post as I read your reply_co_ so I might really have to do this _qt_light baking_qt_ trick... Do you know of any good examples of this in .gltf? I somehow doubt it_t_s just throwing in an emissive layer on every texture. Plus it_t_d get annoying to have to do the column AND the floor separately.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFunnily enough I don_t_t even know why Blender showed the illumination. There was literally no light in the sconce mesh. The .blend file is literally 3 objects_dd_ the floor_co_ column_co_ and light. You can check the hierarchy on the upper right\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_16705_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/blender.png.5bd69aab3c7f290ec822c5c96e4e3dfd.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_blender.thumb.png.d489d37f3ef86015325db83102b1304f.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16705_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_01/blender.thumb.png.d489d37f3ef86015325db83102b1304f.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-01-21T02_dd_38_dd_18Z_t_ title_eq__t_01/21/2018 02_dd_38  AM_t_ data-short_eq__t_Jan 21_t__gt_January 21_lt_/time_gt_ by vtange_lt_/strong_gt_\n\t\n\t\t_lt_br_gt_finished reading Wingnut&#039_sm_s post\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2018-01-21T04:33:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHow exactly does the highlight system work and how does it affect performance?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI was just tinkering around and realized hey_co_ maybe I could do a map-wide mesh that_t_s invisible but emits a _qt_shadow_qt_ highlight with a dark grey color or something_co_ and have the rest of the map be bright-as-heck. Wouldn_t_t that work?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEDIT1_dd_ First failed try with new _qt_shadow_qt_ object. I tried to be clever and make the _qt_shadow_qt_ mesh have inverted normals on purpose to make it invisible. Maybe inverted normals mean highlights don_t_t get triggered? _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#F2H81M%234_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#F2H81M#4_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-01-21T04:50:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_202105_qt_ data-ipsquote-contentid_eq__qt_35193_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1516501821_qt_ data-ipsquote-userid_eq__qt_28964_qt_ data-ipsquote-username_eq__qt_vtange_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ vtange said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tmaterials in BJS only react to 4 light sources?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHi again_co_ vtange.  I think that is a webGL limit_co_ not necessarily BJS framework.  Still_co_ there is something happening with BJS... material.maxSimultaneousLights.  Setting it to 10 seems to be about max_co_ before the shaders start producing errors. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#F2H81M%233_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#F2H81M#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere_co_ I managed to get 9 spotlights shining against the side of the brick column.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_202108_qt_ data-ipsquote-contentid_eq__qt_35193_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1516509232_qt_ data-ipsquote-userid_eq__qt_28964_qt_ data-ipsquote-username_eq__qt_vtange_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t20 minutes ago_co_ vtange said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHow exactly does the highlight system work and how does it affect performance?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tDo I LOOK like the author and chief custodian of the highlightLayer feature?  heh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Layer/babylon.highlightlayer.ts_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Layer/babylon.highlightlayer.ts_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//doc.babylonjs.com/how_to/highlight_layer_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/how_to/highlight_layer_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat_t_s how I learn about things.  Docs and source.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs far as performance_co_ it all depends upon what platform you are testing-upon.  You can use the profiling tools in most browsers... to do performance testing.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHighlightLayer is a 2D post-processing effect_co_ and thus is under difficult depth-rendering challenges.  Unexpected results can happen when two highLit mesh... overlap.  SOme relief might be found... by placing multiple highlightLayers on different scene layerMasks or renderID_t_s/renderGroups.  I don_t_t know much about that_co_ either_co_ but there_t_s plenty of _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/playground_qt_ rel_eq__qt_external nofollow_qt__gt_playgrounds to search_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood luck_co_ stay in touch.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-01-21T05:19:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tA little thought_dd_  Sometimes this 4-lights-per-material thing is a bit difficult to grasp.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s say the flooring to your _qt_Great Hall_qt_ is made-up of 8-planes.  Identical or different materials can be put on each _qt_tile_qt__co_ and the texture can look perfectly seamless_co_ and yet... its 8 different materials.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo... using light ranges_co_ .includedMesh_co_ .excludedMesh_co_ you can _qt_think optimized_qt_.   Your sconce light really only needs to shine on the floor tile(s) BENEATH IT.  Unlikely more than 2-of-8 floor sections will have receive light from any ONE sconce.  SO_co_ no problems.  These sconce lights don_t_t have much range... and you don_t_t want them to.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSO_co_ put LOTS of mesh into a light excludedMeshes array.  Light ONLY what needs lit... for max perf.  Ok_co_ bye again.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"vtange","Date":"2018-01-21T05:30:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_202110_qt_ data-ipsquote-contentid_eq__qt_35193_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1516511963_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t4 minutes ago_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tA little thought_dd_  Sometimes this 4-lights-per-material thing is a bit difficult to grasp.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tLet_t_s say the fooring to your _qt_Great Hall_qt_ is made-up of 8-planes.  Identical or different materials can be put on each _qt_tile_qt__co_ and the texture can look perfectly seamless_co_ and yet... its 8 different materials.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tSo... using lihgt ranes_co_ .includedMesh_co_ .excludedMesh_co_ you can _qt_think optimized_qt_.   You sconce light really only needs to shine on the tile(s) BENEATH IT.  Unlikely more than 2-of-8 floor sections will have receive light from any ONE sconce.  SO_co_ no problems.  These sconce lights don_t_t have much range... and you don_t_t want them to.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tSO_co_ put LOTS of mesh into a light.excludedMeshes array.  Light ONLY what needs lit... for max perf.  Ok_co_ bye again.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tGot it. I hadn_t_t thought of this_co_ but yeah I have a _qt_great hall_qt_ that_t_s currently one big mesh. Fortunately the flooring is tiled so it is possible to do what you mentioned.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn Blender do the materials have to literally be different_co_ but using the same texture_co_ or does BJS only care about lighting on a mesh-to-mesh basis? If this is the case then all my columns should be fine as is_sm_ since they are separate instances in the _qt_great hall_qt__co_ and have enough distance that other lights don_t_t affect them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHaha I didn_t_t know that BJS even had a mesh-highlighting feature until you told me about it_co_ naturally I_t_d think you know quite a bit on it.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-01-21T06:15:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_202112_qt_ data-ipsquote-contentid_eq__qt_35193_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1516512631_qt_ data-ipsquote-userid_eq__qt_28964_qt_ data-ipsquote-username_eq__qt_vtange_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t33 minutes ago_co_ vtange said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tIn Blender do the materials have to literally be different_co_ but using the same texture_co_ or does BJS only care about lighting on a mesh-to-mesh basis?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI think... different material_co_ but they can use same texture.  I know very little about Blender.  But_co_ you might wish to model-up a scene in BJS/playground... that is similar to _qt_great hall_qt_... and do some experiments.  I am not experienced with advanced lighting_co_ and I could easily tell you something that is incorrect.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/22238-why-the-4-light-limit-edit-limit-has-been-increased/?do_eq_findComment&amp_sm_comment_eq_127257_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/22238-why-the-4-light-limit-edit-limit-has-been-increased/?do_eq_findComment&amp_sm_comment_eq_127257_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLooks like the 16 light and 24 light demo is working_co_ but not the 32.  hmm.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]