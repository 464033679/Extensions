[{"Owner":"Blax","Date":"2015-11-19T08:33:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co_ guru_t_s!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I need advice or dig direction._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Problem_dd__lt_/p_gt__lt_p_gt_Make shader material (glsl) and in vertex shader i change vertexes position. It work ok and results is pretty._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BUT (yes_co_ again this damn _qt_BUT_qt_) _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In fragment shader i need normal for compute reflection_co_ diffuse and etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Source mesh is flat_co_ and all normal look up and equal.  Vertex shader change vertex position_co_ but normals stay not changed._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_How i can recalculate (or get somewhere _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_) ) new normals?  In vertex shader i have only ONE current vertex_co_ but for calculate normal we need face (i think _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ i.e. 3 vertexes)._lt_br_gt__lt_br_gt_How get new normal in current vertex in new position? Help please!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_p. s._lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/cyos/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/cyos/_lt_/a_gt_  Template _qt_wave_qt_  we have near situation_co_ but normal (as i understand) not recalc and in distortion result we not get real light piscture.... or have?  Trap... _lt_/p_gt__lt_p_gt_ _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"chg","Date":"2015-11-19T08:52:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106224_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18722_qt_ data-ipsquote-username_eq__qt_Blax_qt_ data-cite_eq__qt_Blax_qt_ data-ipsquote-timestamp_eq__qt_1447922008_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_p. s._lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/cyos/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/cyos/_lt_/a_gt_  Template _qt_wave_qt_  we have near situation_co_ but normal (as i understand) not recalc and in distortion result we not get real light piscture.... or have?  Trap..._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_OK_co_ so I don_t_t know what your shaders look like_co_ but let_t_s use the example of the wave effect you link to. In that case you could easily rotate the normal without looking at adjacent vertices - you have a function used to offset a vertex_co_ so the normal that is used as in input to the vertex shader needs to be rotated by the normal to the offset function (the amount of rotation needs to be scaled by the amount of that offset nb_dd_ the scaling of the offset may not be linear... I_t_m too lazy to do the maths)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-19T20:32:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You may find some info here_dd_ _lt_a href_eq__qt_http_dd_//www.ozone3d.net/tutorials/mesh_deformer.php_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.ozone3d.net/tutorials/mesh_deformer.php_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2015-11-20T07:27:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/cyos/#1YDNAM%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/cyos/#1YDNAM#5_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_it is a simple way for find  a new normal after change pos_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step 1 _dd_ you need find your function like _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_          new_pos _eq_ function(old_pos)_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step 2 _dd_ call function for 2 new pos_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_         new_pos1 _eq_ function(old_pos+vec3(0._co_0._co_x))_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_         new_pos2 _eq_ function(old_pos+vec3(x_co_0._co_0.0))_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_x_dd_ 0.2 _dd_ need some test for diffrent object_dd_)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step 3 _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_      vec3 nrm _eq_ -1.0*normalize( cross(new_pos1 - new_pos _co_new_pos2 - new_pos))_sm_ _lt_/p_gt__lt_p_gt_      vNormal _eq_ nrm*0.5+normal*0.5_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/cyos/#1YDNAM%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/cyos/#1YDNAM#6_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Blax","Date":"2015-11-20T08:19:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106364_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18722_qt_ data-ipsquote-username_eq__qt_NasimiAsl_qt_ data-cite_eq__qt_NasimiAsl_qt_ data-ipsquote-timestamp_eq__qt_1448004458_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/cyos/#1YDNAM%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/cyos/#1YDNAM#5_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_it is a simple way for find  a new normal after change pos_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step 1 _dd_ you need find your function like _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_          new_pos _eq_ function(old_pos)_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step 2 _dd_ call function for 2 new pos_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_         new_pos1 _eq_ function(old_pos+vec3(0._co_0._co_x))_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_         new_pos2 _eq_ function(old_pos+vec3(x_co_0._co_0.0))_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_x_dd_ 0.2 _dd_ need some test for diffrent object_dd_)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step 3 _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_      vec3 nrm _eq_ -1.0*normalize( cross(new_pos1 - new_pos _co_new_pos2 - new_pos))_sm_ _lt_/p_gt__lt_p_gt_      vNormal _eq_ nrm*0.5+normal*0.5_sm__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/cyos/#1YDNAM%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/cyos/#1YDNAM#6_lt_/a_gt__lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thank you!!!  I need think about it and make tests _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Now i wonder can i make function x2_eq_f(x1)_co_ because we dont know how is vertexes sequences in shader.   Look_co_ we have quad surface (2 triangles). Sequence may be p1-p2-p3_co_p1-p3-p4  or p1-p2-p4_co_p2-p3-p4 or another variants._lt_/p_gt__lt_p_gt_And x2 (in midn shader) and x2 (in us mind) may be different. Or i mistaken?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2015-11-20T08:40:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_11_2015/post-13038-0-84341400-1448008826.gif_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_11_2015/post-13038-0-84341400-1448008826.gif_qt_ data-fileid_eq__qt_5626_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-13038-0-84341400-1448008826.gif_qt__gt__lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_maybe _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cross(p1-p_co_p2-p)*0.25+cross(p2-p_co_p3-p)*0.25+cross(p3-p_co_p4-p)*0.25+cross(p4-p_co_p1-p)*0.25 _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Blax","Date":"2015-11-20T12:54:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106369_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18722_qt_ data-ipsquote-username_eq__qt_NasimiAsl_qt_ data-cite_eq__qt_NasimiAsl_qt_ data-ipsquote-timestamp_eq__qt_1448008832_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/public/style_images/master/attachicon.gif_qt_ alt_eq__qt_attachicon.gif_qt__gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/index.php?app_eq_core&amp_sm_module_eq_attach&amp_sm_section_eq_attach&amp_sm_attach_rel_module_eq_post&amp_sm_attach_id_eq_5626_qt__gt_test1.gif_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_maybe _dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cross(p1-p_co_p2-p)*0.25+cross(p2-p_co_p3-p)*0.25+cross(p3-p_co_p4-p)*0.25+cross(p4-p_co_p1-p)*0.25 _lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_O! Thank you for picture and help!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I understand vector of you mind_co_ but how i get p2 or p1_co_ if can write y_eq_f(x). How vertex get Shader in next iteration?_lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//i057.radikal.ru/1511/37/13894cca389a.jpg_qt_ alt_eq__qt_13894cca389a.jpg_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2015-11-21T07:05:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_just move the current position to the sides like vec3(0._co_0._co_0.1) or vec3(0.1_co_0._co_0.) maybe you change that pos per case but this way is not final answer just closer to the final normal_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_** you can find  flat normal with normalize(cross(dFdx(pos*-1.)_co_dFdy(pos))) _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Blax","Date":"2015-11-23T07:39:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_106487_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18722_qt_ data-ipsquote-username_eq__qt_NasimiAsl_qt_ data-cite_eq__qt_NasimiAsl_qt_ data-ipsquote-timestamp_eq__qt_1448089505_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_just move the current position to the sides like vec3(0._co_0._co_0.1) or vec3(0.1_co_0._co_0.) maybe you change that pos per case but this way is not final answer just closer to the final normal_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_** you can find  flat normal with normalize(cross(dFdx(pos*-1.)_co_dFdy(pos))) _lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thank you again!_lt_/p_gt__lt_p_gt_While i can_t_t get good result (small shiffts i was try). Will continue dig and tell here about progress.... or lack of progress _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Blax","Date":"2015-11-25T14:35:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt__lt_span_gt__lt_span_gt_NasimiAsl_co_ hi!_lt_/span_gt__lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_span_gt__lt_span_gt_I made this _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/span_gt__lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_span_gt__lt_span_gt_You method is right. _lt_/span_gt__lt_/span_gt__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_float\tdelta\t\t_eq_\t0.08_sm_vec3    p\t\t_eq_\tposition_sm_vec3 \tp1\t\t_eq_\tnormalize(vec3(p.x-delta_co_\tyFXYZ(vec3(p.x-delta_co_p.yz))_co_\tp.z))_sm_vec3 \tp2\t\t_eq_\tnormalize(vec3(p.x_co_\t\tyFXYZ(vec3(p.xy_co_p.z-delta))_co_\tp.z-delta))_sm_\tvNormal\t\t\t_eq_\tnormalize(cross((p1-p)_co_(p2-p)))_sm__lt_/pre_gt__lt_p_gt_Thank_t_s!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But i have other absorbing problem - near zero point of mesh we have _qt_quirk edge_qt_ effect. I think because_co_ when number_t_s is very small we have math mistakes in GPU. _lt_/p_gt__lt_p_gt_I cant beat this (three day_t_s test for catch problem). And _lt_span_gt__lt_span_gt_invented only shift all mesh away from zero point _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  Yes_co_ shame _lt_/span_gt__lt_/span_gt_with me for this _qt_solution_qt__co_ but while this work _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_))_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]