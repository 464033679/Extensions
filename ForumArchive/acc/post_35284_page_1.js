[{"Owner":"Dad72","Date":"2018-01-25T14:31:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI wish I could clone a complete scene to reuse it in another canvas with a new engine_co_ but I can not do it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHas anyone ever done this kind of thing? how can this be done?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn my project I use several camera_co_ don a serves the editor. I wish I could use a glimpse of the scene in another canvas in a dialog using another camera view. So I want to make a copy or clone of this scene temporarily.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor the moment I try this without success_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_let canvasBuild _eq_ document.getElementById(_qt_buildRenderer_qt_)_sm_\nlet engineForBuild _eq_ new BABYLON.Engine(canvasBuild_co_ true)_sm_\n\nlet newScene _eq_ global.scene_sm_ //Copy of the scene\n\nnewScene.activeCameras[0].dispose()_sm_// I do not want to use this camera of the newScene\n// But _dd_ This removes the camera on my main scene and not on the new copy scene.\n\nengineForBuild.runRenderLoop(function() {\n\tnewScene.render()_sm_\n})_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThanks for your help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-01-25T15:14:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign_lt_/a_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\t? maybe\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-01-25T15:39:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI try but nothing is displayed in the new canvas. The runRenderLoop does not draw the scene._lt_br /_gt_\n\tI also try to serialize the scene_co_ but it sends me an error on scene.render().\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_let canvasBuild _eq_ document.getElementById(_qt_buildRenderer_qt_)_sm_\nlet engineForBuild _eq_ new BABYLON.Engine(canvasBuild_co_ true)_sm_\n\nvar scene _eq_ new BABYLON.Scene(engineForBuild)_sm_\t\t\t\nscene _eq_ Object.assign(scene_co_ global.scenes[0])_sm_\n//scene _eq_ BABYLON.SceneSerializer.Serialize(global.scenes[0])_sm_\n\nengineForBuild.runRenderLoop(function() {\n\tscene.render()_sm_\n})_sm_\t_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-01-25T16:27:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI tired this_dd__lt_br /_gt_\n\t_lt_br /_gt_\n\tfunction completeAssign(target_co_ ...sources) {_lt_br /_gt_\n\t  sources.forEach(source _eq_&gt_sm_ {_lt_br /_gt_\n\t    let descriptors _eq_ Object.keys(source).reduce((descriptors_co_ key) _eq_&gt_sm_ {_lt_br /_gt_\n\t      descriptors[key] _eq_ Object.getOwnPropertyDescriptor(source_co_ key)_sm__lt_br /_gt_\n\t      return descriptors_sm__lt_br /_gt_\n\t    }_co_ {})_sm__lt_br /_gt_\n\t    // by default_co_ Object.assign copies enumerable Symbols too_lt_br /_gt_\n\t    Object.getOwnPropertySymbols(source).forEach(sym _eq_&gt_sm_ {_lt_br /_gt_\n\t      let descriptor _eq_ Object.getOwnPropertyDescriptor(source_co_ sym)_sm__lt_br /_gt_\n\t      if (descriptor.enumerable) {_lt_br /_gt_\n\t        descriptors[sym] _eq_ descriptor_sm__lt_br /_gt_\n\t      }_lt_br /_gt_\n\t    })_sm__lt_br /_gt_\n\t    Object.defineProperties(target_co_ descriptors)_sm__lt_br /_gt_\n\t  })_sm__lt_br /_gt_\n\t  return target_sm__lt_br /_gt_\n\t}_lt_br /_gt_\n\t_lt_br /_gt_\n\tvar sceneClone _eq_ completeAssign({}_co_ scene)_sm__lt_br /_gt_\n\t_lt_br /_gt_\n\tand it will console log out the correct info_co_ but says sceneClone.render is not a function... odd.  Hmm I might have to look into this more. cool problem.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-01-25T16:32:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_202574_qt_ data-ipsquote-contentid_eq__qt_35284_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1516897628_qt_ data-ipsquote-userid_eq__qt_19199_qt_ data-ipsquote-username_eq__qt_Pryme8_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t4 minutes ago_co_ Pryme8 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tHmm I might have to look into this more. cool problem.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tthank you for your help\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-01-25T18:03:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI started messing around with this_dd__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.Scene.prototype.clone _eq_ function(){\n\tvar s _eq_ new BABYLON.Scene(engine)_sm_\n\tvar props _eq_ Object.keys(this)_sm_\n\tfor(var i_eq_0_sm_ i &lt_sm_ props.length_sm_ i++){\n\t\tif(Object.prototype.toString.call(this[props[i]]) _eq__eq_ _t_[object Array]_t_){\n\t\t\tfor(var j_eq_0_sm_ j&lt_sm_this[props[i]]_sm_ j++){\n\t\t\t\tif(this[props[i]][j].clone){\n\t\t\t\t\ts[props[i]].push(this[props[i]][j].clone())_sm_\n\t\t\t\t}else{\n\t\t\t\t\ts[props[i]].push(this[props[i]][j])_sm_\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\t\n\treturn s_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\twhich is not even close to perfect_co_ but made me realize we need a method for cloning objects between scene context._lt_br /_gt_\n\tso like a clone(name_co_  scene)_sm_ Cause right now its just cloning it in the old scenes context._lt_br /_gt_\n\t_lt_br /_gt_\n\tAnother idea is how about we serialize the scene on a secondary variable then parse that back into a scene._lt_br /_gt_\n\t_lt_br /_gt_\n\t_lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/6039-exporting-a-babylon-scene-to-a-file/_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/6039-exporting-a-babylon-scene-to-a-file/_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-01-25T18:13:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs long as the scene is in the same engine_co_ could not all the reference arrays in scene (e.g. meshes_co_ lights_co_ cameras_co_ materials_co_ particles) be copied to the new scene_co_ but still contain the same references?  Types which  refer to a scene within them_co_ Nodes_co_ would need to have the value changed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am not hopeful_co_ since it will probably fall down on materials.       \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/?do_eq_hovercard_qt_ data-mentionid_eq__qt_19199_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/_qt_ rel_eq__qt__qt__gt_@Pryme8_lt_/a_gt__co_ I know you were trying to do this.  Mine is more explicit.  Yours also does  not take into account the reference of scene in nodes.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-01-25T18:18:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah_co_ I am only half-a**ed lookin at  this intermittently while at work.  Have not had a chance to really bite into it.  _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__lt_br /_gt_\n\t_lt_br /_gt_\n\tI was looking at serializing then loading the scene again with _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/classes/3.0/SceneLoader_qt_ style_eq__qt_background-color_dd_transparent_sm_color_dd_#00aeef_sm_font-size_dd_15.2px_sm__qt_ rel_eq__qt_external nofollow_qt__gt_SceneLoader_lt_/a_gt_ into a new object.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Pryme8","Date":"2018-01-25T18:24:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\there is a horrible solution..._lt_br /_gt_\n\t_lt_br /_gt_\n\tI bet this will never work with a large scene...\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.Scene.prototype.clone _eq_ function(){\n\tvar scene_sm_\n\tvar s _eq_ BABYLON.SceneSerializer.Serialize(this)_sm_\n\tvar _s _eq_ JSON.stringify(s)_sm_\n\tvar loader _eq_ BABYLON.SceneLoader.Load(_t__t__co_ _t_data_dd__t_+_s_co_ this.engine_co_ (e)_eq_&gt_sm_{\n\t\tscene _eq_ e_sm_\n\t})_sm_\t\n\t\n\tfunction watch(){\n\t\tif(scene){return scene}else{\n\t\t\tsetTimeout(function(){watch()_sm_}_co_0)_sm_\n\t\t}\n\t}\n\treturn watch()_sm_\n} \n\n\ndocument.addEventListener(_qt_DOMContentLoaded_qt__co_ () _eq_&gt_sm_ {\n\t\tvar canvas _eq_ document.getElementById(_t_renderCanvas_t_)_sm_\t\t\t\n\t\tvar engine _eq_ new BABYLON.Engine(canvas_co_ true)_sm_\n\t\tthis.engine _eq_ engine_sm_\n\n\t\tvar scene _eq_ new BABYLON.Scene(engine)_sm_\n\t\tthis.scene _eq_ scene_sm_\n\t\tscene.clearColor _eq_ new BABYLON.Color4(1_co_ 0_co_ 0_co_ 1.0)_sm_\n\t\t\n\t\tvar light _eq_ new BABYLON.SpotLight(_qt_spotLight_qt__co_\n\t\tnew BABYLON.Vector3(0_co_ 28_co_ 0)_co_\n\t\tnew BABYLON.Vector3(0_co_ -1_co_ 0)_co_\n\t\tMath.PI / 2_co_ 20_co_ scene)_sm_\n\t\t\n        light.intensity _eq_ 0.9_sm_\t\t\t\n\t\t\n\t\tvar camera _eq_ new BABYLON.FreeCamera(_qt_camera1_qt__co_ new BABYLON.Vector3(0_co_ 10_co_ -10)_co_ scene)_sm_\n\t\tcamera.setTarget(BABYLON.Vector3.Zero())_sm_\t\t\n\t\t\n\t\tconsole.log(scene)_sm_\n\t\t\n\t\twindow.addEventListener(_qt_resize_qt__co_()_eq_&gt_sm_{\t\t\t\t\n\t\t\tengine.resize()_sm_\n\t\t})_sm_\n\t\t\n\t\tvar sceneClone _eq_ scene.clone()_sm_\n\n\t\tconsole.log(sceneClone)_sm_\n\t\t\n\t\tsceneClone.clearColor _eq_ new BABYLON.Color4(0_co_ 0_co_ 1.0_co_ 1.0)_sm_\n\t\t\n\t\tengine.runRenderLoop(()_eq_&gt_sm_{\n\t\t\tsceneClone.render()_sm_ \n\t\t})_sm_\t\t\n}_co_false)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-01-25T22:37:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs you want to use it with a new context_co_ I guess the idea of _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/?do_eq_hovercard_qt_ data-mentionid_eq__qt_19199_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/19199-pryme8/_qt_ rel_eq__qt__qt__gt_@Pryme8_lt_/a_gt_ is the best_dd_ just serialize it and reload it\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-01-26T07:37:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThank you Pryme_co_ this seems the best solution.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]