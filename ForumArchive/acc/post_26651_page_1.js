[{"Owner":"MackeyK24","Date":"2016-11-27T11:17:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI need some help with color math. I am trying to create height maps in code... i can read raw terrain data and get the float raw height value for each pixel (x_co_y) as a value from 0 to 1\n_lt_/p_gt_\n\n_lt_p_gt_\n\t0 being black and 1 being white. I need to convert that 0 to 1 float to a black and white pixel based on the level of 0 to 1.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is an example code block.. I need to basically create a Color.FromFloat type function as listed below_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_                Texture2D duplicateHeightMap _eq_ new Texture2D(terrain.terrainData.heightmapWidth_co_ terrain.terrainData.heightmapHeight_co_ TextureFormat.ARGB32_co_ false)_sm_\n                float[_co_] rawHeights _eq_ terrain.terrainData.GetHeights(0_co_ 0_co_ terrain.terrainData.heightmapWidth_co_ terrain.terrainData.heightmapHeight)_sm_\n\n                /// run through the array row by row\n                for (int y_eq_0_sm_ y &lt_sm_ duplicateHeightMap.height_sm_ y++)\n                {\n                    for (int x_eq_0_sm_ x &lt_sm_ duplicateHeightMap.width_sm_ x++)\n                    {\n                        // height map color (0 to 1)\n                        float rawHeight _eq_ rawHeights[x_co_ y]_sm_\n\n                        // NOTE_dd_ HERE IS WHERE I NEED HELP (MAYBE GRAYSCALE ???)\n                        Color color _eq_ Color.FromFloat(rawHeight)_sm_\n\n                        duplicateHeightMap.SetPixel(x_co_ y_co_ color)_sm_\n                    }\n                }\n                // Apply all SetPixel calls\n                duplicateHeightMap.Apply()_sm_\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2016-11-27T11:39:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tShould this work_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tColor color _eq_ new Color(rawHeight * 255.0f_co_ rawHeight * 255.0f_co_ rawHeight * 255.0f_co_ 1.0f)_sm_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-28T18:07:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThis should work if rawheight is between 0 and 1\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2016-11-29T18:49:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIf you are familiar with the exporter code... Check out this enhancement for support native unity terrains (Note how i read the terrains raw heights... then create a height map based on the height values and use a darkness level to factor the level of darkness of the calculated grayscaled color channels)_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_        private BabylonMesh ConvertUnityTerrainToBabylon(Terrain terrain_co_ GameObject gameObject_co_ ref UnityMetaData metaData_co_ ref List&lt_sm_BabylonExport.Entities.BabylonParticleSystem&gt_sm_ particleSystems_co_ ref List&lt_sm_UnityFlareSystem&gt_sm_ lensFlares_co_ ref string componentTags)\n        {\n            BabylonMesh babylonMesh _eq_ new BabylonMesh { name _eq_ gameObject.name_co_ id _eq_ GetID(gameObject) }_sm_\n            metaData.type _eq_ _qt_Terrain_qt__sm_\n            babylonMesh.tags _eq_ componentTags_sm_\n            babylonMesh.tags +_eq_ _qt_ [TERRAIN]_qt__sm_\n            if (!String.IsNullOrEmpty(babylonMesh.tags)) {\n                babylonMesh.tags _eq_ babylonMesh.tags.Trim()_sm_\n            }\n\n            ExporterWindow.ReportProgress(1_co_ _qt_Parsing terrain_dd_ _qt_ + gameObject.name)_sm_\n\n            var transform _eq_ gameObject.transform_sm_\n\n            babylonMesh.parentId _eq_ GetParentID(transform)_sm_\n\n            babylonMesh.position _eq_ transform.localPosition.ToFloat()_sm_\n\n            babylonMesh.rotation _eq_ new float[3]_sm_\n            babylonMesh.rotation[0] _eq_ transform.localRotation.eulerAngles.x * (float)Math.PI / 180_sm_\n            babylonMesh.rotation[1] _eq_ transform.localRotation.eulerAngles.y * (float)Math.PI / 180_sm_\n            babylonMesh.rotation[2] _eq_ transform.localRotation.eulerAngles.z * (float)Math.PI / 180_sm_\n\n            babylonMesh.scaling _eq_ transform.localScale.ToFloat()_sm_\n\n            babylonMesh.isVisible _eq_ false_sm_\n            babylonMesh.visibility _eq_ 0_sm_\n            babylonMesh.checkCollisions _eq_ false_sm_\n\n            // Terrain\n            var generator _eq_ gameObject.GetComponent&lt_sm_BabylonTerrainGenerator&gt_sm_()_sm_\n            if (terrain !_eq_ null &amp_sm_&amp_sm_ generator !_eq_ null) {\n                bool png _eq_ (exportationOptions.DefaultImageFormat _eq__eq_ (int)BabylonImageFormat.PNG)_sm_\n                string fext _eq_ (png _eq__eq_ true) ? _qt_.png_qt_ _dd_ _qt_.jpg_qt__sm_\n                metaData.properties.Add(_qt_width_qt__co_ terrain.terrainData.size.x)_sm_\n                metaData.properties.Add(_qt_length_qt__co_ terrain.terrainData.size.z)_sm_\n                metaData.properties.Add(_qt_height_qt__co_ terrain.terrainData.size.y)_sm_\n                metaData.properties.Add(_qt_detailWidth_qt__co_ terrain.terrainData.detailWidth)_sm_\n                metaData.properties.Add(_qt_detailHeight_qt__co_ terrain.terrainData.detailHeight)_sm_\n                metaData.properties.Add(_qt_heightmapWidth_qt__co_ terrain.terrainData.heightmapWidth)_sm_\n                metaData.properties.Add(_qt_heightmapHeight_qt__co_ terrain.terrainData.heightmapHeight)_sm_\n                metaData.properties.Add(_qt_minimumHeightLevel_qt__co_ generator.minimumHeightLevel)_sm_\n                metaData.properties.Add(_qt_maximumHeightLevel_qt__co_ generator.maximumHeightLevel)_sm_\n                metaData.properties.Add(_qt_groundTessellation_qt__co_ generator.groundTessellation)_sm_\n                if (generator.terrainSurfaceMaterial !_eq_ null) {\n                    var mat _eq_ DumpMaterial(generator.terrainSurfaceMaterial)_sm_\n                    metaData.properties.Add(_qt_surfaceMaterialId_qt__co_ mat.id)_sm_\n                } else {\n                    metaData.properties.Add(_qt_surfaceMaterialId_qt__co_ null)_sm_\n                }\n                float[_co_] rawHeights _eq_ terrain.terrainData.GetHeights(0_co_ 0_co_ terrain.terrainData.heightmapWidth_co_ terrain.terrainData.heightmapHeight)_sm_\n                if (generator.terrainMode _eq__eq_ BabylonTerrainMode.HeightMap) {\n                    ExporterWindow.ReportProgress(1_co_ _qt_Generating terrain heightmap_dd_ _qt_ + gameObject.name)_sm_\n                    Texture2D heightMap _eq_ new Texture2D(terrain.terrainData.heightmapWidth_co_ terrain.terrainData.heightmapHeight_co_ TextureFormat.ARGB32_co_ false)_sm_\n                    for (int y_eq_0_sm_ y &lt_sm_ heightMap.height_sm_ y++) {\n                        for (int x_eq_0_sm_ x &lt_sm_ heightMap.width_sm_ x++) {\n                            float height _eq_ rawHeights[x_co_ y]_sm_\n                            float gray _eq_ (0.2126f * height * 255.0f) + 0.7152f * (height * 255.0f) + 0.0722f * (height * 255.0f)_sm_\n                            gray _eq_ gray / generator.heightmapDarkness_sm_\n                            Color color _eq_ new Color(gray_co_ gray_co_ gray_co_ 1.0f)_sm_\n                            heightMap.SetPixel(x_co_ y_co_ color)_sm_\n                        }\n                    }\n                    heightMap.Apply()_sm_\n                    string tempFilename _eq_ _qt_temp_qt_ + terrain.name.Replace(_qt_ _qt__co_ _qt__qt_).Replace(_qt_(_qt__co_ _qt__qt_).Replace(_qt_)_qt__co_ _qt__qt_) + _qt_Heightmap_qt_ + fext_sm_\n                    string tempTexturePath _eq_ Path.Combine(Application.dataPath.Replace(_qt_/Assets_qt__co_ _qt_/Temp/data_qt_)_co_ tempFilename)_sm_\n                    string heightmapEncoding _eq_ (png) ? _qt_data_dd_image/png_sm_base64_co__qt_ _dd_ _qt_data_dd_image/jpg_sm_base64_co__qt__sm_\n                    byte[] heightmapBytes _eq_ (png) ? heightMap.EncodeToPNG() _dd_ heightMap.EncodeToJPG(exportationOptions.DefaultQualityLevel)_sm_\n                    metaData.properties.Add(_qt_heightmapBase64_qt__co_ (heightmapEncoding + Convert.ToBase64String(heightmapBytes)))_sm_\n                    string temp _eq_ Path.GetDirectoryName(tempTexturePath)_sm_\n                    if (!Directory.Exists(temp)) Directory.CreateDirectory(temp)_sm_\n                    File.WriteAllBytes(tempTexturePath_co_ heightmapBytes)_sm_\n                } else {\n                    babylonMesh.isVisible _eq_ true_sm_\n                    babylonMesh.visibility _eq_ 1_sm_\n                    babylonMesh.checkCollisions _eq_ true_sm_\n                    ExporterWindow.ReportProgress(1_co_ _qt_Generating terrain mesh_dd_ _qt_ + gameObject.name)_sm_\n\n\n                    \n                }\n            }\n            babylonMesh.metadata _eq_ metaData_sm_\n            babylonScene.MeshesList.Add(babylonMesh)_sm_\n\n            // Animations\n            ExportAnimations(transform_co_ babylonMesh)_sm_\n\n            if (IsRotationQuaternionAnimated(babylonMesh))\n            {\n                babylonMesh.rotationQuaternion _eq_ transform.localRotation.ToFloat()_sm_\n            }\n\n            // Lens Flares\n            ParseLensFlares(gameObject_co_ babylonMesh.id_co_ ref lensFlares)_sm_\n\n            // Particles Systems\n            ParseParticleSystems(gameObject_co_ babylonMesh.id_co_ ref particleSystems)_sm_\n\n            return babylonMesh_sm_\n        }\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen in the unity loader i create the actual ground like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_            // Parse scene native mesh and heightmap terrains\n            var terrains_dd_BABYLON.Mesh[] _eq_ this._scene.getMeshesByTags(_qt_[TERRAIN]_qt_)_sm_\n            if (terrains !_eq_ null) {\n                terrains.forEach((terrain)_eq_&gt_sm_{\n                    if (terrain.metadata !_eq_ null &amp_sm_&amp_sm_ terrain.metadata.properties !_eq_ null) {\n                        if (terrain.metadata.properties.heightmapBase64) {\n                            var tempBase64_dd_string _eq_ terrain.metadata.properties.heightmapBase64_sm_\n                            var terrainWidth_dd_number _eq_ terrain.metadata.properties.width_sm_\n                            var terrainLength_dd_number _eq_ terrain.metadata.properties.length_sm_\n                            var terrainHeight_dd_number _eq_ terrain.metadata.properties.height_sm_\n                            var minimumHeightLevel_dd_number _eq_ terrain.metadata.properties.minimumHeightLevel_sm_\n                            var maximumHeightLevel_dd_number _eq_ terrain.metadata.properties.maximumHeightLevel_sm_\n                            var groundTessellation_dd_number _eq_ terrain.metadata.properties.groundTessellation_sm_\n                            var surfaceMaterialId_dd_string _eq_ terrain.metadata.properties.surfaceMaterialId_sm_\n                            var surfaceMaterialInst_dd_BABYLON.Material _eq_ null_sm_\n                            if (surfaceMaterialId !_eq_ null &amp_sm_&amp_sm_ surfaceMaterialId !_eq__eq_ _qt__qt_) {\n                                var material_dd_BABYLON.Material _eq_ this._scene.getMaterialByID(surfaceMaterialId)_sm_\n                                surfaceMaterialInst _eq_ material_sm_\n                            }\n                            BABYLON.MeshBuilder.CreateGroundFromHeightMap((terrain.name + _qt__Mesh_qt_)_co_ tempBase64_co_ {\n                                width_dd_ terrainWidth_co_\n                                height_dd_ terrainLength_co_\n                                subdivisions_dd_ groundTessellation_co_\n                                minHeight_dd_ minimumHeightLevel_co_\n                                maxHeight_dd_ maximumHeightLevel_co_\n                                updatable_dd_ true_co_\n                                onReady_dd_ (mesh_dd_BABYLON.Mesh) _eq_&gt_sm_ {\n                                    mesh.parent _eq_ terrain_sm_\n                                    mesh.scaling _eq_ terrain.scaling.clone()_sm_\n                                    mesh.position.x -_eq_ terrain.position.x_sm_\n                                    mesh.position.z -_eq_ terrain.position.z_sm_\n                                    mesh.checkCollisions _eq_ true_sm_\n                                    if (surfaceMaterialInst !_eq_ null) {\n                                        mesh.material _eq_ surfaceMaterialInst_sm_\n                                    }\n                                }\n                            }_co_ this._scene)_sm_\n                        } else {\n                            // TODO_dd_ Native Mesh - Note should try do all c# editor side\n                        }\n                    }\n                })_sm_\n            }\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou gotta luv that metadata i added _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNote_dd_ Although i get VERY SLOW and CHOPPY movement using the activeCamera.attachControl for user input. Also brings fps down about 15fps soon as you start moving on the created found terrain... Ever heard of that ???\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-29T21:42:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI_t_am already loving it _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ But I can_t_t wait to see your PR _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-30T03:39:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_152867_qt_ data-ipsquote-contentid_eq__qt_26651_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1480445382_qt_ data-ipsquote-userid_eq__qt_24012_qt_ data-ipsquote-username_eq__qt_MackeyK24_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t8 hours ago_co_ MackeyK24 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tAlthough i get VERY SLOW and CHOPPY movement using the activeCamera.attachControl for user input. Also brings fps down about 15fps soon as you start moving on the created found terrain... Ever heard of that ???\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHi again MK24!  You_t_re kickin_t_ good butt_co_ as always.  Nice work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you know about _qt_profiling_qt_ in the browser_t_s dev tools area?  I haven_t_t used it much at all_co_ but rumor says you can easily find what is bogging-down a scene. *shrug*\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny chance you can reproduce the symptom in a playground scene?  That might tell more.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MrVR","Date":"2016-12-02T16:31:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p style_eq__qt_background_dd_url(&quot_sm_&quot_sm_)_sm__qt__gt_\n\tNice _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/24012-mackeyk24/?do_eq_hovercard_qt_ data-mentionid_eq__qt_24012_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/24012-mackeyk24/_qt_ rel_eq__qt__qt__gt_@MackeyK24_lt_/a_gt_ this is crazy amazing jajaja_co_ hey do you have any idea or an estimate date for the release of the API?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MackeyK24","Date":"2016-12-02T21:18:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah... i think the ground subdivisions was set too high _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]