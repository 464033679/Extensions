[{"Owner":"naitro","Date":"2014-07-16T18:25:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co_ here the situation - for example I have some third-person game(camera in sky) there player walk in full darkness across the rooms with flashlight_co_ so if he direct flashlight on the wall into the room then only this wall and space front have to be highlighted_co_ but all over still have to be in darkness include space behind this wall._lt_/p_gt__lt_p_gt_here simple scene_dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/QZD4w/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/QZD4w/_lt_/a_gt_ in this scene only big right box have to be highlighted and ground before_co_ can I do it in any case? I can_t_t use shadows cause then I have to use directional light and in this case all rooms will be highlighted.. mb exist some over way to do this? For example mb just don_t_t render mesh which are out of view.. but in this case problem still will be with ground.. _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-16T21:34:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt_space front have to be highlighted_co_ but all over still have to be in darkness include space behind this wall._lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Naitro_co_ well one thing you can try is setting the _lt_u_gt_range_lt_/u_gt_ value for the spotlight. If you wall thickness is greater than the range then no light will show on the other side._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Try adding this to your script _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_light.range _eq_ 150_sm_ _lt_/pre_gt__lt_p_gt_By the way_co_ welcome to the babylon forum._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-07-16T21:51:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Inserting _qt_light.range _eq_ 300_sm__qt_ at line 15 did have the effect of working.  Probably good to set a range anyway_co_ since a flashlight does not have infinite range.  Does not all solve the problem though_co_ unless the range is less than the depth of the smallest box_co_ but even then the flashlight would have to right up to the wall to be seen on the other side._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"naitro","Date":"2014-07-17T04:15:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yeah I tried add range_co_ but there is no solution for me._lt_/p_gt__lt_p_gt_Here little bit more complex example_dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/EjTh9/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/EjTh9/_lt_/a_gt_ in this example left wall have to be highlighted_co_ but corridor not. _lt_/p_gt__lt_p_gt_Actually in my case I wanna did it not like exactly flashlight_co_ but mostly like view of character_co_ so if character staying at one side of the room_co_ he have to see all room_co_ but not what behind the walls.. mb light not perfect solution for it? Any solution I can do it with lights or anything?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2014-07-17T05:18:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi!  _lt_a href_eq__qt_http_dd_//www.babylonjs.com/playground/#2HQ0M0_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/playground/#2HQ0M0_lt_/a_gt_  I thought maybe... if we could push all the wall boxes into a ShadowGenerator_co_ maybe the wall would cast shadows_co_ which would make the light act correctly.  But I failed.  The ShadowGenerator is being grumpy... maybe because I tried to push 51 boxes into its renderList._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Its all there_co_ remarked-out.  Maybe somebody else can figure out what_t_s wrong with the shadow generator.  Adjust things_co_ hit Run_co_ over and over_co_ as wanted.  Good luck._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Shadows tutorial - _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/wiki/17-Shadows_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/wiki/17-Shadows_lt_/a_gt__lt_/p_gt__lt_p_gt_Playground Shadows demo - _lt_a href_eq__qt_http_dd_//www.babylonjs.com/playground/?15_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/playground/?15_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-17T05:57:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt_so if character staying at one side of the room_co_ he have to see all room_lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Naitro_co_ I set the range to 140 and just the room gets illuminated._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But I suspect that is not what you want. If the character starts to move_co_ eventually he will be close enough to a wall that the spotlight will _qt_shine through a wall_qt_. And once the character moves out into a corridor_co_ you may have a spotlight cone size problem as well._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You could make the range less than the thickness of the wall_co_ but then it will not meet your criterion of _qt__lt_em_gt_he have to see all room_lt_/em_gt__qt_. But as JCP says _qt__lt_em_gt_a flashlight does not have infinite range_lt_/em_gt__qt_._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe there is someway of detecting the closest wall in the direction the flashlight is pointing and adjusting the range dynamically - but that is above my scripting grade _sm_-)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2014-07-17T06:32:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hey Wingy_co_ look what I found in the wiki _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_span style_eq__qt_color_dd_rgb(51_co_51_co_51)_sm_font-family_dd_Helvetica_co_ arial_co_ freesans_co_ clean_co_ sans-serif_co_ _t_Segoe UI Emoji_t__co_ _t_Segoe UI Symbol_t__sm_font-size_dd_15px_sm__qt__gt_Only directional lights can cast shadows_lt_/span_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_We are using a spotlight here_co_ so no shadows._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"naitro","Date":"2014-07-17T06:49:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_Maybe there is someway of detecting the closest wall in the direction the flashlight is pointing and adjusting the range dynamically _lt_/span_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_it_t_s sounds like option_co_ but partly - for example_co_ character staying in the corner of the room and look at opposite corner in this case closest wall will be closest then that corner and range will be not enough.. and also I don_t_t know how exactly I can calculate that range_co_ cause all that splashes on the floor_co_ but it_t_s ok _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_maybe somebody else can figure out what_t_s wrong with the shadow generator_lt_/span_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I wrote above about shadows_co_ it_t_s works only for directional light which are not suitable for me_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe someone have another decision in this situation instead use light? .. I start thinking about just hide all object which are not line of sight_co_ but I think it will not be a beautiful solution.._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2014-07-17T08:30:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt_for example_co_ character staying in the corner of the room and look at opposite corner in this case closest wall will be closest then that corner and range will be not enough_lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That is why I said _qt__lt_em_gt_in the direction the light is pointing_lt_/em_gt__qt_ - not just the closest wall._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_cheers_co_ gryff _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"naitro","Date":"2014-07-17T09:00:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_That is why I said _qt__lt_/span_gt__lt_em_gt_in the direction the light is pointing_lt_/em_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt__qt_ - not just the closest wall._lt_/span_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_if we will take closest in direction_co_ then also we will have extra highlighted spaces behind walls_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_img src_eq__qt_http_dd_//i.imgur.com/Ikgmrxh.jpg_qt_ alt_eq__qt_Ikgmrxh.jpg_qt__gt__lt_/p_gt__lt_p_gt_in a word I wanna achieve effect similar to this_dd_ _lt_a href_eq__qt_http_dd_//ncase.me/sight-and-light/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//ncase.me/sight-and-light/_lt_/a_gt_ but in 3d and in best way object in darkness should not rendered.. little bit later I will try this method_co_ but afraid it can be very hurt for fps.. and mb not so beautiful.. _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"reddozen","Date":"2014-07-17T14:17:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Wingnut is on the right path... you have to use a per-pixel light source and shadows to keep the light from spilling over. This may be a limitation of Babylon currently._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_With that though the shadow would nullify the additional light. My other question would be how are you seeing the light on the other side of the wall. In most cases It shouldn_t_t be in the visible frame anyway if we_t_re talking about a wall blocking it._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-07-17T14:28:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_reddozen_co_  Way at the beginning he said it was a third person _qt_camera in the sky_qt__co_ which is why the problem would be in the frame._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"reddozen","Date":"2014-07-17T14:55:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Sure_co_ but you could still have a ceiling. Most of the time the camera uses the ceiling as the height limit in 3rd person games. You usually don_t_t clip through walls._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Only other way to solve this if you really want to not have ceilings_co_ then you_t_ll need a shadow._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-17T17:12:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Other idea_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Using shadows and directional lights but use the wonderful light.excludedMeshes feature _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You can play with this array to add a list of meshes you do not want to be lighted by the light. Sounds like a good way to solve your issue_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2014-07-17T18:40:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_But the directional light cannot act like a flashlight_co_ am i right ? The light comes from an infinite distance_co_ not like a flashlight._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"naitro","Date":"2014-07-18T07:52:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_47255_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_7893_qt_ data-ipsquote-username_eq__qt_Deltakosh_qt_ data-cite_eq__qt_Deltakosh_qt_ data-ipsquote-timestamp_eq__qt_1405617152_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Other idea_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Using shadows and directional lights but use the wonderful light.excludedMeshes feature _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You can play with this array to add a list of meshes you do not want to be lighted by the light. Sounds like a good way to solve your issue_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Yeah_co_ thanks_co_ that_t_s sounds great)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_here is little example of this idea(with hardcoded elements)_dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs.com/playground/#22SCRP_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs.com/playground/#22SCRP_lt_/a_gt__lt_/p_gt__lt_p_gt_I have artifacts with too clear boundary between light and dark on off elements_co_ but I will play with it and mb it_t_s no so big problem for me_co_ guess I will add second light with shadows etc.. only believe it_t_s will be hard calculate these elements for moving character)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"naitro","Date":"2014-07-25T09:44:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I finally found some time for trying it and have some troubles_co_ here is example_dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/3nDPd/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/3nDPd/_lt_/a_gt__lt_/p_gt__lt_p_gt_As you can see walls getting is ok_co_ but ground not.. my rays lie in one plane with ground_co_ so why they don_t_t intersects? I tried send them with little angle in y_co_ but that not particularly helped(_lt_/p_gt__lt_p_gt_Any solution how can I get ground blocks before walls?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-25T18:18:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Your rays are perfectly parallel with the ground so they cannot intersect_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]