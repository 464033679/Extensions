[{"Owner":"3556","Date":"2016-06-14T08:24:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs a part of evaluating Babylon.js_co_ I’m trying to create a simple prototype of a first person game. It would consist of a square region/map (i.e. a square mesh with a basic texture) that is divided into 4 sub-regions (or_co_ tiles) of equal size. Think of it as Tile1 to Tile4. Each tile consist in it one 3D cube (a cube mesh with a basic texture). The player (the camera object) moves from one tile to the next_co_ and that tile &amp_sm_ cube to where the player moves to_co_ then become visible to the player. Attached an image depicting this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn this_co_ I had a question and would appreciate if anyone could answer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow does one implement “automatic streaming &amp_sm_ loading of assets” in Bablylon.js? In this prototype_co_ the game would start out by player being_co_ say_co_ on Tile1 and Cube1 being visible. Other tiles &amp_sm_ cubes aren’t yet visible. As the player moves and nears the boundary of Tile1_co_ the other tile (say_co_ Tile2) becomes visible - in a sort of fade-in effect.  As the player crosses into Tile2_co_ the Tile2 region and Cube2 becomes visible (Tile1 &amp_sm_ Cube1 slowly fade out).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAdditionally_co_ the non-visible assets (Tile2_co_ 3 &amp_sm_ 4 and Cube2_co_ 3 &amp_sm_ 4) are not yet present in the client/browser_t_s memory (or disk). They would be _qt_streamed_qt_ from the server to the browser _lt_strong_gt_only_lt_/strong_gt_ _lt_strong_gt_when the Player nears them_lt_/strong_gt_. e.g. in the above case_co_ as the Player nears the boundary of Tile1_co_ only then the meshes/textures for Tile2 and Cube2 would be streamed from the sever to the browser.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Essentially_co_ how does one achieve streaming &amp_sm_ loading of a sub-regions of a map and objects that are in viewing distance of a Player?_lt_/strong_gt_ As the user traverses_co_ other sub-region and objects start getting streamed in and loaded automatically_co_ and become visible to the Player – in a seamless way?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne strategy I could think of was getting the Player_t_s coordinates with reference to the coordinates of the Tile2 &amp_sm_ Cube2_co_ and computing the distance between them. When the distance becomes less than a specific threshold_co_ send an event to the server to stream Tile2 &amp_sm_ Cube2 assets. But am not sure if this could be done_co_ or if this is the best way to implement it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAny pointers/tutorial/references would be helpful. The “incremental loading” section of the documentation wasn’t explicit as to how this could be implemented. _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/tutorials/Using_the_Incremental_Loading_System_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/tutorials/Using_the_Incremental_Loading_System_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWasn’t able to find an answer in any of the forum posts as well. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTIA._lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_8149_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_06/Babylon.js.PNG.c194e94478fb0aeda0c35e25b25220e2.PNG_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img alt_eq__qt_Babylon.js.PNG_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_8149_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_06/Babylon.js.PNG.c194e94478fb0aeda0c35e25b25220e2.PNG_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"eboo","Date":"2016-06-14T12:17:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tinspiration_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.jouer.org/adept-beta.html_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.jouer.org/adept-beta.html_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.jouer.org/jsbb/2016.1.js_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.jouer.org/jsbb/2016.1.js_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(working with firefox_co_ i_t_ve discovered this morning that chrome is not loading)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbut_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti_t_ve created tiles with ground function lacaze()\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti_t_m populating it with map()\n_lt_/p_gt_\n\n_lt_p_gt_\n\teach emement is parented to terrain[]\n_lt_/p_gt_\n\n_lt_p_gt_\n\tplayers are not parented ^^.\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti _qt_ground_qt_ 9 tiles and populat 4 sides.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have to complete it with dispose (easier with parenting)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"3556","Date":"2016-06-14T18:43:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for your response. I_t_m still new to BJS &amp_sm_ its APIs_co_ and wasn_t_t able to understand the functionality of _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_lacaze() w.r.t. how it could be used to stream objects. Would appreciate if you could possibly provide a bit more details about it? _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_Essentially_co_ what I would be looking for is to get a list of assets (meshes &amp_sm_ textures) with a specific radius of the camera object. That way I can have the sever stream those objects to the browser client. Is there any class or its methods that achieve this?_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"eboo","Date":"2016-06-14T19:05:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tlacase just create a ground square.\n_lt_/p_gt_\n\n_lt_p_gt_\n\ttou is the region name\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var tou_eq_GX+_qt_-_qt_+GY_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tthe ajax function just load a _qt_heightMap_qt_ number. so you can specify différents jpg files to use with heightmap\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcreated grounds are stored in terrains[]\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_terrains[tou].addLODLevel(125_co_ null)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\taddLODlevel say that it will be visible only if you camera is less than 125 far.\n_lt_/p_gt_\n\n_lt_p_gt_\n\there you only have sand squares.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThose squares are populated with map()_sm_ this is where you will define objects that you will put on squares\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Boz","Date":"2016-06-14T20:06:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIn my opinion_co_ if you do not want to load all your meshes at start_co_ but streamed by the server_co_ you should at least define their position in the 3D world_co_ to know when you will have to stream it._lt_br /_gt_\n\tYou can create an array storing the positions of your invisible objects _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var meshesPos _eq_ []_sm_\nmeshesPos[0] _eq_ {x_dd_ 0_co_ y_dd_ 0_co_ z_dd_ 0}_sm_\nmeshesPos[1] _eq_ {x_dd_ 5_co_ y_dd_ 0_co_ z_dd_ 5}_sm_\nmeshesPos[2] _eq_ {x_dd_ 10_co_ y_dd_ 2_co_ z_dd_ 10}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAfter that_co_ you can create a function which will check distance between your camera and the invisible meshes.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var checkDistance _eq_ function()\n{\n    for(var i_eq_0_sm_ i&lt_sm_meshesPos.length_sm_ i++)\n    {\n        if(distance(meshesPos[i]_co_ camera.position) &gt_sm_ STREAM_DISTANCE) {\n            // Ask server to stream the corresponding object\n        }\n    }\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThe distance() function between A and B positions can be something very simple_co_ like Pythagore theorem _dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var distance _eq_ function(a_co_ b)\n{\n    return sqrt( pow(a.x - b.x_co_ 2) + pow(a.y - b.y_co_ 2) + pow(a.z - b.z_co_ 2) )_sm_\n}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tI don_t_t even know if this is mathematically correct _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt_ but you can use the distance function you want _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo now you have your checkDistance() function_co_ you have to call it very often_co_ to verify if you have to load meshes or not _dd_\n_lt_/p_gt_\n\n_lt_ul_gt__lt_li_gt_\n\t\texecute every frame _dd_ scene.registerBeforerender(checkDistance)\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\texecute every X milliseconds _dd_ window.setInterval(checkDistance_co_ X)\n\t_lt_/li_gt_\n_lt_/ul_gt__lt_p_gt_\n\tAs I_t_m not so well informed about global performance I do not know which solution is better. For my part I prefer to use the second one and adjust it if necessary.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"3556","Date":"2016-06-15T10:07:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThanks_co_ Pouet. I think that logic would work. Much appreciate. On the _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-variant_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_line-height_dd_22.4px_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_float_dd_none_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_checkDistance() function_co_ I was thinking it _lt_/span_gt_could be called every time there is a movement in the camera (i.e. its position changes). Time to try this out and see how it comes out! _dd_-)\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]