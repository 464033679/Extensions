[{"Owner":"Gil","Date":"2017-04-12T10:48:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everyone_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m trying to get a label system which could work like _lt_a href_eq__qt_https_dd_//jig.space/view?jig_eq_v4Ga2VKw_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//jig.space/view?jig_eq_v4Ga2VKw_lt_/a_gt__lt_br /_gt_\n\tI_t_m using the 3ds max exporter to export the meshes and I wanted to use the pivot point as a base to place the label.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe there is a better way to do it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen I create my Group2D (containing a line_co_ rectangle and text) and set the trackNode property to use the mesh_co_ I can see that the pivot point is not used.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt looks like it might not event been exported (I attached the file) since the pivotMatrix is null.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe I_t_m missing something ?\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_12466_qt__gt_Infos.babylon_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-04-13T02:46:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Gil_co_ welcome aboard.  Canvas2D system has been a little grumpy on the newer versions of BJS_co_ but forum friend and inventor _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/23736-rolento/?do_eq_hovercard_qt_ data-mentionid_eq__qt_23736_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/23736-rolento/_qt_ rel_eq__qt__qt__gt_@Rolento_lt_/a_gt_ has a lines_t_n_t_labels playround that has overlap-avoidance... and it_t_s pretty nice.  All I have is a 2.5 version.  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/index2_5.html#1B1LNW%2326_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/index2_5.html#1B1LNW#26_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe 2.6+ version... has a Canvas2D error that perhaps _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_ or _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ might need to investigate (endTriCap is undefined)._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_On the subject of imported mesh_co_ the _lt_em_gt_ORIGIN_lt_/em_gt_ property of a mesh within the .babylon file... is likely more important than _lt_em_gt_pivotMatrix.  _lt_/em_gt_I think pivotMatrix _eq_ null... is normal.  _lt_strong_gt_I THINK_lt_/strong_gt_ ... if your mesh (localSpace?) _lt_strong_gt_origin_lt_/strong_gt_ is at 0_co_ 0_co_ 0... Canvas2D trackNode feature SHOULD center-up on it._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_I do not have a canvas2d test scene with imported mesh... for ScreenSpaceCanvas2D/group2d/rect2d_co_ etc.  BUT_co_ I DO have one... with imported mesh... using a _lt_strong_gt__lt_u_gt_WORLD_lt_/u_gt__lt_/strong_gt_SpaceCanvas2D.  Although it was difficult to get the label SMALL... it got placed at 0_co_0_co_0 of my box_co_ by default._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Here is my simple worldSpace mesh label_co_ with no offset-from-mesh distance set.  _lt_/span_gt__lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/index.html#2C8LVE%2315_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/index.html#2C8LVE#15_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn center!  Yay!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Set line 32 to _lt_em_gt_true_lt_/em_gt_ to make label ALWAYS face camera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is working OK in newest BJS... but... label was SO BIG.   _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Difficult to shrink. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Here is _lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#1N9RJY%235_qt_ rel_eq__qt_external nofollow_qt__gt_a demo_lt_/a_gt_ from _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/canvas2d_home_qt_ rel_eq__qt_external nofollow_qt__gt_the docs_lt_/a_gt_... using a _lt_u_gt__lt_strong_gt_Screen_lt_/strong_gt__lt_/u_gt_SpaceCanvas2D for labels.  Non-imported mesh_co_ though_co_ so_co_ a bit off-topic.  Notice that their lower left corners... are aligned with mesh origin.  I_t_m not sure if auto-centering-on-mesh-origin is available for ScreenSpaceCanvas2D primitives... yet.  Likely soon_co_ but it is a measuring challenge_co_ I hear.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Try to make sure your mesh (localSpace?) origin is 0_co_0_co_0... in 3ds Max.  There could be a bug in the exporter_co_ too... we_t_ll look carefully at this.  Report findings_co_ please._lt_/span_gt_  Wingnut still learning.  Let_t_s ping .babylon-file-examining-expert _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/7026-gryff/?do_eq_hovercard_qt_ data-mentionid_eq__qt_7026_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/7026-gryff/_qt_ rel_eq__qt__qt__gt_@gryff_lt_/a_gt__co_ too_co_ what the heck.  He_t_s primarily a Blender guy_co_ but he knows importing quite well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFeel free to make edits and more saves... in those playgrounds.  Perhaps others will comment.  Be well_co_ talk soon.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gil","Date":"2017-04-13T09:32:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ First of all_co_ thank you !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m currently working on 3.0 first because it was the latest version but and more important it just got the morpher working which I need for my project._lt_br /_gt_\n\tI_t_m really glad they just released it _dd_).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe playground is already really cool_co_ I will need to implement the checkLabelCollision() for sure.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tRegarding the imported mesh_co_ I did not find the origin property inside my babylon file. I really think the pivot should be accessible and used when setting the trackNode._lt_br /_gt_\n\tI also tried to reset x form the objects to be sure to have something clean_co_ even on a simple box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs a solution_co_ I used an alternative and created a face that I rotate to place the info inside the 3D space._lt_br /_gt_\n\tI_t_m facing new issue but it looks like that_t_s the best way to add labels and display them when the meshes are facing the camera.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat_t_s something I need to have a screen clean.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-04-13T12:07:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tInteresting!  *nod*.  You can set _lt_em_gt_plane.billboardMode _eq_ BABYLON.Mesh.billboardmode_ALL_sm_ _lt_/em_gt_to make label planes or ANY mesh... always face camera.  (if you need that).  Also_co_ mesh have a _lt_em_gt_.lookAt(something) _lt_/em_gt_function_co_ too_co_ which _lt_u_gt_I believe_lt_/u_gt_ will ONLY lookAt other mesh_co_ not cameras or lights.  (I could be wrong about that).  But you can parent an invisible plane or box to a camera or light_co_ and then make your mesh.lookAt(invisibleMesh).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou could be correct about that pivot thing... I_t_m certainly no expert.  I should probably let smarter people than I... answer.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#H7V1D%2363_qt_ rel_eq__qt_external nofollow_qt__gt_here is a playground that uses a setPivotMatrix in line 39_lt_/a_gt_.  Perhaps you could set your own pivot point on the imported mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not sure if _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_ uses pivot points for Canvas2D primitive positioning_co_ or not.  More likely_co_ he uses the _qt_extends_qt_ of the mesh boundingBox_co_ and determines mesh-center using that.  In fact_co_ I think there IS a tool on boundingBoxes... for retrieving the center of them.  _lt_/span_gt__lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.5/boundingbox#center-vector3-classes-2-5-vector3-_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/classes/2.5/boundingbox#center-vector3-classes-2-5-vector3-_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps you could call that function on your Max mesh_co_ and see what value it reports.  There are _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/playground?code_eq_boundingBox.center_qt_ rel_eq__qt_external nofollow_qt__gt_a few playgrounds available_lt_/a_gt_... that use boundingBox.center_co_ so you can see how it is used.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ you have a few more tools to do some experiments-with_co_ now.  You can set your own pivot points.  AND... did you see line 33... _qt_the bake_qt_?  You can rotate_co_ position_co_ and scale a mesh_co_ and then call _qt_the bake_qt_... and it leaves the mesh the same_co_ but (re-)sets .rotation and .position _qt_back-to_qt_ 0_co_0_co_0_co_ and (re-)sets .scaling back-to 1_co_1_co_1.  You could think of it as _qt_permanent-ize all the current transforms_qt__co_ right?  Handy and fun_co_ and perhaps useful for your issue.  I permanent-ized the wheel_t_s rotation.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHopefully_co_ smarter people than I... will comment soon.  We are waiting for Nockawa to return... he is out of town for a bit.  But there are LOTS of great brains around here.  Not that many are 3ds Max drivers_co_ though.  Anyway_co_ glad to hear you found a solution.  _lt_strong_gt_IF_lt_/strong_gt_ you DO try more experiments/tests with canvas2d primitive centering_co_ could you report your discoveries?  Thanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I may restate the issue for others... Gil is seeing Group2D_t_s with trackNode... not being centered... when placed upon mesh imported from 3ds Max. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIssue open_co_ ideas/help warmly welcomed.  (thx)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-04-13T12:18:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOops_co_ I had an incorrect URL in that _qt_line 39_qt_ link... in previous post.  Link fixed now.  Sorry.  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#H7V1D%2363_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#H7V1D#63_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]