[{"Owner":"satguru","Date":"2017-05-14T02:10:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIf I merge meshes using the Mesh.MergeMeshes() function I get a merged mesh whose _qt_center_qt_ / _qt_origin_qt_  is located at world location (0_co_0_co_0).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would like to change this _qt_center_qt_ to the center of its bounding box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow do I do this?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Raggar","Date":"2017-05-14T07:52:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLike this?_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var x _eq_ mergedMesh.getBoundingInfo ().boundingBox.Center_sm_ // Not sure this is right. I_t_m on my phone.\ny...\nz...\nvar pivot _eq_ BABYLON.Matrix.Translation(x_co_y_co_z)_sm_ mergedMesh.setPivotMatrix(pivot)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"satguru","Date":"2017-05-14T16:00:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22713_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22713-raggar/_qt_ rel_eq__qt__qt__gt_@Raggar_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat does not work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsetPivotMatrix() just changes the position of the mergedMesh..\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt does not change the center of the mergedMesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee this playground example\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/index2_5.html#HX58BU_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/index2_5.html#HX58BU_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere I have two spheres.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want to merge them together and set the center of the merged mesh to a point exactly between them . In other words set it to (0_co_0_co_1)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tsetPivotMatrix() just moves the merged mesh forward to (0_co_0_co_1).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-05-14T16:30:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHope this is of use _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/index2_5.html#HX58BU%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/index2_5.html#HX58BU#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRead about method here _lt_a href_eq__qt_http_dd_//babylonjsguide.github.io/advanced/Pivots#setting-mesh-and-pivot-position-at-the-same-time_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjsguide.github.io/advanced/Pivots#setting-mesh-and-pivot-position-at-the-same-time_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn your case centreAt and PivotAt are the same so translation is zero\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"satguru","Date":"2017-05-14T18:32:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNice.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe article and its playground example was very helpful.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo it seems that the pivot point of a mesh is also the center/origin point of the mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd to change the pivot point\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1) find the relative location of the old pivot point with respect to the new pivot point_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2) create a translation matrix using that relative location\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3) set the mesh_t_s pivot matrix to this translation matrix.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn my case I had created a new translation matrix using (0_co_0_co_1) . I should have used (0_co_0_co_-1) instead.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tStill have a question though. Wonder if this is a bug\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter setting the mesh_t_s pivot matrix_co_ the mesh_t_s _qt_position_qt_ and _qt_absolutePosition_qt_  becomes different.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow come?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI thought a mesh_t_s  _qt_position_qt_ was its location with respect to its parent frame of reference and its _qt_absolutePosition_qt_ was its location with respect to the world frame of reference.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn my case the mesh does not have any parent. Therefore both _qt_position_qt_ and _qt_absolutePosition_qt_ should be the same. Right?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2017-05-14T19:19:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tmmmmm possibly because setting a pivot point is similar to providing a parent? Its position is the position of the pivot whereas its absolute position is its position of its original centre? Something I have not thought through yet.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-05-14T19:33:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys.  I_t_ve been working an issue lately_co_ but when I saw Satguru_t_s 1) 2) 3) above... I immediately recognized it.... from that project.  It is a code-section involving aligning the vertical-Z axes origin-at-corner Cannon heightMap... with the vertical-Y axes origin-at-center BJS heightMap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1RKZXB%2331_qt_ rel_eq__qt_external nofollow_qt__gt_here it is_lt_/a_gt_... starting with line 1025 - _lt_em_gt_var c _eq_ center.clone()_lt_/em_gt__sm_  (_lt_em_gt_center_lt_/em_gt_ is established in line 998).  Then examine code all the way down to line 1073.  It does 1) 2) 3) or close to it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCooooool.  None of it is MY code.  I think it is Raanan (which is better than snowin_t__co_ eh?)  (ahem).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCome to think of it_co_ there are mods by me_co_ in there.  You may wish to ge un-modified code from _lt_a href_eq__qt_https_dd_//raw.githubusercontent.com/BabylonJS/Babylon.js/master/dist/preview%20release/babylon.max.js_qt_ rel_eq__qt_external nofollow_qt__gt_preview distribution of BJS max_lt_/a_gt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway_co_ I see a substantial amount of _lt_em_gt_mesh.computeWorldMatrix(true)_sm_ _lt_/em_gt_in there_co_ so that might be important_co_ somehow.  Good luck.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"brianzinn","Date":"2017-05-14T20:06:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_174526_qt_ data-ipsquote-contentid_eq__qt_30412_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1494786737_qt_ data-ipsquote-userid_eq__qt_16886_qt_ data-ipsquote-username_eq__qt_satguru_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ satguru said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tStill have a question though. Wonder if this is a bug\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tAfter setting the mesh_t_s pivot matrix_co_ the mesh_t_s _qt_position_qt_ and _qt_absolutePosition_qt_  becomes different.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tHow come?\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI thought a mesh_t_s  _qt_position_qt_ was its location with respect to its parent frame of reference and its _qt_absolutePosition_qt_ was its location with respect to the world frame of reference.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tIn my case the mesh does not have any parent. Therefore both _qt_position_qt_ and _qt_absolutePosition_qt_ should be the same. Right?\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI found that after setting the pivot matrix that I needed to compensate the position afterwards.  I saw that you were using a translation matrix of (0_co_0_co_1) instead of (0_co_0_co_-1).  I needed to use different translation matrices depending where I wanted to pivot on the mesh.  Change var shrinkLeft in PG from true/false to see the difference.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDoes not look like mesh.computeWorldMatrix(..) has any effect on the absolute position_co_ which I would kind of expect if it was effectively reparenting.  What I found instead was that I needed to adjust the mesh position to counter the pivot (line 76).  My next step is to test this at positions other than (0_co_0_co_0)!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#7F54UH%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#7F54UH#1_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"satguru","Date":"2017-05-15T01:07:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_ I think you are right regards _qt__lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_Its position is the position of the pivot whereas its absolute position is its position of its original centre_qt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_I did some more testing and this is what I found. Somebody let me know if I got anything wrong._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_I was wrong to equate the mesh origin point to mesh pivot point._lt_br /_gt_\n\tThey are different._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_The mesh origin point is located at the origin of the mesh local frame of reference._lt_br /_gt_\n\tIts location in the mesh is fixed and cannot be changed(?)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_The mesh pivot point is also located at the origin of the mesh local frame of reference._lt_br /_gt_\n\tBut_co_ unlike origin point_co_ its location can be changed._lt_br /_gt_\n\tIt can be changed using_lt_br /_gt_\n\ta. mesh.setPivotPoint(vector3_co_ space)  _lt_br /_gt_\n\tb. mesh.setPivotMatrix(matrix)_lt_br /_gt_\n\tI am assuming with setPivotMatrix()_co_ in addition to changing location_co_ we can also change the rotation of the pivot axes(?)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_To get the pivot point location we can use_lt_br /_gt_\n\ta. mesh.getPivotPosition() - will return position relative to mesh origin (not mesh parent)_lt_br /_gt_\n\tb. mesh.getAbsolutePivotPosition() - will return position relative to world origin._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt__lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_Now the location of the mesh itself is always (?) set using the mesh pivot point rather than the mesh origin point._lt_br /_gt_\n\tThere are two ways we can set the location of the mesh_lt_br /_gt_\n\ta. mesh.position _eq_ Vector3_lt_br /_gt_\n\tb. mesh.setAbsolutePosition(Vectors3)_lt_br /_gt_\n\tThe first moves the mesh  so that its pivot point is located at the given position relative to the mesh_t_s parent_lt_br /_gt_\n\tThe second moves the mesh so that its pivot point is located at the given position relative to the world origin._lt_br /_gt_\n\tNote_dd__lt_br /_gt_\n\ta. there is no mesh.setPosition()_lt_br /_gt_\n\tb. there is no mesh.absolutePosition _eq_ Vector3_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_To get the mesh location we can use_lt_br /_gt_\n\ta. mesh.position_lt_br /_gt_\n\tb. mesh.getPositionExpressedInLocalSpace()_lt_br /_gt_\n\tc. mesh.absolutePosition_lt_br /_gt_\n\td. mesh.getAbsolutePosition()_lt_br /_gt_\n\tThe first two returns the location relative to the mesh_t_s parent._lt_br /_gt_\n\tThe last two returns the location relative to the world origin BUT_lt_br /_gt_\n\tthe location they return is the location of the mesh based on the mesh origin point rather than the mesh pivot point._lt_br /_gt_\n\tThis is confusing because_lt_br /_gt_\n\t_qt_mesh.setAbsolutePosition(Vectors3)_qt_ sets the location using the mesh pivot point BUT_lt_br /_gt_\n\t_qt_mesh.getAbsolutePosition()_qt_ gets the location using the mesh origin point_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_This_co_ thus_co_ also explains why_co_ even when the mesh does not have any parent_co_ its _qt_postion_qt_ is different form its _qt_absolutePosition_qt_._lt_br /_gt_\n\tThe mesh _qt_position_qt_ is its location based on its pivot point_lt_br /_gt_\n\tThe mesh _qt_absolutePosition_qt_ is its location based on its origin point. !!_lt_br /_gt_\n\tOf course the _qt_position_qt_ and _qt_getPivotAbsolutePosition()_qt_ will be the same in case of no parent._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-05-15T16:54:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tExcellent!!  Great play-by-play reporting from the battlegrounds! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI can foresee this becoming a playground movie. _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tthx satgrue _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_  Nice analysis... pretty well-worded.  (Wingy slaps a _qt_Docs Curator_qt_ badge on S_t_s lapel_co_ and shakes his hand.)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/?do_eq_hovercard_qt_ data-mentionid_eq__qt_14282_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/14282-johnk/_qt_ rel_eq__qt__qt__gt_@JohnK_lt_/a_gt_ you _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/tutorials/position_co__rotate_co__translate_and_spaces_qt_ rel_eq__qt_external nofollow_qt__gt_worked this issue pretty hard_lt_/a_gt__co_ once upon a time.  Did you need medical care after writing that?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Spacewalking.  erf.  Makes my head hurt. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe have localSpace and worldSpace... and I heard... next year... they might add galaxySpace and universeSpace.  wow!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]