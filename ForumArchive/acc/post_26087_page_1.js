[{"Owner":"Rolento","Date":"2016-10-28T19:19:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi All\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am trying to create an algorithm that dynamically draws a line (connector) that links a label to a shape.  At the moment I have a function for rendering a label at the location a shape resides.  Prior to rendeirng the connectors I wanted to resolve the issue of overlapping labels - i.e. dependent on the orientation of the camera the labels will overlap because the 2D X/Y screen coordinates projection occupies the same space.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn my attempt to fix this problem I wanted to obtain the X/Y screen coordinate for the shapes in my scene - I am using the following code_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t        var p _eq_ BABYLON.Vector3.Project(mesh.position_co__lt_br /_gt_\n\t            BABYLON.Matrix.Identity()_co__lt_br /_gt_\n\t            scene.getTransformMatrix()_co__lt_br /_gt_\n\t            camera.viewport.toGlobal(engine.getRenderWidth()_co_ engine.getRenderHeight()))_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe problem I am finding is that the position returned has an X and Y coordinate of NaN.  I dont understand why this is happening and was hoping someone could kindly take a quick peak at my code to determine whats up_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t* See lines 154 ~ 158 for the above code snipplet\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBeyond fixing the bug as reported above_co_ if anyone can provide pointers as to how best resolve the overlapping labels issue that would be great.  Ideally I want all connectors to follow a uniform pattern / pathlinking labels to their corresponding shape.  Anyway_co_ any pointers would be appreciated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-10-30T15:15:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWhat a cool idea!  I_t_m glad you are using Canvas2D for your labels.  Canvas2D is like having Phaser as a BabylonJS feature.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tAnd yes_co_ the P object is not looking very healthy_co_ is it?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know if this helps_co_ but _lt_em_gt_someone_lt_/em_gt_ was playing with some funcs...  _lt_em_gt_worldToScreen() _lt_/em_gt_and _lt_em_gt_screenToWorld()_lt_/em_gt_ in THIS playground...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1EJNKR%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1EJNKR#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMight help... dunno.  Good luck! (and good to hear from you again. I hope things are goin_t_ well for ya.)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-10-31T16:55:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello this is because scene.getTransformMatrix is not set yet (no render was done). but you can use camera.getViewMatrix() * camera.getProjectionMatrix()\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-01T16:55:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Wingnut\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for the pointer_co_ I tool a look at the code sample and it looks interesting - I may be able to utilise some of these concepts.  Once again_co_ much appreciated for your help!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-01T17:45:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Deltakosh\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried as you suggested_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t        var p _eq_ BABYLON.Vector3.Project(mesh.position_co__lt_br /_gt_\n\t            BABYLON.Matrix.Identity()_co__lt_br /_gt_\n\t            camera.getViewMatrix() * camera.getProjectionMatrix()_co_ // scene.getTransformMatrix()_co__lt_br /_gt_\n\t            camera.viewport.toGlobal(engine.getRenderWidth()_co_ engine.getRenderHeight()))_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ upon making the above changes I receive an assert (e.m is undefined)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIm not sure what the issue is...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs a workaround I rearranged the code and now request the connector function (not fully implemented yet) to be invoked via the onPointerMove() function - this seems to work nicely. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#6_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut... there is one last issue to resolve prior to moving on - when the application starts I can see in the bottom left corner of the viewport the labels quickly appear (flicker) and then get repositioned to their respective location.  I cant see an obvious reason why this happens - if you can help with this issue that would be great.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-02T16:57:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis is because * is an operator not supported _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIn javascript you cannot overload operators so you have to use_dd_  _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_camera.getViewMatrix().multiply(...)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/debug.html#1B1LNW%237_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/debug.html#1B1LNW#7_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-02T20:04:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Deltakosh\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHa_co_ yes that makes perfect sense. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks again!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-02T22:13:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Guys\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRight_co_ im a step further now - I have been able to render the labels_co_ detect intersections and move labels to resolve intersection issues.  However_co_ there is a problem which is when the label is moved the bounding box that is calculated to determine collisions is nolonger correct_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#9_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLines_dd_ 122 ~ 140 detect label collisions and reposition labels if required.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIm hoping someone can advise as to why the label bounding box coordinates are invalid after the first collision as this is driving me crazy _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ ... \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-04T01:25:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Rolento!   Are you getting a few browser lockups with this beast?  I sure am.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#11_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI changed a couple things.  I moved the creation of the _qt_canvas_qt_ (now called ssc2d) OUTSIDE-OF the renderLabel func.  I think you were making LOTS of screenSpaceCanvas2D_t_s (ssc2d) and I think you only need one.  It can have lots of children.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI changed the renderLoop a bit_co_ too.  No big deal.  Symptom is still the same.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think SOME of the problem... is line 142_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_g_labelArray[loop].label.children[0].y +_eq_ 5_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThat doesn_t_t look right.  You are moving the children of the label_co_ but not the group2d (not the labelObj itself).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut check this out.  Remark-out line 142_co_ re-RUN... and mouse-drag into label intersection somewhere.  POOM_co_ my FireFox locks-up like a bank in a ghetto.  What the hell?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Anyone else? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not sure_co_ but this playground/project MIGHT be haunted.  _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHmm.  IF the browser DID allow me to move the label (group2d) itself...\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_g_labelArray[loop].label.y +_eq_ 5_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t...then that would be strange_co_ because _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.4/Group2D#members_qt_ rel_eq__qt_external nofollow_qt__gt_Group2D has no _qt_y_qt_ property_lt_/a_gt_.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  It DOES have a trackedNode... which we are fighting-against when we try to move the group2D.  (Wouldn_t_t a Group2d.offsetFromTrackedNode _eq_ aVector2 ... be handy for us?)  To be frank_co_ I don_t_t understand 2D bounding boxes very well at all.  And I think Group2D_t_s have two types_co_ logical and renderable.  And did you notice the compactRect thing?  Apparently we can access some data from the _qt_rectangle_qt_ that the Group2D itself uses.  Know about quads_co_ Rolento? \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Topic-wandering_lt_/strong_gt__dd_  Our non-SPS particleSystems use quads.  Think of them as a single _qt_square_qt_ sub-division... of a sub-divided BJS Ground.  Each _qt_quad_qt_ can be moved and rotated via moving its vertices... but they are each part of that ground mesh... so there is no .position_co_ .rotation_co_ and .scaling on the quad.  All particles... all quads... are _qt_members_qt_ of the same mesh.  For example_co_ a box... contains 6 quads... and each quad is a particle panel which can be positioned anywhere in world space.  Even though they are each part of the same master mesh_co_ they are placed anywhere in space... apart from one another_co_ making them _lt_u_gt_appear to be_lt_/u_gt_ separate individual mesh.  But they are not so.  Quads are used... due to their great performance speeds.  To wrap-up_co_ if you ARE able to _qt_query_qt_ the compactRect data_co_ you might not find any classic positioning properties_co_ but you MIGHT find 4-12 vector3 values (vertex positions).  They are moveable_co_ and we might use THOSE to do the up-shift.  Re-position the quad.  Yeah!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWith YOUR line (moving children[0])_co_ you are moving the label_t_s rectangle2d... which seems like a pretty good idea_co_ actually.  But_co_ is the group2d actually _qt_located_qt_ directly atop tracked-mesh center_co_ no matter WHERE we set its child rect2d location?  hmm.  SO much to learn!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSee the link to Prim2DPropInfo on that linked page?  Let_t_s _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.4/Prim2DPropInfo_qt_ rel_eq__qt_external nofollow_qt__gt_go there_lt_/a_gt_.  See the property named dirtyBoundingInfo?  Just possibly_co_ you need to set that to _lt_em_gt_true_lt_/em_gt__co_ somewhere_co_ somehow.  That might be a flag that tells the Canvas2d system... that a boundingInfo needs refreshing... and do it.  Perhaps_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_g_labelArray[loop].label.children[0].y +_eq_ 5_sm_  // your rect2d up-shifter\n// then... \ng_labelArray[loop].label.sizeProperty.dirtyBoundingInfo _eq_ true_sm_\n// no promises... just an idea.  _dd_)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tOn another subject... let_t_s look at _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/canvas2D/src/Engine/babylon.group2d.js_qt_ rel_eq__qt_external nofollow_qt__gt_Group2D source_lt_/a_gt_.  Not too many properties_co_ but lots of methods_co_ and lots of available parameters in the constructor.  This possibly indicates that it might be best to dispose the intersected label (the label needing up-shift)_co_ and make a new one... whose rect2d Y position is further up.  I don_t_t know WHEN or HOW you would bring the label back-to y_dd_ 50_co_ once the intersection clears.  hmm.  You would probably need to dispose the up-shifted label_co_ and make a new y_dd_ 50 label... AGAIN (get back to original position).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t think anyone has EVER tried what you are trying_co_ trailblazer Rolento.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  You are digging deeper into Canvas2D primitives than I have ever dug.  Speaking of primitives_co_ group2D has a superclass... called _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/classes/2.4/Prim2DBase_qt_ rel_eq__qt_external nofollow_qt__gt_Prim2DBase_lt_/a_gt_ .  Let_t_s look at it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt has a crapload of properties.  One is named _lt_em_gt_actualY_lt_/em_gt_.  I wonder what THAT puppy does?  Perhaps_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_g_labelArray[loop].label.actualY +_eq_ 5_sm_  // try an up-shifter on group2D_t_s superclass.\n// then possibly STILL do... \ng_labelArray[loop].label.sizeProperty.dirtyBoundingInfo _eq_ true_sm_\n// no promises... just feeling-around in the dark_co_ now.  _dd_)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tSo where does this leave us?  I dunno. I wish I could get my browser to quit crashing so much.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  It is driving ME crazy_co_ too.  heh.  I_t_ll keep fiddling with it... maybe... slowly.  I hope I didn_t_t tell you too many wrong things.  I_t_m no expert... not even close.  Folks_co_ feel free to correct me when I say wrong things... please.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tRolento... let us know if you learn some things.  I am going to ping King _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_ and see if he has time to give us some advice. We_t_ll talk again soon... but this code and this challenge... is scaring my dog.  heh\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2016-11-04T15:15:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/23736-rolento/?do_eq_hovercard_qt_ data-mentionid_eq__qt_23736_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/23736-rolento/_qt_ rel_eq__qt__qt__gt_@Rolento_lt_/a_gt_ can you check _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/23478-lines2d-not-rendering-correctly/_qt_ rel_eq__qt__qt__gt_this thread_lt_/a_gt_ and tell me if you_t_re looking to do something alike?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ Group2D has a _qt_y_qt_ property_co_ unfortunately the documentation for a given class shows only the member for this class but not for the class it was extended from_co_ in the case of Group2D_co_ it extends Prim2DBase which contain the _qt_y_qt_ property.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m sorry_co_ I can_t_t spend more time on this right now. Ping me next monday if you still need some help.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-05T09:58:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Wingnut\n_lt_/p_gt_\n\n_lt_p_gt_\n\t&gt_sm_ I changed a couple things.  I moved the creation of the _qt_canvas_qt_ (now called ssc2d) OUTSIDE-OF the renderLabel func.  I think you were making LOTS of screenSpaceCanvas2D_t_s (ssc2d) and I think you only need one.  It can have lots of children.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAhh_co_ I see - I did_t_nt realise that - thanks.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_g_labelArray[loop].label.children[0].y +_eq_ 5_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t&gt_sm_ That doesn_t_t look right.  You are moving the children of the label_co_ but not the group2d (not the labelObj itself).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tExactly - when I was experimenting I did try and move the _qt_group2d_qt_ but I could_t_nt find an _qt_x_qt_ or _qt_y_qt_ property for me to manipulate - hence I reverted back to moving the child label object. _lt_img alt_eq__qt__dd_(_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ title_eq__qt__dd_(_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t&gt_sm_ It DOES have a trackedNode... which we are fighting-against when we try to move the group2D.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYes this is kind of frustrating_co_ I did experiment with trying to offset the label against the position of the mouse when moved.  The result was not ideal - i.e. I was kind of making progress but the code was getting really mangled and turning into a mess so I have abandoned that approach at the moment hoping there is a more obvious cleaner solution.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\t&gt_sm_ And did you notice the compactRect thing?  Apparently we can access some data from the _qt_rectangle_qt_ that the Group2D itself uses.  Know about quads_co_ Rolento?  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tUnfortunately I have not encountered quads at this time - thanks for the summary_co_ I will have do some more research on this topic to better understand how they are used and/or hw they can be manipulated.  If you can point me in the direction of what you deem to be useful BJS tutorials and/or PG examples that would be great.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t&gt_sm_ I don_t_t think anyone has EVER tried what you are trying_co_ trailblazer Rolento.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ You are digging deeper into Canvas2D primitives than I have ever dug.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHa_co_ lets hope I/we can find a solution to this mystery!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t&gt_sm_ Rolento... let us know if you learn some things.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI certainly will - I will be experimenting later today.  Your comments have provided me with some areas to explore and ideas!  Also_co_ thanks for inviting _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOnce again_co_ I really appreciate your help on this topic.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-05T10:03:41Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Nockawa\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tcan you check _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/23478-lines2d-not-rendering-correctly/_qt_ rel_eq__qt__qt__gt_this thread_lt_/a_gt_ and tell me if you_t_re looking to do something alike?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThe exmaple provided in the thread is _qt_close_qt_ to what I am wanting to achieve.  See below for the objectives I am trying to accomplish_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1) link labels to objects in 3D scene using connectors\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2) ensure linking connectors (as defined in 1) do not overlap/intrsect\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3) draw labels at X/Y coordinates (2D space) and _qt_prevent_qt_ labels overlapping/intersecting\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe example you provided accomplishes (1) bit not (2) and (3).  If you can provide any guidance I would really appreciate it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2016-11-06T17:14:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t2) and 3) are mostly algorithm problems that I can_t_t cover in the Canvas2D lib. I honestly don_t_t know how you could solve this_co_ some serious thinking must be done_co_ and some googling too... _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI think you have the basics with the sample I gave_co_ now you have to improve things to reach your goals_dd_ that_t_s programmer_t_s life for you! _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-07T00:03:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18979_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18979-nockawa/_qt_ rel_eq__qt__qt__gt_@Nockawa_lt_/a_gt__co_ the original problem was with bounding area.  (and browser crashing_co_ for me)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThat thread does not address label-overlap_co_ overlap-avoidance_co_ and after-avoidance... label bounding-area updates.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot that it is YOUR problem_co_ but you could still feel free to help_co_ if you wish.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#11_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#1 - If I may speak freely_co_ the loop in renderConnectors() [line 130] is a less-than-optimal way.  I think we should activate a label-intersection _qt_observe_qt_.  The observe (observer/observable) constantly watches for two labels intersecting_co_ and if observed_co_ calls a func to de-overlap them (clear the intersect condition).  This is likely a programmer-created thing_co_ and not the responsibility of Canvas2D system.  (but tools like this are _lt_u_gt_hot_lt_/u_gt_ items for _lt_strong_gt_future_lt_/strong_gt_ Canvas2D features).  All in all_co_ ideally_co_ we should let the observer system do the looping... so we don_t_t have-to.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t#2 - Line 142... the label mover.  This was talked about earlier.  Now we know that Group2d has a Y value (inherited from Prim2d).  This functionality (this line) would leave this soon-gone function_co_ and be moved to the onIntersection() function called by the intersection observer.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#3 - Here is where we could use Nockawa brains... in the bounding-area intersect detector.  This is currently a big pile of ugly code (no offense meant) in lines 150-220.  I think we need this label intersect-detector... clean-coded.  Again_co_ let_t_s try to avoid the looping.  Building an intersect observer/observable might be the answer.  I_t_m quite sure that observers already loop/iterate through all the observables... so we should tie-into _lt_u_gt_that_lt_/u_gt_ existing looper.  Still_co_ we need a way to _lt_u_gt_know_lt_/u_gt_ when a label intersect has occurred.  If we derive an angle-relationship between the 2 intersected labels_co_ would be sweet!  It would help our offsetter know the best method/direction for de-overlap._lt_br /_gt__lt_br /_gt_\n\tThen... do the label separation_co_ and then make sure our recently-moved Group2d bounding area is freshly updated... so the observer will clear (indicating no more intersect).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t#4 - _lt_em_gt_addConnector - _lt_/em_gt_Not needed_co_ in my opinion.  (unless there is future plans to draw lines between label and trackedNode).  In this case_co_ the programmer does not _lt_em_gt_add connection_lt_/em_gt_.  Group2d_t_s _lt_em_gt_trackNode_lt_/em_gt_ does that for us.  The only action we would do... is separate overlapped (intersected) labels.  This would be done with an _qt_offsetting_qt_ of the label... from its trackedNode screenspace position (that_t_s a _lt_em_gt_type_lt_/em_gt_ of connector_co_ but not really).  Again_co_ it_t_s very important... that AFTER the separation (de-intersect) move_co_ the observer is cleared-of intersection condition_co_ and the bounding area of the newly-positioned Group2d is also updated (ready for more observing by the observer).  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  (enuf words for ya_t_ll?)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ that_t_s all I got.  Plenty_co_ huh?  Nockawa... if you feel like helping... we could use a really clean overlap detector with observer_co_ and also a really nice moveGroup2dAndRefreshBoundingAreaAndResetObserver.  (gruesome func)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tIF Group2d Y-position live-adjusting... works nicely_co_ then all is well. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor me_co_ so far... it crashes my Firefox. If I just LOOK at line 142_co_ my browser crashes.  heh.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSupposedly_co_ _lt_em_gt_g_labelArray[loop].label.y +_eq_ 5_sm_ _lt_strong_gt_should_lt_/strong_gt__lt_/em_gt_ move the Group2d Y-position... but... I_t_m scared.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  So is my dog.  Tests ahead.  Help welcomed.  Thanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_PS_lt_/strong_gt__dd_  There is one more needed function/observer.  It is the _qt_can I go home yet_qt_ observer.  AFTER a label has been offset (to avoid an intersect)... it will want to eventually... go home.  It wants to return to its original origin.  So_co_ we need a _qt_am I clear to return home_qt_ de-offsetter.  erf.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  In a way_co_ we are building a unique kind of _qt_snap_qt_ system_co_ eh?  *nod*  Cool project!  I hope Rolento doesn_t_t mind us building a campfire at his project site_co_ and throwing a coding party.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  PARTY AT ROLENTO_t_S CAMPSITE!  YAY!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-07T01:39:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWow_co_ even if I change the line 142 area to...\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_141\t// g_labelArray[loop].label.children[0].y +_eq_ 5_sm_ // works_co_ but weird bounding area ops\n142\t// g_labelArray[loop].label.y +_eq_ 5_sm_  // crasher\n143\tconsole.log(g_labelArray[loop].label)_sm_  // crasher\n\t\t\t\t_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t... I get browser crash upon intersect_co_ IE or Firefox.  Nice.  Magical.  Crash a browser with a console.log... too good!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Just remove it all_co_ still crashes.  LOVE IT!  What power we have!  heh  (Not really a crash.  It is a continuously running script... probably the intersect detector.  ReCurse of the Mummy_t_s Tomb.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Still fun!)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2016-11-07T13:36:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThere_t_s currently a bug in BoudingArea computing_co_ I_t_m aware of it since 2 weeks_co_ but couldn_t_t find the time to start working on it. I will have time this week.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-11-08T22:48:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Guys\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSorry for the radio silience - work has been crazy the past few days!  The good news is I was able to play around a little today and see if I can find out why the label intersection algorithm was not working.  Looking at the solution (thread) that Nockawa posted I could see that the function that calcs the screen coordinates differed from mine so I thought I would refactor my code to see what happens_co_ boom... as soon as I made the change the bounding box collision detection of labels started working!  FYI here is a code comparison_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOriginal code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_p _eq_ BABYLON.Vector3.Project(mesh.position_co_ \n\t            BABYLON.Matrix.Identity()_co_ \n\t            scene.getTransformMatrix()_co_ \n\t            camera.viewport.toGlobal(engine.getRenderWidth()_co_ engine.getRenderHeight()))_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tUpdated Code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var rh _eq_ engine.getRenderHeight()_sm_\nvar v _eq_ camera.viewport.toGlobal(engine.getRenderWidth()_co_ rh)_sm_\nvar worldMtx _eq_ mesh.getWorldMatrix()_sm_\nvar proj _eq_ BABYLON.Vector3.Project((BABYLON.Canvas2D)._v_co_ worldMtx_co_ (BABYLON.Canvas2D)._m_co_ v)_sm_\np _eq_ new BABYLON.Vector2(proj.x_co_ rh - proj.y)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tSo we are a step closer now...  The update code with connectors added can be found below_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%2316_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#16_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe above code sample is far from complete - i.e. connectors still intersect and when dragging a shape for some reason the labels are moved appropriately but the connectors are not udpated/refreshed - I looked at the code and I cant see any obvious issues... _dd_/  I must admit I have had a couple of whisky_t_s this evening so dont shout if you see an obvious mistake! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWith respect to Wingnut_t_s comments_co_ yes I 100% agree the code is messy (mangled) and far from optimised.  My strategy was to resolve the fundamental issues I was encountering and get a rudementary system working - once this is done then I was intending to refactor the code to make it more efficient.  So no offence taken when you provided your comments _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAt the moment the current challenges I need to address are_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\ta ) determine why the connectors _qt_sometimes_qt_ are not being redrawn\n_lt_/p_gt_\n\n_lt_p_gt_\n\tb ) update the line connector algorithm to prevent intersections\n_lt_/p_gt_\n\n_lt_p_gt_\n\tc ) update the line connector algorithm making it more intelligent such that labels can appear left / right of associated shape\n_lt_/p_gt_\n\n_lt_p_gt_\n\td ) update the line connector algorithm making connectors follow a wave path (as below)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_/p_gt_\n\n_lt_p_gt_\n\tI think if the above challenges can be addressed then the label system would be quite an attractive and useful tool for annotating objects in a 3D scene.  If anyone has ideas on how the above can be achieved and/or wants to dive in and cut some code that would be great.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-09T00:49:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYou_t_re doing GREAT!  This is advancing nicely!  WELL DONE!  And no browser crashes for me!  YAY!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWay to go! \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2016-12-31T10:43:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi All\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIts been a bit of time since my last update (a new addition to the family - so lots of fun and games!).  Anyway_co_ I have made a few tweaks to the code to resolve a series of glitches.  The code is still far from optimal but I think it is an acceptable foundation for anyone wanting to create dynamic labels/connectors for marking up objects added to a 3D scene.  Here is the latest code_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1B1LNW%2326_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1B1LNW#26_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe above is perfect for my needs - however_co_ one possible enhancement would be to add additional logic to prevent the connectors from overlapping.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOnce again a big thanks to [Wingnut]_co_ [Nockawa] who helped me to get this working...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Flomotion","Date":"2017-01-03T12:02:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI tried to create these kind of labels. But this is much better. Thank you!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-01-07T05:35:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNice nob_co_ Rolento!  I like it!  Congrats on the new family member_co_ too.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Nockawa","Date":"2017-01-07T07:28:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tNice work _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/23736-rolento/?do_eq_hovercard_qt_ data-mentionid_eq__qt_23736_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/23736-rolento/_qt_ rel_eq__qt__qt__gt_@Rolento_lt_/a_gt_ I_t_m glad you finally managed to get things done!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2017-01-10T13:58:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey Rolento... have you opened the browser dev tools window_co_ and seen what happens to label lengths?   Just curious.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI bookmarked your playground... twice.  I have some plans for it_co_ like perhaps using it as a demo in a tutorial_co_ if that would be ok.  Advanced labeling section.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2017-01-10T14:07:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_158379_qt_ data-ipsquote-contentid_eq__qt_26087_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1484056719_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t7 minutes ago_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\thave you opened the browser dev tools window_co_ and seen what happens to label lengths? \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThis issue doesn_t_t appear when testing the PG locally with the latest version of C2D.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rolento","Date":"2017-01-14T12:31:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Wingnut / all\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just checked the code and running locally (as per Adam_t_s reply) I see no issue.  Do you see issues when running locally using latest version of C2D?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]