[{"Owner":"Ghostdog","Date":"2016-10-30T21:30:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need help to write a solution determining the angle of intersection between surface of a sphere and the inner surface of a sphere segment.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t.. with the goal to let the sphere_co_ that is moving towards the segment_co_ be redirected as its outgoing angle as with the incoming angle.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf i am right I need to calculate the angle of the normals vectors of the intersection faces...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need your help about the how to get the normals of the faces that are aligned to the intersection point.. if indeed this is the right way for my goal??\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks and with best regards_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGhostdog\n_lt_/p_gt_\n\n_lt_p_gt_\n\t  \n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_10/sphere-intersection.PNG.3e42667135d4296f3c333544180ee46e.PNG_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_10069_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_10/sphere-intersection.thumb.PNG.0ffab0a5ee54c9be2baa048751458ca0.PNG_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_sphere-intersection.PNG_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-10-31T16:09:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello and welcome!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDo you mind creating a simple repro in the playground with the maths that you_t_ve already done? This is going to be easier for us to help you\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Ghostdog","Date":"2016-11-12T20:53:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI now added something- ..\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1R1AA2%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1R1AA2#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs is it may to see_co_ this ball that flys around had several errors .. the render error .. the intersections error _lt_img alt_eq__qt__dd_lol_dd__qt_ data-emoticon_eq__qt__qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ title_eq__qt__dd_lol_dd__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tand the error that the _lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_incoming and _lt_/span_gt__lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_outgoing angle are the same ... and they should_t_nt of course. In the scene and if the ball hit this sphere segment the ball should fly away a down-direction._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_Coming back to my question ..._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_span style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm_float_dd_none_sm__qt__gt_I need help to write a solution determining the angle of intersection between surface of a sphere and the inner surface of a sphere segment._lt_/span_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\tIf i am right I need to calculate the angle of the normals vectors of the intersection faces...\n\t\t_lt_/p_gt_\n\n\t\t_lt_p style_eq__qt_color_dd_rgb(39_co_42_co_52)_sm_font-family_dd__t_Helvetica Neue_t__co_ Helvetica_co_ Arial_co_ sans-serif_sm_font-size_dd_14px_sm_font-style_dd_normal_sm_font-weight_dd_normal_sm_letter-spacing_dd_normal_sm_text-indent_dd_0px_sm_text-transform_dd_none_sm_white-space_dd_normal_sm_word-spacing_dd_0px_sm_background-color_dd_rgb(255_co_255_co_255)_sm__qt__gt_\n\t\t\tI need your help about the how to get the normals of the faces that are aligned to the intersection point.. if indeed this is the right way for my goal??\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI am thankfull for every help!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-12T23:42:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi GD.  Okay_co_ allow me to reword.  You want ball to rebound from curved surface... in a direction that considers two factors...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1.  Angle of incoming ball._lt_br /_gt_\n\t2.  Angle of the face that it impacts.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t*nod*  Like tossing a ball into a bowl.  Ball rebound angle should _qt_honor_qt_ inbound ball trajectory-angle AND impacted face-angle.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is likely some other formula... to find the worldspace orientation of a point-of-impact face.  hmm.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou want _qt_realistic_qt_ ball rebound-angle... when the ball is tossed into _lt_a href_eq__qt_http_dd_//www.culturemama.com/wp-content/uploads/2012/05/steeldrum.jpg_qt_ rel_eq__qt_external nofollow_qt__gt_this kind of bowl_lt_/a_gt_.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tFirst problem... getting a useful _qt_angle_qt_ of the impacted face.  hmm.  Your pictures in your earlier post... are very good_co_ GD.  How do we get the angle of the impact point inside the bowl?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr how do we get the _qt_angular relationship_qt_ of the ball impact angle... to the impacted face.  When all is perfect_co_ ball tossed into bowl... should do in-bowl ping-pong-ing until ball loses all energy.  (and without a classic third-party physics engine).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_ _lt_span_gt_recently added mesh-intersecting to his Solid Particle System (SPS).  So_co_ just for fun_co_ I modified one of his demos... and angled all the bounce platforms._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2318_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#18_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI wanted to see if the ball_t_s bounce _qt_restitution_qt_ trajectory... took particle rotation into consideration. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t think it does.  I think his bounding areas are _qt_loose_qt_ and do not rotate along-with the particle. Not sure.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just talk talk talk_co_ and I have no answers_co_ eh?  I am SO helpful!  (not)   _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Hopefully_co_ smart people will answer soon.  Face angle at intersect point.  Hmm.  *scratch scratch*\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-11-13T08:07:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tto compute a bounce after a collision (incoming angle _eq__eq_ outgoing angle around the impacted surface normal) _co_ the 3D formula in 3D is in this post  _dd_ \n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/26137-gravity-without-fancy-physics-engine/?do_eq_embed&amp_sm_comment_eq_149812&amp_sm_embedComment_eq_149812&amp_sm_embedDo_eq_findComment_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-14T00:23:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOh yeah_co_ thx _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_.  I was thinking lighting normals... at each vertex of the face.  But the face itself has a _qt_normal_qt__co_ too.  Not stored.  Need to be calculated.  It_t_s orthogo-noodle to the face.  *nod*   Perpendiculoid.  I_t_m going to learn this stuff someday_co_ even if it kills me!  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tincoming angle _eq__eq_ outgoing angle around the impacted surface normal\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tI_t_m not sure I understand the word _qt_around_qt__co_ used there.  But maybe ghostdog understands... and that_t_s what is important.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m goin_t_ to _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2571-the-wingnut-chronicles/?do_eq_findComment&amp_sm_comment_eq_150939_qt_ rel_eq__qt__qt__gt_The Wingnut Chronicles_lt_/a_gt_ to play (and to avoid going way off-topic_co_ here.)  I want to do demented bounce experiments.  But I_t_ll still be nearby here_co_ helping ghostdog stay confused.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  I sure wish I had BJS as a visualization tool... when I was trying to learn high school math.  Comprehending this stuff... would be easier_co_ now.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-11-14T09:15:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyep_co_ lightning normals are vertex normals...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tto get a facet (ABC) normal_co_ you could just normalize the cross product of AB ^ AC\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif you don_t_t want to compute all this by your own_co_ you could also clone once the mesh_co_ then convert it to a flat shaded one and get in some array its lightning normals what are then also facet normals and finally dispose it (it was just here for computanional purpose)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_around_qt_ is certainly not the appropriate term_co_ but I usually don_t_t know how to translate some french maths word to right english. It_t_s rather the symetric vector of given vector along the axis defined by the normal vector... something like this _sm_-D\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-14T12:50:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Its all cool_co_ Jerome.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//tinyurl.com/h8nu3uc_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//tinyurl.com/h8nu3uc_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t(Lots of pictures).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGhostdog actually needs the _qt_negate_qt_ of the impacted-face_t_s normal.  The normal inside a hemisphere. (a bowl)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_fg105_2.png_qt_ class_eq__qt_ipsImage_qt_ src_eq__qt_https_dd_//help.sketchup.com/images/fg105_2.png_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tNot my picture... just web-found.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf ball tossed-into bowl_co_ Ghostdog wants inside-the-sphere/hemisphere... face normal (at ball impact-point).  It is needed for calculating proper ball rebound inside the bowl.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tOh_co_ I forgot that Jerome helped us to make hemispheres.  Duh_co_ Wingy.  Ok_co_ here is one ready for in-bowl ball bouncing.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2323_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#23_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t think mesh cloning is going to work.  Ghostdog needs the surface normal of the impacted face (inside the bowl).  Then_co_ I assume_co_ he wants to calculate the ball rebound angle... using that (negated?) normal.  Does that make sense?  He needs the inside-the-bowl normal... of the ball-intersected face.  Difficult to explain.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother example.  _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt__co_ in your cool _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1RLVRZ%234_qt_ rel_eq__qt_external nofollow_qt__gt_click-to-explode playground demo_lt_/a_gt__co_ you are NOT using the face normals on the mountainsides... to calculate box bounce_co_ right?  You are using only heightmap heights_co_ yes?  You never derive the surface normal of a mountain mesh facet-of-impact_co_ correct?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIF the mountains were a bowl/hemisphere (not a height map)_co_ then you WOULD need to derive the normal of each impacted face... to get realistic boxes movement?  I think so.   Sigh_co_ 3D geometry terminology.  I really need to learn it better.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Jerometry?  heh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-11-14T14:33:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTo get the correct normal I_t_d get the vector from the sphere to the center of the sphere segment and normalize it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tedit_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen I_t_d do what Jerome described.  \n_lt_/p_gt_\n\n_lt_p_gt_\n\t-use that normal to construct a coordinate system / space\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-rotate the velocity of the sphere to that space\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-negate the y velocity\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-rotate the velocity back to world space\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-14T14:41:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah_co_ that sounds right (after negating it).  But how does a person DO that? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps... onIntersect... shoot a ray from big sphere center... to impacting ball center?  (and then negate the direction vector)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll Ghostdog has... is the faceID.  In fact_co_ I don_t_t know if faceID is available... with intersectsMesh.  (Sorry_co_ I_t_m not very experienced with collisions/intersects_co_ yet.  Working on it).  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-11-14T14:43:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_150985_qt_ data-ipsquote-contentid_eq__qt_26110_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1479134478_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tJust now_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tPerhaps... onIntersect... shoot a ray from big sphere center... to impacting ball center?  (and then negate)\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tCheck the distance from the sphere to the center of the sphere segment.  If the distance is longer than the sphere segment radius minus the sphere radius_co_ then we have hit or gone beyond the sphere segment.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-14T14:47:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tContinuously firing the ray... to check for collision?  Erf.  Create our own .checkCollisions system?  Ow.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  My dog just ran under the fridge again.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut yes_co_ I think I understand.  No need for boundingBox/boundingSphere_co_ and no need for _qt_precise_qt_ and all that bounding crap.  hmm.  thx Adam.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-11-14T15:52:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt_ in the BOOM demo_co_ I don_t_t compute the ground normals... because the Ground Mesh has a special dedicated method (from your servant) called _lt_em_gt_getNormalAtCoordinates(x_co_ z) _dd_ _lt_/em_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1RLVRZ%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1RLVRZ#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust have an accurate look  at the line 175 _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThe ground heights and normals are computed and stored for you by the mesh itself. Better_co_ if you update the mesh_co_ you can just refresh them with this one _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.groundMesh.ts#L107_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Mesh/babylon.groundMesh.ts#L107_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-14T16:02:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Yeah_co_ thx Jerome.  Sorry if I treat you like a servant_co_ Jerome.  My apologies.  You make it look so easy_co_ though.  But if I would take the time to learn it... then I could make it look easy_co_ too. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think I have a _qt_complex_qt_... a phobia... a self-inflicted wall... a personal mental issue.  I should not be trying to help Ghostdog.  I am not yet qualified for this level of helping.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI need to code-up mesh.getNormalAtFaceId(id).  Possibly use Adam_t_s idea... extend ray from hemi center... to faceId.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI wonder how slow getVertexPositionsOfFaceId(id) would be.  Once I have those 3 vert positions... I (a smarter I) can calc the face orientation/transformation.  Easy.  _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-11-14T16:52:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tno worry... another bad translation of mine from the very polite french _dd_ _t_de votre serviteur_t_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-14T19:30:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThx! _lt_br /_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tHey_co_ there_t_s another thread... that did this...  _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/26225-find-which-face-of-mesh-was-hit/?do_eq_findComment&amp_sm_comment_eq_150773_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/26225-find-which-face-of-mesh-was-hit/?do_eq_findComment&amp_sm_comment_eq_150773_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tpickingInfo.getNormal()!   Might work_co_ but maybe not.  hmm.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tShoot ray from invisible mesh at hemisphere origin.... to hemisphere/sphere inner surface.  BUT... hmm... the ray must pass-thru the ball origin (onIntersect)... and hit the surface of the hemisphere.  How the heck?  hmm. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ here_t_s an idea.  TWO rays.  Shoot a ray from hemisphere center to ball (when impact with hemisphere face happens).  Get the direction to the ball (onIntersect)_co_ then set ball.setEnabled(false).  Then shoot ANOTHER ray... using the exact same angle as the ball ray.   The 2nd ray shot will hit a face on the hemisphere.  Then getNormal on that face_co_ then ball.setEnabled _eq_ true.  Wow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know if a ray can be shot along a certain direction (the 2nd ray).  hmm.  Darn. The answer is here somewhere_co_ I can smell it.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  I bet I am over-thinking (and over-talking) it. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Ghostdog","Date":"2016-11-16T21:22:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOje_co_ I see the point now .. I*d neer should ask that question _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_    .but who not ask get no anwers - right? \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway.. THANKS for the all the rays and shoots on me (_dd_  ..  the solution is realy very close now!! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-11-16T21:41:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_150987_qt_ data-ipsquote-contentid_eq__qt_26110_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1479134824_qt_ data-ipsquote-userid_eq__qt_5733_qt_ data-ipsquote-username_eq__qt_Wingnut_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 11/14/2016 at 9_dd_47 AM_co_ Wingnut said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tContinuously firing the ray... to check for collision?  Erf. \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tNope_co_ just_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tvar distSq _eq_ BABYLON.Vector3.DistanceSquared(pos1_co_ pos2)_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tvar maxDist _eq_ radius1 - radius2_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif(distSq &gt_sm_ maxDist*maxDist){\n_lt_/p_gt_\n\n_lt_p_gt_\n\t   //we are hitting or outside \n_lt_/p_gt_\n\n_lt_p_gt_\n\t}\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-17T01:02:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOkay_co_ good_co_ we are close_co_ then... maybe.  Fun challenge.  _lt_em_gt_DistanceSquare_lt_/em_gt_ - excellent_co_ and thx for code snippet.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2325_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#25_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt works perfect!  We got intersect_co_ without using intersectsMesh or bounding boxes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow...  what?  heh.  Now we shoot the ray between ball and origin (green box)_co_ and use the pickInfo.getNormal()?  Let_t_s try some stuff in the onCollision() function_co_ using some code found in _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/26225-find-which-face-of-mesh-was-hit/?do_eq_findComment&amp_sm_comment_eq_150773_qt_ rel_eq__qt__qt__gt_THIS POST_lt_/a_gt_.  Here we go...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2326_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#26_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheck console.  I got some vectors!  YAY!  They look... umm... okay_co_ I guess.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut I think there is still trouble.  I am getting the normal of the ball-face that is opposite of origin_co_ but then I am ONLY negating that value.  In doing that_co_ I am not truly getting the normal of the hemisphere point-of-impact.  Instead_co_ I am faking it.  IF the hemisphere were low-rez_co_ then the _qt_inverse_qt_ would be quite inaccurate.  hmm.  I still got issues_co_ here.  Tweaking...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2329_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#29_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_co_ I shoot two rays_co_ and experiment with _qt_predicates?_qt_.  That might be the wrong term.  Perhaps... _qt_conditionals_qt_ is the correct term.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLines 77-84 is the first ray shot.  End of line 78 says _lt_strong_gt_item must _eq__eq_ ball_lt_/strong_gt_._lt_br /_gt_\n\tLines 86-92 - shoot same ray_co_ with _lt_s_gt_predicate_lt_/s_gt_ conditional in line 86 says _lt_strong_gt_item must _eq__eq_ hemi_lt_/strong_gt_sphere\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAt console... I report normal and other normal.  Other normal STILL could be the hemi_t_s normal that is facing OUTSIDE-OF the hemisphere_co_ and thus needs a negate().  Hmm. Or perhaps _lt_em_gt_normal_lt_/em_gt_ needs a negate().\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOk_co_ here we go again... _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2330_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#30_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBall drop straight down the Y axis.  Console_dd_  normal.y (ball) looks... reversed.  So does other normal.y.  More tweaking...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2331_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#31_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere.  Console reports look good.  Ball normal is reporting almost straight _lt_u_gt_down_lt_/u_gt_ Y axis.  Hemi is reporting almost straight _lt_u_gt_up_lt_/u_gt_ Y axis.  Yay.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn theory_co_ making the hemisphere be REALLY HI-REZ will cause the X and Z values (axial deviations?) of the hemi values (as seen on console)... be MUCH lower numbers.  Let_t_s see if that is true_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2332_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#32_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYep.  Cooooooooool.  I think the green box _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2334_qt_ rel_eq__qt_external nofollow_qt__gt_origin can be eliminated_lt_/a_gt_.  Not sure if it is wise_co_ or if it causes trouble. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnother interesting thing is seen_co_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2334_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_.  For my computer_co_ line 103... 1.826 causes ball come THROUGH the hemi a small amount.  1.82_lt_u_gt__lt_strong_gt_7_lt_/strong_gt__lt_/u_gt_ causes the ball to be a bit high_co_ appearing not to be intersecting.  Interesting (at least to me).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWho wants to put a Cannon meshImpostor on our bowl_co_ and _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2335_qt_ rel_eq__qt_external nofollow_qt__gt_watch the ball roll around in it_lt_/a_gt_?  It almost BEGS us to do it_co_ eh?  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Swimming pool skateboarders_co_ eat your hearts-out. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat_t_s that?  Put the car inside the bowl_co_ too?  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2336_qt_ rel_eq__qt_external nofollow_qt__gt_Okay_lt_/a_gt_.  Pardon?  You want the cloth_co_ too?  _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2337_qt_ rel_eq__qt_external nofollow_qt__gt_Okay_lt_/a_gt_.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ (seriously off-topic) \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2016-11-17T20:38:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2338_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#38_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-17T22:39:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tEXCELLENT!!!  Thx Adam!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat is using faked/ball-derived hemi face normals_co_ though.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#PBVEM%2340_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#PBVEM#40_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe ball is rolling rather smoothly across the low-rez hemi.  Hemi resolution is set with line 52 _lt_em_gt_segments_lt_/em_gt__dd_ parameter\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe ball-bounce pattern is identical_co_ no matter the resolution of the hemi.  I imagine the same is true about the ball. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIdeally_co_ with a low rez ball_co_ the ball should jitter/vibrate as it rolls.  _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThat is why I did the twin picking rays... to try to derive those facet angles.  Scary.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know if those two impact-point normals _lt_strong_gt_can_lt_/strong_gt_ be honored/considered in the ball bounce-angle and roll movements. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tGhostdog made it sound like he was open to other ideas (besides collecting normals).  But it would be _lt_u_gt_triple excellent_lt_/u_gt_ if those two normals were considered/honored during the ball movements.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe need SOME method of _qt_getNormal_qt__co_ and that_t_s either with a ray_co_ or possibly with a _qt_derive face normal by querying face_t_s vertices_qt_ method.  erf.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think we need two rays on EVERY FRAME... if ball is rolling.  If ball is bouncing_co_ then two rays at intersect time.  It might require a constant transforming... of Line 86 _qt__lt_em_gt_up_qt__lt_/em_gt_  _lt_img alt_eq__qt__dd_o_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ title_eq__qt__dd_o_qt_ width_eq__qt_20_qt_ /_gt_  (My dog looks scared.)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-11-18T12:51:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWriting a _lt_em_gt_getNormal()_lt_/em_gt_ method is not that complex (I_t_ll probably do it for you next week_co_ too busy currently). What_t_s more complex is to find what facet of a mesh is collided the ball_co_ or anything else. Actually using the ray approach will solve the problem any time_co_ but the ray method is not that performant.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat I have in mind would be to compute at will an array_co_ _lt_em_gt_facetData_lt_/em_gt__co_ of normals and positions per facet of a mesh (in the local mesh space).  No need to compute it each frame_co_ only once before starting to computing some collision_co_ and maybe again each time you update/morph the mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tex _dd_ _lt_em_gt_facetData[facetId] _eq_ {facetNormal_dd_ Vector3_co_ facetPosition_dd_ vector3}_lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPositions would be each facet barycenter position. With both these data_co_ you can then compute a collision _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_if distance(ball_co_ facet) &lt_sm_ ballSize then computeBounce(facetNormal)_lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_distance_lt_/em_gt_ is computed from the ball and facet world positions_co_ itself computed from the array facet position. _lt_em_gt_facetNormal_lt_/em_gt_ is the normal of the facet in the world system_co_ computed from the array _lt_em_gt_facetNormal_lt_/em_gt_ value.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf we don_t_t want to use rays_co_ the problem then is to test the distance against each mesh facet_co_ what can be quite long. So we need first to store the _lt_em_gt_facetData_lt_/em_gt_ element in an octree and then only test the distances between the ball and the facets of the octree block where the ball currently is. This would be really faster because the test would only concern really few facets.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut that_t_s not enough... Imagine that some part of the mesh were very sharp_co_ the ball would be near (distance lower than its size) two facets simultaneously. How to choose the one we would use its normal to compute the bounce ? Maybe we need to compare also the distances of all the facets near enough to the ball and just keep the minimal one to determine the facet of impact.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot sure I_t_m very clear ...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-18T13:21:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tYeah_co_ that_t_s a good idea.  Pre-process the mesh at scene start.  Gather an array of ... umm...  { faceId_dd_ normal_co_ faceId_dd_ normal_co_ etc }  Interesting!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd yes_co_ I understand that we still need to determine which face impacted-with which face (preferably without using slow rays).  hmm.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tKeep in mind that Ghostdog might not NEED this.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  He might be satisfied with Adam_t_s bounce method.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAdvancing further... could be Wingnut Weirdness... and perhaps not necessary.  I hope I am not causing un-needed headaches.  heh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tStill_co_ my curiosity pushes me.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Don_t_t do work on this... if the work is not enjoyable.  No need for stress.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThx for your thoughts/ideas_co_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5453_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5453-jerome/_qt_ rel_eq__qt__qt__gt_@jerome_lt_/a_gt_ and others. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-12-14T14:02:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell_co_ this is an old post_co_ but I_t_ve been quit busy these last weeks...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo here am I back with this _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WOFCL_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WOFCL_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\ttl_co_dr_sm_   facet normals and facet positions ... will be useful for custom collision computation or anything else from your crazy brains_co_ guys _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var facetData _eq_ mesh.getFacetData()_sm_       // returns an array of facetDataElements\nvar i _eq_ 10_sm_                                // the tenth facet\nvar normal _eq_ facetData[i].facetNormal      // its normal (Vector3)\nvar position _eq_ facetData[i].facetPosition  // its barycenter position in the local space (Vector3)\n_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIf_co_ for any reason the mesh is morphed afterwards_co_ then\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_mesh.updateFacetData()_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\twill just do the job\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s NOT implemented in the BJS core for now_co_ it_t_s just a work prototype.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease have a look at the code _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe scene part starts from the line 80 and it_t_s quite short\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe facetData part is from the line 1 to the line 75\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOf course_co_ it should work with any mesh type _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WOFCL%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WOFCL#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WOFCL%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WOFCL#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WOFCL%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WOFCL#3_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-12-14T15:58:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthe same with a naive octree implementation _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#WOFCL%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#WOFCL#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthe console should give the number of facets in the same octree block than the ball\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWait for some days until I get this work back\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]