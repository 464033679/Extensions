[{"Owner":"kenta88","Date":"2016-02-12T16:47:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi guys_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope this is the right way to ask this question_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would to create a dice to launch and discover the results. I started with this code_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_//GUI_dd_ dice for launch\n_t_use strict_t__sm_\n\nbrainCrashGameFactories\n\n    .factory(_t_Dice_t__co_ [_t_$rootScope_t__co__t_GameObject_t__co_ function($rootScope_co_GameObject){\n    \n        var Dice _eq_ function(game)\n        {\n            GameObject.call(this_co__qt_dice_qt__co_game)_sm_\n            this.game_eq_game_sm_\n            this.position _eq_ new BABYLON.Vector3(3_co_3_co_3)_sm_\n            this.rotationQuaternion _eq_ BABYLON.Quaternion.RotationYawPitchRoll(0_co_Math.PI/8_co_0)_sm_\n            \n            var vertexData _eq_ BABYLON.VertexData.CreateBox(0.3_co_BABYLON.Mesh.DEFAULTSIDE)_sm_\n            vertexData.applyToMesh(this)_sm_\n            \n            this.game.shadows.getShadowMap().renderList.push(this)_sm_\n            \n            var material _eq_ new BABYLON.StandardMaterial(_t_groundMaterial_t__co_this.game.scene)_sm_\n            material.diffuseColor _eq_ new BABYLON.Color3(0.5_co_ 0.5_co_ 1)_sm_\n            this.material _eq_ material_sm_\n            this.checkCollisions _eq_ true_sm_\n\n            this.setPhysicsState({impostor_dd_ BABYLON.PhysicsEngine.BoxImpostor_co_ mass_dd_1_co_ friction_dd_0.3_co_ restitution_dd_1})_sm_\n            \n            this.applyImpulse(new BABYLON.Vector3(0.5_co_0.5_co_0)_co_ this.position)_sm_\n\n            var localPosition _eq_ this.getPositionExpressedInLocalSpace()_sm_\n\n            var that_eq_this_sm_\n\n            setInterval(function(){ console.log(that.rotationQuaternion)_sm_}_co_1000)_sm_\n\n\n\n            /*var mq _eq_ this.rotationQuaternion_sm_\n            var q _eq_ BABYLON.Quaternion.RotationAxis(BABYLON.Axis.Y_co_ s)_sm_\n            this.rotationQuaternion _eq_ q.multiply(mq)_sm_\n            this.body.body.setQuaternion(this.rotationQuaternion)_sm_\n            this.body.body.sleeping _eq_ false_sm_*/\n\n\n        }\n        \n        Dice.prototype _eq_ Object.create(GameObject.prototype)_sm_\n\n        Dice.prototype.constructor _eq_ Dice_sm_\n        \n        return Dice_sm_\n        \n    }])_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI would know if is possibile to understand when the dice stop to roll and understand the result. I would to know which face of the cube look up! _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tDo you know any way to do this? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-02-12T17:29:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello_co_ can you please provide a sample on the playground?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kenta88","Date":"2016-02-12T23:46:26Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi detlakosh! Thanks_co_ I posted here a very simple example_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#JXJ2I%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#JXJ2I#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen the cube stop rotating I would to recognize which face look up. Just to simulate a dice_t_s launch. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-02-13T10:07:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know anything about the physics engine so far. I just added some random values to applyImpulse() to change a little the initial trajectory (I suppose) _dd_ _lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#JXJ2I%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#JXJ2I#5_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbut I don_t_t understand the bouncing of the cube regarding the initial trajectory then... seems weird\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-13T13:24:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thehe.  Poor Turin isn_t_t getting any good ideas_co_ yet.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Turin_co_ I have a few ideas_co_ but they are likely bad ideas.  BJS has a thing called a pickingRay.  You can think of them as laser range finders_co_ and you COULD fire 6 of those (one in each direction from the cube)... AFTER the cube has stopped tumbling.  One of the pickingRays will report an intersection with the ground.  Once you determine which pickingRay has hit the ground_co_ you can deduce that the opposite side... is UP.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not very experienced with rays... but_co_ look here_dd_  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#21FIRD_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#21FIRD_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLines 154 - 165... here the author uses a ray to check for intersection with the ground.  I believe line 157 is the ray target direction (it is a direction vector).  It has a -1 in the Y slot_co_ which means the direction vector is straight down.  You don_t_t necessarily need 6 of them shooting from the cube.  Maybe you could shoot just one... 6 different directions... in sequence.  When you get a hit_co_ stop firing rays_co_ take notice of the ray direction at the time of the hit_co_ and use a simple formula to fig which way is up.  Simple_co_ eh?  heh\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBUT... I suspect that a good matrix transformation expert... could do worldMatrix divided by localMatrix _eq_ blah blah.  That stuff just scares me_co_ so_co_ I won_t_t try talking about that.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tTurin_co_ you can also remove lines 7 and 26.  _qt_Collision_qt_ code lines are used in the BJS built-in collision/intersect system (which is not a full physics engine)_co_ but not used with our two external physics engines.  Line 5 enables the external physics engine_co_ and since you did not specify OimoJS or CannonJS_co_ OimoJS is the one being used (it_t_s the default).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne of the issues you will encounter... is determining WHEN the cube has stopped tumbling.  You will need to wait for the physics rigidBody to _qt_sleep_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet_t_s start this way.  In your demo line 31_co_ put _lt_em_gt_var cubeBody _eq_    _lt_/em_gt_...at the beginning of that line... like this...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tvar cubeBody _eq_ cube.setPhysicsState({ impostor_dd_ BABYLON.PhysicsEngine.BoxImpostor_co_ mass_dd_ 1_co_ friction_dd_ 0.3_co_ restitution_dd_ 1 })_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe cubeBody variable is not so important_co_ but _lt_em_gt_cubeBody.body_lt_/em_gt_    ...IS.  It is the physics _qt_RigidBody_qt_ for your cube.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe OimoJS API (what funcs/properties it has)... has never been written_co_ as far as I know.  I assembled a crappy one.  It is here...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/misc/j2h02.htm_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/misc/j2h02.htm_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSearch that document for... com.element.oimo.physics.dynamics... notice the term _qt_RigidBody_qt_ nearby.  That begins a list of funcs and properties on an OimoJS RigidBody... or in other words... on cubeBody.body.  Notice item 27... a Boolean flag property called _lt_em_gt_sleeping._lt_/em_gt_  That could be a handy flag for you to do testing.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow about a fresh playground_co_ now....\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#JXJ2I%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#JXJ2I#8_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOpen and watch your console.  It reports when the cubeBody.body has gone to sleep (when it has stopped tumbling).  Yay!  Notice line 37... that is where the _qt_which way is up_qt_ testing will be put.  Look through the list of items for OimoJS RigidBody_co_ and see what_t_s there.  Notice item #9_co_ #11_co_ and #14.  All three of those... might be handy for testing which way is up.  Hopefully_co_ some experts will add more comments and help us with that part of the challenge/adventure.  Party on!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t@jerome ... you are only randomizing a tiny amount... +/-  less than 1... to the +x and +y impulse... not very noticeable.  In my latest version_co_ I just used standard rotation to rotate the cube to its corner point (_lt_u_gt_before_lt_/u_gt_ setPhysicsState_co_ a must)_co_ and dropped it.  (no impulse).  It would be nice if it was random tumble BECAUSE OF landing on a corner... but it is still predictable and repeating.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA way to get a random tumble would be to shoot an impulse upwardly into the down-facing corner of the cube... and randomly vary the upward angle just a little.  Think of the impulse as a jet of air from beneath.  Adjusting its upward direction even slightly... will make the cube tumble differently.  (I just got a mental image of a trained seal... balancing a ball on its nose_co_ for some strange reason.)  _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tBut you can also get random tumble by slightly and randomly adjusting the rotations done in line 25 of PG #8.  Math.PI/4 is about what... .707?  So_co_ if each Math.PI/4 in line 25... was replaced with a random value between .705 and .709_co_ that would do it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd_co_ guys_co_ I could be wrong on ALL of this... but maybe not.  (phew_co_ I_t_m pooped)  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Be well. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tEdit_dd_  It is probably wise to do _lt_em_gt_scene.unregisterBeforeRender(sleepcheck)_sm__lt_/em_gt_ just after line 36.  The _qt_it_t_s asleep!_qt_ notifications in the console could get to be a BIG pile_co_ and might fall over and hurt the dog.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2016-02-13T13:25:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt_t_s better without collisions_dd_ _lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#JXJ2I%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#JXJ2I#9_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-13T13:28:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\thehe.  Sorry Temechon.  _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt_  Motor-mouth Wingy... getting in your way again.  Figs.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kenta88","Date":"2016-02-14T10:53:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey guys! Here Turin _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt_ !!! \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst of all I want to regards you for the support! I will regard especially  wingnut about the event to understand how to use event _qt_when the cube sleep_qt_ _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt_ .\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy mate_co_ that works in this project with me_co_ find that solution_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var matrix _eq_ self.getWorldMatrix()_sm_\n                matrix _eq_ matrix.clone()_sm_\n                matrix.setTranslation(new BABYLON.Vector3(0_co_0_co_0))_sm_\n                var vx _eq_ BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(1_co_0_co_0)_co_ matrix).normalize()_sm_\n                var vy _eq_ BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(0_co_1_co_0)_co_ matrix).normalize()_sm_\n                var vz _eq_ BABYLON.Vector3.TransformCoordinates(new BABYLON.Vector3(0_co_0_co_1)_co_ matrix).normalize()_sm_\n                console.log(vx.x + _qt_ _qt_ + vx.y + _qt_ _qt_ + vx.z )_sm_\n                console.log(vy.x + _qt_ _qt_ + vy.y + _qt_ _qt_ + vy.z )_sm_\n                console.log(vz.x + _qt_ _qt_ + vz.y + _qt_ _qt_ + vz.z )_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut I_t_m waiting to understand how this could works _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI hope that it could be for you a little help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\there the playground_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#JXJ2I%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#JXJ2I#10_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kenta88","Date":"2016-02-14T12:15:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk guys! My friend find the solutions_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//babylonjs-playground.com/#JXJ2I%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylonjs-playground.com/#JXJ2I#14_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot for the support ^^\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-02-14T14:45:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNice Nice Nice!  Well done!  Thanks to your friend_co_ too.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_  And thanks for the nice words.  Cooooool!  Party on!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]