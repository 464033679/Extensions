[{"Owner":"gryff","Date":"2016-03-03T21:24:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWith all the new features of BJS and skeletons - ranges etc.- and the discussion on _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/20768-loading-animations-on-the-fly/_qt_ rel_eq__qt__qt__gt_this thread_lt_/a_gt_ and _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/20840-generic-animations/_qt_ rel_eq__qt__qt__gt_this thread_lt_/a_gt_ I decided to take a look at these new features and the possibility of loading animations on the fly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut I ran into trouble. Below are some simple tests of creating an animated figure and exporting it from Blender.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Windows XP PC_dd__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. Blender 2.69_co_ BE(v1.3) _dd_  _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/index_anim1.html_qt_ rel_eq__qt_external nofollow_qt__gt_Player3_lt_/a_gt_ - Works fine .babylon file size 8.37MB\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Win7 PC_dd__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Blender 2.76_co_  BE(v3.0.6) _dd_ _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/index_anim2.html_qt_ rel_eq__qt_external nofollow_qt__gt_Player3_lt_/a_gt_ - Works fine .babylon file size 6.82MB_lt_br /_gt_\n\t3. Blender 2.76_co_  BE(v4.4.1) _dd_ _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/index_anim3.html_qt_ rel_eq__qt_external nofollow_qt__gt_Player3_lt_/a_gt_ - Spaghetti Monster .babylon file size 1.96MB\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll exports use the same starting file that I have used to test animation going back over a year.  Examples 2 and 3 use the same PC and no changes were made to the file - it was just exported.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe log files for export 2 and 3 are _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/logfiles.zip_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_  The exporter (v1.3) does not produce a log file.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot sure what the issue is. TY in advance for any help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-03-03T21:52:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSince 2.76/3.0.6 works_co_ let_t_s forget about the first_co_ except to say that mentioned the file size has been steadily being reduced.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe major reduction occurred in 4.0. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_Selection_167.png.316bf3cd694aa13065ed0e_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_6650_qt_ data-unique_eq__qt_jnxp3i42l_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2016_03/Selection_167.png.316bf3cd694aa13065ed0e2520b488ec.png_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThe variable bone influencers might only be an issue if your meshes had a highest # observed &gt_sm_ 4.  If that was the case_co_ then 4.0 would have actually fixed it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe vertex optimization did all the size reduction.  It also caused the mesh not to be broken into 2 by staying under the limit.  It is not ideal_co_ but can you flat shade the meshes and report?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t4.4 added actions support.  This re-did the process of recording animation.  Might also want to go back to the last 4.0.x.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-03-03T22:30:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tMight also want to go back to the last 4.0.x\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHmm will have to search see if I have a v4.0.x.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJeff_co_ are you saying that there is some break in backwards compatibility in order to get the file size reduction (which is impressive by the way _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt_ )?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-03-04T00:52:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDid not think so.  I had a thought though.  That scene looked a lot like the weird stuff during variable bone influencers development.  The .babylon files coming out of 4.0+ Blender exporters might not run on less than a 2.3 BJS runtime when they have armatures.  I checked the console_co_ this is using 2.3-alpha.  Can you switch to exclusively using the latest final print of BJS for all tests?  Maybe alpha / betas for testing new features_co_ but I do not want to be chasing my tail.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEven though the max influencers you have are less than 4_co_ 4.0 exporters now sort the weights &amp_sm_ indexes.  If let_t_s say you had 4 vertices in a mesh with 5 influencers_co_ you could force the mesh to have a max of 4.  You might think that would be the same as 4 fixed influencers_co_ but since they are now sorted high to low_co_ now the lowest would now be dropped rather than the one which listed last.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere are also vertex shader differences in 2.3.  Do not know that using 2.3 will fix this_co_ but it is the best possible solution.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-03-04T01:35:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tCan you switch to exclusively using the latest final print of BJS for all tests?  Maybe alpha / betas for testing new features_co_ but I do not want to be chasing my tail.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tOf course Jeff. I actually downloaded the latest versions of the 4.4.1 exporter and babylon.2.3.js yesterday and used those in my tests. I had actually updated my local server to the latest BJS - but forgot to update the one at my dropbox. account. However my updated dropbox server still gives the _qt_spaghetti monster_qt_.  as did my local server when I was testing locally.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf the BE 4.4.1 can be made to work - that is a very serious reduction in file size since BE1.13 _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI checked my file in Blender for bone influences on vertices - it is set to 4 (which I think is the Blender default). Just so you know_co_ the mesh and rig (_qt_game rig_qt_) come from MH 1.0.2** - which you probably guessed _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt__gt_. The animation itself is CMU 06-02 reduced to 30fps in bvhacker.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_s_gt_Do you want the blend file to play with ?_lt_/s_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve updated the BJS to the latest preview version (2.4?) -no change. And the basic starting blend file for all exports above_co_ in a zip_co_ is _lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/blendfile.zip_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\t** Downloaded MH1.1.0 for windows release today - finally it arrives _lt_img alt_eq__qt__dd_lol_dd__qt_ data-emoticon_eq__qt_true_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ title_eq__qt__dd_lol_dd__qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-03-10T17:41:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPushed out exporter version 4.4.2_co_ but that was just to include a producer section in the .babylon file_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_{_qt_producer_qt__dd_{_qt_name_qt__dd__qt_Blender_qt__co__qt_version_qt__dd__qt_2.76 (sub 0)_qt__co__qt_exporter_version_qt__dd__qt_4.4.3_qt__co__qt_file_qt__dd__qt_base_male3.babylon_qt_}_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThis supports the new FileLoader logging.  This process is just out of control / audit trail _lt_strong_gt_Free_lt_/strong_gt_.  Showing what exactly made this file from what is on the inside of the file_co_ gives a base line for finding errors like mixing in old .babylon files with newer ones_co_ or newer BJS runtimes.  Not knowing where / when the file came from just leads to speculation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs far as your problem_co_ I have managed to get it to with 4.1.0.  The big reduction in file size happened in 4.0.x_co_ so that is not the issue.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn 4.2.x_co_ both ik &amp_sm_ actions were introduced.  It does not work with 4.2.  I found some problems with the frame #_t_s not matching &amp_sm_ disagreeing with range by 1 frame. 4.4.3 fixed that_co_ but not the problem so not released. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI did a mass replace to the working 4.1.0 file to make each frame its own line_co_ and 4.3 generates that way.  I saw some of the matrixes of the animation were different (5% of them).  Using Netbean_t_s side-by-side diff tool_co_ I clicked the 4.1.0 values into the 4.3 file.  Problem not fixed.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat is disturbing is the # of vertices in the mesh is different slightly. The indices are the same_co_ so I know it is because of optimization difference.  Also thinking it might be the reordering of work caused by ik.  You see_co_ in order to ignore bones_co_ you have to process the skeleton (pose them for animation) first.  Before_co_ things were processed in whatever order Blender gave them to me.  Maybe in my tests_co_ they all would have processed the skeleton first anyway.  Will have to check.  First will check your logs to see if they did mesh first.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRight now this is on hold.  Just got TOB 5.0 to run with it broken into 13 files.  Need to see if I can add calls to MHX2 for finger shape key construction &amp_sm_ another process to combine the 50 face shape keys on the blender side.  This will greatly reduce the file size.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-04-08T17:44:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt was the fact that in order to ignore ik bones_co_ skeletons need to be processed prior to meshes.  There was at the very beginning of the exporter to set the scene frame to 0. I just moved it after the pass to process all of the skeletons.  Version 4.4.4 handles this now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-05-08T05:48:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell I finally got time to try out BE4.4.4\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_WinXP PC (BE 4.4.4) Blender 2.76_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/index_anim4.html_qt_ rel_eq__qt_external nofollow_qt__gt_Player 4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJeff killed the _qt__lt_em_gt_Spaghetti Monster_lt_/em_gt__qt_. And the file size went from 1_co_957Kb to 1_co_961Kb - a mere bagatelle _lt_img alt_eq__qt__dd_lol_dd__qt_ data-emoticon_eq__qt__qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ title_eq__qt__dd_lol_dd__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tNow some experimentation with MakeHuman1.1\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers_co_ gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"benoit-1842","Date":"2016-05-18T02:42:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tDid you have success with the 4.5 version.....  Me I am having a little spaghetti with 2.76 and the exporter 4.5......  If you could share the 4.4.4 I will be very happy to test that out.....\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanx_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBenoit\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"gryff","Date":"2016-05-18T16:32:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo problems - no spaghetti!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_WindowsXP _co_ Blender 2.76_co_ BE 4.5.0_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//dl.dropboxusercontent.com/u/70260871/webgl/anim_test3/index_anim5.html_qt_ rel_eq__qt_external nofollow_qt__gt_Player 5_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/bf2e4b0f26389570dbc12fec1f43cc1e7d040654/Exporters/Blender/io_export_babylon.py_qt_ rel_eq__qt_external nofollow_qt__gt_BE v 4.4.4._lt_/a_gt_ Hit the _qt_RAW_qt_ button and save the file.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheers gryff _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]