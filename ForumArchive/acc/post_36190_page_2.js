[{"Owner":"Deltakosh","Date":"2018-03-16T18:26:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWe know that DDS works when loaded with absolute Uri but not when loaded with relative Uri.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe know that DDS are loaded by XHR.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo my question was more_dd_ can you show the profiler when loading the DDS with relative Uri? (Or is it what you showed here?)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif you can reference Babylon.max.js_co_ please set a breakpoint around a line with _qt_DDSTools.GetDDSInfo(data)_sm__qt_. There must be a call to _loadFile before which is where the xhr will be triggered\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tand try to check what is going wrong.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_(and yes it is not fast as we are fighting against a platform bug)_lt_/em_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-03-17T12:37:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi DK_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks again man. We are almost done (I want to believe).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs soon as possible (this same afternoon)  I_t_ll try what you_t_re asking for.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBest regards.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-03-18T21:47:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi there_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ apparently_co_ what is happening is what is stated by _lt_strong_gt_Ashley Gullen_lt_/strong_gt_ in the previously identified article (_lt_a href_eq__qt_https_dd_//www.scirra.com/blog/ashley/25/hacking-something-useful-out-of-wkwebview_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.scirra.com/blog/ashley/25/hacking-something-useful-out-of-wkwebview_lt_/a_gt_)_co_ when he writes_dd_\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p style_eq__qt_color_dd_#666666_sm_font-size_dd_15px_sm_padding_dd_0px 0px 0px 20px_sm__qt__gt_\n\t\t\t_lt_span style_eq__qt_color_dd_#666666_sm_font-size_dd_15px_sm__qt__gt_One of the first things Construct 2 does when loading is to load the game_t_s main data JSON file via XMLHttpRequest._lt_span_gt_ _lt_/span_gt__lt_/span_gt_This does not work in WKWebView_dd_ it appears to treat local files as if they came from a remote server_co_ even though they_t_re in the app itself_co_ and such requests are blocked._qt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I think all this is being ran on _lt_strong_gt_WKWebView_lt_/strong_gt_ and not _lt_strong_gt_UIWebView_lt_/strong_gt__co_ which is great for a improved _lt_strong_gt_WebGL_lt_/strong_gt_ speed_co_ but very bad for XHR loaded assets_co_ because it is making my plain URI _qt__lt_em_gt_assets/textures/environment.dds_lt_/em_gt__qt_ being changed by iOS in something like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_17555_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaed40ba48de_Capturadepantalla2018-03-18alas22_02_10.png.218b6f112c85b5330d389444744826af.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_5aaed40ba7656_Capturadepantalla2018-03-18alas22_02_10.thumb.png.4984db019ef5d6179e0ab641f0222a56.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17555_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaed40ba7656_Capturadepantalla2018-03-18alas22_02_10.thumb.png.4984db019ef5d6179e0ab641f0222a56.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat is_co_ the O.S. is trying to retrieve an inexistent file from the same location the local copy of BJS engine is stored in my app. What a disaster!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tMoreover_co_ I can_t_t get more help on this by debug-tool (remote debug from Safari running on my macMini )_co_ as the set breakpoint (marked line 69348) in never reached_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_5aaeddaba1420_Capturadepantalla2018-03-18alas22_42_13.png.b2fa751dfc876cea9d8d56568f10db7e.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17558_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaeddaba1420_Capturadepantalla2018-03-18alas22_42_13.png.b2fa751dfc876cea9d8d56568f10db7e.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn contrast_co_ following the trace of the environment DDS loading_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_texEnvironment_eq_BABYLON.CubeTexture.CreateFromPrefilteredData(_qt_assets/textures/environment.dds_qt__co__Scene)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBring us to the _lt_strong_gt_CubeTexture_lt_/strong_gt_ object_co_ and there to its constructor_co_ where the execution exists at line _lt_strong_gt_50557_lt_/strong_gt__co_ having _lt_strong_gt__this.texture_lt_/strong_gt_ a _lt_strong_gt_null_lt_/strong_gt_ value.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs _lt_strong_gt_onLoad_lt_/strong_gt_ is false at line _lt_strong_gt_50570_lt_/strong_gt_ the constructor definitely exists w/o loading no texture at all.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_17562_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaee34f48d61_Capturadepantalla2018-03-18alas23_07_24.png.21a53b742a4315165194fb77c19758f4.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_5aaee34fe9baf_Capturadepantalla2018-03-18alas23_07_24.thumb.png.8c2231084ca443d15ecc736a60bdfcb8.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17562_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaee34fe9baf_Capturadepantalla2018-03-18alas23_07_24.thumb.png.8c2231084ca443d15ecc736a60bdfcb8.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tComing back to line _lt_strong_gt_50557_lt_/strong_gt__co_ texture property is null because so is retrieved by _lt_strong_gt_BaseTexture.prototype._getFromCache_lt_/strong_gt__dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_17563_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaee7d1bc284_Capturadepantalla2018-03-18alas23_25_48.png.1bd250c8167f23c1c05b65a36c7f8cd1.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_5aaee7d2227a0_Capturadepantalla2018-03-18alas23_25_48.thumb.png.8dfbd6217f36513bf43ae403bacca385.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17563_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaee7d2227a0_Capturadepantalla2018-03-18alas23_25_48.thumb.png.8dfbd6217f36513bf43ae403bacca385.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think that must be the problem but I can´t discover it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOf course_co_ personally I can see all these platform problems with iOS-hybrid-apps as a huge fiasco in my attempt to use _lt_strong_gt_BJS_lt_/strong_gt_ as a functional cross-platform tool. Any help or solution? ._lt_strong_gt__lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_.. as loading the environment DDS textures the same way the rest of textures are_co_ that is without the help of XHR functionalities (with app-local-storage synchro-loading is fast enough by far)_co_ ._lt_/span_gt__lt_/strong_gt_ _lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong style_eq__qt_font-style_dd_italic_sm__qt__gt_P.S._lt_/strong_gt__lt_i_gt__dd_ _lt_/i_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_i_gt_Please note that the _lt_/i_gt__lt_strong style_eq__qt_font-style_dd_italic_sm__qt__gt_babylon.3.1.custom.js_lt_/strong_gt__lt_i_gt_ is only as I_t_ve named the BJS code downloaded from babylonia.com&gt_sm_download-generator-page_co_ using_dd_ v3.1 stable_co_ unminified and w/o components at all._lt_/i_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_Finally_co_ while not my main problem now_co_  I get (keeping on iOS-Cordova) another error in my console_co_ identified in the article of _lt_strong_gt_Ashely_lt_/strong_gt__co_ as I can´t have the audio (water falling SFX) working_co_ because of_dd__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t _lt_img alt_eq__qt_5aaed97e40567_Capturadepantalla2018-03-18alas22_25_20.png.7757dc1967ccf868aae90c7421dc7fd5.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17557_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaed97e40567_Capturadepantalla2018-03-18alas22_25_20.png.7757dc1967ccf868aae90c7421dc7fd5.png_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-03-19T11:18:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again _lt_strong_gt_DK_lt_/strong_gt__dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve just realized you were asking me for a profiler screenshot when using online environment DDS path_co_ here you are_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaf9c7ac994e_Capturadepantalla2018-03-19alas12_13_54.png.c0a0c92af3f84c377eb2b2f8b73b57fe.png_qt_ data-fileid_eq__qt_17569_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_17569_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_03/5aaf9c7ad10bf_Capturadepantalla2018-03-19alas12_13_54.thumb.png.ba2e9e47a7800080102c097976eb7133.png_qt_ alt_eq__qt_5aaf9c7ad10bf_Capturadepantalla2018-03-19alas12_13_54.thumb.png.ba2e9e47a7800080102c097976eb7133.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI hope this helps!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you for your time.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-19T15:27:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI find you a bit mean here. It is a huge fiasco but this is not our fault. How can we fix the problem coming from Cordova? Whatever engine you will use will have the same issue. The platform has a bug with local XHR. How can we deal with that???\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWe need to use a XHR to load the DDS file as IMG DOM element cannot load it. Please tell me how to avoid that and I_t_ll gladly fix it\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-03-19T17:39:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_strong_gt_Deltakosh_lt_/strong_gt__dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOf course this is not _lt_strong_gt_BJS Engine_lt_/strong_gt_ fault_co_ but.. please_co_ understand me_co_ I thought it was possible to have a _lt_strong_gt_WebGL_lt_/strong_gt_ cross-platform framework capable to achieve the requirements of my average projects.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn this direction_co_ the inclusion of PBR materials in the engine was great news. Sadly_co_ you_t_ll need environment textures if you are going to use PBRs in a proper way. And so is how we got to where we are now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ if XHR is needed but we can´t use it under _lt_strong_gt_iOS-Cordova_lt_/strong_gt__co_ ... the available options here are_dd_\n_lt_/p_gt_\n\n_lt_ol_gt_\n\t_lt_li_gt_\n\t\tstore that DDS in a web server and include the need for Internet connection in order to use de app_co_\n\t_lt_/li_gt_\n\t_lt_li_gt_\n\t\t(maybe I_t_m wrong at all whit this approach) read the local file as an _lt_strong_gt_ArrayBuffer_lt_/strong_gt__co_ then create a _lt_strong_gt_Blob URL_lt_/strong_gt_ from that_co_ following these steps_dd_\n\t_lt_/li_gt_\n_lt_/ol_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tBlob URLs would do the job_co_ but apparently createObjectURL doesn_t_t work on the Cordova plugin_t_s files - I think they are some kind of fake file object which can just be used in specific ways. Data URIs could work_co_ but they tend to be inefficient (string parsing to load an image?!) and bloat the data size. However... we can read a local file as an ArrayBuffer_co_ then create a real Blob from that!\n\t\t_lt_/p_gt_\n\n\t\t_lt_pre_gt_\n\nfunction fetchLocalFileViaCordovaAsArrayBuffer(filename_co_ successCallback_co_ errorCallback)\n{\n\tfetchLocalFileViaCordova(filename_co_ function (file)\n\t{\n\t\tvar reader _eq_ new FileReader()_sm_\n\t\t\n\t\treader.onload _eq_ function (e)\n\t\t{\n\t\t\tsuccessCallback(e.target.result)_sm_\n\t\t}_sm_\n\t\t\n\t\treader.readAsArrayBuffer(file)_sm_\n\t}_co_ errorCallback)_sm_\n}_sm_\n\nfunction fetchLocalFileViaCordovaAsURL(filename_co_ successCallback_co_ errorCallback)\n{\n\t// Convert fake Cordova file to a real Blob object_co_ which we can create a URL to.\n\tfetchLocalFileViaCordovaAsArrayBuffer(filename_co_ function (arrayBuffer)\n\t{\n\t\tvar blob _eq_ new Blob([arrayBuffer])_sm_\n\t\tvar url _eq_ URL.createObjectURL(blob)_sm_\n\t\tsuccessCallback(url)_sm_\n\t}_co_ errorCallback)_sm_\n}_sm__lt_/pre_gt_\n\n\t\t_lt_p_gt_\n\t\t\tYes_co_ this probably involves copying the data. But it stays binary_co_ and we can create a real blob URL to it.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tDo you think this last focus of the problem deserves to be evaluated?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf so_co_ what lines of BJS code must I investigate?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBest regards.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-03-19T22:40:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis should work_dd_) I will make it work else\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-04-01T20:13:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again _lt_strong_gt_Deltakosh_lt_/strong_gt__dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m here again after a break_co_ in order to (hopefully) finish this development.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRetaking the conversation where we let it_co_ we had a _lt_strong_gt_DDS texture_lt_/strong_gt_ that _lt_strong_gt_Cordova-iOS_lt_/strong_gt_ implementation refused to load by means of _lt_span_gt__lt_strong_gt_BABYLON.CubeTexture.CreateFromPrefilteredData_lt_/strong_gt__lt_/span_gt_ _lt_strong_gt_BJS_lt_/strong_gt_ API_co_ because _qt__lt_em_gt_..._lt_/em_gt__lt_span_gt__lt_em_gt_WKWebView appears to treat local files as if they came from a remote server_co_ even though they_t_re in the app itself_co_ and such requests are blocked._lt_/em_gt__qt_ (taken from Construct Engine / Ashley_t_s Blog / _lt_a href_eq__qt_https_dd_//www.construct.net/es/blogs/ashleys-blog-2/hacking-something-useful-out-of-wkwebview-932_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.construct.net/es/blogs/ashleys-blog-2/hacking-something-useful-out-of-wkwebview-932_lt_/a_gt_)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFrom here_co_ following the Ashley_t_s article_co_ I have to implement the following functionality_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_function fetchLocalFileViaCordova(filename_co_ successCallback_co_ errorCallback){\n  var path _eq_ cordova.file.applicationDirectory + _qt_www/_qt_ + filename_sm_\n  window.resolveLocalFileSystemURL(path_co_ function (entry){\n    entry.file(successCallback_co_ errorCallback)_sm_\n  }_co_ errorCallback)_sm_\n}_sm_\n\nfunction fetchLocalFileViaCordovaAsArrayBuffer(filename_co_ successCallback_co_ errorCallback){\n  fetchLocalFileViaCordova(filename_co_ function (file){\n    var reader _eq_ new FileReader()_sm_\n\treader.onload _eq_ function (e){\n\t  successCallback(e.target.result)_sm_\n\t}_sm_\n\treader.readAsArrayBuffer(file)_sm_\n  }_co_ errorCallback)_sm_\n}_sm_\n\nfunction fetchLocalFileViaCordovaAsURL(filename_co_ successCallback_co_ errorCallback){\n  //convert fake Cordova file to a real Blob object_co_ which we can create a URL to\n  fetchLocalFileViaCordovaAsArrayBuffer(filename_co_ function (arrayBuffer){\n    var blob _eq_ new Blob([arrayBuffer])_sm_\n\tvar url _eq_ URL.createObjectURL(blob)_sm_\n\tsuccessCallback(url)_sm_\n  }_co_ errorCallback)_sm_\n}_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tSo I must load my DDS file with this code_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_fetchLocalFileViaCordovaAsURL(_qt_assets/textures/environment.dds_qt__co_function(link){\n    alert(link)_sm_\n    texEnvironment_eq_BABYLON.CubeTexture.CreateFromPrefilteredData(link_co__Scene)_sm_\n  }_co_function(){\n    alert(_qt_Error_qt_)_sm_\n  }\n)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tSadly_co_ although the _lt_strong_gt_fetchLocalFileViaCordovaAsURL_lt_/strong_gt_ has success in generating the wanted blob (as the first _lt_strong_gt_alert_lt_/strong_gt_ shows in my screen)_co_ it seems _lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt__lt_strong_gt_BABYLON.CubeTexture.CreateFromPrefilteredData_lt_/strong_gt__lt_/span_gt_ refused to load the DDS as the geometry is shown in black. Please note the final statement of the (excerpted) console_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_2018-04-01 21_dd_36_dd_27.628173+0200 GRB Technology[1019_dd_607207] Finished load of_dd_ file_dd_///var/containers/Bundle/Application/4A5035B4-5E5A-49ED-8FF5-526CF779DC72/GRB%20Technology.app/www/index.html\n&gt_sm_&gt_sm_&gt_sm_&gt_sm_ frameSizeChanged _eq_ 4096\n&gt_sm_&gt_sm_&gt_sm_&gt_sm_ frameSizeChanged _eq_ 4096\n2018-04-01 21_dd_37_dd_54.532608+0200 GRB Technology[1019_dd_607266] void SendDelegateMessage(NSInvocation *)_dd_ delegate (webView_dd_runJavaScriptAlertPanelWithMessage_dd_initiatedByFrame_dd_) failed to return after waiting 10 seconds. main run loop mode_dd_ kCFRunLoopDefaultMode\n2018-04-01 21_dd_37_dd_54.557541+0200 GRB Technology[1019_dd_607207] Error in Success callbackId_dd_ File1392284593 _dd_ Error_dd_ Cannot load cubemap because files were not defined_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt__lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_I suppose the BJS loading method must to be changed anyway in order to work with the blob._lt_/span_gt__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt__lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_Any help with this?_lt_/span_gt__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tP.S._dd_  As a second reference on this issue_co_ I think it could be affordable to implement here the same technique that is already applied in the _lt_strong_gt_BJS Sandbox. _lt_/strong_gt_Your colleague _lt_strong_gt_Davrous_lt_/strong_gt_ explains it in this same web-site (_lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/18078-load-file-without-webserver/_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/18078-load-file-without-webserver/_lt_/a_gt_)_co_ when he says_dd_ _qt__lt_em_gt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_14px_sm__qt__gt_The implementation is fairly simple. I_t_m just taking the blob via the HTML5 File API_co_ storing the texture as blog into an array and I_t_ve slightly modified the Babylon.js loader to load the texture from my blob array rather than using XHR to load them from the server._lt_/span_gt__lt_/em_gt__qt_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_public static LoadImage(url_dd_ any_co_ onLoad_dd_ (img_dd_ HTMLImageElement) _eq_&gt_sm_ void_co_ onError_dd_ (message?_dd_ string_co_ exception?_dd_ any) _eq_&gt_sm_ void_co_ database_dd_ Nullable&lt_sm_Database&gt_sm_)_dd_ HTMLImageElement {\n            if (url instanceof ArrayBuffer) {\n                url _eq_ Tools.EncodeArrayBufferTobase64(url)_sm_\n            }\n\n            url _eq_ Tools.CleanUrl(url)_sm_\n\n            url _eq_ Tools.PreprocessUrl(url)_sm_\n\n            var img _eq_ new Image()_sm_\n            Tools.SetCorsBehavior(url_co_ img)_sm_\n\n            const loadHandler _eq_ () _eq_&gt_sm_ {\n                img.removeEventListener(_qt_load_qt__co_ loadHandler)_sm_\n                img.removeEventListener(_qt_error_qt__co_ errorHandler)_sm_\n                onLoad(img)_sm_\n            }_sm_\n\n            const errorHandler _eq_ (err_dd_ any) _eq_&gt_sm_ {\n                img.removeEventListener(_qt_load_qt__co_ loadHandler)_sm_\n                img.removeEventListener(_qt_error_qt__co_ errorHandler)_sm_\n\n                Tools.Error(_qt_Error while trying to load image_dd_ _qt_ + url)_sm_\n\n                if (onError) {\n                    onError(_qt_Error while trying to load image_dd_ _qt_ + url_co_ err)_sm_\n                }\n            }_sm_\n\n            img.addEventListener(_qt_load_qt__co_ loadHandler)_sm_\n            img.addEventListener(_qt_error_qt__co_ errorHandler)_sm_\n\n            var noIndexedDB _eq_ () _eq_&gt_sm_ {\n                img.src _eq_ url_sm_\n            }_sm_\n\n            var loadFromIndexedDB _eq_ () _eq_&gt_sm_ {\n                if (database) {\n                    database.loadImageFromDB(url_co_ img)_sm_\n                }\n            }_sm_\n\n\n            //ANY database to do!\n            if (url.substr(0_co_ 5) !_eq__eq_ _qt_data_dd__qt_ &amp_sm_&amp_sm_ database &amp_sm_&amp_sm_ database.enableTexturesOffline &amp_sm_&amp_sm_ Database.IsUASupportingBlobStorage) {\n                database.openAsync(loadFromIndexedDB_co_ noIndexedDB)_sm_\n            }\n            else {\n                if (url.indexOf(_qt_file_dd__qt_) !_eq__eq_ -1) {\n                    var textureName _eq_ decodeURIComponent(url.substring(5).toLowerCase())_sm_\n                    if (FilesInput.FilesToLoad[textureName]) {\n                        try {\n                            var blobURL_sm_\n                            try {\n                                blobURL _eq_ URL.createObjectURL(FilesInput.FilesToLoad[textureName]_co_ { oneTimeOnly_dd_ true })_sm_\n                            }\n                            catch (ex) {\n                                // Chrome doesn_t_t support oneTimeOnly parameter\n                                blobURL _eq_ URL.createObjectURL(FilesInput.FilesToLoad[textureName])_sm_\n                            }\n                            img.src _eq_ blobURL_sm_\n                        }\n                        catch (e) {\n                            img.src _eq_ _qt__qt__sm_\n                        }\n                        return img_sm_\n                    }\n                }\n\n                noIndexedDB()_sm_\n            }\n\n            return img_sm_\n        }_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you for your time.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-04-02T16:45:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tBTW I_t_m trying to tackle the problem also from the _lt_strong_gt_Cordova_lt_/strong_gt_ side.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere_t_re are several plugins that promises to solve _lt_strong_gt_XHR_lt_/strong_gt_ issues within _lt_strong_gt_iOS_lt_/strong_gt_ environment (so this is a really hot matter).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe case is that_co_ for example_co_ _lt_span style_eq__qt_background-color_dd_rgba(27_co_31_co_35_co_.0470588)_sm_color_dd_#24292e_sm_font-size_dd_11.899999618530273px_sm__qt__gt__lt_strong_gt__lt_span style_eq__qt_font-size_dd_14px_sm__qt__gt_cordova-plugin-ionic-webview_lt_/span_gt__lt_/strong_gt_ _lt_/span_gt_works but its performance is very poor (maybe because I_t_m using JQM and not Ionic). Maybe that poor performance is due to the overhead of running a local http server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOn the other hand the more _qt_framework agnostic_qt_ and not running any http server_co_ the Oracle_t_s pair_dd_  _lt_span_gt__lt_strong_gt_cordova-plugin-wkwebview-engine_lt_/strong_gt_ (1.1.4) +  _lt_strong_gt_cordova-plugin-wkwebview-file-xhr_lt_/strong_gt_ (2.1.1) _lt_/span_gt_seems not solving the problem and instead refuses to load the .babylon and .PNG files.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tKeep on investigating!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-04-02T17:40:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe CreateFromPrefilteredData should work seamlessly with a blob url\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut in your code I do not see the blob creation which should look like this_dd_\n_lt_/p_gt_\n\n_lt_div style_eq__qt_background-color_dd_#1e1e1e_sm_ color_dd_#d4d4d4_sm_ font-size_dd_14px_qt__gt_\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#569cd6_qt__gt_var_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#9cdcfe_qt__gt_blob_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt__eq__lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#569cd6_qt__gt_new_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#4ec9b0_qt__gt_Blob_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_([_lt_/span_gt__lt_span style_eq__qt_color_dd_#9cdcfe_qt__gt_buffer_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_])_sm__lt_/span_gt_\n\t_lt_/div_gt_\n\n\t_lt_div_gt_\n\t\t_lt_span style_eq__qt_color_dd_#569cd6_qt__gt_var_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#9cdcfe_qt__gt_blobURL_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt__eq__lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_ _lt_/span_gt__lt_span style_eq__qt_color_dd_#9cdcfe_qt__gt_URL_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_._lt_/span_gt__lt_span style_eq__qt_color_dd_#dcdcaa_qt__gt_createObjectURL_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_(_lt_/span_gt__lt_span style_eq__qt_color_dd_#9cdcfe_qt__gt_blob_lt_/span_gt__lt_span style_eq__qt_color_dd_#d4d4d4_qt__gt_)_sm__lt_/span_gt_\n\t_lt_/div_gt_\n_lt_/div_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-04-02T20:31:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_strong_gt_Deltakosh_lt_/strong_gt__co_ and thank you very much for your support in this _qt_not-really-a-BJS-issue_qt_ issue. _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I understand_co_ I need to implement it (more or less) this way_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_var xhr_eq_new XMLHttpRequest()_sm_\nxhr.open(_qt_GET_qt__co__qt_assets/textures/environment.dds_qt__co_true)_sm_\nxhr.responseType_eq__qt_arraybuffer_qt__sm_\nxhr.addEventListener(_qt_load_qt__co_ function(){\n    if(xhr.status_eq__eq__eq_200){\n      var blob_eq_new Blob([xhr.response]_co_{type_dd_ _qt_image/png_qt_})_sm_\n      var blobURL_eq_URL.createObjURL(blob)_sm_\n      texEnvironment _eq_BABYLON.CubeTexture.CreateFromPrefilteredData(blobURL_co__Scene)_sm_\n    }\n  }_co_function(){\n    alert(_qt_Error_qt_)_sm_\n  }_sm_\n)_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tIsn_t_t it?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUnfortunately_co_ xhr.status_eq__eq__eq_200 is never reached.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-04-03T18:32:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi there_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs using the environment in a DDS format is revealing as an excesive time consuming task_co_ I_t_m decided to keep the things simple and use the good old 6-sides method for the CubeTexture/CubeMap.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you very much.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"paleRider","Date":"2018-04-04T21:22:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAs an epilogue_co_ and thinking it can be useful for somebody_co_ I finally managed to have my DDS local file loaded by means of _lt_strong style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#353c41_sm_font-size_dd_13px_sm__qt__gt_CreateFromPrefilteredData_lt_/strong_gt__co_ on Cordova-iOS_co_ with the help of_lt_span style_eq__qt_font-size_dd_13px_sm__qt__gt_ _lt_/span_gt__lt_a href_eq__qt_https_dd_//github.com/oracle/cordova-plugin-wkwebview-file-xhr_qt_ rel_eq__qt_external nofollow_qt_ style_eq__qt_font-size_dd_13px_sm__qt__gt_cordova-plugin-wkwebview-file-xhr_lt_/a_gt__lt_span style_eq__qt_font-size_dd_13px_sm__qt__gt_._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_font-size_dd_13px_sm__qt__gt_Best regards._lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]