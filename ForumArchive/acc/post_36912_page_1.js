[{"Owner":"BlackMojito","Date":"2018-04-08T09:04:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have two questions.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. On the first screenshot_co_ why do I have such enormous _qt_idle_qt_ time? It seems that it is even longer than the _qt_render_qt_ function itself. How can I improve that?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. On the second screenshot_co_ it seems that PBRBaseMaterial is too much time-consuming. How can I reduce that? Is this time related to frequent shader program switch?\n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_04/2.jpg.b2bc8f2d32e2712b17f8fbc87e219dcb.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_17824_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_04/2.thumb.jpg.6da957232e5d72a19bb6121ee0563196.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_2.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_04/5ac9d86d47dc5_DeveloperTools-httplocalhost8081index.htmlprojectId2c9180825f89ebd3015fb9afb99e02ffdocumentIdeedb2c5a53cd4eaf967ccf894b94266.jpg.1b3e88e8c4c33b0360cd2ac08594839a.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_17825_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_04/5ac9d86d61963_DeveloperTools-httplocalhost8081index.htmlprojectId2c9180825f89ebd3015fb9afb99e02ffdocumentIdeedb2c5a53cd4eaf967ccf894b94266.thumb.jpg.ec4c14c1d134709a850735582c535968.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_Developer Tools - httplocalhost8081index.htmlprojectId_eq_2c9180825f89ebd3015fb9afb99e02ff&amp_sm_documentId_eq_eedb2c5a53cd4eaf967ccf894b94266.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BitOfGold","Date":"2018-04-08T09:42:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t1. because the engine loop calls rendering on requestAnimationFrame_co_ so it_t_s synced to a 60Hz monitor. So its a good thing_co_ the rendering is faster than needed. Try it on a slower machine or add some few hundred meshes and physics_co_ you quickly run out of that idle time _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\t2. This looks really fast to me_co_ the graph is 0.7ms from left to right... at 60Hz you have 16.777ms for every frame_co_ so it_t_s nice._lt_br /_gt_\n\t_lt_br /_gt_\n\tYou will only now what to optimize when you got a really high load._lt_br /_gt_\n\tI try to test everything on my 3yrs old PC with GTX970 and i7 4790K_co_ and my 6yrs old PC with Radeon 7970 and Phenom II X6 1090T. So older and older machines_co_ new and old phones etc._lt_br /_gt_\n\t_lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BlackMojito","Date":"2018-04-08T10:05:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI found one thing we might be able to optimize.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn _lt_strong_gt_PBRBaseMaterial.bindForSubMesh()_lt_/strong_gt__co_ we do _lt_strong_gt_this._afterBind(mesh)_lt_/strong_gt__sm_ while in _lt_strong_gt_StandardMaterial.bindForSubMesh()_lt_/strong_gt__co_ we do _lt_strong_gt_this._afterBind(mesh_co_ this._activeEffect)_sm_ _lt_/strong_gt_The active effect is actually never cached for PBR materials.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo for PBR materials_co_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_var mustRebind _eq_ this._mustRebind(scene_co_ effect_co_ mesh.visibility)_sm__lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\treturns always false. Which leads to wasting a lot of time on rebinding stuff...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-04-08T10:39:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28947-blackmojito/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28947_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28947-blackmojito/_qt_ rel_eq__qt__qt__gt_@BlackMojito_lt_/a_gt__lt_/span_gt_ Want to submit your patch to GitHub ? \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"BlackMojito","Date":"2018-04-09T03:46:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_211288_qt_ data-ipsquote-contentid_eq__qt_36912_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1523183977_qt_ data-ipsquote-userid_eq__qt_5292_qt_ data-ipsquote-username_eq__qt_Dad72_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t17 hours ago_co_ Dad72 said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28947-blackmojito/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28947_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28947-blackmojito/_qt_ rel_eq__qt__qt__gt_@BlackMojito_lt_/a_gt__lt_/span_gt_ Want to submit your patch to GitHub ? \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tDone\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]