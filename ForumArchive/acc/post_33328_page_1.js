[{"Owner":"RelativeNull","Date":"2017-10-09T08:56:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello everyone_co__lt_br /_gt__lt_br /_gt_\n\tSo I have been developing this game for the last month. It_t_s an online rpg which I have been wanting to develop for quite some time now. I am very aware that the project is pretty challenging so instead of resolving issues after_co_ I am trying to anticipate and ask questions before. I am pretty sure some of you guys already have had to deal with the things I am dealing so why not ask for a hand _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ ._lt_br /_gt__lt_br /_gt_\n\tI have been very cautious performance-wise with the graphics. I have set quite a tight poly-budget and am trying to work things out from there. Models are a maximum of 3k triangles and textures a maximum of 512x512 resolution  Also all of my static meshes are joined into one_co_ I believe joined meshes are more performant than instances ( If I am wrong please tell me ) . All of the dynamic meshes are either instances or clones depending on whether they have a skeleton with animations or not. Shadow maps for static models are baked and for dynamic models are  at 256 resolution ( Probably will be configurable client side ) . I have been also looking for the possibility to implement LOD but I still haven_t_t_co_ same for Octrees. I am reusing materials as much as I can or joining them into multi-materials when I can_t_t to reduce drawcalls._lt_br /_gt__lt_br /_gt_\n\tIn the networking part_co_ I am trying to lower as much as I can the quantity of information passing from server to client and vice-versa. Also I am lowering the size of the packages into the bare minimum. Most of the heavy computations are done server side just to lower as much as I can the CPU usage from the clients. My maps are divided into small mini-maps to lower the quantity of players staying at one map at the same time. The architecture is scalable just to be ready if sometime the game will be over-populated ( _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt_ ) ._lt_br /_gt__lt_br /_gt_\n\tNow_co_ my question is pretty simple_co_ is there anything I am missing or are there any further optimizations I should keep in mind ? I am very open to suggestions_co_ I know of the challenge the web poses when developing this kind of game so I really appreciate any thoughts or opinions in the matter._lt_br /_gt__lt_br /_gt_\n\tThank you and Best Regards_co__lt_br /_gt_\n\tRelativeNull._lt_br /_gt__lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-10-09T16:51:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey!\n_lt_/p_gt_\n\n_lt_p_gt_\n\twelcome! Did you have a look at this article_dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/tutorials/optimizing_your_scene_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/tutorials/optimizing_your_scene_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RelativeNull","Date":"2017-10-10T12:41:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHey Deltakosh!_lt_br /_gt__lt_br /_gt_\n\tThanks for your response. Yes I have already had a look at that. I think I have already consumed all of the optimization documentation of Babylon.js _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ . \n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hunts","Date":"2017-10-10T13:37:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI have an optimization idea_co_ i_t_ve not tested it with babylonjs but it works very fine with threejs\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hunts","Date":"2017-10-10T13:54:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tJust tweaking the screen resolution\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcheck this demo_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//jsfiddle.net/nzexh6a6/17/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//jsfiddle.net/nzexh6a6/17/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//jsfiddle.net/nzexh6a6/18/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//jsfiddle.net/nzexh6a6/18/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\twhat_t_s the fps difference?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RelativeNull","Date":"2017-10-10T19:09:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_191491_qt_ data-ipsquote-contentid_eq__qt_33328_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1507643695_qt_ data-ipsquote-userid_eq__qt_25354_qt_ data-ipsquote-username_eq__qt_hunts_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t5 hours ago_co_ hunts said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tJust tweaking the screen resolution\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tcheck this demo_dd_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_https_dd_//jsfiddle.net/nzexh6a6/17/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//jsfiddle.net/nzexh6a6/17/_lt_/a_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_https_dd_//jsfiddle.net/nzexh6a6/18/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//jsfiddle.net/nzexh6a6/18/_lt_/a_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\twhat_t_s the fps difference?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYes I am aware of that_co_ however I don_t_t think someone should rely on resolution to improve the fps. That should really be a last resort as forcing users to use a portion of the screen may not be ideal.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Baker Xiao","Date":"2017-10-10T20:11:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_191531_qt_ data-ipsquote-contentid_eq__qt_33328_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1507662541_qt_ data-ipsquote-userid_eq__qt_28548_qt_ data-ipsquote-username_eq__qt_RelativeNull_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t2 hours ago_co_ RelativeNull said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYes I am aware of that_co_ however I don_t_t think someone should rely on resolution to improve the fps. That should really be a last resort as forcing users to use a portion of the screen may not be ideal.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28548_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/_qt_ rel_eq__qt__qt__gt_@RelativeNull_lt_/a_gt_ hey I_t_m doing the exact same thing here! I_t_ve got a game targeted for mobile and have been really trying to squeeze out the last bit of performance gains. maybe we can exchange ideas and experiences. Are you targeting desktop or mobile?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI think you are already doing a lot of right things that I found useful as well. A few things I can probably add_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. Disable webgl_t_s antialias and use fxaa. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Joining all static meshes into one - I think this depends on how many meshes there are_co_ and how many of them are constantly out of the camera. By merging all the meshes_co_ I think we are basically saving all the overhead of processing individual meshes but this single draw call would end up sending more vertex data to the GPU which at some point would eventually exceed the savings.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. Keep in mind that JS is single threaded and any heavy chunk of work should ideally be split up into smaller chunks or processed during loading/transition screens_co_ otherwise they cause frame drops during your gameplay.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t4. I found that mesh selection can be really heavy. So freezeWorldMatrix whenever possible_co_ and for meshes that are always inside the camera_co_ do set alwaysSelectAsActiveMesh. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t5. Recalculating bounding info can also be quite heavy. We do mesh.getBoundingInfo().isLocked _eq_ true for all the meshes whose bounding info doesn_t_t change. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t6. Make use of the solid particle system for dynamic but repetitive objects. It_t_s better than instanced meshes in most cases. We used it for all sorts of visual effects and it_t_s awesome. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t7. Be aware of that garbage collection can be a major cause of frame drops. See _lt_a href_eq__qt_https_dd_//stackoverflow.com/questions/18364175/best-practices-for-reducing-garbage-collector-activity-in-javascript_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//stackoverflow.com/questions/18364175/best-practices-for-reducing-garbage-collector-activity-in-javascript_lt_/a_gt_ for a list of best practices to reduce GC load as much as possible. I pay special attention to anything that_t_s in the main loop of the game and try to avoid creating any object_co_ e.g. BABYLON.Vector3. I usually create a global object and modify it inside the main loop instead of creating a new one in each update. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t8. Profile the game with chrome developer tools frequently to identify bottlenecks.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat_t_s what I can think of right now. Hope it_t_s useful!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBy the way_co_ how do you do dynamic shadow for dynamic objects? Can you share more about that? Currently we calculate shadows for all static meshes. And for dynamic objects (characters that have animated skeletons for example) we fake a round shadow with a plane... Is there a good way to do cheap dynamic shadows?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RelativeNull","Date":"2017-10-11T14:26:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_191536_qt_ data-ipsquote-contentid_eq__qt_33328_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1507666269_qt_ data-ipsquote-userid_eq__qt_28015_qt_ data-ipsquote-username_eq__qt_Baker Xiao_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t17 hours ago_co_ Baker Xiao said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28548_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/_qt_ rel_eq__qt__qt__gt_@RelativeNull_lt_/a_gt_ hey I_t_m doing the exact same thing here! I_t_ve got a game targeted for mobile and have been really trying to squeeze out the last bit of performance gains. maybe we can exchange ideas and experiences. Are you targeting desktop or mobile?\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tI think you are already doing a lot of right things that I found useful as well. A few things I can probably add_dd_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t1. Disable webgl_t_s antialias and use fxaa. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t2. Joining all static meshes into one - I think this depends on how many meshes there are_co_ and how many of them are constantly out of the camera. By merging all the meshes_co_ I think we are basically saving all the overhead of processing individual meshes but this single draw call would end up sending more vertex data to the GPU which at some point would eventually exceed the savings.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t3. Keep in mind that JS is single threaded and any heavy chunk of work should ideally be split up into smaller chunks or processed during loading/transition screens_co_ otherwise they cause frame drops during your gameplay.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t4. I found that mesh selection can be really heavy. So freezeWorldMatrix whenever possible_co_ and for meshes that are always inside the camera_co_ do set alwaysSelectAsActiveMesh. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t5. Recalculating bounding info can also be quite heavy. We do mesh.getBoundingInfo().isLocked _eq_ true for all the meshes whose bounding info doesn_t_t change. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t6. Make use of the solid particle system for dynamic but repetitive objects. It_t_s better than instanced meshes in most cases. We used it for all sorts of visual effects and it_t_s awesome. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t7. Be aware of that garbage collection can be a major cause of frame drops. See _lt_a href_eq__qt_https_dd_//stackoverflow.com/questions/18364175/best-practices-for-reducing-garbage-collector-activity-in-javascript_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//stackoverflow.com/questions/18364175/best-practices-for-reducing-garbage-collector-activity-in-javascript_lt_/a_gt_ for a list of best practices to reduce GC load as much as possible. I pay special attention to anything that_t_s in the main loop of the game and try to avoid creating any object_co_ e.g. BABYLON.Vector3. I usually create a global object and modify it inside the main loop instead of creating a new one in each update. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t8. Profile the game with chrome developer tools frequently to identify bottlenecks.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tThat_t_s what I can think of right now. Hope it_t_s useful!\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tBy the way_co_ how do you do dynamic shadow for dynamic objects? Can you share more about that? Currently we calculate shadows for all static meshes. And for dynamic objects (characters that have animated skeletons for example) we fake a round shadow with a plane... Is there a good way to do cheap dynamic shadows?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHey_co_ thanks for the amazing answer_co_ this is exactly the kind of feedback I was looking for. I will really take this as a reference when I will be tuning in the performance. I am actually targeting both mobile and desktop. Is your game multiplayer or single player ? I would love to share experiences. What are your results from the extra optimization taken?_lt_br /_gt__lt_br /_gt_\n\t2. Probably we need to understand the compromise here. I currently have some small scenes with few objects so I am not yet into the inflection point. Probably _lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ can provide some info here _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ ?_lt_/span_gt__lt_br /_gt__lt_br /_gt_\n\t6. I am curious what repetitive objects do you substitute with particles? Can you provide an example ?_lt_br /_gt__lt_br /_gt_\n\tHow do you calculate shadows? You definitely want to bake the shadows in the terrain texture for static objects_co_ you can do that in Blender for example. About the dynamic objects_co_ I am currently using the shadow generator with a 256 resolution_co_ however I am aware that it can be hugely optimized further. Shadows even in that resolution triple my draw calls so it is far from ideal. In any case_co_ I have also baked the ambient occlusion map which probably might be enough and compensate for the lack of shadows depending on the game._lt_br /_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-10-11T15:42:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t2. This will always require testing. If you are CPU bound (most of the time in JS) then this could clearly help. You can also consider skipping the frustum clipping test which can be expensive with mesh.alwaysSelectAsActiveMesh _eq_ true\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Baker Xiao","Date":"2017-10-11T18:31:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28548_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/_qt_ rel_eq__qt__qt__gt_@RelativeNull_lt_/a_gt_ Every optimization up there was a significant improvement for us. They made our game from almost unplayable to smooth 60 fps on mobile. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tOur game is async multiplayer_co_ so no realtime networking. But at some point we might add some realtime elements to it with websocket. Can I come to you for advice then? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Btw what_t_s the networking model of your game? \n_lt_/p_gt_\n\n_lt_p_gt_\n\tRegarding the use of SPS_co_ see these gameplays as examples. Each of these effects is made with a single Solid Particle System and performs really well. \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//imgur.com/CHId1jO_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//imgur.com/CHId1jO_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//imgur.com/IMoUlIR_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//imgur.com/IMoUlIR_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//imgur.com/gFJcFtE_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//imgur.com/gFJcFtE_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Rook","Date":"2017-10-11T19:04:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28015-baker-xiao/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28015_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28015-baker-xiao/_qt_ rel_eq__qt__qt__gt_@Baker Xiao_lt_/a_gt_ Can you do some sort of breakdown of this real-world example that you_t_re doing with SPS?  Perhaps just some genericized psuedo-code to learn from?  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is a lot of expertise that can be great for learning how the intricate bits of Babylon work in production situations.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Baker Xiao","Date":"2017-10-11T19:27:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_191641_qt_ data-ipsquote-contentid_eq__qt_33328_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1507748678_qt_ data-ipsquote-userid_eq__qt_28513_qt_ data-ipsquote-username_eq__qt_Rook_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t21 minutes ago_co_ Rook said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28015-baker-xiao/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28015_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28015-baker-xiao/_qt_ rel_eq__qt__qt__gt_@Baker Xiao_lt_/a_gt_ Can you do some sort of breakdown of this real-world example that you_t_re doing with SPS?  Perhaps just some genericized psuedo-code to learn from?  \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tThere is a lot of expertise that can be great for learning how the intricate bits of Babylon work in production situations.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tSure! I_t_d love to share what we did once we_t_re done with our deadline... _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RelativeNull","Date":"2017-10-11T19:38:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_191635_qt_ data-ipsquote-contentid_eq__qt_33328_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1507746692_qt_ data-ipsquote-userid_eq__qt_28015_qt_ data-ipsquote-username_eq__qt_Baker Xiao_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t1 hour ago_co_ Baker Xiao said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28548_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/_qt_ rel_eq__qt__qt__gt_@RelativeNull_lt_/a_gt_ Every optimization up there was a significant improvement for us. They made our game from almost unplayable to smooth 60 fps on mobile. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tOur game is async multiplayer_co_ so no realtime networking. But at some point we might add some realtime elements to it with websocket. Can I come to you for advice then? _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Btw what_t_s the networking model of your game? \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tRegarding the use of SPS_co_ see these gameplays as examples. Each of these effects is made with a single Solid Particle System and performs really well. \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_https_dd_//imgur.com/CHId1jO_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//imgur.com/CHId1jO_lt_/a_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_https_dd_//imgur.com/IMoUlIR_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//imgur.com/IMoUlIR_lt_/a_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_a href_eq__qt_https_dd_//imgur.com/gFJcFtE_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//imgur.com/gFJcFtE_lt_/a_gt_\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYeah I am not minimizing any of the points. Please do_co_ I_t_ll be happy to share with you whatever I know of the topic _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ . I am following an authoritative server model. Btw your game looks amazing! I would love to try it_co_ do you have any demo or a link where people can try or not yet? Are you guys a game studio or just a team of friends _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Baker Xiao","Date":"2017-10-11T21:05:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28548_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28548-relativenull/_qt_ rel_eq__qt__qt__gt_@RelativeNull_lt_/a_gt_ thanks _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ we don_t_t have anything ready to share yet_co_ but hopefully soon!  \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAre you using any libraries/engines for networking or writing your own? One of the reasons we started without realtime networking is that we_t_re a bit afraid of the complexity. Does it require a significant amount of investment? \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RelativeNull","Date":"2017-10-11T21:41:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28015-baker-xiao/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28015_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28015-baker-xiao/_qt_ rel_eq__qt__qt__gt_@Baker Xiao_lt_/a_gt_ Well just let me know when you have anything to share_co_ I would love to try it out._lt_br /_gt__lt_br /_gt_\n\tAs for libraries/engines I am not using any_co_ well except for socket.io but I mean_co_ thats the minimum in my opinion. Uhmm yes it is very complex_co_ I have already had experience in developing it so I was able to complete most of the networking in 1 week but still I am debugging and optimizing._lt_br /_gt__lt_br /_gt_\n\tAbout the investment_co_ I believe you will have to rewrite some of your code to match the multiplayer architecture. I can send you a couple of documentations ( It_t_s not that there are many around anyway _lt_img alt_eq__qt__dd_P_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ title_eq__qt__dd_P_qt_ width_eq__qt_20_qt_ /_gt_ ) that you can use as a starting point._lt_br /_gt__lt_br /_gt_\n\tIn any case_co_ if anytime you are going for it_co_ be sure you have everything figured out else_co_ you may rewrite things again and again.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Baker Xiao","Date":"2017-10-18T05:17:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOne more trick I just found out recently was the use of Spector.js _lt_a href_eq__qt_https_dd_//spector.babylonjs.com/_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//spector.babylonjs.com/_lt_/a_gt_. You can directly see how many draw calls were made and what each of them drew exactly. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tUsing this I found that the way I drew our GUI using pixi.js was causing way too many draw calls. All our images are from a single spritesheet so I thought they would be drawn with a single draw call_co_ but it turns out that having a lot of text objects in the scene graph would break the batch because pixi.js would render things in the same order they were added to the scene. So having (image_co_ text_co_ image_co_ text_co_ image) would be 5 draw calls_co_ but (image_co_ image_co_ image_co_ text_co_ text) would be a single one... Using this technique we now draw the entire GUI with a single draw call and the improvement on mobile devices was pretty huge. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]