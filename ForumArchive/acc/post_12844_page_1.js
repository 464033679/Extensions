[{"Owner":"bruyata","Date":"2015-03-02T15:49:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi everyone!_lt_/p_gt__lt_p_gt_I have in my application a lot of object (around 5 000) moving. I want to leave a trail behind them. I_t_ve tried with the particle engine of babylon.js but it was a fail with 5 fps..._lt_/p_gt__lt_p_gt_I wonder how i can make a trail with good performance with Babylon.js. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//codeflow.org/entries/2012/aug/05/webgl-rendering-of-solid-trails/_qt_ rel_eq__qt_external nofollow_qt__gt_This code_lt_/a_gt_ is pretty clean but i_t_m afraid of the performance of this for so many object. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_How can i do this ? _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thank you guy!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-03-10T07:27:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi bruyata_co_ welcome to the forum_co_ and sorry for the lack of replies.  I think you have the forum stumped._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_5000 mesh.  That_t_s ... substantial.  Even without trails_co_ the scene might be slow.  You COULD put a _qt_trailing_qt_ plane behind each moving mesh_co_ and put images of different trail-lengths on it... as the mesh moved. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But... they would be _lt_u_gt_straight_lt_/u_gt_ sim-trails.  If the mesh made a tight turn_co_ it would be difficult to _qt_curl_qt_ the trail.  (with the trailing plane method I described)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_A good puzzle_co_ bruyata.  *scratch scratch*  Again_co_ welcome to the forum.  Sorry for the lack of ideas/solutions for you._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-03-10T07:52:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In your demo site_co_ I can see your trail is designed with a succession of triangles along a curve._lt_/p_gt__lt_p_gt_We have this 3D object in BJS called a ribbon _dd_ _lt_a href_eq__qt_http_dd_//babylondoc.azurewebsites.net/page.php?p_eq_24847_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylondoc.azurewebsites.net/page.php?p_eq_24847_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So you could so create a ribbon and then apply to it either a texture looking like a trail_co_ either compute a procedural texture on your own (_lt_a href_eq__qt_http_dd_//babylondoc.azurewebsites.net/page.php?p_eq_22601_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//babylondoc.azurewebsites.net/page.php?p_eq_22601_lt_/a_gt_) and apply it to the ribbon_co_ either play directly with particles whereas monitoring performance _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KOEWJ%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KOEWJ#9_lt_/a_gt__lt_/p_gt__lt_p_gt_ (3600 particles moving along a Möbius ribbon_co_ but no BJS ribbon object here)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Do you really need trail animation as there is none in your demo site ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-03-10T08:30:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I was thinking about this a while ago. The problem might be that each particle system gets drawn separately_co_ so if you have 5000 particle emitters then that_t_s 5000 draws_co_ even if they all draw identical particles._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As a solution_co_ you might try using a single particle system and overriding the start function so as to distribute the particles among your objects. In pseudocode_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_sys _eq_ new ParticleSystemsys.capacity _eq_ moreThanFiveThousandsys.startPositionFunction _eq_ function(world_co_ pos) {  emitter _eq_ choose() // randomly or iteratively choose one of the 5K objects  pos _eq_ emitter.position}_lt_/pre_gt__lt_p_gt_That way the whole scene_t_s particles would all get drawn at once_co_ with the system_t_s _qt_capacity_qt_ spread among the 5K emitters._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I haven_t_t tried this yet however._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-03-10T09:16:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Stressing this BJS un-optimized code (initially from iiceman) _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KOEWJ%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KOEWJ#10_lt_/a_gt__lt_/p_gt__lt_p_gt_Here  20 000 particles... between 25 and 30 fps on Chromium and FF on my computer_co_ not that bad for now_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KOEWJ%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KOEWJ#11_lt_/a_gt__lt_/p_gt__lt_p_gt_200 000 particles now !!! chromium down to 15-17 fps_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-03-10T10:44:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_74825_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_12844_qt_ data-ipsquote-username_eq__qt_jerome_qt_ data-cite_eq__qt_jerome_qt_ data-ipsquote-timestamp_eq__qt_1425978979_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KOEWJ%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KOEWJ#11_lt_/a_gt__lt_/p_gt__lt_p_gt_200 000 particles now !!! chromium down to 15-17 fps_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m not really sure how this affects the OP_t_s question_co_ but I optimized it some more for you_dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2KOEWJ%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2KOEWJ#12_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-03-10T12:51:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Waaaooowww ! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_Fenomas_co_ you are a  king !!!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_20 000 particles at 60 fps in my chromium_lt_/p_gt__lt_p_gt_200 000 particles at 30 fps !_lt_/p_gt__lt_p_gt_800 000 particles at 12 fps_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_PR this_co_ right now _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It needs 100 000 particles to get my Chromium hardly reaching 60 fps (57-58 fps)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So bruyata_co_ I guess you can opt for particles if _lt_em_gt_only_lt_/em_gt_ have 5000 elements _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"bruyata","Date":"2015-03-11T13:11:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_div_gt_Wow! impressive! _lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_div_gt_I_t_ve work on my problem on this time. Here is my first draw _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1WM8Z7%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1WM8Z7#2_lt_/a_gt_ (sry for bad code_co_ i must cut a lot of the code of my project to make it work in the babylon playgroundà_lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_div_gt_For this_co_ i_t_m using the sprite manager and use them as particles. For the fadeout effect_co_ i_t_ve just reducing the _qt_alpha_qt_ of the sprite! It_t_s working very good but the rendering is not as good as the particle engine._lt_/div_gt__lt_div_gt_As you can guess_co_ i_t_m making a transportation simulator! And all of my users must have a trail!_lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_div_gt_I_t_ve maked a try with the particle engine but encoutered some problems by summoning a lot of particle sources. Maybe a solution for could be to use one particle engine and dispatch the particle through my moving point. I will see this _eq_)_lt_/div_gt__lt_p_gt_Thank you for_lt_a href_eq__qt_http_dd_//babylondoc.azurewebsites.net/page.php?p_eq_24847_qt_ rel_eq__qt_external nofollow_qt__gt_ this page_lt_/a_gt_ too! i will give a try for this technics as soon as i can! _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-03-11T13:48:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Waoow_lt_/p_gt__lt_p_gt_Very nice playground example !!!_lt_/p_gt__lt_p_gt_I really like your trailing sprites. _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  (45 fps on FF with my fast computer)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Maybe the particle approach could be the good one if you handle them by yourself instead of multiplying emitters._lt_/p_gt__lt_p_gt_Worth a try anyway._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Btw_co_ this guy made a real time traffic visualizer one year ago _dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/6557-babylon-projects/?p_eq_43485_qt__gt_http_dd_//www.html5gamedevs.com/topic/6557-babylon-projects/?p_eq_43485_lt_/a_gt__lt_/p_gt__lt_p_gt_Well_co_ it_t_s Netherlands and not Drôme _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-03-12T06:13:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_74848_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_12844_qt_ data-ipsquote-username_eq__qt_jerome_qt_ data-cite_eq__qt_jerome_qt_ data-ipsquote-timestamp_eq__qt_1425991914_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_PR this_co_ right now _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_laugh.png_qt_ alt_eq__qt__dd_lol_dd__qt__gt__lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Hehe_co_ I didn_t_t touch the engine_co_ just cleaned up the update function. The main thing is I removed the dynamic lookups so chrome didn_t_t bail out of optimization._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_74993_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_12844_qt_ data-ipsquote-username_eq__qt_bruyata_qt_ data-cite_eq__qt_bruyata_qt_ data-ipsquote-timestamp_eq__qt_1426079481_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_I_t_ve maked a try with the particle engine but encoutered some problems by summoning a lot of particle sources. Maybe a solution for could be to use one particle engine and dispatch the particle through my moving point._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That_t_s what I suggest. Pseudocode is in my previous reply._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]