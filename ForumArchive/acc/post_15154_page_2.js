[{"Owner":"jerome","Date":"2015-06-17T14:18:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Well_co_ the name is (for now) SolidParticleSystem._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_A first working attempt with alpha textured quad AND cam facing _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2LFJES_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2LFJES_lt_/a_gt__lt_/p_gt__lt_p_gt_Scene is at line 150._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In this example_co_ 5000 quads_co_ sized 6_co_ are emitted. Runs at 60 fps in my Chrome._lt_/p_gt__lt_p_gt_I voluntary moved the mesh at +30 on the right to test cam facing._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I noticed a strange behavior _dd_ if the mesh origin is outside the screen_co_ no more particles are drawn !?!_lt_/p_gt__lt_p_gt_I don_t_t get why ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If a box is half outside the screen_co_ it is yet still drawn._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Any ideas ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-17T14:34:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The bounding box is very small and centered around the emitter. You may have to update the bounding box once in a while..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-17T14:35:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_ok_lt_/p_gt__lt_p_gt_didn_t_t know the bounding box was used for rendering..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_what_t_s the method to update it ?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-17T14:41:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_refreshBoundingInfo()_sm__lt_/pre_gt__lt_p_gt_I tried adding it to your animate() function_co_ but it seriously hurts performance_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2LFJES%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2LFJES#1_lt_/a_gt__lt_/p_gt__lt_p_gt_I guess it_t_s another problem to solve..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_A mesh bounding box is used to do culling_co_ i.e. not rendering things outside of the view._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-17T14:46:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_well_co_ it_t_s still 60 fps locally in my Chrome_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_else is it a way to set/fix the bounding box size ?_lt_/p_gt__lt_p_gt_maybe would it be an option to fix it once when creating the mesh ... don_t_t know_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-17T14:51:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_another way could be not to call it each frame but only_co_ for example_co_ on particle recycle call ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_[edit] _dd_ just tested _eq_&gt_sm_ quicker on each frame than on recycle only... very strange (60 fps / 45 fps)_lt_/p_gt__lt_p_gt_[edit 2] _dd_ obvious !! recycle is called per particle_co_ whereas global mesh update is called once after every vertex is updated !_lt_/p_gt__lt_p_gt_it was a bad idea so ..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"qqdarren","Date":"2015-06-17T17:08:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_@jerome Can you explain the motivation for this? I wondered why you_t_ve been trying to get the _qt_solid particles_qt_ be camera facing. I get that with  particles they face the camera as they are actually 2D overlays_co_ but I thought the point of your experiments was to get the 3D behaviour of real meshes. (And I_t_m guessing_co_ that by requiring they all look the same_co_ that you are able to get more on screen without hurting performance_co_ compared to creating normal meshes?)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-17T18:32:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_This SolidParticleSystem is a big updatable mesh._lt_/p_gt__lt_p_gt_It is subdivised in what we now call solid particles which are_co_ well_co_ some animatable subparts of this mesh._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As they are parts of a mesh_co_ they all have the properties of a mesh _dd_ they are correctly z-sorted_co_ have good alpha-blending_co_ can reflect light_co_ etc_co_ etc._lt_/p_gt__lt_p_gt_They have in this way the 3D behavior of real meshes. They are hidden by opaque meshes between them and the camera_co_ they are visible through transparent meshes and they have a real z coordinate._lt_/p_gt__lt_p_gt_You could make them collide if you want. But you would have to compute these collisions by yourself._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In the very case of plane subparts (triangles or quads)_co_ if we don_t_t implement a camera facing system_co_ you just can_t_t see the subparts if you rotate the cam_co_ say_co_ 90° left (because the cam is then in the same plane than all the subparts). This camera facing system is needed only for plane subparts of course._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_For real solid (3D) subparts_co_ it won_t_t be necessary._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_These subparts will all have the same geometry (although I guess we could have different ones_co_ but the implementation would then become quite complex_co_ so for now_co_ let_t_s consider they have all the same shape) but will be able to have different colors and _lt_em_gt_&lt_sm_tadataddddaaa&gt_sm__lt_/em_gt_ different textures (if I can achieve it). Actually this would be a kind of texture atlas as for current sprites. _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-17T19:16:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_stress test at home (2007 old laptop computer_co_ pushcart GPU... remember) _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2LFJES%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2LFJES#2_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Chromium _dd_ 5000 particles_co_ size 4_co_ light+reflection_co_ alpha_co_ texture_co_ all rotated facing the cam _eq_&gt_sm_ 60 fps _lt_/p_gt__lt_p_gt_iiiihhaaaa_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-18T04:41:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Awesome stuff!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Regarding the bounding box_co_ once a particle system has gotten going_co_ the _qt_cloud_qt_ of particles will occupy a reasonably static area. So the ideal thing would be for the bounding box to equal that area_co_ and never need updating. That is_co_ for example if a particle system has particles that live for 100 frames_co_ and each particle gets an initial x velocity in the range [-1 .. 1]_co_ then the bounding volume_t_s x-axis would need to cover [-100..100]_co_ right? At any given time (particularly right after creation) the system_t_s actual bounds might be smaller_co_ but that can probably be seen as an edge case._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_With that said_co_ it_t_s not quite as easy to calculate bounds analytically if gravity is involved_co_ and if there_t_s a custom position function then obviously the system can_t_t predict its own bounds. So for simplicity it might make the most sense to either (1) have the user specify a bounding volume when creating the system_co_ or (2) recalculate bounds every N frames._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note_dd_ it may be possible for the System to recalculate its bounding volume faster than BJS_t_s built-in method_co_ by looking through its position arrays. In practice the bounding volume will only grow_co_ never get smaller_co_  so it could be sampled every N frames for a while_co_ and once the bounding volume stops increasing in size the System could stop recalculating. I will take a shot at this tonight (unless someone else beats me to it)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-18T06:23:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hey guys_co_ I have two questions for you_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_1/ Will users be able to use this system not only for emitting particle_co_ but also for simply displaying a large amount of similar_co_ simple meshes without cluttering the scene with thousands of objects? Because I think limiting this to a particle-emitting use would be a shame. For example this could be used for some sort of voxel rendering._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_2/ Would it be possible to set the angle of each particle individually instead of having them all face the camera_co_ for example for small rocks that would be sent flying and spinning after an explosion?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-18T08:02:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_@jahow_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_# 1 _dd_ yes_co_ I think it won_t_t be limited to emit things._lt_/p_gt__lt_p_gt_I won_t_t implement any real emitter_co_ recycler_co_ but just provide two default overwritable methods (updateParticle_co_ recyle)._lt_/p_gt__lt_p_gt_In the same way_co_ I don_t_t want to impose a particle trajectory system. Each user will code its behavior._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In other terms_co_ I don_t_t really want this system to embed many real particle system pre-defined mechanisms._lt_/p_gt__lt_p_gt_A minima just a way to position particles._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_# 2 _dd_ yes_co_ too._lt_/p_gt__lt_p_gt_For now_co_ I just focused on a way to orientate at once (so high optimization) all the plane particles._lt_/p_gt__lt_p_gt_But I think I will add a per particle orientation option._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The work is in progress so many things could be added yet _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I think this system would answer to other needs than current particle systems _dd__lt_/p_gt__lt_p_gt_better accuracy in positioning and compositing in space but lower capacity in particle number (hundreds or thousands max instead of hundreds of thousands for the current system)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-18T08:07:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_@fenomas _dd_ about bounding box pre-computation._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This is exactly what I intend to do _dd_ set a initial bounding box dimension the user will compute by his own (the system can_t_t predict what trajectory method the user will use)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I don_t_t know if the _qt_recalculate N frames_qt_ way is the right one_co_ because the particles could then disappear from screen suddenly if_co_ say_co_ a movement camera hiding the system occurs between two recalculation._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-18T08:12:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Or let the user define a rate of bounding info recomputation? Which could be 0 if the user knows his particles won_t_t actually move but simply stick around _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-18T08:33:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_good idea !_lt_/p_gt__lt_p_gt_  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-18T19:50:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_just for fun_co_ added alpha to the texture with alpha _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2LFJES%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2LFJES#3_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-18T19:57:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Like we can see those particles?  Man_co_ they are cookin_t_! _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Oh_co_ that_t_s right_co_ you_t_re driving an Apricot.  nod.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You are speaking of the boxes_co_ I bet.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  errr...  something. _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"fenomas","Date":"2015-06-19T01:16:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_86394_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_15154_qt_ data-ipsquote-username_eq__qt_jahow_qt_ data-cite_eq__qt_jahow_qt_ data-ipsquote-timestamp_eq__qt_1434608619_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_1/ Will users be able to use this system not only for emitting particle_co_ but also for simply displaying a large amount of similar_co_ simple meshes without cluttering the scene with thousands of objects? Because I think limiting this to a particle-emitting use would be a shame. For example this could be used for some sort of voxel rendering._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In practice I think this may not be as useful as it sounds. The benefit of treating particles this way is that BJS considers them a single mesh for purposes like view culling and alpha sorting. So using it for a bunch of regular objects will have drawbacks unless those objects are clustered closely together._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-06-19T06:02:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_It_t_s true_co_ missing alpha sorting and culling can indeed be a problem. For alpha sorting_co_ using alpha-tested texture is a good solution (just like in Jerome_t_s first demos here) since particle objects are usually small_co_ and alpha test does not require sorting. As for culling_co_ a great thing would be to include in the SolidParticle code a way to allocate different particles to different submeshes_co_ for example by setting a _qt_submesh_index_qt_ parameter on each one. This way_co_ submesh culling would solve this issue!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_What I_t_m thinking about is for example a way to render hundreds of trees &amp_sm_ other simple props in a city builder game. Or even buildings that would be rendered as thousands of sprites far in the background. This system would be perfect for that._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-19T13:15:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Back to code this afternoon _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So far the plane particle ever-facing process worked only for an unrotated mesh as you can see here _dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2LFJES%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2LFJES#4_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_This mesh slowly rotates around Y axis._lt_/p_gt__lt_p_gt_When the rotated mesh is parallel to the camera axis_co_ the particle become invisible._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It_t_s fixed now _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2JMK7G_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2JMK7G_lt_/a_gt__lt_/p_gt__lt_p_gt_This mesh rotates around x_co_y and z axis and the particle keep facing the cam._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Scene from line 150_co_ as usual._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Under the hood_co_ I kept the particle facing computations in the local system because they are really fast (only additions and multiplications_co_ no matrix) and I set a fake camera position _dd_ the real camera position inversely rotated by the mesh rotation value _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_So this demo still runs at 60 fps here_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_[EDIT] this demo has live bounding box recomputation each frame_co_ you can disable it by commenting the line 122_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-19T14:20:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I know you all want all these wonderful features as real 3D particles_co_ each particle rotation_co_ submesh indexing_co_ manual bounding box setting_co_ multi-textures_co_ etc right now._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You_t_ll have to wait ! _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Step after step ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2JMK7G%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2JMK7G#2_lt_/a_gt__lt_/p_gt__lt_p_gt_here is for now the per-particle-scaling feature !!!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_All particles are here randomly re-scaled on each recycle call._lt_/p_gt__lt_p_gt_As each particle object is accessible within the _lt_em_gt_animate()_lt_/em_gt_ method_co_ you could have changed each particle size at each frame also._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_scene from line 160 now._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-21T15:25:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Nice_co_ J-willickers! _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Jahow... with different layers of _qt_particle trees_qt_... that might require a separate particleSystem for each layer/distance._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Ok_co_ back to Jerome... why do you have these things always facing the camera (billboarded)?  Let_t_s get these things tumbling_co_ huh?  Our default particles spin around z.  Let_t_s get some spin around x and y_co_ too_co_ Jman!  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But really_co_ we want flying ribbons_co_ don_t_t we?  We want each particle to be a random basic shape_co_ with unknown number of vertices_co_ and the particle updater first queries the particle to find out how many vertices it has_co_ and then it does the rotational update on THAT many vertices.  So_co_ in a way_co_ each particle carries with it... what shape it is (not really_co_ but it carries how many vertices/indices it has).  Then the updater knows how far to traverse the vertexBuffer.... to get-to the next shape._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_First particle_co_ a torus knot.  Second_co_ a box.  Then a Lines mesh_co_ and then a ground_co_ then an imported model_co_ then a mesh with a displaceMap.  That should slow that particle machine of yours.... to a crawl.  heh.  _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-21T20:14:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_hey Wingy_lt_/p_gt__lt_p_gt_the billboard mode like is a for plane particles only (else tey disappear when the cam is in the same plane than them)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_a shape model per particle ? mmmhh.. why not ? more complex_co_ but I think it is feasible ..._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_step after step _lt_/p_gt__lt_p_gt_- similar plane particles _dd_ need to adjust to any shape now_lt_/p_gt__lt_p_gt_- per particle rotation (3 axis)_lt_/p_gt__lt_p_gt_- similar 3D particles _lt_/p_gt__lt_p_gt_- per particle texture or color_lt_/p_gt__lt_p_gt_- ..._lt_/p_gt__lt_p_gt_- per particle everything _dd_ shape_co_ rotation_co_ size_co_ color_co_ texture_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_outch_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-06-22T15:01:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi guys_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Here are some new features _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US_lt_/a_gt__lt_/p_gt__lt_p_gt_each plane quad has its own velocity_co_ scaling_co_ and rotation_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Line 58_co_ changing the model index _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US%231_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US#1_lt_/a_gt__lt_/p_gt__lt_p_gt_I use now another build-in model_co_ a triangle_co_ instead of a quad_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Line 57 now _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#T80US%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#T80US#2_lt_/a_gt__lt_/p_gt__lt_p_gt_As you can see_co_ the model is per particle also _dd_ there are quads AND triangles in the same system  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  ... and a little bug_co_ I can_t_t find out for now making sometimes a long stretch particle (probably in the resetParticle function [EDIT] _dd_ I think it_t_s fixed now_co_ but I didn_t_t push the fix in the PG)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_scene from the line 250_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Many un-needed properties have been deleted (gravity_co_ vel ...) because they were too specific to a given physic model and I want this SPS (solid particle system) to be agnostic in terms of physics_co_ behavior_co_ etc._lt_/p_gt__lt_p_gt_So now_co_ you just create the system_co_ then you init it (instead of _qt_start_qt_ it) with _lt_em_gt_initParticles_lt_/em_gt__co_ then you set its particles with _lt_em_gt_setParticles_lt_/em_gt_ (instead of animate_co_ because it_t_s mandatory to animate things_co_ you could just set them once and let them as they are)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_em_gt_new_lt_/em_gt_ _eq_ create the mesh_co_ it is to say create all the particles with the given model shapes... for now_co_  the models and model choices aren_t_t parameters. Should come soon_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_all the function with names in the plural expect to iterate on each particle_lt_/p_gt__lt_p_gt_all the function with names in the singular are called per particle_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_em_gt_initParticles_lt_/em_gt_ _dd_ can be over-written ... set initial values like velocities_co_ positions_co_ rotations_co_ etc_lt_/p_gt__lt_p_gt__lt_em_gt_setParticles_lt_/em_gt_(billboard _lt_em_gt_boolean_lt_/em_gt_) _dd_ set all the particles in space according to their current properties and to the billboard boolean value (ever facing the camera for plane particles or not)_lt_/p_gt__lt_p_gt_This function calls the user over-writable _lt_em_gt_updateParticle(particle)_lt_/em_gt_ for each particle. In this custom function_co_ you can define your particle behavior and even call the _lt_em_gt_recycleParticle(particle)_lt_/em_gt_ function_co_ which is also over-writable._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As you can see_co_ the vertex stuff is hidden in the system._lt_/p_gt__lt_p_gt_The user needs only to deal with particles_co_ positions (particle positions)_co_ velocities_co_ rotations_co_ etc_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-06-22T15:17:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_coooooooool !! Your _qt_bug_qt_ is almost surely an off-by-one situation. The first vertex of the first particle_co_ or the last vertex of the last particle... isn_t_t getting a position change._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_(Like I_t_d know)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But that_t_s what it looks like to me.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  Fun demo_co_ though.  Particles are fun_co_ period.  Ready to put a smoke-generator particleSystem on each particle?  Faery dust sparkly particle trails (fireworks)?  Your emitter would become an emitter emitter.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  Let_t_s hope it doesn_t_t emit emitter emitters.  Rabbit farm!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It all started on the planet of Orthogona...  64 particleSystems resided on Orthogona_co_ but only 4 emitters_co_ on the entire planet.  The particleSystem that was the closest to exploding from too many particles... gets an emitter immediately_co_ long enough to belch out some particles. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You_t_ve seen the particle explosion upon window focus_co_ right Jerome?  One of your demos does an explosion and then settles down to normal spraying.  Windows users can sometimes alt-tab into a new window for awhile_co_ and then come back to a BJS particleSystem... and it will _qt_puff_qt_.  Its pretty fun.  Maybe only on slow machines. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It_t_s as if you plugged its spray nozzle when you left the window_co_ and unplugged it when you re-focused.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_But_co_ no.  That_t_s not where Jerome is headed.  He_t_s headed for... um... getting some thickness to his particles... extruding them.  Yep. I bet._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]