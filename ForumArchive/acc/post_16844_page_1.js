[{"Owner":"Tom Krueger","Date":"2015-08-30T16:47:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I have an asteroid field dropping from top to bottom of screen.  I decided to use oimo physics engine so that as asteroids collide they bounce and rotate.  However_co_ I want them to say on the same z position.  Currently I have a star field image as the background and if the z position gets greater than zero the asteroids go behind the starfield image._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I have tried to use updatePhysicsBodyPosition() so that I could set the z position on each frame but this method seems to update x and y as well which is not what I want.  _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Question_dd__lt_/p_gt__lt_p_gt_How do I keep the z position constant when using oimo physics after two items collide?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_(I could be going about this completely wrong.  Any thoughts on better design is appreciated as well.)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks_co__lt_/p_gt__lt_p_gt_Tom_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-09-01T13:21:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi Tom!_lt_/p_gt__lt_p_gt_And welcome to the forum!_lt_/p_gt__lt_p_gt_So_co_ that_t_s quite a task!_lt_/p_gt__lt_p_gt_Let_t_s start from a playground and see how we continue! What I have is this - _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#RKI78_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#RKI78_lt_/a_gt_ - use a wonderful javascript hack to store the original Z and update it and the body position only when the z is not the same. this keeps the ball very much _qt_sorted_qt__co_ is this what you wanted to achieve?  _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-09-01T17:23:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi Tom and Raanan!  Hey R_co_ your z-freeze has frozen the x and y_co_ too_co_ right?  The spheres should keep falling_co_ and keep spreading-out along +/- X_co_ I would guess._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I think line 59 needs to be something like b.updatePhysicsBodyPosition(z)_sm_ and thus not affect X and Y.  I doubt there is a command like that._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Line 34 is a cool line_co_ too.  That looks like a _qt_Darn_co_ I need to answer the door_qt_ code-line.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Tom_co_ you could always put your balls in a glass box.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ alt_eq__qt__dd_o_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_   _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1MJ09V%232_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1MJ09V#2_lt_/a_gt_  (I kept a slight amount of visibility on front and back _qt_glass_qt_).  The side borders are fully visible_co_ as you can tell.   Ant farm!   heh.  (Place the camera straight-on and somewhat close-to the front panel... for the Asteroids effect.)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Notice that the borders are made from scaled boxes and NO ROTATION is used to get them into proper orientation.  This is because when you setPhysicsState on rotated mesh_co_ it removes the Euler rotation.  (it de-rotates it).  There are ways around it_co_ but it_t_s just as easy to start with 1-unit boxes and scale them in any directions you chose.  Then your borders are always physics-ready._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There is NO friction on the glass front/back panels_co_ and there is very little _qt_free space_qt_ for the spheres to move on the z axis.  Anyway_co_ it_t_s something else to play-with._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m not sure why there is a specular glow on the glass panels.  gmat has its specularColor _eq_ black.  *scratch scratch*  I seem to have forgotten how to create BJS scenes._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Tom Krueger","Date":"2015-09-01T21:50:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thank you _lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_Raanan and Wignut for your responses._lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_span style_eq__qt_color_dd_rgb(40_co_40_co_40)_sm_font-family_dd_helvetica_co_ arial_co_ sans-serif_sm__qt__gt_Raanan_co__lt_/span_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_span_gt_That was about what I thought would work.  When I had done it in my app using _lt_/span_gt_updatePhysicsBodyPosition the objects didn_t_t drop.  However_co_ in your sample they are dropping. However_co_ in your sample they drop and get stuck in a stack.  I still want them to collide and bounce left and right (- x _co_ + x).  I played around a bit with your sample but couldn_t_t get them to do that._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Wingnut_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You understand the problem.  Thanks for rewriting the question a bit.  I played with your example and it seems that it will work to put a boundary box around my asteroid field.  My asteroids will be different sizes so the boundary box will need to be deeper than the smallest asteroid to fit the biggest one.  My only concern is that it will be noticeable the asteroids are bouncing forward and backward.  I_t_ll have to try it out to find out._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If either or you or anyone else have any other ideas_co_ I certainly would appreciate them_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ll report back if the boundary box works._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Thanks_co__lt_/p_gt__lt_p_gt_Tom_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-09-02T23:23:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi again_co_ Tom!  I think you will not like the result of widening the gap between the front/back glass panels.  The smaller spheres will sometimes enter a condition where they bounce back and forth along z... between the two glass planes.  It looks ridiculous.  _dd_/_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There_t_s another way.  Both of our physics engine plugins... Cannon and Oimo... have the applyImpulse() commands.  I believe... that you can stop the energy of a moving physics object... by simply setPhysicsState AGAIN.  So_co_ what you are looking-at... is creating some off-screen asteroid (sphere) launchers... that launch spheres into the active screen area... but with absolutely NO Z thrust.  The spheres always start at z_eq_0 and you never thrust (applyImpulse) any z-force.  Only apply x and y force... to send it from off-screen to in-view.  Since you are using sphere imposters_co_ there should be no Z-force implied on any collision... in theory.  The collisions are happening z-symmetrically... both/all objects at z _eq_ 0.  There should be no z-deflection upon collision._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The difficult part might be knowing WHEN one of the asteroids has drifted off-screen.  That is when you need to stop its energy_co_ then somehow move the asteroid to one of your off-screen launch points_co_ and then re-launch it with an applyImpulse thrusting.  (It might be best to .dispose the mesh and then simply launch a new asteroid from one of your off-screen launch points.)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There would be no borders_co_ this way.  You would need SOME in-render-loop monitoring... checking for when asteroids drift off-screen.  This is probably not easy because physics-active mesh might not have any usable .position numbers.  Only the imposter has any position...  the mesh is a slave to it... I THINK.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There is also one other problem.  None of your asteroids will spin around their x or y axes.  Because of the way you will be launching (applying impulse)  and because of the perfectly aligned z for all collisions... there will only be spin around z.  BUT... there is a solve.  When you launch a sphere from an off-screen position... toward on-screen... you apply THREE impulses.  One impulse sends the sphere moving toward on-screen_co_ and two impulses... happen on two opposing edges of the sphere at the same time... causing a spin.  Because you fire ONE sphere-edge impulse _lt_strong_gt_+z_lt_/strong_gt__co_ and the other opposite sphere-edge impulse _lt_strong_gt_-z_lt_/strong_gt__co_ you induced no z-energy (no position energy).  Maybe this diagram for another project... will help you imagine it._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//urbanproductions.com/wingy/babylon/misc/info01.jpg_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//urbanproductions.com/wingy/babylon/misc/info01.jpg_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ApplyImpulse() has two parameters (or more).  One is the force direction_co_ and the other is WHERE on the mesh/imposter... to apply that force.  Notice the offsets shown in that diagram.  By moving the contact points (the WHERE)... to a location that is offset from center (in opposite directions)... and firing both impulses (in opposing force directions)... you can induce a zero-translation spin.  You_t_ll spin the object_co_ and it won_t_t drift location whatsoever.  Cool_co_ huh?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BUT... keep in mind that you MUST _lt_u_gt_turn off_lt_/u_gt_ all friction on these randomly-spinning spheres_co_ or else they will possibly induce z-energy upon themselves and upon other spheres... upon collision.  Reworded_co_ if you spin a friction-active sphere around Y... and then it collides with another sphere... it will likely send that other sphere moving in a z-drift... something you don_t_t want to happen.  By completely removing the friction from your balls (something we ALL seek)... (ahem hehe)... um... none of the spin energy will be transformed into z-translation... during a collision._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Wow_co_ huh?  Friction off_co_ build your asteroid launcher (impulse junk into screen area)... and build your spinner (dual impulses on opposite edges of the sphere_co_ in opposing directions... at the same time.  Fun_co_ eh?! _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The Krueger 3-Impulse Asteroid Launcher... available in stores soon!   _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  Be well.  Keep us posted if you want.  thx._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"RaananW","Date":"2015-09-03T08:20:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_94931_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_16844_qt_ data-ipsquote-username_eq__qt_Tom Krueger_qt_ data-cite_eq__qt_Tom Krueger_qt_ data-ipsquote-timestamp_eq__qt_1441144224_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_That was about what I thought would work.  When I had done it in my app using updatePhysicsBodyPosition the objects didn_t_t drop.  However_co_ in your sample they are dropping. However_co_ in your sample they drop and get stuck in a stack.  I still want them to collide and bounce left and right (- x _co_ + x).  I played around a bit with your sample but couldn_t_t get them to do that._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_Hi Tom_co_ Hi Wingnut_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_if you leave the playground I created and wait for a minute or five (yes_co_ i know... I hate waiting!) you will notice it does eventually changes. All balls will be aligned on the floor. Notice the _qt_eventually_qt_..._lt_/p_gt__lt_p_gt_The problem with changing the body position is that the physics engine needs to recalculate the entire path and collisions of all objects once it triggered. This is a rather expensive operation which has a few serious downsides_co_ one of them being the fact that it completely discards of current movement and impulses and has to recalculate them. So no more bouncing_co_ only gravity._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_IMHO - it would be very hard getting this to work with the physics engine. It would be simpler to implement it on your own_co_ not using the physics engine..._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-09-03T14:07:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again guys! - _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1FR0VN%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1FR0VN#4_lt_/a_gt_  It_t_s a little demo where you can play with applyImpulse.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a sphere launcher in line 98.  There is no spin induced by me_co_ on the green _qt_mallet_qt_ sphere.  And there is no friction set on it OR on the ground_co_ so I don_t_t know why the mallet is _qt_x - rolling_qt_.   I would have thought that friction _eq_ 0 on the green wireframe mallet... would prevent rolling.  Oh well.  I_t_ll figure that out some other day.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll that crap aside... look at lines 96 and 97.  Activate those two lines_co_ and de-activate line 98_co_ then press run.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThat shows the no-translation spin that I spoke-of... using dual impulsers along the edges of the sphere... thrusting in opposite directions.  The mallet is 5 units wide_co_ but I only offset the contact points -1 and +1 x.  (A bit left and a bit right... enough to get spin).  If you offset (add)  +2 and -2 at the end of lines 96 and 97_co_ then the sphere will spin much faster.  It has something to do with leveraging and fulcrums and all that goofy stuff.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBUT_co_ now activate all three code lines... 96-98.  Now we are simulating your 3-impulse asteroid launcher... inducing a no-translation spin_co_ AND using a basic -z thrust at mallet.position contact point (dead center)... to launch it out into the scene.  _lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1FR0VN%235_qt_ rel_eq__qt_external nofollow_qt__gt_See what happens_lt_/a_gt_?  The red sphere is STILL deflecting to the left when the mallet hits it.  Why?  I have no idea.  We have NO friction set on either item.  hmm.  I even re-arranged the three lines... trying to impulse the position first_co_ and THEN fire the spin-twins.  No change... still getting left-deflection.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAgain_co_ de-activate the spin-twins and leave the position-pulser active (fire the mallet without spin).  No red sphere deflecting seen.  It is the spin... that is causing the deflection. This is the rotation energy that can be transferred to position energy... that I was speaking-of in my previous post.  Put the wrong launch-spin on your launched asteroids... and they will deflect z-ward after collisions.  (an undesired thing)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt_t_s not right.  We have zero friction.  *scratch scratch*  Some kind of bug_co_ probably in Wingnut_t_s brain.   _lt_img alt_eq__qt__dd_)_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ data-emoticon_eq__qt__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tThoughts_co_ anyone?  Party on! \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-09-13T03:04:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Tom and others.  A little update on this thread.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//playground.babylonjs.com/#1FR0VN%236_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//playground.babylonjs.com/#1FR0VN#6_lt_/a_gt_  Here we have the green mallet spinning_co_ but no deflection of the red sphere due to friction.  Yay!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWanna know why?  _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/10353-collision-check-with-oimo/_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/10353-collision-check-with-oimo/_lt_/a_gt_  A little note from Temechon...\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_div_gt_\n\t\t\t_lt_p_gt_\n\t\t\t\tDon_t_t set restitution (or friction) to 0_co_ they won_t_t be taken into account (Oimo issue here)\n\t\t\t_lt_/p_gt_\n\t\t_lt_/div_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\thmmm.  Thanks Temechon! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ I set the friction values for lines 27 and 33 to 0.0001_co_ and suddenly the green mallet_t_s spin (caused by lines 96-97) does not deflect the red sphere to the side.  Mission accomplished.  Tom can now use his off-screen_co_ 3-impulse spinning asteroid launcher... with asteroid spin on ANY axes at any speeds_co_ and the asteroid won_t_t transfer that spin-energy into unwanted z-motion on collided asteroids.  Like billiard balls_co_ we have made them too low-friction... to transfer any cue ball _qt_English_qt_ onto any impacted balls.  _lt_img alt_eq__qt__dd_o_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_ohmy.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/ohmy@2x.png 2x_qt_ width_eq__qt_20_qt_ data-emoticon_eq__qt__qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tSo_co_ as Temechon states_co_ don_t_t set your Oimo stuff to zero.  _lt_img alt_eq__qt__dd_)_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ data-emoticon_eq__qt__qt_ /_gt_  Set it to 0.0001 to turn-off those setPhysicsState values.   Interesting.  (almost)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]