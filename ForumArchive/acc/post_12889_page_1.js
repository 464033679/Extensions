[{"Owner":"jahow","Date":"2015-03-03T22:43:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_m currently doing heavy optimization work_co_ and having a great time (kidding). Bringing the draw call count down etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_As such_co_ merging meshes for static geometry is an absolute necessity. There is an _t_old_t_ tutorial about that _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/page.php?p_eq_22451_qt_ rel_eq__qt_external nofollow_qt__gt_here_lt_/a_gt__co_ but I figured I_t_d try the modern way which is using Mesh.MergeMeshes. It didn_t_t give me immediately expected behaviour_dd__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_1/ I realized I was trying to merge cloned meshes_co_ and BJS made the browser freeze since it basically tried to merge an array with itself. I fixed the problem by using _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_makeGeometryUnique_lt_/span_gt_ on the meshes before merging_co_ but that is kind of counter-intuitive (also there_t_s a small bug on _lt_span style_eq__qt_font-family_dd__t_courier new_t__co_ courier_co_ monospace_sm__qt__gt_Geometry.clone()_lt_/span_gt_ so it won_t_t work that way in the playground either_co_ but I_t_ve fixed this one locally)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_2/ I_t_ve also found I needed to force a new computation of the meshes_t_ world matrices before doing the merging. Again_co_ this is kind of counter-intuitive and may lead to a lot of head banging on wall (it did with me)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_These issues are illustrated in this playground_dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FQOTS_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FQOTS_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Is this behaviour intentional/acceptable? If the answer is no_co_ I_t_ll gladly work on a PR to fix it. Otherwise_co_ I guess this could all be explained in the documentation (which needs updating anyway)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-04T00:01:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I suggest you checking what I_t_m doing there_dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/Babylon/Tools/babylon.sceneOptimizer.ts#L115_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/Babylon/Tools/babylon.sceneOptimizer.ts#L115_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_More doc on SceneOptimizer_dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//doc.babylonjs.com/page.php?p_eq_22581_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/page.php?p_eq_22581_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jahow","Date":"2015-03-04T08:45:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thanks_co_ I had not looked into that but it_t_s interesting. I also realized I needed to do a forced matrix computation because I was merging the meshes before any render happened._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Still_co_ wouldn_t_t that be easier to automatically recompute the meshes_t_ world matrices before merging them?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Also_co_ the MergeMeshOptimization still fails if we_t_re using cloned meshes... _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_sad.png_qt_ alt_eq__qt__dd_(_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/sad@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-03-04T22:22:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Yes and I saw your PR (i_t_ll validate it quickly)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]