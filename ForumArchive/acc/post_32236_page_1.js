[{"Owner":"Wartorle","Date":"2017-08-08T15:59:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Everyone_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m trying to do something like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLoad a .babylon scene using SceneLoader.Load.  This scene has a skinned mesh and an idle animation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThen_co_ I want to load a second .babylon file using SceneLoader.ImportMesh.  This file has multiple LODs so I only want one of them (hence the ImportMesh) and has no animation.  The mesh is also skinned using the same number of bones as the first.  When I load this_co_ I replace the Skeleton on the imported mesh with the one from the main scene so that it animates.  However_co_ here_t_s the rub.  The first frame of the idle animation has the arms down by the side of the character but the second skin has the arms in the typical T-Pose.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen it_t_s animating_co_ the arms are adjusted but relative to the T-Pose and not the first frame of the anim.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI *think* this is because something isn_t_t correctly getting configured for the skin bind pose.  I_t_ve tried all sorts of things to correct the problem so if anyone has any ideas or insight_co_ it would be most welcome!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRoc\n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/SS1.png.5f46f6836d8cbb849b1ded010246c55b.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_14325_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/SS1.png.5f46f6836d8cbb849b1ded010246c55b.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_SS1.png_qt__gt__lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/SS2.png.fd1940ebdccc3b321ce7f6fe19c0db7a.png_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_14326_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/SS2.png.fd1940ebdccc3b321ce7f6fe19c0db7a.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_SS2.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-08-08T17:01:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHello to make this works you may need to flag your skeleton with skeleton.needInitialSkinMatrix _eq_ true in order to make it independent\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wartorle","Date":"2017-08-09T11:34:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Deltakosh_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for the response.  As far as I can tell_co_ this made no difference and it has behaved as it did before.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_ve zipped up an archive of minimal assets that demonstrates the problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTotally understand if you_t_ve not got any time to look but_co_ if you have_co_ that would be most awesome.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRoc\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_14342_qt__gt_BabylonJS_Test.zip_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-08-09T21:25:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tDo you mind saving these assets to github or onedrive and create a repro in the PG? This will help me a lot to fix the problem\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wartorle","Date":"2017-08-10T09:38:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere you go_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#QM3AAE_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#QM3AAE_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMany thanks for looking into this.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRoc\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-08-10T18:52:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello based on the rest pose_co_ it works as expected_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/Capture.JPG.06946bc94a36ab594338e0c5610fa4bb.JPG_qt_ data-fileid_eq__qt_14393_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_14393_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_08/Capture.thumb.JPG.43077b837ee59af3248376dd7cebbda2.JPG_qt_ alt_eq__qt_Capture.thumb.JPG.43077b837ee59af3248376dd7cebbda2.JPG_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe skeleton is animating from rest pose so what you get is kinda expected\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wartorle","Date":"2017-08-11T00:19:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ well_co_ yes_co_ that_t_s kinda what I was referring to with the initial post.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ what I_t_d _lt_em_gt_like _lt_/em_gt_to be able to do is to take the Pose transforms from the animation and apply them to the Skinned Mesh (replacing the Pose transforms in that) so that they animate in tune with what the animation intended.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs that possible_co_ somehow?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRoc\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-08-11T01:06:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt should be possible to some extends.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe initial pose is defined by the pose matrix that you can update to whatever you want with mesh.updatePoseMatrix().\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#QM3AAE%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#QM3AAE#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tBut I_t_m not sure this will be enough. I clearly recommend to create both meshes with same initial posture.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2017-08-11T01:17:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/28049-wartorle/?do_eq_hovercard_qt_ data-mentionid_eq__qt_28049_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/28049-wartorle/_qt_ rel_eq__qt__qt__gt_@Wartorle_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhere are you exporting the models from?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere are a lot of places a setup like this can go wrong.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMake sure the skeletons/bones used are the _lt_strong_gt_exact_lt_/strong_gt_ same_co_ _lt_br /_gt_\n\tas in_sm_ pre-export_co_ all models should be skinned to the same skeleton/bones.\n_lt_/p_gt_\n\n_lt_p_gt_\n\twhen exporting_co_ make sure everything is exported in the same pose as Deltakosh also said_co_ e.g_sm_ have a t-pose at frame 0 then export the secondary hands with only frame 0 &amp_sm_ the _qt_export only selected_qt_ option (select hands &amp_sm_ all bones the hands uses)_co__lt_br /_gt_\n\tif you_t_re using 3ds max_co_ it should automaticly avoid exporting bones the hands are not skinned to.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tyou can then load your animations and export the main body in the same manner (keep t-pose at frame 0)._lt_br /_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tif you do the above steps and it doesn_t_t work out of the box_co_ feel free to ping me_co__lt_br /_gt_\n\ti believe i have some code hidden away somewhere that will work in the above situation (non-animated mesh_t_s skeleton should only contain bones the mesh is skinned to).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wartorle","Date":"2017-08-11T08:49:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t@DeltaKosh and @aWeirdo thanks for the responses.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYes_co_ sure_co_ ideally all anims/meshes would have the same Bind Pose at export but we_t_re trying to work with some existing data for a game.  They_t_ve got a custom engine and they support more flexibility in terms of bind pose control and this is how their data is structured.  Getting these changed is not an option (too much data) so we_t_re trying to make things work as-is.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPose Matrix_dd_  A single pose matrix for the mesh won_t_t ever be enough - what we would need is a pose matrix for each bone in the skeleton to allow more control.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCurrently_co_ we_t_re just trialing solutions to allow us to bring existing game content to the Web.  These (and other) tests have simply involved using FBXExporter command line to convert source game files to .babylon files.  However_co_ we already know we_t_re going to have to move to proprietary loading of asset files since the model/anim/material/shader setup is so very specific_co_ existing pipelines won_t_t be able to cope.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs things stand_co_ we_t_ve already started this proprietary loading pipeline so the importance of getting the default pipeline working isn_t_t that high any more.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRoc\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-08-11T17:22:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk gotcha.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou can also control the individual bones with_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- setScale()\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- setAbsolutePosition()\n_lt_/p_gt_\n\n_lt_p_gt_\n\t- rotate()\n_lt_/p_gt_\n\n_lt_p_gt_\n\tetc...\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Bones/babylon.bone.ts#L252_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Bones/babylon.bone.ts#L252_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wartorle","Date":"2017-08-15T08:33:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tCool_co_ thanks _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]