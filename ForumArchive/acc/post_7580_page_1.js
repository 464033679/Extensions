[{"Owner":"binyan","Date":"2014-07-03T15:36:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_In _lt_a href_eq__qt_http_dd_//www.babylonjs.com/playground/#KIBKO_qt_ rel_eq__qt_external nofollow_qt__gt_this_lt_/a_gt_ example I set a parent to the ground and then rotate it. I would expect that the absolute position of the ground would change but it doesn_t_t... The weirder thing is that getAbsolutePosition returns always the same vector - the vector it returned first time I called it. For instance in _lt_a href_eq__qt_http_dd_//www.babylonjs.com/playground/#NTSFV_qt_ rel_eq__qt_external nofollow_qt__gt_this_lt_/a_gt_ example the absolute position does change according to the rotation but after I get an absolute position for the first time it doesn_t_t change._lt_/p_gt__lt_p_gt_Am I missing something?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-04T00:10:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_This is because there is no rendering at that time. If you want babylon.js to update this value_co_ you have to force a complete matrix evaluation through ground.computeWorldMatrix(true)_sm__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"binyan","Date":"2014-07-04T10:26:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Thanks_co_ Deltakosh. Checked it out and it works now. Just a little correction - I should force the both world matrices evaluation (the parent_t_s one and the child_t_s one). Otherwise it doesn_t_t work._lt_/p_gt__lt_p_gt_If I understood well it will be automatically evaluated if this code will run in rendering loop_co_ right?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-07-04T15:27:33Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Correct _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Srisub","Date":"2016-03-16T22:53:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI ran into the same problem where i am trying to get the absolute position (or more generally_co_ the world matrix components) of a mesh deep down in the hierarchy of a scene *before* any rendering happens. Seems like what i need to do is to go up the hierarchy and do computeWorldMatrix(true) for each mesh in the ancestry as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tDeltakosh_co_ might be worthwhile to consider a scene.computeWorldMatrixForAllMeshes (force)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-16T22:55:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyou can just do mesh.computeWorldMatrix(true) and babylon.js will go up the hierarchy for you _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Srisub","Date":"2016-03-16T23:38:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere_t_s some code i wrote to make sure that the world matrix is up-to-date (outside of rendering loop). Both these seem like nice utilities to add to BJS classes. I am new_co_ so passing on code for now..\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_pre style_eq__qt_background-color_dd_#2b2b2b_sm_color_dd_#a9b7c6_sm_font-family_dd_Menlo_sm_font-size_dd_9pt_sm__qt__gt_\n_lt_span style_eq__qt_color_dd_#808080_sm__qt__gt_/* Get a node_t_s parent hierarchy */\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_getHierarchy_lt_/span_gt__dd_ _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_function _lt_/span_gt_( node_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__co_ _lt_/span_gt_includeThis ) {\n    _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_var _lt_/span_gt_hierarchy _eq_ []_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_    _lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_if _lt_/span_gt_( includeThis )\n        hierarchy._lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_push_lt_/span_gt_( node )_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_    _lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_var _lt_/span_gt_item _eq_ node._lt_span style_eq__qt_color_dd_#9876aa_sm__qt__gt_parent_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_    _lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_while _lt_/span_gt_( item ) {\n        hierarchy._lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_push_lt_/span_gt_( item )_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_        _lt_/span_gt_item _eq_ item._lt_span style_eq__qt_color_dd_#9876aa_sm__qt__gt_parent_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_    _lt_/span_gt_}\n\n    _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_return _lt_/span_gt_hierarchy_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt_}\n_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__co_\n_lt_/span_gt_\n_lt_span style_eq__qt_color_dd_#808080_sm__qt__gt_/* Compute world matrix for node and its parent hierarchy */\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_computeWorldMatrix_lt_/span_gt__dd_ _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_function _lt_/span_gt_( node_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__co_ _lt_/span_gt_force_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__co_ _lt_/span_gt_hierarchy ) {\n\n    _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_if _lt_/span_gt_( hierarchy ) {\n        _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_var _lt_/span_gt_nodes _eq_ _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_this_lt_/span_gt_._lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_getHierarchy_lt_/span_gt_( node )_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_        _lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_for _lt_/span_gt_( _lt_span style_eq__qt_color_dd_#cc7832_sm_font-weight_dd_bold_sm__qt__gt_var _lt_/span_gt_n_eq_nodes._lt_span style_eq__qt_color_dd_#9876aa_sm__qt__gt_length_lt_/span_gt_-_lt_span style_eq__qt_color_dd_#6897bb_sm__qt__gt_1_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_ _lt_/span_gt_n &gt_sm__eq_ _lt_span style_eq__qt_color_dd_#6897bb_sm__qt__gt_0_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_ _lt_/span_gt_n-- )\n            nodes[n]._lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_computeWorldMatrix_lt_/span_gt_( force )_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt__lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt_    _lt_/span_gt_}\n\n    node._lt_span style_eq__qt_color_dd_#ffc66d_sm__qt__gt_computeWorldMatrix_lt_/span_gt_( force )_lt_span style_eq__qt_color_dd_#cc7832_sm__qt__gt__sm_\n_lt_/span_gt_}_lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-17T01:52:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNo need for this. This is already done\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Srisub","Date":"2016-03-17T20:32:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNote that i had to do this only because i was trying to get the world matrix of a mesh deep down in hierarchy BEFORE any rendering starts. (Wanted to set the camera position/rotation to that of the _qt_eye_qt_ of the avatar). When i didnt do computeWorldMatrix(force) for the hierarchy_co_ it was only returning the local matrix. After i did the above code_co_ it worked.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-03-17T22:23:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThis should not be the case _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt_true_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt__gt__lt_/p_gt_\n\n_lt_p_gt_\n\tdo you mind sharing the bug in the playground?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Numa","Date":"2016-04-05T04:49:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHas this bug been fixed? I_t_m getting some strange results when swapping parents/children around in a big hierarchy.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-04-05T15:42:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAs far as I_t_m concerned no one provided a repro case so far\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"mirco","Date":"2017-03-21T13:29:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ sorry for bumping up this old thread_co_ but I think its not finished yet.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have the same problem like Srisub. It occurs when I use computeWorldMatrix(true) inside the createScene function ( not in the runRenderLoop ). \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe result of the computeWorldMatrix looks wrong ( expect  {X_dd_3 Y_dd_1 Z_dd_0}_co_ but get {X_dd_1 Y_dd_0 Z_dd_0} )\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf I use the code from Srisub it works.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is a Playground where I can reproduce the problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/index.html#1HMKOS%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/index.html#1HMKOS#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt_ maybe you can have a look on it\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-03-21T23:54:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4289_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4289-adam/_qt_ rel_eq__qt__qt__gt_@adam_lt_/a_gt_ found the issue\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt should be fixed now (clear your cache and run your PG again)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"mirco","Date":"2017-03-22T08:56:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tthank you_co_ works fine _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]