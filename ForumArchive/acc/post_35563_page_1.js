[{"Owner":"Ulfheden","Date":"2018-02-07T23:07:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi again_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter having rigged in Blender I noticed that the parents of bones don_t_t rotate accordingly. It works in this demo from the tutorial however_co_ where translating the head makes the neck bone adjust accordingly (you can see it by enabling debugging mode and enabling the skeleton viewer)_dd_ _lt_a href_eq__qt_https_dd_//www.babylonjs-playground.com/#1BZJVJ%2332_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.babylonjs-playground.com/#1BZJVJ#32_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI just can_t_t tell what_t_s wrong with my skeleton. In my case_co_ moving or rotating a parent makes its children move just like they should_co_ but moving a child does not rotate/scale their parents like in that demo.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI tried downloading that demo and using my custom Babylon.js file and so on with it_co_ and it works like it should. However_co_ using my skeleton/mesh instead of the Dude in the demo creates the same behavior as mentioned above (i.e. parents still don_t_t rotate when their children move). So there must be something wrong with how I set up my skeleton in Blender_co_ or maybe there_t_s something wrong with the Blender exporter? Or is there_co_ despite getting the same problem with the demo code_co_ something in my code that I_t_m missing? Of course_co_ I ahve verified that I don_t_t get this behavior in Blender_co_ so I suppose it has something to do with the interface between Blender and BabylonJS?_lt_br /_gt_\n\t_lt_br /_gt_\n\tI_t_ve attached a very light weight demo of it_co_ with the code from the tutorial demo_co_ as well as the Blender file._lt_br /_gt_\n\t_lt_br /_gt_\n\tThanks in advance!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ data-fileid_eq__qt_16925_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_16925_qt_ rel_eq__qt__qt__gt_sample.rar_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_16929_qt__gt_skTest1.blend_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2018-02-08T14:16:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi Ulfie... sorry to hear you are having problems.  One of our leading experts in Blender/exporting... _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/7026-gryff/?do_eq_hovercard_qt_ data-mentionid_eq__qt_7026_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/7026-gryff/_qt_ rel_eq__qt__qt__gt_@gryff_lt_/a_gt_... has been missing_co_ lately.  I sure hope he is OK.  Another Blender God... and the lead contributor to our Blender exporter... is _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt_.  Perhaps he will visit and give some advice.  I have almost zero experience with Blender/exporting_co_ and maybe even less experience with skeleton rigs.  Sorry.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBy chance_co_ do you see a choice during export... something like a checkbox for _qt_use Quaternions_qt_?  If so_co_ I would set that to true/yes... but this is just a guess.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBe sure to do _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/search/?type_eq_forums_topic&amp_sm_nodes_eq_16_co_28_co_29_co_30_co_31_qt_ rel_eq__qt__qt__gt_forum search_lt_/a_gt_ for keywords such as skeleton_co_ bone_co_ etc.  Read read read_co_ because rigs has been discussed pretty often... here in the forum. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhile reading_co_ be patient.  I_t_m sure someone smarter than I... will comment soon.  Thx for providing the files.  Don_t_t forget to read the Blender forums_co_ too.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-02-08T17:29:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPerhaps _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20526_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/_qt_ rel_eq__qt__qt__gt_@V!nc3r_lt_/a_gt_ can also help\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"V!nc3r","Date":"2018-02-08T18:12:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t(unfortunatly I_t_m not comfortable with armature things_co_ after small look into_co_ _t_doesn_t_t know what happend here)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-02-08T18:54:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAh_co_ child bones are not supposed to affect their parents_co_ just the opposite.  If you translate _qt_Duke_t_s_qt_ head bone_co_ then it is going to stretch the head from the body.  If you wish the whole body to translate_co_ this is not the way to do it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLooking at your skeleton_co_ I think your problem may be _qt_Bone.002_qt_ is seemingly a child of _qt_Bone.001_qt__co_ yet its actual parent is _qt_Bone_qt_.  I cannot see why this would be a good idea.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Ulfheden","Date":"2018-02-09T11:55:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks for the response_co_ everybody! Wingnut_co_ there are no export options for Babylon_co_ really. It just says _qt_No Properties_qt_ where_co_ for other formats_co_ there_t_d be a bunch of settings specific to that format.\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_204163_qt_ data-ipsquote-contentid_eq__qt_35563_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1518116060_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t18 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tAh_co_ child bones are not supposed to affect their parents_co_ just the opposite.  If you translate _qt_Duke_t_s_qt_ head bone_co_ then it is going to stretch the head from the body.  If you wish the whole body to translate_co_ this is not the way to do it.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tLooking at your skeleton_co_ I think your problem may be _qt_Bone.002_qt_ is seemingly a child of _qt_Bone.001_qt__co_ yet its actual parent is _qt_Bone_qt_.  I cannot see why this would be a good idea.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYeah_co_ but that_t_s what I_t_m wondering - in Dude_t_s case_co_ the neck is getting stretched_co_ while in my case_co_ the bones are just being detached and float away. What_t_s the difference between the Dude_t_s skeleton and mine there? In the Dude_t_s case_co_ isn_t_t his head just a child of the neck_co_ and this is supposed to mean that when you translate the head_co_ the neck stretches as observed in the demo there?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t think it is? In the Babylon file and the Blender file_co_ every ith bone is a child of the i-1th bone_co_ right (see the attached snippet from the Babylon file)? Or am I missing something?_lt_br /_gt_\n\t_lt_br /_gt_\n\tThe reason that this is all an issue for me is that I want to be able to move a bone_t_s end/tail in all directions. This is of course the same as rotating this bone_co_ let_t_s call it B_co_ but I thought it would be easier to just move B_t_s child and thus rotate it that way (the child not affecting the mesh at all). I could of course just figure out where B_t_s end/tail is (which would be equal to where the child is) and then calculate how to rotate B accordingly... Or I guess Inverse Kinematics is really what I_t_m looking for. The reason that I tried to just translate the bone_t_s children is because I_t_m used to how skeletons work in 3ds Max where you can rotate a bone by simply translating its children - it is restricted to keeping its scale/length and thus is forced to rotate without deforming itself. Maybe it_t_s some built-in IK controller_co_ really... In Blender and BabylonJS I guess I_t_ll need to explicitly apply IK for this to work?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_02/5a7d87b2b2815_Namnls.png.e3bc95487bcfe785051a938a9dcc0839.png_qt_ data-fileid_eq__qt_16947_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_Namnlös.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_16947_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_02/5a7d87b2b96bb_Namnls.thumb.png.e1bdb69ad19f236ecfa6410af28c6e33.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-02-12T19:25:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI was confused by the dotted line_co_ but it was for the mesh_co_ so your skeleton is parented correctly.  It already has an IK constraint on Bone.001.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf you wish to do IK_co_ you can do it either in Blender or BJS_co_ depending on your needs.  If you wish animation exported_co_ you would need to do it in Blender.  In that case_co_ any IK bones added_co_ put _t_.ik_t_ in the bone name_co_ so you can check the exporter _t_Ignore IK Bones_t_ check.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor live animation it WebGL_co_ you will need to use the implementation in BJS.  When I did this from a skeleton exported from Blender_co_ I had to specify a bendAxis.  I do not know if this is due to my skeleton_co_ or Blender in general.  See this _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/34127-using-ik-bone-controller/_qt_ rel_eq__qt__qt__gt_topic _lt_/a_gt_for more.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Ulfheden","Date":"2018-02-12T22:19:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_204570_qt_ data-ipsquote-contentid_eq__qt_35563_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1518463529_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t3 hours ago_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tI was confused by the dotted line_co_ but it was for the mesh_co_ so your skeleton is parented correctly.  It already has an IK constraint on Bone.001.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tIf you wish to do IK_co_ you can do it either in Blender or BJS_co_ depending on your needs.  If you wish animation exported_co_ you would need to do it in Blender.  In that case_co_ any IK bones added_co_ put _t_.ik_t_ in the bone name_co_ so you can check the exporter _t_Ignore IK Bones_t_ check.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tFor live animation it WebGL_co_ you will need to use the implementation in BJS.  When I did this from a skeleton exported from Blender_co_ I had to specify a bendAxis.  I do not know if this is due to my skeleton_co_ or Blender in general.  See this _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/34127-using-ik-bone-controller/_qt_ rel_eq__qt__qt__gt_topic _lt_/a_gt_for more.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYeah_co_ I was aiming to use IK to make it easier to control my character_t_s jaw (I want to define the jaw_t_s rotation by defining its endpoint position). I_t_ll also need to program all animation within WebGL/BJS_co_ so I_t_ll need to set the IK relationship and all that within BJS. I_t_ve done that now_co_ but the thing is that the entire skeleton is affected by the IK constraint_co_ not just the jaw. In e.g. Blender_co_ you can set the chain length_co_ i.e. how many levels of bones above the bone to be affected by the IK relationship_co_ but there_t_s nothing in the Bone or BoneIKController classes that suggests there_t_s such a thing in BJS.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the IK demo with the _qt_Dude_qt__co_ only his arm bones are affected... why is that? It_t_s not because of the animation anyway.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow can I apply the IK relation to just one bone_co_ and not its parents?_lt_br /_gt_\n\t_lt_br /_gt_\n\tI think I_t_ll just use the_lt_font color_eq__qt_#000000_qt__gt_ BoneLookController in this case instead_co_ since I only want to affect the jaw bone_co_ but it_t_d still be very interesting to hear if there is a chain length property (I couldn_t_t find one though) or equivalent_co_ or how it could be _qt_simulated_qt_._lt_/font_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-02-13T15:57:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tChain length is 2 for BJS.  For Blender it can be more_co_ but it usually has bad results.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]