[{"Owner":"WolfKodi","Date":"2015-11-26T14:47:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Whoa! Okay_co_ there are two parts to this._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_strong_gt_Case/Issue 1_dd_ Scene picking info for animated rigs only obtains picking information from the first frame of the rig animation._lt_/strong_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I_t_ve setup a test case_co_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/7x0nkh0g/3/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/7x0nkh0g/3/_lt_/a_gt__lt_strong_gt_ _co_ _lt_/strong_gt_where there_t_s this cube that is being animated and moved by this bone. You can click on the cube to change it_t_s colour between green and red. Clicking only works if you click on the mesh where it was at the first frame of animation. Doesn_t_t canvas picking info casts a ray into the scene and looks for active faces everytime? It appears that it_t_s using the first frame of the rig as if it was not being animated at all._lt_br_gt__lt_br_gt_This issue occurs from files exported from both Babylon and Tower Of Babel exporter from blender._lt_/p_gt__lt_p_gt__lt_strong_gt_Case/Issue 2_dd_ Using the Morph Extension (ver 1.1) and Tower Of Babel to import and animate shape keys created in Blender_co_ on a mesh that also has skeletal rig and animation_co_ morph shape offsets are relative towards the Rest Position (edit mesh position in Blender before the mesh has been set to a pose by a rig)._lt_/strong_gt__lt_br_gt__lt_br_gt_Using the previous jsFiddle example_dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/7x0nkh0g/3/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/7x0nkh0g/3/_lt_/a_gt__co_ clicking on the blue circle morph_t_s the cube_t_s shape into a pyramid. Only the top four keys are morphed. Notice how the top four keys try to move towards the rest position of the original mesh instead of following the translated skeletal rig_t_s first frame. _lt_br_gt__lt_br_gt_After discovering this_co_ I created another animation rig but this time_co_ I set the first frame of the rig to match the original rest position of the mesh and then have my usual looping animation after that. In Babylon_co_ I then set the rig animation to skip over that first frame. This is sort of a work-around but it actually works! See_dd_ _lt_a href_eq__qt_http_dd_//jsfiddle.net/7x0nkh0g/4/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jsfiddle.net/7x0nkh0g/4/_lt_/a_gt_ The cube is being morphed to a pyramid correctly now_co_ while still being animated by a skeletal rig. _lt_br_gt__lt_br_gt_I_t_ve only tried this trick out on the test case. Can_t_t wait to try it out on my facial shapes on top of a skeletal animation.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ alt_eq__qt__dd_D_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ _lt_br_gt__lt_br_gt_I read in some old threads that JCPalmer might have a working copy of the Morph Extension version 1.2 hasn_t_t been released? I_t_m getting depreciation messages from BJS using this old Morph Extension_dd_ _qt_BJS - [22_dd_36_dd_45]_dd_ Mesh.updateVerticesDataDirectly deprecated since 2.3._qt__lt_br_gt__lt_br_gt_On a sidenote for those test cases I_t_ve created_co_ if you click on the blue circle to morph the shape of the cube first_co_ then you can_t_t click on it to change it_t_s colour later. JS gives an error _qt_Uncaught TypeError_dd_ Cannot read property _t_subtractToRef_t_ of undefined_qt_. Click on the cube to change its colour first and then clicking the morph next works fine however._lt_br_gt__lt_br_gt_If you need the blender file_co_ I_t_ve attached it._lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_5668_qt__gt_cubearmatureplusdeform.zip_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-27T03:09:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hello!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_1. This is because meshes are updated GPU side and picking is done CPU side. So CPU is only aware of the initial state_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_2. This one is for JCP I guess _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"WolfKodi","Date":"2015-11-27T04:03:00Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi!_lt_br_gt__lt_br_gt_1. Oh_co_ how interesting. Is there a way to update the CPU before the a picking request? What about casting a ray or collision picking? Are they done on the CPU side and are only aware of the initial state? Surely there must be a way to update them._lt_br_gt__lt_br_gt_2. I guess too  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-11-27T16:53:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Your calls have been received on all your topics about morphing.  North America is in the midst of a 4 day holiday_co_ so no one was able to come to the phone just now.  Too much to do_co_ naps to be taken_co_ etc._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Your call was important to us_co_ and I will look at these again on Monday._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"WolfKodi","Date":"2015-11-27T17:40:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Happy holidays and enjoy Black Friday!_lt_br_gt__lt_br_gt_These aren_t_t all that important or critical but thanks for the heads up._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-28T01:09:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_You can process the bones CPU side (mostly for compatibility) but for obvious performance reasons we do not save the computed vertices. THere are just used for rendering._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_PIcking is done against optimized and cache values. _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"WolfKodi","Date":"2015-11-28T01:50:16Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I see_co_ thanks! I know where to dig deeper if I want to go there. I think it is better to harness as much power from the GPU as possible while still being mostly compatible. Do you suppose the GPU can perform a picking task?_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-28T01:59:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I don_t_t say it is impossible but this is a tough task (as it has to be done inside the same shader with everything else like rendering and we are already instructions limited)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"WolfKodi","Date":"2015-11-28T02:24:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I figured it would be a tough task. Thank you kindly for answering!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-28T02:40:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_My pleasure _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2015-11-30T16:41:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Glad you are interested in Morphing.  I have a major new release in the works.  This version may still not work correctly against a mesh with a skeleton using the standard BJS animation system_co_ but MORPH (renamed to QueuedInterpolation_co_ QI) will have an integrated bone interpolator right inside the beforeRender.  BABYLON.Animation objects can loaded directly from Motion capture files (only Acclaim format right now) without running them through Blender.  I still use a BABYLON.Animation object for data storage_co_ but it is designed to work best if you only include key frames.  In your example_co_ I think you would only need 1 frame_co_ the last one.  The final pose will be where it ends up_co_ no matter what state is left after the earlier queued end state._lt_br_gt_ _lt_br_gt_I looked at the behavior you are getting with skeletons &amp_sm_ meshes with ShapeKeyGroups.  Part of the problem may be that you are using BJS 2.3.  The MORPH in the repository still calls updateVerticesDirectly().  I have done a lot of work in 2.3 to ensure things work together.  First was upgrading the standard updatingVertices() to be optimized to work with Float32Arrays.  updateVerticesDirectly() is no longer needed_co_ so it was not updated &amp_sm_ depreciated._lt_br_gt_ _lt_br_gt_Next I updated the cpu skinning process_co_ such that morphing &amp_sm_ it use the same Float32Arrays to inter-operate as best as possible._lt_br_gt_ _lt_br_gt_Have done a lot of testing using MakeHuman 1.1.  One can have 50 facial shapekeys.  I have converted my proof of concept VoiceSync tool to be for MakeHuman meshes.  I have not gotten all the face shapes coded for each sound yet_co_ but you can interactively develop them using slider controls_co_ then write the typescript snippet needed to put back into the program onto the console.  It is the first scene I know of where you can actually direct a mesh deforming using controls._lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_11_2015/post-8492-0-04030600-1448900312.png_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_11_2015/post-8492-0-04030600-1448900312_thumb.png_qt_ data-fileid_eq__qt_5692_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-8492-0-04030600-1448900312_thumb.pn_qt__gt__lt_/a_gt__lt_br_gt_ _lt_br_gt_I also have an interactive tool to bring in Motion Capture files from Carnegie Mellon Graphics Lab _lt_a href_eq__qt_http_dd_//mocap.cs.cmu.edu/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//mocap.cs.cmu.edu/ _lt_/a_gt__lt_/p_gt__lt_p_gt_This is not likely to be released though_co_ in a pre-built way at least.  You have to down load a 1 GB zip file of the entire library_co_ then put the html_co_ JS_co_ and texture files in the top level directory.  You then launch the html via double click.  The individual online files are not CORS enabled._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Really close to getting this to turn over.  Not going to spend time to get the error you have fixed_co_ sorry._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"WolfKodi","Date":"2015-12-01T04:21:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_107501_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18886_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt_ data-cite_eq__qt_JCPalmer_qt_ data-ipsquote-timestamp_eq__qt_1448901691_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_In your example_co_ I think you would only need 1 frame_co_ the last one._lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_div_gt__lt_p_gt_Assuming you were referring to shape key frames_co_ so that means it would only require the one shape key frame data? instead of having the Base Shape as well? This would make it more efficient on data size._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_/div_gt__lt_div_gt__lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_107501_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_18886_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt_ data-cite_eq__qt_JCPalmer_qt_ data-ipsquote-timestamp_eq__qt_1448901691_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Really close to getting this to turn over.  Not going to spend time to get the error you have fixed_co_ sorry._lt_/p_gt__lt_/div_gt__lt_div_gt_ _lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_/div_gt__lt_p_gt_I_t_m glad to hear that it_t_s coming along well and it sounds like the updated version would fix many issues with the current repository and to be in line with BJS 2.3. Would _lt_span_gt_QueuedInterpolation still be an extension like Morph or would it be integrated directly into BJS?_lt_/span_gt__lt_/p_gt__lt_p_gt_That_t_s quite already_co_ I figured it would be better to debug from the new version and the old errors can be disregarded. I spent the weekend doing a lot more testing more shape keys and ended up getting more errors with incorrectly morphed shapes and how adjusting one shape key in blender messes up another when exported using TOB and using the Morph extension in BJS. I finally called it quits for the old version when I found out that you can animate individual bones on top of an existing running skeletal animation. That_t_s what I will be using for now._lt_/p_gt__lt_p_gt_Thank you._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-05-09T13:24:28Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\t@JCPalmer_lt_br /_gt__lt_br /_gt_\n\tDid you release any of this in the end? I am going to need this kind of stuff soon _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-05-09T18:07:54Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\ti work on GPU side picking system \n_lt_/p_gt_\n\n_lt_p_gt_\n\tgood news it is possible 100%\n_lt_/p_gt_\n\n_lt_p_gt_\n\tbad news need time for  do that and   optimize\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2016-05-09T18:49:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/17567-dal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_17567_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/17567-dal/_qt_ rel_eq__qt__qt__gt_@Dal_lt_/a_gt__co_ the exporter_co_ Tower of Babel_co_ is in the extensions.  Shape key groups for morphing have been done for a while.  Vismes are getting close.  The skeleton interpolator is not operational.  I did use it in a test _lt_a href_eq__qt_https_dd_//googledrive.com/host/0B6-s6ZjHyEwUNnEwREtwekRiLTg/_qt_ rel_eq__qt_external nofollow_qt__gt_scene_lt_/a_gt_ recently.  No skeleton or actual talking_co_ but exercising the FACE &amp_sm_ WINK shape key groups.  The Eyes are using a rotation POV animation.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have abandoned motion capture in favor of inverse kinetics inside of Blender.  Not sure when this will be done_co_ sorry.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dal","Date":"2016-05-10T06:07:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tReally cool stuff!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"NasimiAsl","Date":"2016-05-10T06:23:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tok i give a result from GPU picking system\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#JAG8B%234_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#JAG8B#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis is compilicated a lot _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tflow this topic for GPU Picking System _dd_ \n_lt_/p_gt_\n_lt_iframe data-embedcontent_eq__qt__qt_ frameborder_eq__qt_0_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/topic/22471-gpu-picking-system/?do_eq_embed_qt__gt__lt_/iframe_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]