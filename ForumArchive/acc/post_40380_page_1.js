[{"Owner":"jerome","Date":"2018-10-02T12:37:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi people_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOne of our new contributor (a good damn one apparently) just did a nice refactorization of the SPS code in order to get (even) better perfs.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe first tests are really promising but we need more feedback from different OS_co_ devices_co_ browsers to validate this great work.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo please_co_ get there _lt_span_gt__dd_ _lt_/span_gt__lt_a href_eq__qt_http_dd_//jerome.bousquie.fr/BJS/test/SPSRefactor/_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//jerome.bousquie.fr/BJS/test/SPSRefactor/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow to test ?_lt_br /_gt_\n\tCompare_co_ in the same browser with the same window size_co_ both SPS versions with the same particle number._lt_br /_gt_\n\tPlease don_t_t open it in two tabs simultaneously to be sure to keep only one WebGL context instanciated at the same moment. As well_co_ don_t_t run two browsers with this demo simultaneously.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease wait for some seconds (20_qt_) after the start so as the GC has finished its cleanup before comparing. Then nothing more is allocated nor deleted. You should see then a quite _lt_u_gt_stabilized_lt_/u_gt_ fps value.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe comparison is better_co_ say more pertinent_co_ when the model is stressed_co_ it is to say when the number of animated particles prevents from reaching the 60 fps _dd_ it_t_s easier to check out the gain or the loss between both versions. So please choose a fixed particle number that will keep the fps between 5 and 45 for instance in all your attempts.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease feedback in this thread like this _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Device / OS /particle number / _lt_strong_gt_Browser_lt_/strong_gt_ / _lt_strong_gt_stabilized fpsÂ  legacy / stabilized fps refactored_lt_/strong_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_We don_t_t really care about the GPU because everything is compared CPU side. If you don_t_t know some pieces of information_co_ please report at least the browser name and the fps value of each sps version _dd_ legacy first_co_ refactored second._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_example _lt_span_gt__dd__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt__lt_span_gt_Workstation i7 quadcore_lt_/span_gt__lt_/span_gt_ / Linux / 20K / Chrome / 31 fps / 12 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tor\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirefox / 13 fps / 14 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"lihis","Date":"2018-10-02T13:14:53Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThat_t_s cool _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere are my results on i5-750 (_lt_em_gt_old_lt_/em_gt_ quadcore) + Windows 10_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t12K Firefox / 34 FPS / 30 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t12K Chrome / 24 FPS / 47 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t24K Firefox / 18 FPS / 15 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t24K Chrome / 12 FPS / 24 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo for me it looks like the refactored version is a bit (~10%) slower on firefox_co_ but a lot (~100%) faster on chrome.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Dad72","Date":"2018-10-02T13:31:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWindows 10 -- CPUÂ i5-2300 -- GPU GTX 1050 ti -- Chrome 69 _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_Result _lt_span_gt__dd__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOf 2000 to 8000 _eq_&gt_sm_ 44FPS (Legacy)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOf 2000 to 10000 _eq_&gt_sm_ 60FPS (refactored)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-----------------------\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLegacy_dd_ 12Â 000 particle _eq_&gt_sm_ 31Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\trefactored_dd_ 12Â 000 particle _eq_&gt_sm_ 53Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-----------------------\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLegacy_dd_ 14Â 000 particle _eq_&gt_sm_ 27Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\trefactored_dd_ 14Â 000 particle _eq_&gt_sm_ 46Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t----------------------\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLegacy_dd_ 20 000 particle _eq_&gt_sm_ 18Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\trefactored_dd_ 20 000 particle _eq_&gt_sm_ 32Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-----------------\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLegacy_dd_ 40 000 particle _eq_&gt_sm_ 11 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\trefactored_dd_Â 40 000 particle _eq_&gt_sm_ 17Â FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor me the refactored version doubles the performance.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSuper optimization.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2018-10-02T13:43:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\ti3 - 4005U / Windows 10 / 2K / Firefox / 38 - 44 fps / 38-44 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti3 - 4005U / Windows 10 / 2K / Chrome / 32 - 34 fps / 37-40 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti3 - 4005U / Windows 10 / 2K /Edge / 36 - 45 fps / 47-52 fps ï»¿\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\ti3 - 4005U / Windows 10 / 40K / Firefox / 3 - 4 fps / 3-4 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti3 - 4005U / Windows 10 / 40K / Chrome / 3 fps / 5 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\ti3 - 4005U / Windows 10 / 40K /Edge / 2 fps / 4 fps ï»¿\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAndroid 7.1.1 / 2K / Chrome / 12 fps / 27 fps\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"aWeirdo","Date":"2018-10-02T14:32:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\ti5 4670kÂ / Win 10 / 40 KÂ /_lt_br /_gt_\n\tÂ  Chrome /Â 12 Fps /Â 20 Fps_lt_br /_gt_\n\tÂ Â Firefox /Â 14 Fps /Â 13Â Fps_lt_br /_gt_\n\tÂ  Edge / 11 Fps / 12 Fps_lt_br /_gt_\n\tÂ  Opera / 11 Fps / 19 Fps_lt_br /_gt_\n\t_lt_br /_gt_\n\tÂ  IE11 / 3 Fps / 7 FpsÂ Â _lt_span class_eq__qt_ipsEmoji_qt__gt_ðŸ¤”_lt_/span_gt_Â \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gijs","Date":"2018-10-02T16:19:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_ here are some results_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Laptop_lt_/strong_gt__lt_br /_gt_\n\tIntel(R) Core(TM) i5-5300U CPU @ 2.30GHz (4 CPUs)_co_ ~2.3GHz_lt_br /_gt_\n\tWindows 7 / 2K / IE11 / 40 fps / 60 fps_lt_br /_gt_\n\tWindows 7 / 10K / IE11 / 10 fps / 21 fps_lt_br /_gt_\n\tWindows 7 / 20K / IE11 / 5 fps / 12 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Laptop_lt_/strong_gt__lt_br /_gt_\n\tIntel(R) Core(TM) i5-4200U CPU @ 1.60GHz (4 CPUs)_co_ ~2.3GHz_lt_br /_gt_\n\tWindows 10 / Edge 42.17134.1.0 / 10K / 30 fps / 33 fps_lt_br /_gt_\n\tWindows 10 / Edge 42.17134.1.0 / 20K / 15 fps / 18 fps_lt_br /_gt_\n\tWindows 10 / Firefox 62.0.2 / 10K / 47 fps / 36 fps_lt_br /_gt_\n\tWindows 10 / Firefox 62.0.2 / 20K / 22 fps / 21 fps_lt_br /_gt_\n\tWindows 10 / Chrome 69.0.3497.100 / 10K / 32 fps / 45 fps_lt_br /_gt_\n\tWindows 10 / Chrome 69.0.3497.100 / 20K / 17 fps / 26 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Smartphone_lt_/strong_gt__lt_br /_gt_\n\tQualcomm Snapdragon quadcore 2_co_5 GHz_lt_br /_gt_\n\tAndroid 6.0.1 / Firefox 62.0 / 2K / ~23 fps / ~19 fps_lt_br /_gt_\n\tAndroid 6.0.1 / Firefox 62.0 / 10K / 6 fps / 6 fps_lt_br /_gt_\n\tAndroid 6.0.1 / Chrome 69.0.3497.100 / 2K / ~24 fps / ~44 fps_lt_br /_gt_\n\tAndroid 6.0.1 / Chrome 69.0.3497.100 / 10K / 6 fps / 6 fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"MarianG","Date":"2018-10-02T16:40:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\ti7-4720HQ / Windows 10_lt_br /_gt_\n\t10k_lt_br /_gt_\n\tChrome 43-44fps / 57-60fps_lt_br /_gt_\n\tFirefox 54-55fps / 49-52fps_lt_br /_gt_\n\t_lt_br /_gt_\n\t40k_lt_br /_gt_\n\tChrome 11-12fps / 17-19fps_lt_br /_gt_\n\tFirefox 15-16fps/ 13-15fps_lt_br /_gt_\n\t_lt_br /_gt_\n\tMediaTek Helio X20 / Android 6\n_lt_/p_gt_\n\n_lt_p_gt_\n\tChrome and Firefox - not visible difference_lt_br /_gt_\n\t2kÂ 35-45fps / 39-50fps_lt_br /_gt_\n\t_lt_br /_gt_\n\tI noticed that on mobile sps slow down every secondÂ aprox_co_ for few miliseconds_co_ here fps go down_co_ after that go normalÂ fps is higher._lt_br /_gt_\n\t_lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_br /_gt_\n\tÂ \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2018-10-02T21:30:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAwesome!!Â  I tried to test on my phone but the fps element is too small for me to read.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2018-10-02T21:39:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI can read it when I rotate my phone.Â Â \n_lt_/p_gt_\n\n_lt_p_gt_\n\t20_co_000 particles\n_lt_/p_gt_\n\n_lt_p_gt_\n\tChrome on LG G7 ThinQ\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLegacy - 10fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRefactored - 24fps !!!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tÂ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tEdit_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirefox on LG G7 ThinQ\n_lt_/p_gt_\n\n_lt_p_gt_\n\tLegacy - 17fps\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRefactored - 15fps ???\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"inteja","Date":"2018-10-02T22:52:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tMacBook Pro 13_qt_ 2017 MacOS High SierraÂ 10.13.6_co_ Intel Core i5 @Â 2.3GHz_co_ 8 GB\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_ChromeÂ 69.0.3497.100_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2K / 60 FPS / 60 FPS_lt_br /_gt_\n\t10K / 50 FPS / 60 FPS_lt_br /_gt_\n\t20K / 27 FPS / 47 FPS_lt_br /_gt_\n\t40K / 14 FPS / 24 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_FirefoxÂ 62.0.2_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2K / 60 FPS / 60 FPS_lt_br /_gt_\n\t10K / 44 FPS / 40 FPS_lt_br /_gt_\n\t20K / 34 FPS / 30 FPS_lt_br /_gt_\n\t40K / 20 FPS / 18 FPS\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_Note_lt_/em_gt__lt_strong_gt__dd__lt_/strong_gt_ Average stable frame rates but there were periodic dramatic (&gt_sm_10fps) dips in frame rate (both legacy and refactored)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Safari 12.0_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2K / 60 FPS / 60 FPS_lt_br /_gt_\n\t10K / 50 FPS / 60 FPS_lt_br /_gt_\n\t20K / 30 FPS / 30 FPS_lt_br /_gt_\n\t40K / 20 FPS / 20 FPS\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2018-10-03T12:15:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks to all of you for this important and fast feedback.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis has showed that the SPS code refactorization has the very same results whatever the OS or the device _lt_span_gt__dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_- huge gain in Chrome from +25% up to +100% speed_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_- relative loss in Firefox_co_ around -15%Â  (please FF devs _dd_ why ???)_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_- no impact or very small gain on the other browsers_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_The PR will be merged soon. All credits and congratulations to its author _dd_ _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32696-babarjulien/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32696_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32696-babarjulien/_qt_ rel_eq__qt__qt__gt_@BabarJulien_lt_/a_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe relative perf loss in FF doesn_t_t really matter. Indeed the demo you_t_ve tested is a stress test_co_ an extreme scene that users usually don_t_t build _lt_span_gt__dd_ _lt_/span_gt_20K or more solid particles are hardly visible when set apart from each other in the screen area. A good practice is too manage less solid particles and to worry only about those visible in the frustum by recycling them.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]