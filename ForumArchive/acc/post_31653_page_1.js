[{"Owner":"Quach90","Date":"2017-07-14T20:49:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi everyone_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have now been stuck with a problem for a while and figured I would ask here to see if anyone knew how to fix it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a scene where you can dynamically add your own images to it_co_ that will than be transformed into a material with the images as the diffusetexture. The transforming happens by using the raw image data to create the texture with the function_dd_ BABYLON.Texture.LoadFromDataString - it looks something like this_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_material _eq_ new BABYLON.StandardMaterial(_qt_imageMaterial_qt__co_ scene)_sm_\nvar imgTexture _eq_ new BABYLON.Texture.LoadFromDataString(_qt_data_dd__qt_ + Math.random()_co_ RAW IMG DATA_co_ scene)_sm_\nmaterial.diffuseTexture _eq_ imgTexture_sm__lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThis all works fine_co_ the problem that I am having is that I want to be able to save the scene and load it again later. But it seems the the SceneSerializer doesn_t_t save the texture/material information (the raw image data)_co_ so that when I load the scene I get the error_dd_ \n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_Materials_dd_\n\t\tName_dd_ groundMaterial\nbabylon.custom.js_dd_5 Uncaught TypeError_dd_ Cannot read property _t_width_t_ of null\n    at E (babylon.custom.js_dd_5)\n    at n.createTexture (babylon.custom.js_dd_5)\n    at new i (babylon.custom.js_dd_11)\n    at babylon.custom.js_dd_11\n    at Function.t.Parse (babylon.custom.js_dd_2)\n    at Function.i.Parse (babylon.custom.js_dd_11)\n    at Function.t.Parse (babylon.custom.js_dd_2)\n    at Function.r.Parse (babylon.custom.js_dd_17)\n    at Function.t.Parse (babylon.custom.js_dd_14)\n    at Object.load (babylon.custom.js_dd_28)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tLooking at the saved serialized scene_co_ I can also see that it is not saving the raw image data_co_ so I have customized the serialize() function to find and save the data when the scene is saved_co_ then the idea was to unpack it when it loads somehow. But I still can_t_t stop the above error from happening. Is there anyone that knows a good way to do this or a fix to how I_t_m trying to do it?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn short_dd_ I am trying to save and load a scenes that have material/texture that I created from my own images. But the loader and saver_co_ doesn_t_t seem to recognize/save the custom material properly.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThank you!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2017-07-17T15:29:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPing _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/11802-luaacro/?do_eq_hovercard_qt_ data-mentionid_eq__qt_11802_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/11802-luaacro/_qt_ rel_eq__qt__qt__gt_@Luaacro_lt_/a_gt_ who works on this recently\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Luaacro","Date":"2017-07-17T16:05:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi !\n_lt_/p_gt_\n\n_lt_p_gt_\n\tcan you check if in the serialized scene object you have the textures serialized including a property named _qt_base64String_qt_ in it ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tif it is not serialized_co_ there is another problem\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Quach90","Date":"2017-07-18T17:05:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/11802-luaacro/?do_eq_hovercard_qt_ data-mentionid_eq__qt_11802_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/11802-luaacro/_qt_ rel_eq__qt__qt__gt_@Luaacro_lt_/a_gt__co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNot sure I understand exactly what you mean_co_ but the string _qt__lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_base64String_qt_ is no where in the serialized object._lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#272a34_sm__qt__gt_Below is a snippet of how the material looks_dd__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt__qt_materials_qt__dd_ [..._co_ \n      {\n        _qt_tags_qt__dd_ null_co_\n        _qt_id_qt__dd_ _qt_imageMaterial_qt__co_\n        _qt_name_qt__dd_ _qt_imageMaterial_qt__co_\n        _qt_checkReadyOnEveryCall_qt__dd_ false_co_\n        _qt_checkReadyOnlyOnce_qt__dd_ false_co_\n        _qt_state_qt__dd_ _qt__qt__co_\n        _qt_alpha_qt__dd_ 1_co_\n        _qt_backFaceCulling_qt__dd_ true_co_\n        _qt_sideOrientation_qt__dd_ 1_co_\n        _qt_alphaMode_qt__dd_ 2_co_\n        _qt_disableDepthWrite_qt__dd_ false_co_\n        _qt_fogEnabled_qt__dd_ true_co_\n        _qt_pointSize_qt__dd_ 1_co_\n        _qt_zOffset_qt__dd_ 0_co_\n        _qt_wireframe_qt__dd_ false_co_\n        _qt_pointsCloud_qt__dd_ false_co_\n        _qt_fillMode_qt__dd_ 0_co_\n        _qt_diffuseTexture_qt__dd_ {\n            _qt_tags_qt__dd_ null_co_\n            _qt_name_qt__dd_ _qt_data_dd_0.8948863414411619_qt__co_\n            _qt_hasAlpha_qt__dd_ true_co_\n            _qt_getAlphaFromRGB_qt__dd_ false_co_\n            _qt_level_qt__dd_ 1_co_\n            _qt_coordinatesIndex_qt__dd_ 0_co_\n            _qt_coordinatesMode_qt__dd_ 0_co_\n            _qt_wrapU_qt__dd_ 1_co_\n            _qt_wrapV_qt__dd_ 1_co_\n            _qt_anisotropicFilteringLevel_qt__dd_ 4_co_\n            _qt_isCube_qt__dd_ false_co_\n            _qt_gammaSpace_qt__dd_ true_co_\n            _qt_invertZ_qt__dd_ false_co_\n            _qt_lodLevelInAlpha_qt__dd_ false_co_\n            _qt_lodGenerationOffset_qt__dd_ 0_co_\n            _qt_lodGenerationScale_qt__dd_ 0.8_co_\n            _qt_isRenderTarget_qt__dd_ false_co_\n            _qt_url_qt__dd_ _qt_data_dd_0.8948863414411619_qt__co_\n            _qt_uOffset_qt__dd_ 0_co_\n            _qt_vOffset_qt__dd_ 0_co_\n            _qt_uScale_qt__dd_ 1_co_\n            _qt_vScale_qt__dd_ 1_co_\n            _qt_uAng_qt__dd_ 0_co_\n            _qt_vAng_qt__dd_ 0_co_\n            _qt_wAng_qt__dd_ 0_co_\n            _qt_isBlocking_qt__dd_ true_co_\n            _qt_animations_qt__dd_ []\n        }_co_\n        ...\n    }]_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tShould the serializer be able to include images/materials/textures created at run time?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Quach90","Date":"2017-07-20T02:03:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tBasically it seems that the image data is saved in the _qt__buffer_qt_ on the texture_co_ which is left out when it is serialized_co_ which in terms gives trouble to the material when it is being loaded again. The texture looks something like this_co_ before and after serialized_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBefore\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_07/before.png.8d4f31e78aca01379c3c12d63e3081f1.png_qt_ data-fileid_eq__qt_13937_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_13937_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_07/before.thumb.png.10c6b909b665d83d9caa66080c3d83e5.png_qt_ alt_eq__qt_before.thumb.png.10c6b909b665d83d9caa66080c3d83e5.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter serializing the above_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_13938_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2017_07/after.png.5af87a7a70b8d7b34ab6e8234345aed9.png_qt_ alt_eq__qt_after.png.5af87a7a70b8d7b34ab6e8234345aed9.png_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Luaacro","Date":"2017-07-20T10:15:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI cannot reproduce with the latest version of bjs_co_ what version are you using ? The latest from github ?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Quach90","Date":"2017-07-21T01:36:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tThat was the problem. I was using version 3.0. In version 3.1 it seems to have been fixed. Thank you!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Luaacro","Date":"2017-07-21T08:29:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tExcellent ! Thanks for you feedback _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]