[{"Owner":"JCPalmer","Date":"2014-09-03T17:45:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I have been doing more testing of the Automaton / ShapeKeyGroup exporting from Blender / Tower of Babel.  I have added a material with a texture to a mesh called Cloth that also has shapekeys.  I had the hardest time getting any material to show textures from export_co_ even though they looked perfect in Blender with F12.  Finally isolated why using the camera-anim model.  The cubes with textures also had a UVS Map thing._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Everything was fine when I added a UVS to a non-shapekey mesh_co_ Ground.  When I added a UVS to Cloth_co_ the number of positions changed_co_ but not the number of indices.  Crucially_co_ the length of positions no-longer matched the length of the raw shapekey_co_ hence the length error._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_My programming skills are exponentially better than graphics skills.  _lt_strong_gt_Is there something I did wrong?_lt_/strong_gt_  BTW_co_  I added a new warning if textures are detected in a mesh_co_ but UVS not found._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Here is  the log file with Cloth has a texture_co_ but no UVS (it worked in Babylon_co_ but solid color)_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_\tTower of Babel version_dd_ 1.0.0_co_ Blender version_dd_ 2.69 (sub 0)_eq__eq__eq__eq__eq__eq__eq__eq__eq_ Conversion from Blender to Babylon friendly Python objects _eq__eq__eq__eq__eq__eq__eq__eq__eq_\tPython World class constructor completed\tprocessing begun of material_dd_  automaton.cloth-like\tprocessing begun of material_dd_  automaton.ground-like\tprocessing begun of mesh_dd_  Ground\t\tnum positions      _dd_  4\t\tnum normals        _dd_  4\t\tnum uvs            _dd_  8\t\tnum uvs2           _dd_  0\t\tnum colors         _dd_  0\t\tnum indices        _dd_  6\tprocessing begun of mesh_dd_  Table\t\tWARNING_dd_  No materials have been assigned_dd_ \t\tnum positions      _dd_  8\t\tnum normals        _dd_  8\t\tnum uvs            _dd_  0\t\tnum uvs2           _dd_  0\t\tnum colors         _dd_  0\t\tnum indices        _dd_  36\tprocessing begun of mesh_dd_  Cloth\t\tnum positions      _dd_  1156\t\tnum normals        _dd_  1156\t\tnum uvs            _dd_  0\t\tnum uvs2           _dd_  0\t\tnum colors         _dd_  0\t\tnum indices        _dd_  6534\t\tWARNING textures being used_co_ but no UVS found\t\tKey shape not in group-state format_co_ changed to_dd_  ENTIRE MESH-Draped  \t        DRAPED raw key length_dd_ 1156\tprocessing begun of camera_dd_  Camera\tprocessing begun of light_dd_  Sun_eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of scene file started _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of scene file completed _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of typescript file started _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of typescript file completed _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of javascript file started _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of javascript file completed _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of html files started _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ Writing of html files completed _eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq__eq_ end of processing _eq__eq__eq__eq__eq__eq__eq__eq__eq__lt_/pre_gt__lt_p_gt_Here is the log file_co_ after adding the UVS to cloth (errors in python)_dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_\tTower of Babel version_dd_ 1.0.0_co_ Blender version_dd_ 2.69 (sub 0)_eq__eq__eq__eq__eq__eq__eq__eq__eq_ Conversion from Blender to Babylon friendly Python objects _eq__eq__eq__eq__eq__eq__eq__eq__eq_\tPython World class constructor completed\tprocessing begun of material_dd_  automaton.cloth-like\tprocessing begun of material_dd_  automaton.ground-like\tprocessing begun of mesh_dd_  Ground\t\tnum positions      _dd_  4\t\tnum normals        _dd_  4\t\tnum uvs            _dd_  8\t\tnum uvs2           _dd_  0\t\tnum colors         _dd_  0\t\tnum indices        _dd_  6\tprocessing begun of mesh_dd_  Table\t\tWARNING_dd_  No materials have been assigned_dd_ \t\tnum positions      _dd_  8\t\tnum normals        _dd_  8\t\tnum uvs            _dd_  0\t\tnum uvs2           _dd_  0\t\tnum colors         _dd_  0\t\tnum indices        _dd_  36\tprocessing begun of mesh_dd_  Cloth\t\tnum positions      _dd_  5366\t\tnum normals        _dd_  5366\t\tnum uvs            _dd_  10732\t\tnum uvs2           _dd_  0\t\tnum colors         _dd_  0\t\tnum indices        _dd_  6534\t\tKey shape not in group-state format_co_ changed to_dd_  ENTIRE MESH-Draped\t        DRAPED raw key length_dd_ 21_eq__eq__eq__eq__eq__eq__eq__eq__eq_ An error was encountered _eq__eq__eq__eq__eq__eq__eq__eq__eq_  File _qt_/home/jeff/.config/blender/2.69/scripts/addons/io_tower_of_babel.py_qt__co_ line 272_co_ in execute    mesh _eq_ Mesh(object_co_ scene_co_ self.multiMaterials_co_ nextStartFace_co_ forcedParent_co_ nameID)  File _qt_/home/jeff/.config/blender/2.69/scripts/addons/io_tower_of_babel.py_qt__co_ line 1065_co_ in __init__    self.shapeKeyGroups.append(ShapeKeyGroup(group_co_ rawShapeKeys_co_ self.positions))  File _qt_/home/jeff/.config/blender/2.69/scripts/addons/io_tower_of_babel.py_qt__co_ line 1513_co_ in __init__    if not ShapeKeyGroup.same_vertex(keyA.vertices[i]_co_  positions[i])_dd_ERROR_dd_  list index out of range_eq__eq__eq__eq__eq__eq__eq__eq__eq_ end of processing _eq__eq__eq__eq__eq__eq__eq__eq__eq__lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-09-03T18:16:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_First little bit of _t_progress_t_ is that the raw shape key length is really 1156_co_ not 21.  The 21 is a measurement of the key after it has been re-ordered_co_ because the order of positions is manipulated for Babylon from Blender_t_s order to support submeshes for multi-materials.  The order of each raw shape key has to be re-ordered as well._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Hopefully_co_ there is a bug in the script at a higher level which will resolve this_co_ though I am still puzzled by the change in the number of positions._lt_br_gt_ _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-09-03T19:05:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Decided to turn-off shape-key generation on Blender side_co_ &amp_sm_ deformations on Babylon side to see what happens with the UVS added.  It generated 5366 positions with 6534 indexes.  It is evident that there is a pattern_co_ but it is scaled oddly.  See attached pictures. _lt_strong_gt_ Is there some way to control this UVS_co_ so the # of positions does not change?_lt_/strong_gt__lt_/p_gt__lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-77225100-1409771078.jpg_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-77225100-1409771078.jpg_qt_ data-fileid_eq__qt_2622_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-8492-0-77225100-1409771078.jpg_qt__gt__lt_/a_gt__lt_/p_gt__lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-63243400-1409771093.png_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-63243400-1409771093.png_qt_ data-fileid_eq__qt_2623_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-8492-0-63243400-1409771093.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-09-03T19:38:55Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_In playing with the Blender render_co_ I was able to get the UVMap I added to the mesh to be applied to the material.  It now looks like the above Babylon screen shot.  Also included what Blender renders without making the texture use the map. _lt_strong_gt_ Maybe the question should be can Babylon _t_generate a map_t__co_ or can python API dig out the generate one?_lt_/strong_gt_  If the shape-key and positions are not the same size_co_  I have no idea what to do._lt_/p_gt__lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-96623900-1409772969.png_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-96623900-1409772969.png_qt_ data-fileid_eq__qt_2624_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-8492-0-96623900-1409772969.png_qt__gt__lt_/a_gt__lt_/p_gt__lt_p_gt__lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-72483800-1409772981.png_qt_ rel_eq__qt_external nofollow_qt__gt__lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_09_2014/post-8492-0-72483800-1409772981.png_qt_ data-fileid_eq__qt_2625_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_post-8492-0-72483800-1409772981.png_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-09-03T21:11:09Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_YES!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!_lt_/p_gt__lt_p_gt_After you add your UV Map_co_ in the 3D window_dd__lt_/p_gt__lt_ul_gt__lt_li_gt_Put Mesh into edit mode_lt_/li_gt__lt_li_gt_Select from the menu _t_Mesh-&gt_sm_UV Unwrap ...-&gt_sm_Unwrap_t__lt_/li_gt__lt_/ul_gt__lt_p_gt_No need to mess with The texture mapping as shown above_co_ unless you wish to see it in the Blender render too.  This stuff is finally starting to look real!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I probably need a new warning if the size of the shape key does not match the size of position_co_ but right now I need a beer.  Launching a nuclear missile seems about as simple as Blender.  In-coming._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2014-09-04T13:08:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Interesting!  Thanks for writing-up your discoveries on this.  An excellent contribution to the Babylon knowledge base.  I wish I could engage you in conversation on these subjects_co_ but I just don_t_t have the necessary experience in texturing and Blender operations. _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I learn things with every post you make_co_ JC... and... thanks for that_co_ too.  Everyone benefits from it_co_ but maybe not immediately.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Also_co_ I am still watching (and thinking about) two of your forum posts... that received no replies.  I hope to somehow gun-down some answers for those_co_ someday.  Posts without replies... bother me.  Sometimes I put no-help comments on them... just to bring them back to the top of the forum... in hopes someone can answer them._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_All in all_co_ keep doin_t_ what you do_co_ JC.  You_t_re blazing excellent trails_co_ in my opinion._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2014-09-04T14:53:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Wingnut_co__lt_/p_gt__lt_p_gt_When I have been going down new paths here as well as other places_co_ I have learned to expect that I do not get replies.  I never wait for a reply_co_ just keep on going.  I usually end up replying to myself.  Have been using this as a way of making notes to myself_co_ so I can refer to log files_co_ etc without having to keep everything._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Wish I could change the name of this topic for future though.  I got uvs from the variable name that David gave it in the original exporter.  It is meant to convey UV_t_s.  _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I actually know a lot about textures_co_ but from OpenCL.  There I used them as database tables / indexes.  Each texel represented open-high-low-close of a stock instead of red-green-blue-alpha._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Jeff_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2014-09-04T21:49:56Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I really appreciate this behaviour_dd_ Searching without waiting for a response!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]