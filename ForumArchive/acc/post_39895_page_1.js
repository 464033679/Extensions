[{"Owner":"hcmetal","Date":"2018-09-08T13:11:27Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi everyone.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have been trying to create a swaying curtain (indulging myself with archviz cliche _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_) in babylon js.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter digging around the internet and the forum_co_ I realized that advanced cloth / soft body simulation is not yet possible in babylon right now (please corret me if I_t_m wrong).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI studied _lt_strong_gt__lt_a data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/?do_eq_hovercard&amp_sm_referrer_eq_http%253A%252F%252Fwww.html5gamedevs.com%252Ftopic%252F21676-cloth-simulation-using-babylons-physics-engine%252F_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/10310-raananw/_qt_ rel_eq__qt__qt_ style_eq__qt_background-color_dd_transparent_sm_color_dd_inherit_sm__qt_ title_eq__qt_Go to RaananW_t_s profile_qt__gt_RaananW_lt_/a_gt__lt_/strong_gt__t_s wonderful cloth physics simulation demo and achieved interesting results. However_co_ with higher subdivisions (100 by 100 for example)_co_  the simulation is very slow.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I came up with the idea of trying to achieve a simpler_co_ pre-baked vertex animation using Morph in babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI simulated the curtain cloth in 3ds max_co_ baked the animation onto the mesh_co_ and created a sequence of meshes as morph targets.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThey look like this in max_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_curtainsmax.jpg.24a4ac287fa13f262d06e9d2a7999ca1.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19948_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/curtainsmax.jpg.24a4ac287fa13f262d06e9d2a7999ca1.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe simulated meshes are exported into a single .babylon file.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe first curtain is used as the main mesh and visible in the scene_co_ the other curtains are used as morph targets and invisible.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlayground_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#H1VSP6%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#H1VSP6#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow I_t_m having two problems morphing the curtain in babylon_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. Some of the faces of the mesh rotates in a funny way during the morph_co_ like this_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_curtainsbabylon.jpg.1560f184e5931ceae2b2bd24f0509fd6.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19949_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/curtainsbabylon.jpg.1560f184e5931ceae2b2bd24f0509fd6.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not sure if this is a problem with the meshes exported from max or the Morph function itself.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is one of them_co_ fresh out of max_dd_ _lt_a class_eq__qt_ipsAttachLink_qt_ data-fileid_eq__qt_19950_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_19950_qt_ rel_eq__qt__qt__gt_curtain100.obj_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. How to chain the morphs_co_ from one target to the next_co_ so we can have a longer and more interesting animation?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope someone can point me to the right direction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEdit_dd_  Here is the .babylon file incase the CDN doesn_t_t work_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ data-fileid_eq__qt_19951_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_19951_qt_ rel_eq__qt__qt__gt_curtains.zip_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Gijs","Date":"2018-09-09T14:41:38Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi hcmetal_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRegarding problem 1_co_ from the inspector in the playground_co_ you can see that _lt_em_gt_curtain1_lt_/em_gt_ has some faces meshed in a different way. Here is _lt_em_gt_curtain0_lt_/em_gt__dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_ _lt_/span_gt__lt_img alt_eq__qt_m2.png.98d993d949cad22eba9c87fe3714ea1c.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19960_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/m2.png.98d993d949cad22eba9c87fe3714ea1c.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd here_t_s _lt_em_gt_curtain1_lt_/em_gt__dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_m1.png.9bca4c4ce4eef2e41bfee1a633f5fb94.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_19961_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_09/m1.png.9bca4c4ce4eef2e41bfee1a633f5fb94.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo that_t_s why those faces are rotating.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-09-10T00:56:07Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/22401-gijs/?do_eq_hovercard_qt_ data-mentionid_eq__qt_22401_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/22401-gijs/_qt_ rel_eq__qt__qt__gt_@Gijs_lt_/a_gt__co_ thanks for your help.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will check the simulation and the obj exporter and try to fix the faces. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe inspector tool in PG is very convenient.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-09-12T08:27:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tFirst problem solved.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhen importing the curtain objects back into max (to use the babylon export extension)_co_ there is a little check box_dd_ _t_Retriangulate Polygons_t_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tUncheck it_co_ no more wierd face re-mesh. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tUpdated PG_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#H1VSP6%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#H1VSP6#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ onto the second challenge...\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-09-12T10:39:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThe morph manager supports several entries which can all be combined.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs a sample (it looks terrible but you could grasp the code to mix the targets_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#H1VSP6%234_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#H1VSP6#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope that helps\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2018-09-12T15:15:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI do not use BJS morphing_co_ but I know what is a problem with morphing in general_co_ that you are at least partially experiencing.  Unless you animate every frame_co_ or have some kind of rate algorithm for every vertex_co_ morphing is linear.  This can produce some interpolated frames which are wrong for the real world.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is an _lt_a href_eq__qt_https_dd_//palmer-jc.github.io/scenes/QueuedInterpolation/finger_shapekeys/index.html_qt_ rel_eq__qt_external nofollow_qt__gt_here _lt_/a_gt_of converting finger gestures to morph targets.  Do some gestures_co_ THEN increase the morph time.  It is harder to un-see after slowing down something which looks _t_fine_t_ prior.  Fingers do not actually bend like that. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn this specific example_co_ I have made the trade-off of ditching like 40 bones_co_ but cannot do slow morphs.  With drapes / cloth in general_co_ it looks really impressive to slow things down.  I cannot help you_co_ but hope at least your question was solved.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-09-13T23:40:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt__co_ thanks for your help! I_t_m a total beginner to programming and your code has taught me something cool with the time control function.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGoing further_co_ I would like to change the morphing effect from_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_0-1-0-2-0-3-0-4-0-5-0_qt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tto_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_qt_0-1-2-3-4-5-4-3-2-1-0_qt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe I can set up a sequency of morphs like _qt_0-1_qt__co_ _qt_1-2_qt__co_ etc and try to hide the _qt_0_qt_ at the end frame of the _qt_0-1_qt_ morph and display the _qt_1-2_qt_ morph and so on.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope I am making sense here._lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will give it a try soon.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-09-13T23:49:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/?do_eq_hovercard_qt_ data-mentionid_eq__qt_8492_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/8492-jcpalmer/_qt_ rel_eq__qt__qt__gt_@JCPalmer_lt_/a_gt__co_ thanks for your insight. I agree with your idea about morphing. \n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor me_co_ morphing is a _qt_last-resort_qt_ method when other options are not viable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn this particular case_co_ if the curtain is in the background and serving as a secondary element_co_ loosing some realism may be acceptable.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf one day Babylon has native soft body simulation (praying for it...)_co_ I can do without all this morphing. Too much importing and exporting with 3ds max_co_ haha.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]