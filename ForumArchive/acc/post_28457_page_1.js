[{"Owner":"pichayuth","Date":"2017-02-15T08:33:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have imported mesh from Blender which is basic box.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI want to update mesh vertices positions each time I click the mesh_co_ so I will get a random new shape from the imported mesh. (modify the existing mesh to get new one)\n_lt_/p_gt_\n\n_lt_p_gt_\n\tthis is the import mesh code _lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_ _lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_ var m_lt_br /_gt_\n\t    BABYLON.SceneLoader.ImportMesh(_t__t__co_ _t_mesh/Box/_t__co_ _t_Box.babylon_t__co_ scene_co_ function (meshes_co_ particleSystems) {_lt_br /_gt_\n\t        m _eq_ meshes[0]_sm__lt_br /_gt_\n\t        m.isVisible _eq_ true_sm__lt_br /_gt_\n\t        var temp _eq_ m.getVerticesData(BABYLON.VertexBuffer.PositionKind)_sm__lt_br /_gt_\n\t        var count _eq_ 0_sm__lt_br /_gt_\n\t        for (var i _eq_ 0_sm_ i &lt_sm_ temp.length / 3_sm_ i++) {_lt_br /_gt_\n\t            var arr _eq_ BABYLON.Vector3.FromArray(temp_co_ count)_sm__lt_br /_gt_\n\t            count +_eq_ 3_sm__lt_br /_gt_\n\t            console.log(arr)_sm__lt_br /_gt_\n\t        }_lt_br /_gt_\n\t    })_lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEach time I click_co_ I try to change its color first and it worked and call updateMeshPositions. after calling updateMeshPositions_co_ I log out the new positions and all positions is already changed_co_ but the mesh look the same.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_var positionFunction _eq_ function (positions) {_lt_br /_gt_\n\t        for (var i _eq_ 0_sm_ i &lt_sm_ positions.length_sm_ i++) {_lt_br /_gt_\n\t            if (i % 2 _eq__eq__eq_ 0)_lt_br /_gt_\n\t                positions_lt_em_gt_ *_eq_ 2_sm__lt_/em_gt__lt_br /_gt__lt_em_gt_            if (i % 3 _eq__eq__eq_ 0)_lt_/em_gt__lt_br /_gt__lt_em_gt_                positions_lt_/em_gt__lt_em_gt__lt_em_gt_ *_eq_ 4_sm__lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_        }_lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_    }_sm__lt_/em_gt__lt_/em_gt__lt_/span_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt__lt_em_gt__lt_em_gt_    scene.onPointerDown _eq_ function (evt_co_ pick) {_lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_        if (pick.pickedMesh) {_lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_            var material _eq_ new BABYLON.StandardMaterial(_t_mat1_t__co_ scene)_sm__lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_            material.emissiveColor _eq_ new BABYLON.Color3(0_co_ 1_co_ 0)_sm__lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_            pick.pickedMesh.material _eq_ material_sm__lt_/em_gt__lt_/em_gt__lt_/span_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt__lt_em_gt__lt_em_gt_            m.updateMeshPositions(positionFunction_co_ true)_sm__lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_            temp _eq_ m.getVerticesData(BABYLON.VertexBuffer.PositionKind)_sm__lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_            console.log(temp)_sm__lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_        }_lt_/em_gt__lt_/em_gt__lt_br /_gt__lt_em_gt__lt_em_gt_    }_sm__lt_/em_gt__lt_/em_gt__lt_/span_gt__lt_em_gt__lt_em_gt_ _lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt_I don_t_t understand that although the positions is changed but the mesh look the same. _lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt_Thank you_co_ every one in advance _lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_em_gt__lt_em_gt_Peace. _lt_/em_gt__lt_/em_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2017-02-15T09:21:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tYour mesh must be set as updatable.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-02-15T16:03:52Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyep_co_ but problem may be that coming from a .babylon that is always set to non-updateable.  For my source code generator for Blender_co_ I only generate update-able geometry source code when there are Blender shapekeys on the mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPerhaps_co_ get the geometry_co_ then do another setVerticesData().  This time setting last arg to true.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"pichayuth","Date":"2017-02-17T01:52:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tthank you jerome and JCPalmer\n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_163529_qt_ data-ipsquote-contentid_eq__qt_28457_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1487174632_qt_ data-ipsquote-userid_eq__qt_8492_qt_ data-ipsquote-username_eq__qt_JCPalmer_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tOn 2/15/2017 at 11_dd_03 PM_co_ JCPalmer said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tPerhaps_co_ get the geometry_co_ then do another setVerticesData().  This time setting last arg to true.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tdid you mean after loading the mesh in_co_ I crate new Geometry by using the mesh .getVerticesData(BABYLON.VertexBuffer.PositionKind) and set updatable to true_co_ am i understand it right? \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JCPalmer","Date":"2017-02-17T15:57:36Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyep. Checking_co_ .babylon files can set geometry to updateable (FYI_co_ incremental hardcoded as un-updateable).  Not sure what exporters support this other than BJS serializer (Blender does not right now).  Check with your exporter source.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAssuming it does not_co_ doing a new setVerticesData() from the results of a getVerticesData() would seem to be required.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"pichayuth","Date":"2017-02-18T06:53:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_em_gt_Thank you JCPalmer_lt_/em_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will take a look at .babylon and maybe exporter_co_ but what I have done now is_co_ I called updateMeshPositions to update the vertices and get those vertices and setVerticesData._lt_br /_gt_\n\tThe mesh is changed_co_ but I don_t_t know if this is the best way to update it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_br /_gt_\n\t            _lt_span style_eq__qt_color_dd_#e74c3c_sm__qt__gt_m.updateMeshPositions(positionFunction_co_ true)_sm__lt_br /_gt_\n\t            var temp _eq_ m.getVerticesData(BABYLON.VertexBuffer.PositionKind)_sm__lt_br /_gt_\n\t            m.setVerticesData(BABYLON.VertexBuffer.PositionKind_co_ temp_co_ true)_sm__lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]