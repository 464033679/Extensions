[{"Owner":"max123","Date":"2016-11-19T22:19:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI have a character_co_ a target (a box attached to a camera) and wall. For some reason_co_ when Target is behind Wall_co_ Character can still see the bloody Target!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWhat_t_s the correct way of using pickWithRay? Is there a way to visualize rays_co_ e.g. draw a line?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-19T22:35:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIt is better if you send a Playground of your bloody shooting demo _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThere is a predicate function with this method. And you have in parameter the mesh hitten.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfunction predicate (mesh){\n_lt_/p_gt_\n\n_lt_p_gt_\n\treturn mesh _eq__eq__eq_ target_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t}\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt will return true if the wall is not between in theory.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/2114-exclude-some-meshes-when-scenepicking/_qt_ rel_eq__qt__qt__gt_http_dd_//www.html5gamedevs.com/topic/2114-exclude-some-meshes-when-scenepicking/_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheck that your ray is well positioned (y &gt_sm_ 0)_co_ make a big wall to test.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI had some issues when I tried to pick a character_t_s mesh. When he turned_co_ the result was false because he_t_s skinny.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I attached an invisible box to him and it was ok.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSometimes the ray touched the character even behind wall but maybe it_t_s over now.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA debug function to draw the ray could be cool.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-------\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have a little question _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tis there a function to pick multiple objects with a ray and return an array of pickedMesh ? (like a bullet passing through several things)\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-20T06:25:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHeya getzel_co_ max_co_ and any other bloody readers.  _lt_img alt_eq__qt__sm_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ title_eq__qt__sm_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tG... I don_t_t think there IS a multi-hit ray... but... are you thinking what I am thinking?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYou mentioned predicate.  What if... you kept targeting the same mesh_co_ but you repeatedly change the ray_t_s origin/source mesh... to be the most recently-hit mesh?  Keep moving the ray launch-point... to the hit mesh... and fire again.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tI think rays ALWAYS stop at the first hit.  But then... store that hit in a _qt_whichMeshHitSoFar_qt_ array_co_ then change the ray origin to the hit mesh_co_ and fire again.  Rinse and repeat... until the origin and the target are the same mesh.  No need to fire any more rays_co_ then.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan you imagine this?  5 mesh in a line_co_ try to fire ray from 1 to 5.  Ray hits mesh 2 (a blocker).  Push mesh2 into array_co_ move ray origin to mesh2_co_ and fire again.  Hits mesh3 (a blocker).  Store_co_ make it origin_co_ and fire again.... etc etc.  Lily pad hopping!  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_  Might work.  Sort of demented_co_ so likely fun!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCarpenter 1 needs the distance to carpenter 5.  But while he is extending his tape measure towards C5_co_ it hits carpenter 2 and is blocked.  So C1 asks C2 to pull the measuring tape (and spool) to himself_co_ and continue measuring _qt_down the line_qt_.  C2 gathers the tape and spool_co_ and then extends the tape measure towards C5_co_ but it hits carpenter 3... etc_co_ etc_co_ etc.  heh.  Goofy.  Hand-along tape measuring.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-20T09:55:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThx Wingnut.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI already thought about that._lt_br /_gt_\n\tA function pickAllWithRay in Babylon would be cool. There is already one doing this in Three.js._lt_br /_gt_\n\tI dont know if its with your algorithm or something else more obscure.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"max123","Date":"2016-11-20T10:15:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHey_co_ bloody babylonians _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18592-getzel/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18592_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18592-getzel/_qt_ rel_eq__qt__qt__gt_@getzel_lt_/a_gt__co_ I_t_ll try to put together a PG - might take time though_dd_ in my game a Blender scene is loaded and then loads of objects get instanced and placed based on a json config with a bunch of coordinates. The Charecter (shooter) is then set to lookAt the camera_t_s box and runs PickWithRay to check if the target is in _t_line of sight_t_. Maybe here I_t_m doing something fishy?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/?do_eq_hovercard_qt_ data-mentionid_eq__qt_5733_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/5733-wingnut/_qt_ rel_eq__qt__qt__gt_@Wingnut_lt_/a_gt__co_ a cleaner solution would be an all-penetrating ray returning an array of pickedMesh objects ordered on hit-first basis. And that would be one bloody useful feature too!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-20T11:21:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tTry first on your side to make a simple scene with basic meshes (not loaded) and check if you have the same problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\tQuote\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\ta cleaner solution would be an all-penetrating ray returning an array of pickedMesh objects ordered on hit-first basis. And that would be one bloody useful feature too!\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tYea _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2016-11-20T13:39:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tMax123... um... you didn_t_t give many details but... could your parented-to-camera wall be see-through... because camera.minZ is set to high?  (just checking).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNah_co_ that doesn_t_t sound correct.  Target is parented to camera_co_ not wall.  hmm\n_lt_/p_gt_\n\n_lt_p_gt_\n\tYep_co_ Max needs to build us a playground... or go searching for picking ray examples with a bloody playground search.  _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-20T13:51:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThere will be blood on this topic.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img src_eq__qt_http_dd_//s1.lemde.fr/image/2008/02/26/644x322/1015686_3_3352_image-du-film-there-will-be-blood.jpg_qt_ class_eq__qt_ipsImage_qt_ alt_eq__qt_1015686_3_3352_image-du-film-there-will-_qt_ /_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-11-21T17:17:45Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPlease let me introduce_dd_ scene.multiPick and scene.multiPickWithRay_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#7CPS7_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#7CPS7_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHave a bloody day gentlemen!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-21T17:22:47Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tGreat_co_ thanks _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_ !\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"max123","Date":"2016-11-22T10:59:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tAwesome!!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"getzel","Date":"2016-11-24T19:47:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello dear friends !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere is a PG with a ray working _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1LZJEK%233_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#1LZJEK#3_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIt is without predicate so it picks the first mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAt the beginning_co_ it touches box2 before the elements get positionned so we can wait before launching the raycast() if we need.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAfter_co_ wall get touched_co_ then box2 and finally nothing once all mesh have moved away.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI don_t_t know if my math method is the best.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI made a raycast2 function with another method _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tfunction raycast2(){\n_lt_/p_gt_\n\n_lt_p_gt_\n\t    var vector1 _eq_ new BABYLON.Vector3(0_co_0_co_6)_sm__lt_br /_gt_\n\t    var vector2 _eq_ new BABYLON.Vector3(0_co_0_co_1)_sm__lt_br /_gt_\n\t    _lt_br /_gt_\n\t    var ray _eq_ new BABYLON.Ray(vector1_co_ vector2_co_ 100)_sm__lt_br /_gt_\n\t    ray _eq_ BABYLON.Ray.Transform(ray_co_ box1.getWorldMatrix())_sm_    // new method_co_ there is an another one to create a ray_lt_br /_gt_\n\t    _lt_br /_gt_\n\t    var raycast _eq_ scene.pickWithRay(ray_co_ null_co_ false)_sm__lt_br /_gt_\n\t    _lt_br /_gt_\n\t    if (raycast.hit){_lt_br /_gt_\n\t      console.log(raycast.pickedMesh.name)_sm__lt_br /_gt_\n\t    }else{_lt_br /_gt_\n\t      console.log(_t_no_t_)_sm__lt_br /_gt_\n\t    }\n_lt_/p_gt_\n\n_lt_p_gt_\n\t} // raycast2()\n_lt_/p_gt_\n\n_lt_p_gt_\n\t-----------------\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs it possible to make a draw ray function please (to debug) ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHow the Text2d works ? I can_t_t display it. A simple example is welcome.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"max123","Date":"2016-11-24T20:39:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tHey _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/18592-getzel/?do_eq_hovercard_qt_ data-mentionid_eq__qt_18592_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/18592-getzel/_qt_ rel_eq__qt__qt__gt_@getzel_lt_/a_gt__co_ nice to see I_t_m not alone basking in Rays of Babylon! I will check your solution when I get a minute._lt_br /_gt_\n\tMeanwhile_co_ I_t_ll raise you - the RayLine_dd__lt_br /_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#11NFGL%230_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#11NFGL#0_lt_/a_gt_\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]