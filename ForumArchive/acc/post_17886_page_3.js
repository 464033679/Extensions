[{"Owner":"jerome","Date":"2015-11-04T08:07:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt__gt__lt_div_gt__lt_p_gt_These suffer from the same depth-rendering/alpha issues as the standard particles_co_ correct?  From a single SPS_co_ the particles cannot be BEHIND something and also in-front-of something_co_ right?  errr._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you place a spacecraft in the center of that asteroid field_co_ all the particles will render BEHIND it or IN-FRONT-OF it (afore it?)... but they can_t_t be both?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_It_t_s a real mesh_co_ so the same depth-rendering and alpha blending than any other mesh !_lt_/p_gt__lt_p_gt_That_t_s the initial reason why I started to code this particle system_co_ what became then a solid particle system (why keep things planar when you can have them in 3D ? _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ )_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In other terms _dd_ your spaceship will have asteroids behind and in front of it_co_ but also on its left_co_ its right_co_ its top and bottom_co_ everywhere around  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-04T16:34:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Added doc about pickable (PR pending)_lt_/p_gt__lt_p_gt_and added visibility helpers (idem)_co_documented yet _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/pull/805_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Babylon.js/pull/805_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-05T10:44:24Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_doc updated _dd_ _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Documentation/blob/master/content/tutorials/03_Advanced/Solid_Particle_System.md_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Documentation/blob/master/content/tutorials/03_Advanced/Solid_Particle_System.md_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I still need to write the part about textures and colors_co_ and to add tonz of PG examples_co_ then it will be over._lt_/p_gt__lt_p_gt_I wish a native english speaker (or a native globish speaker_co_ if he exists) can edit and correct directly this doc then._lt_/p_gt__lt_p_gt_Let me know please if something is not understandable._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_When the last pending code PR about visibility helpers is merged_co_ I guess the first core full version of the SPS is now released _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-05T14:34:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hi gals &amp_sm_ guys_co__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Fed up with writing SPS docs (big effort for me to write in english)_co_ so I_t_m starting to code some PG .._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Remember that our SPS_co_ when set as immutable is the same than the ThreeJS BufferGeometry. So let_t_s redo what they did_lt_/p_gt__lt_p_gt_Here_t_s their big example online _dd_ _lt_a href_eq__qt_http_dd_//threejs.org/examples/webgl_buffergeometry.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//threejs.org/examples/webgl_buffergeometry.html_lt_/a_gt__lt_/p_gt__lt_p_gt_They did 160 000 triangles_co_ using a Phong Material to diffuse the light_co_ in one big mesh_co_ so one draw call only... read the code if you want._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Here_t_s the same with an immutable SPS in BJS _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%235_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#5_lt_/a_gt__lt_/p_gt__lt_p_gt_The code is quite shorter _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ (actually it_t_s in the core)._lt_/p_gt__lt_p_gt_I did 160 000 double-sided triangles also without any material_co_ one draw call also. The mesh isn_t_t updatable_co_ so VBO update under the hood._lt_/p_gt__lt_p_gt_Runs at FPS in my FF which is far more slower than Chrome for WebGL things on my computer (FF uses only one JS engine for all the browser tabs_co_ since Chrome or Edge use a engine thread per tab)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you want to stress the model_co_ change the var _qt_nb_qt_ at the line 16_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note that the PG environment itself_co_ which is also a JS program_co_ can have performance impacts on the demo you are running_co_ compared to the same demo ran alone_co_ outside the PG. The window size has also an impact on the FPS _dd_ the bigger_co_ the slower._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Well_co_ knowing all this_co_ let_t_s go for serious things _dd_ Chrome (linux guy) + 500 000 particles... yes_co_ half a million_lt_/p_gt__lt_p_gt__eq_&gt_sm_ 47 FPS if I look at the whole mesh and 60 FPS as soon as I zoom into the mesh_lt_/p_gt__lt_p_gt_not that bad _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2015-11-05T14:49:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Really awesome _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ Demo bookmarked !_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-05T15:31:51Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Let_t_s go on ..._lt_/p_gt__lt_p_gt_Now_co_ I turn my SPS from immutable to updatable and I remove the _lt_em_gt_positionFunction_lt_/em_gt_ parameter in the _lt_em_gt_addShape()_lt_/em_gt_ call._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I keep _lt_em_gt_myPositionFunction_lt_/em_gt_ with no change_co_ but I call it in _lt_em_gt_SPS.initParticles()_lt_/em_gt_ now at the line 41._lt_/p_gt__lt_p_gt_Then I call _lt_em_gt_initParticles()_lt_/em_gt_ and just once _lt_em_gt_setParticles()_lt_/em_gt_ before the render loop._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So I created an updatable SPS instead of an immutable one _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%237_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#7_lt_/a_gt__lt_/p_gt__lt_p_gt_Same perfs as long as I don_t_t do anything in the render loop._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Ok_co_ now I reduce the SPS to 20K particles because I_t_m starting to call _lt_em_gt_setParticles()_lt_/em_gt_ within the render loop._lt_/p_gt__lt_p_gt_I set some optimizers to skip some processes while computing everything and I call now _lt_em_gt_setParticles()_lt_/em_gt_ from the render loop also _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%238_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#8_lt_/a_gt__lt_/p_gt__lt_p_gt_What for to put _lt_em_gt_setParticles()_lt_/em_gt_ in the render loop ?_lt_/p_gt__lt_p_gt_Maybe to animate your particles ... just add a _lt_em_gt_SPS.updateParticle(particle)_lt_/em_gt_ function and give them a behavior _dd_ line 47 _eq_&gt_sm_ rotation_lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%239_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#9_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2015-11-05T15:40:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Very cool! Good job. I am sure there are alot of opportunities to use the SPS in the future_co_ so powerful and versatile._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_By the way_dd_ Can you make those particles flee from the cursor? Like the birds in this demo_dd_ _lt_a href_eq__qt_http_dd_//threejs.org/examples/canvas_geometry_birds.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//threejs.org/examples/canvas_geometry_birds.html_lt_/a_gt_ (they use some weird math that I don_t_t really understand_co_ but maybe you can _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ ) _lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-05T15:44:15Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_yes_co_ I think you can as you convert the cursor coordinates into World coordinates and then update the particle coordinates according to this_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_note this 3js is a canvas demo_co_ not a webgl one_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-05T15:57:21Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_cute with tiny pentagons also _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2310_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#10_lt_/a_gt_ _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_next demos maybe  from tomorrow (waiting for the last PR merge and PG update)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"adam","Date":"2015-11-05T16:18:48Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote data-ipsquote_eq__qt__qt_ class_eq__qt_ipsQuote_qt_ data-ipsquote-contentcommentid_eq__qt_104371_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentid_eq__qt_17886_qt_ data-ipsquote-username_eq__qt_iiceman_qt_ data-cite_eq__qt_iiceman_qt_ data-ipsquote-timestamp_eq__qt_1446738020_qt__gt__lt_div_gt__lt_div_gt__lt_p_gt_Very cool! Good job. I am sure there are alot of opportunities to use the SPS in the future_co_ so powerful and versatile._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_By the way_dd_ Can you make those particles flee from the cursor? Like the birds in this demo_dd_ _lt_a href_eq__qt_http_dd_//threejs.org/examples/canvas_geometry_birds.html_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//threejs.org/examples/canvas_geometry_birds.html_lt_/a_gt_ (they use some weird math that I don_t_t really understand_co_ but maybe you can _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_ )_lt_/p_gt__lt_/div_gt__lt_/div_gt__lt_/blockquote_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If you want to learn more about flocking behavior this source code is commented_dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_https_dd_//processing.org/examples/flocking.html_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//processing.org/examples/flocking.html_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_and this page explains the rules of flocking_dd__lt_/p_gt__lt_p_gt__lt_a href_eq__qt_http_dd_//gamedevelopment.tutsplus.com/tutorials/the-three-simple-rules-of-flocking-behaviors-alignment-cohesion-and-separation--gamedev-3444_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//gamedevelopment.tutsplus.com/tutorials/the-three-simple-rules-of-flocking-behaviors-alignment-cohesion-and-separation--gamedev-3444_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Temechon","Date":"2015-11-05T16:56:37Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Documentation is being pushed in production. Should be up in few minutes._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-05T17:04:43Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_vert y goût deux !_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt__lt_em_gt_Green it taste two !_lt_/em_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-06T09:57:58Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLet_t_s on go ... today _dd_ pickable particles !\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow_co_ I make little tetrahedrons instead of triangles.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMy SPS is not immutable and I don_t_t call _lt_em_gt_setParticles()_lt_/em_gt_ in the render loop _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2311_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#11_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSomething quite classical until now (I like to write _qt_classical_qt_ about something that is hardly released _lt_img alt_eq__qt__dd_P_qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ /_gt_ )_co_ ok ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tNow let_t_s make the SPS pickable at the line 34 _dd_\n_lt_/p_gt_\n\n_lt_pre class_eq__qt_ipsCode prettyprint prettyprinted_qt__gt_\n_lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ SPS _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_new_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ BABYLON_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span_gt_SolidParticleSystem_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_(_lt_/span_gt__lt_span class_eq__qt_str_qt__gt__t_SPS_t__lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__co__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ scene_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__co__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_{_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_isPickable_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__dd__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_true_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_})_sm__lt_/span_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tAfter the first call to _lt_em_gt_setParticles()_lt_/em_gt__co_ let_t_s call _lt_em_gt_refreshVisibleSize()_lt_/em_gt_ at the line 49 _dd_\n_lt_/p_gt_\n\n_lt_pre class_eq__qt_ipsCode prettyprint prettyprinted_qt__gt_\n_lt_span class_eq__qt_pln_qt__gt_SPS_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_refreshVisibleSize_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_()_sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_com_qt__gt_// updates the BBox for pickability_lt_/span_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tthe reason why is explained here _dd_ _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/overviews/Solid_Particle_System#pickable-particles_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//doc.babylonjs.com/overviews/Solid_Particle_System#pickable-particles_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tAt last_co_ let_t_s add a callback function onPointerDown at the line 55 _dd_\n_lt_/p_gt_\n\n_lt_pre class_eq__qt_ipsCode prettyprint prettyprinted_qt__gt_\n_lt_span class_eq__qt_pln_qt__gt_   scene_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_onPointerDown _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_function_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_(_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_evt_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__co__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ pickResult_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_)_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_{_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ faceId _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ pickResult_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_faceId_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_if_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_(_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_faceId _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_-_lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_1_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_)_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_{_lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_return_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm_}_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ idx _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ SPS_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_pickedParticles_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_faceId_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_idx_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ p _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ SPS_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_particles_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_idx_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]_sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    p_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_color_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_r _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_1_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    p_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_color_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_b _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_0_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    p_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_color_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_g _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_0_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    p_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_scale_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_x _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_5_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    p_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_scale_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_y _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_5_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    p_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_scale_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_z _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ _lt_/span_gt__lt_span class_eq__qt_lit_qt__gt_5_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    SPS_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_setParticles_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_()_sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_  _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_}_sm__lt_/span_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\t_lt_em_gt_faceId_lt_/em_gt_ is the SPS mesh picked face ID_co_ this is just a BJS feature about pickable meshes.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf nothing picked (-1) then return.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tElse_co_ you get in the _lt_em_gt_SPS.pickedParticles_lt_/em_gt_ array_co_ at the position _lt_em_gt_faceId_co_  _lt_/em_gt_an object telling you which particle was picked (its particle _lt_em_gt_idx_lt_/em_gt_) and what face of this particle was picked (its particle _lt_em_gt_faceId_lt_/em_gt_).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis objet is like this _dd_ _lt_span style_eq__qt_font-family_dd_tahoma_co_ geneva_co_ sans-serif_sm__qt__gt__lt_em_gt_{ idx_dd_ pickedParticleIdx_co_ faceID_dd_ pickedParticleFaceID } _lt_/em_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo to get the particle from the _lt_em_gt_SPS.particles_lt_/em_gt_ array_co_ just do this _dd_\n_lt_/p_gt_\n\n_lt_pre class_eq__qt_ipsCode prettyprint prettyprinted_qt__gt_\n_lt_span class_eq__qt_pln_qt__gt_    _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ idx _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ SPS_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_pickedParticles_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_faceId_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_idx_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__sm__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_    _lt_/span_gt__lt_span class_eq__qt_kwd_qt__gt_var_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ p _lt_/span_gt__lt_span class_eq__qt_pun_qt__gt__eq__lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_ SPS_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_._lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_particles_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_[_lt_/span_gt__lt_span class_eq__qt_pln_qt__gt_idx_lt_/span_gt__lt_span class_eq__qt_pun_qt__gt_]_sm__lt_/span_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tSo in this code_co_ we get the picked particle_co_ we turn it to red_co_ we scale it of 5 and we call _lt_em_gt_setParticles()_lt_/em_gt_ then to update the SPS mesh.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tclick any particle _dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2312_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#12_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tQuite easy_co_ isn_t_t it ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-06T10:10:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_What if now I want to give a behavior to my picked particles ?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Well_co_ always simple ..._lt_/p_gt__lt_p_gt_Just add _lt_em_gt_SPS.setParticles()_lt_/em_gt_ in the render loop_co_ no need to call it any longer in onPointerDown then._lt_/p_gt__lt_p_gt_Mark the picked particle as picked at the line 66_co_ this is a custom property that you add to the particle object _dd_ _lt_span style_eq__qt_font-family_dd__t_lucida sans unicode_t__co_ _t_lucida grande_t__co_ sans-serif_sm__qt__gt_p.picked _eq_ true_lt_/span_gt__sm__lt_/p_gt__lt_p_gt_And add an _lt_em_gt_updateParticle(particle)_lt_/em_gt_ function to your SPS at the line 69_lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_   SPS.updateParticle _eq_ function (particle) {       if (particle.picked) {           particle.rotation.x +_eq_ 0.01_sm_           particle.rotation.y +_eq_ 0.02_sm_           particle.rotation.z +_eq_ 0.01_sm_       }   }_lt_/pre_gt__lt_p_gt_That_t_s all _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2313_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#13_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_If 20K particles are too much for your browser_co_ try this lowered version with only 2000 objects _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2314_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#14_lt_/a_gt__lt_/p_gt__lt_p_gt_or with 200 here _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2315_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#15_lt_/a_gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-06T18:22:20Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_This is a really GREAT tool!_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-06T19:24:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Only great frameworks have great tools  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_wink.png_qt_ alt_eq__qt__sm_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/wink@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-07T09:30:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Based on the article linked in this Adam_t_s post _dd_ _lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/topic/17886-sps-on-the-go/?p_eq_104380_qt__gt_http_dd_//www.html5gamedevs.com/topic/17886-sps-on-the-go/?p_eq_104380_lt_/a_gt__lt_/p_gt__lt_p_gt_I tried to make a first attempt of flocking here _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2334_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#34_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The article algo was like this for n particles _dd__lt_/p_gt__lt_p_gt_- 3 * n² iterations each pass_lt_/p_gt__lt_p_gt_- some local temp var created each iteration_lt_/p_gt__lt_p_gt_- (I guess) a call per frame_co_ so 3 * n² iterations each frame_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I changed it a bit _dd__lt_/p_gt__lt_p_gt_- only four variables reused _dd_ GC friendly_lt_/p_gt__lt_p_gt_- a call each _lt_em_gt_delay_lt_/em_gt_ milliseconds _dd_ the flocking physics is decoupled now from the render loop_lt_/p_gt__lt_p_gt_- _lt_em_gt_pool * n_lt_/em_gt_ iterations each call only _dd_ _lt_em_gt_pool_lt_/em_gt_ is a variable that you set yourselft_co_ it_t_s the number of particles to compute each call_co_ it can obviously be equal to n_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Note that the flocking process needs to evaluate all the particle positions and velocities at once_co_ so if you set a _lt_em_gt_pool_lt_/em_gt_ value too low_co_ it will take a long time before the particles start to flock together. So it_t_s better_co_ from my experience_co_ not to have _lt_em_gt_pool_lt_/em_gt_ lower then n / 3._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_The same for _lt_i_gt_delay_lt_/i_gt_. Having a short delay (near the framerate) is not necessary._lt_/p_gt__lt_p_gt_But having a too long delay may_co_ especially if _lt_em_gt_pool_lt_/em_gt_ is different from n_co_ makes the particle  be slow to be aware of the positions of their neighbors._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_So a delay of 300 ms is still acceptable for pool _eq__eq_ n for instance_co_ but you will probably have to reduce it to 150 or 100 ms if pool is n / 2 or  /3_lt_/p_gt__lt_p_gt_Quite complex to tweak accurately as the total number of particles n has a big impact on the performance too._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I still need to add some particle rotation so they will be orientated to their velocity vector_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-09T10:40:14Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I added some steering for each particle now _dd_ _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#2FPT1A%2335_qt_ rel_eq__qt_external nofollow_qt__gt_http_dd_//www.babylonjs-playground.com/#2FPT1A#35_lt_/a_gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_They steer like their velocity vector_lt_/p_gt__lt_p_gt_Looks like an exotic aquarium _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-11-09T14:23:19Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Hey Jerome...  nice coding/art_co_ as always!_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Ok_co_ if I may steer the subject back to PICKING... have you thought about how ActionManager(s) might be involved in SPS?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Sprites recently got a _t_pickable_t_ feature_co_. and they were given _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Actions/babylon.actionManager.js#L33_qt_ rel_eq__qt_external nofollow_qt__gt_a special sprite helper func in the ActionManager_lt_/a_gt_.  (CreateNewFromSprite)  (new Action from a sprite pick)._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_There is also a (new?) _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Babylon.js/blob/master/src/Sprites/babylon.spriteManager.js#L70_qt_ rel_eq__qt_external nofollow_qt__gt_spriteManager intersect function_lt_/a_gt_ that seems to build a fully stocked pickingInfo in the line 105 area._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_All in all_co_ it LOOKS like sprites are actionManager-ready_co_ but I have no idea _lt_u_gt_where_lt_/u_gt_ we would put the ActionManager.  (on Scene or on the SpriteManager?)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Have you thought about ActionManagers with SPS?  I_t_m quite sure that the user could put an actionManager on each SPS particle mesh_co_ but that might be insane._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_IF actionManagers for SPRITES... is placed on SpriteManager objects... then this is the first time we have seen ActionManagers put on SYSTEMS (managers) and not on a mesh.  (although scene.actionManager is placed on a non-mesh_co_ too.)  _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Where ActionManagers are placed... might not be very important.  The main thing is feeding them_co_ I suppose._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Do you foresee ParticleSystem and SolidParticleSystem allowing an actionManager on the SYSTEM (on the manager)?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_And_co_ if you do decide to figure a way to add a single_co_ centralized ActionManager in SPS... will you be pondering a similar system for standard particles?  Do you think Standard Particles will follow the way of Sprites (because of the dynamic vertex buffers of both)? _lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Would a (single centralized) SPS ActionManager feature be substantially different from sprites and standard particles?_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_You don_t_t have answer any of that.  I guess I_t_m just asking for your thoughts on SPS ActionManagers and have you thought about generating ActionEvent.CreateNewFromParticle() for SPS... similar to the way sprite picks do?  Any thoughts?  (thx)_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_PS_dd_  Has anyone tortured the new array.filter thing?  Is it fast?  Can it be used in customUpdate funcs to... you know... do stuff to CERTAIN particles and not to others?  Tags system on steroids?  hmm.  Iterating the particles array FAST... is probably important in custom particle update funcs.  Just curious if we got some speed increase with array.filter (vs. for-in/for-each)._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-09T16:11:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_Good question_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I don_t_t anything about ActionManagers actually. I need to check how this works_co_ what it is intended for_co_ etc  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_In the SPS_co_ you can give a behavior depending on each particle if you want as _lt_em_gt_updateParticle(particle)_lt_/em_gt_ is call for each particle and you can then access some internal particle properties _dd_ idx (id)_co_ shapeId (its shape id)_co_ of course some essential properties (position_co_ velocity_co_ color_co_ uvs) and even the hypothetical properties you would have added by your own (age_co_ class_co_ whatever ...)_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2015-11-09T18:56:18Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_For sprites (from what_t_s new)_dd__lt_/p_gt__lt_ul_gt__lt_li_gt_Sprites now can be _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#1XMVZW%234_qt_ rel_eq__qt_external nofollow_qt__gt_picked_lt_/a_gt_ and can use _lt_a href_eq__qt_http_dd_//www.babylonjs-playground.com/#9RUHH%234_qt_ rel_eq__qt_external nofollow_qt__gt_actions_lt_/a_gt_ (_lt_a href_eq__qt_https_dd_//github.com/deltakosh_qt_ rel_eq__qt_external nofollow_qt__gt_deltakosh_lt_/a_gt_)_lt_/li_gt__lt_/ul_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-09T19:37:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_I just took a quick look at array.filter_lt_/p_gt__lt_p_gt_Whatever its speed_co_ I would use it neither in the render loop_co_ neither in a particle system iteration because it creates a new array each call._lt_/p_gt__lt_p_gt_Allocating new objects is really a problem when dealing with big sizes (many particles)_co_ numerous calls (iterations on a particle array) or with the render loop._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_Trust me from my numerous tests and profiling for the SPS _dd_ the GC is no longer your friend when it has to clean everything you_t_ve just created by hundreds of thousands._lt_/p_gt__lt_p_gt_In other terms _dd_ you need to balance each function speed performance by its memory performance._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BTW_co_ I guess I need to have a talk with DK about this_co_ because I noticed that there are many places in the core where we can get some gain (reducing the use of temporary variables in many math or vector tools _dd_ performance vs readibility). Nothing perceptible on a single per frame_co_ but with a real effect on thousands of calls per frame._lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_BTW2 _dd_ I guess the SPS_co_ first version_co_ is now finished. I still need to complete the (long) documentation and code some more examples_co_ then I_t_ll do an announcement_co_ with trumpets and flags of course  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_tongue.png_qt_ alt_eq__qt__dd_P_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/tongue@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt__lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-09T23:36:32Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_about ActionManager and SPS_lt_/p_gt__lt_p_gt_ _lt_/p_gt__lt_p_gt_I didn_t_t check but_co_ as the SPS is a standard mesh_co_ it should work directly like for any other mesh _dd__lt_/p_gt__lt_pre class_eq__qt_ipsCode prettyprint_qt__gt_var mesh _eq_ SPS.mesh_sm_mesh.actionManager _eq_ new BABYLON.ActionManager(scene)_sm__lt_/pre_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Wingnut","Date":"2015-11-10T12:51:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_nod.  Yeah_co_ the more I think about it_co_ the more it seems that the actions available on ActionManagers... are not appropriate for SPS (other than the ExecuteCodeAction).  Forget I mentioned it.  _lt_img src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ alt_eq__qt__dd_)_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ width_eq__qt_20_qt_ height_eq__qt_20_qt__gt_  And yes_co_ I_t_m sure an actionManager on each SPS particle would work just fine_co_ if ever wanted._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2015-11-10T13:09:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_The SPS action manager is its mesh one._lt_/p_gt__lt_p_gt_So only one action manager for the whole mesh_co_ what you call centralized. It_t_s not _lt_em_gt_by particle_lt_/em_gt_._lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]