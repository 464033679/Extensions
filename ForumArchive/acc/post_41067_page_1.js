[{"Owner":"timetocode","Date":"2018-11-06T01:40:06Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_m trying to cast some shadows from a voxely mesh onto itself_co_ and I seem to be getting a bit of light right at the base of the shadows. Any idea how to fix?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFirst picture is the shadows in their simplest mode before any blurring_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.ac839d78ce378cdcb8f59d3368455758.png_qt_ data-fileid_eq__qt_20793_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20793_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.thumb.png.c68a00b6299dfa1f7c309511d649d1c6.png_qt_ alt_eq__qt_image.thumb.png.c68a00b6299dfa1f7c309511d649d1c6.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnd here are some shadows with all of the effects_co_ which causes even more light to appear_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.5af493cc67defaddb02ce9fe959ad29a.png_qt_ data-fileid_eq__qt_20794_qt_ rel_eq__qt__qt__gt__lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20794_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.thumb.png.0b0f58b94a5f382af5539ea08ffdc559.png_qt_ alt_eq__qt_image.thumb.png.0b0f58b94a5f382af5539ea08ffdc559.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m not sure how to reproduce it in the playground.  I got my shadows just by copying and pasting the ShadowGenerator from the shadow demo_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#FH3FM2_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#FH3FM2_lt_/a_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tIn the shadow demo there is no problem_co_ the shadow goes right to the foot of the columns without any light appearing underneath. My scene is one single mesh_co_ so I tried merging the ground and the columns in the shadow demo but that didn_t_t reproduce it either. Here is the merged_dd_  _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#FH3FM2%2312_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#FH3FM2#12_lt_/a_gt_  Any ideas?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"trevordev","Date":"2018-11-06T18:13:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_span_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/12667-timetocode/?do_eq_hovercard_qt_ data-mentionid_eq__qt_12667_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/12667-timetocode/_qt_ rel_eq__qt__qt__gt_@timetocode_lt_/a_gt__lt_/span_gt_ Would you be able to share your model file? It sounds like its the only think that is different between the playground you used and your repro. Off the top of my head there might be an issue when using low resolution shadows with small objects. Also you could try raising/lowering your model closer to the ground.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"timetocode","Date":"2018-11-06T23:08:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve made a smaller model to share. The whole scene is one mesh I believe.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s the preview in MagicaVoxel\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_image.png.9e76f52d5396aa0976bfd09147c923cf.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20825_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.9e76f52d5396aa0976bfd09147c923cf.png_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHere_t_s in-engine on the shadow side_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_20826_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.png.ace31fe5694a5becefc1c3a5c3e931ce.png_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_image.thumb.png.ce2072d771da3516dc398ba01ed5b7f0.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20826_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/image.thumb.png.ce2072d771da3516dc398ba01ed5b7f0.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tModel loading_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_BABYLON.SceneLoader.LoadAssetContainer(_qt_./_qt__co_ _qt_test.obj_qt__co_ this.scene_co_ (container) _eq_&gt_sm_ {\n    // shrink model to half size_co_ offset to edge instead of midpoint\n    // i think there_t_s only one mesh\n    container.meshes.forEach(mesh _eq_&gt_sm_ {\n        mesh.position.x +_eq_ (16 * 0.25)\n        mesh.position.z +_eq_ (16 * 0.25)\n        mesh.scaling.z _eq_ -0.5\n        mesh.scaling.y _eq_ 0.5\n        mesh.scaling.x _eq_ 0.5\n        shadowGenerator.addShadowCaster(mesh)\n        mesh.receiveShadows _eq_ true\n    })\n        container.addAllToScene()\n\n}_co_ null_co_ function (err) {\n    console.log(_t_err_t__co_ err)\n})_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThe shadows and lights in the scene_dd_\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_this.engine _eq_ new BABYLON.Engine(this.canvasEle_co_ true)\nthis.scene _eq_ new BABYLON.Scene(this.engine)\nthis.scene.collisionsEnabled _eq_ true\nthis.scene.clearColor _eq_ new BABYLON.Color4(0.3_co_ 0.5_co_ 0.75_co_ 1.0)\nthis.scene.fogMode _eq_ BABYLON.Scene.FOGMODE_EXP\nthis.scene.fogDensity _eq_ 0.001\nthis.camera _eq_ new BABYLON.TargetCamera(_t_camera_t__co_ new BABYLON.Vector3(0_co_ 0.5_co_ 0)_co_ this.scene)\nthis.camera.minZ _eq_ 0.1\nthis.screenShake _eq_ BABYLON.Vector3.Zero()\n\nvar light _eq_ new BABYLON.DirectionalLight(_qt_dir01_qt__co_ new BABYLON.Vector3(1_co_ -1.5_co_ 1.25)_co_ this.scene)_sm_\nlight.position _eq_ new BABYLON.Vector3(1_co_ 40_co_ 1)\nlight.intensity _eq_ 1\n\nvar light2 _eq_ new BABYLON.HemisphericLight(_t_h_t__co_ new BABYLON.Vector3(0_co_ 1_co_ 0)_co_ this.scene)\nlight2.intensity _eq_ 0.33\n\nvar shadowGenerator _eq_ new BABYLON.ShadowGenerator(1024_co_ light)\nshadowGenerator.bias _eq_ 0.001\nshadowGenerator.normalBias _eq_ 0.02\nlight.shadowMaxZ _eq_ 200\nlight.shadowMinZ _eq_ 10\nshadowGenerator.useContactHardeningShadow _eq_ true\nshadowGenerator.contactHardeningLightSizeUVRatio _eq_ 0.05\nshadowGenerator.setDarkness(0.1)_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tThe model exported from magicavoxel produces 3 files_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\ttest.obj_co_ test.mtl_co_ test.png which are attached\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m probably doing something else wrong with the shadows too_co_ because there seem to be 5 shadows in the image while there are only 4 areas of raised voxels_co_ though maybe that is unrelated.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m open to other options as well.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks for taking a look _lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t.obj attachments_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/test.png.c077581506cfe271a8d28ce8f0ea13ab.png_qt_ data-fileid_eq__qt_20830_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_test.png_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20830_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_11/test.png.c077581506cfe271a8d28ce8f0ea13ab.png_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_20828_qt_ data-fileid_eq__qt_20828_qt_ rel_eq__qt__qt__gt_test.mtl_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_20829_qt_ data-fileid_eq__qt_20829_qt_ rel_eq__qt__qt__gt_test.obj_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]