[{"Owner":"hcmetal","Date":"2018-10-06T07:35:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHello everyone_co_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have been struggling with a strange problem exporting scene from 3ds Max to Babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSome of the meshes end up having strange see-through effects in babylon_co_ like this (you can see the wall and floor in the other room)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_20404_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/scrs03.jpg.06442322f7a3c2093374d8881ed41f66.jpg_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_scrs03.thumb.jpg.9dd8545a696fbeecd7e5afd7d2e73baa.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20404_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/scrs03.thumb.jpg.9dd8545a696fbeecd7e5afd7d2e73baa.jpg_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tExperimenting with the materials_co_ I found that_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWithout albedo / basecolor map_co_ the effect is gone (check out the slates on the ground_co_ they are looking normal)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_20405_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/scrs01.jpg.ae0fbcc0b116735164d3adc3f7c272c5.jpg_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_scrs01.thumb.jpg.db0df258b9eeca4b166e505aa788f3d6.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20405_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/scrs01.thumb.jpg.db0df258b9eeca4b166e505aa788f3d6.jpg_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWith albedo / basecolor map_co_ strange see-through effect happens (you can see the hidden faces of the slates_co_ giving the illusion of steps)_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a class_eq__qt_ipsAttachLink ipsAttachLink_image_qt_ data-fileid_eq__qt_20406_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/scrs02.jpg.2a1a96af195eb9c136f5e4d5fe3b1610.jpg_qt_ rel_eq__qt__qt__gt__lt_img alt_eq__qt_scrs02.thumb.jpg.83b5fa83b2ffe369eeb8da70d5c090b6.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20406_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/scrs02.thumb.jpg.83b5fa83b2ffe369eeb8da70d5c090b6.jpg_qt_ /_gt__lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRelated information_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. 3ds max 2017\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Max2Babylon 1.3.0\n_lt_/p_gt_\n\n_lt_p_gt_\n\t3. Metallic/Roughness PBR workflow. All materials in max are physical materials\n_lt_/p_gt_\n\n_lt_p_gt_\n\t4. Meshes have 2 uv channels with occlusionTexture (AO) on channel 2\n_lt_/p_gt_\n\n_lt_p_gt_\n\t5. Meshes both with and without multi-material might have this problem (as far as I can see_co_ this effect is pretty random)\n_lt_/p_gt_\n\n_lt_p_gt_\n\t6. In the see-through_co_ only the surfaces with alebedo / basecolor maps can be seen_co_ surfaces defined by color properties cannot be seen\n_lt_/p_gt_\n\n_lt_p_gt_\n\t7. The see-through happens after a certain glaring angle_co_ meaning if looking straight / perpendicular at the surface there is no see-throught_co_ however as the line of sight gets more parallel to the surface to a certain degree_co_ see-through happens.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHas anyone had similar problems?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope someone can point me to the right direction.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks a lot!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t[Edit] -  Further discovery_dd_ converting the problematic albedo / basecolor maps from .jpg to .png in photoshop solved the problem. There must be something wrong with the .jpg file or some compatibility issue somewhere in the pipeline. I have attached the .jpg files_co_ maybe they are overly compressed?\n_lt_/p_gt_\n\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/slate_albedo.jpg.4a5d1a1fa6680edf127d5cc61a14f984.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_20418_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/slate_albedo.jpg.4a5d1a1fa6680edf127d5cc61a14f984.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_slate_albedo.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a href_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/tile_dark_albedo.jpg.d52f7f35b1069f5faa78c57f992bb04a.jpg_qt_ class_eq__qt_ipsAttachLink ipsAttachLink_image_qt__gt__lt_img data-fileid_eq__qt_20416_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/tile_dark_albedo.jpg.d52f7f35b1069f5faa78c57f992bb04a.jpg_qt_ class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ alt_eq__qt_tile_dark_albedo.jpg_qt__gt__lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-10-07T00_dd_16_dd_10Z_t_ title_eq__t_10/07/2018 12_dd_16  AM_t_ data-short_eq__t_Oct 7_t__gt_October 7_lt_/time_gt_ by hcmetal_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-10-06T14:01:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPinging _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30070_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/_qt_ rel_eq__qt__qt__gt_@kcoley_lt_/a_gt_ and _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32589-patrickryan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32589_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32589-patrickryan/_qt_ rel_eq__qt__qt__gt_@PatrickRyan_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"PatrickRyan","Date":"2018-10-08T17:15:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32476_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/_qt_ rel_eq__qt__qt__gt_@hcmetal_lt_/a_gt_ thank you for attaching the jpg files. Would you be able to post a Max file and your output file (Babylon or glTF) so that we can diagnose the whole chain to determine what is happening? If you have a playground with the issue appearing_co_ that would also help repro the issue. I appreciate the help and we will get back to you asap on a solution. \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-09T01:41:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32589-patrickryan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32589_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32589-patrickryan/_qt_ rel_eq__qt__qt__gt_@PatrickRyan_lt_/a_gt__co_ thanks for your reply. I have good news and bad news.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tGood news is as I tried to use the old .jpg albedo maps today_co_ the see-through doesn_t_t happen in babylon any more.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBad news is I cannot even reproduce the problem myself_lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_. Maybe this is one of those legendary _qt_3ds-max mythical weirdnesses_qt_.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAnyway I have attached the max and the babylon file. Sorry I cannot provide all the textures because of copy-right issues_co_ but we are free to experiment with the max scene and the .jpg files attached earlier.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope this will help with the diagnosis. Even if we cannot catch it this time_co_ I will be on the look out and report future occurrences.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPlease let me know if you find anything interesting.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers!\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_20438_qt__gt_handson01_opt_multimat_diagnose.zip_lt_/a_gt__lt_/p_gt_\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_20439_qt__gt_hotel.babylon_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-09T03:45:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tOk_co_ guys. It is happening again_co_ like a ghost.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20441_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/plantcase.jpg.df28678c28cd912f6880aeb13879be0c.jpg_qt_ alt_eq__qt_plantcase.jpg.df28678c28cd912f6880aeb13879be0c.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSame story here_co_ change the .jpg albedo map to .png format_co_ the see-through is gone.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI will definitely PG this today.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-09T05:05:35Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI created a PG with only the case and the .jpg file as albedo_co_ the see-through dosen_t_t happen this time...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPG_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#AASQVX_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#AASQVX_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tNotice that Babylon version in the PG (v4.0.0-alpha2) is different from my local project (v3.3.0-rc.4).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-09T12:21:01Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHere is a new PG with problematic mesh faces on the bamboo model_co_ they are inverted and penetrating each other_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RXQXIY%231_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RXQXIY#1_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage ipsImage_thumbnailed_qt_ data-fileid_eq__qt_20450_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/monthly_2018_10/bamboo.jpg.d4ee4e99434dd75c5b3fec7d59875c25.jpg_qt_ alt_eq__qt_bamboo.jpg.d4ee4e99434dd75c5b3fec7d59875c25.jpg_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis might be caused by the fact that the albedo map has alpha information to make the leaves transparent.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBecause the leaves are single faced_co_ I set mesh.material.backFaceCulling _eq_ false_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIf culling is set to true_co_ the invertion is gone but the z-order of the faces are still wrong.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis might lead to a new problem with transparent albedo maps...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI have also attached the max files and related textures for anyone who is interested in having a look.\n_lt_/p_gt_\n\n_lt_p_gt__lt_a class_eq__qt_ipsAttachLink_qt_ href_eq__qt_//www.html5gamedevs.com/applications/core/interface/file/attachment.php?id_eq_20451_qt__gt_bamboo_diagnose.zip_lt_/a_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"V!nc3r","Date":"2018-10-09T13:19:17Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIn the 3dsMax exporter_co_ have you the choice of material shader conversion? Because issue is gone when using a _lt_em_gt_PBRMaterial_lt_/em_gt_ _lt_span_gt__lt_span_gt__dd__lt_/span_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RXQXIY%232_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RXQXIY#2_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCan_t_t going further_co_ my max version is too old here _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_[edit]_lt_/span_gt_ A quick-and-dirty fix on your playground could be to set _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.pbrmaterial#transparencymode_qt_ rel_eq__qt_external nofollow_qt__gt_transparencyMode _lt_/a_gt_to alpha_test_co_ but_co_ not really satisfaying _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RXQXIY%233_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RXQXIY#3_lt_/a_gt_ [/edit]\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-10-09T13_dd_21_dd_34Z_t_ title_eq__t_10/09/2018 01_dd_21  PM_t_ data-short_eq__t_Oct 9_t__gt_October 9_lt_/time_gt_ by V!nc3r_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-09T14:08:34Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20526_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/_qt_ rel_eq__qt__qt__gt_@V!nc3r_lt_/a_gt__co_ thanks for your help!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tRe-assigning the material in babylon does solve the problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever_co_ as I try to understand the docs_dd_ _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/resources/3dsmax_to_gltf#pbr-materials_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/resources/3dsmax_to_gltf#pbr-materials_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tPhyiscal materials (or any exporter supported shader types) in max are converted to PBRMaterials in babylon_co_ and there doesn_t_t seem to be an option of material conversion in the exporter.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo my understanding is that materials should be converted to (and only to) PBR through the exporter automatically.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tMaybe something goes wrong during the export and re-assigning the PBR clears the problem.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis provides a partial but nevertheless practical solution to the problem_dd_ Even if the export is sometimes problematic and unpredictable_co_ I can always wirte some batch-material-re-assigning code to _qt_refresh_qt_ them.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThanks again!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"V!nc3r","Date":"2018-10-09T14:24:59Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tIf I_t_m not wrong_co_ by seeing the inspector in your playground\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img alt_eq__qt_dCVQSI6.png_qt_ class_eq__qt_ipsImage_qt_ height_eq__qt_750_qt_ src_eq__qt_https_dd_//i.imgur.com/dCVQSI6.png_qt_ style_eq__qt_width_dd_200px_sm_height_dd_auto_sm__qt_ width_eq__qt_339_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tit seems that the 3dsMax exporter use _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.pbrmetallicroughnessmaterial_qt_ rel_eq__qt_external nofollow_qt__gt_PBRMetallicRoughnessMaterial_lt_/a_gt_ and not _lt_a href_eq__qt_http_dd_//doc.babylonjs.com/api/classes/babylon.pbrmaterial_qt_ rel_eq__qt_external nofollow_qt__gt_PBRMaterial_lt_/a_gt__co_ maybe it_t_s a lead to follow? Test on the playground get the bug too_dd_ _lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RXQXIY%234_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RXQXIY#4_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo it seems that you may spotted a bug on the PBRMetallicRoughnessMaterial shader _lt_span_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/span_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_span_gt_[edit] you may try with the gltf format instead of babylon? [/edit]_lt_/span_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t\t\t\n\n_lt_span class_eq__t_ipsType_reset ipsType_medium ipsType_light_t_ data-excludequote_gt_\n\t_lt_strong_gt_Edited _lt_time datetime_eq__t_2018-10-09T14_dd_28_dd_15Z_t_ title_eq__t_10/09/2018 02_dd_28  PM_t_ data-short_eq__t_Oct 9_t__gt_October 9_lt_/time_gt_ by V!nc3r_lt_/strong_gt_\n\t\n\t\n_lt_/span_gt_\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-09T14:50:44Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWow_co_ thanks so much! \n_lt_/p_gt_\n\n_lt_p_gt_\n\tI never realized that these are actually two different things in babylon.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tWill try gltf tomorrow and report back_lt_img alt_eq__qt__dd_D_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_biggrin.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/biggrin@2x.png 2x_qt_ title_eq__qt__dd_D_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-10-09T15:07:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tPinging _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt_\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-10-09T15:22:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tSo_co_ the issue probably comes from the exporters as the materials as flagged as alpha blend. It would normally be the result of placing the alpha source to alpha in 3DS Max.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30070_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/_qt_ rel_eq__qt__qt__gt_@kcoley_lt_/a_gt_ Could you double check that the setup is correct ?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-10T01:10:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt__co_ thanks!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs shown in this PG_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//playground.babylonjs.com/#RXQXIY%235_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//playground.babylonjs.com/#RXQXIY#5_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI changed the .png albedo map_t_s alpha source from _qt_Image Alpha_qt_ to _qt_None (Opaque)_qt_ in Max and the Z-sorting / face invertion problems are gone.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHowever the transparency of the leaves are gone too...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo maybe I have to use alpha-blend?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-10-10T12:41:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tThanks_co_ it looks like a bug in the exporter cause the transparency mode is always set to Blend to deal with transparency whereas in your case where you want a simple mask it should be set to alpha test_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Exporters/blob/5b711de23a41f26206559dc32bad73eeeb9c77e0/3ds%20Max/Max2Babylon/Exporter/BabylonExporter.Material.cs#L383_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Exporters/blob/5b711de23a41f26206559dc32bad73eeeb9c77e0/3ds Max/Max2Babylon/Exporter/BabylonExporter.Material.cs#L383_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30070_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/_qt_ rel_eq__qt__qt__gt_@kcoley_lt_/a_gt_ Could you create a fix based on what the standard is checking to deal with Alpha Test ?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI created the issue on the github repo for follow up _lt_a href_eq__qt_https_dd_//github.com/BabylonJS/Exporters/issues/335_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//github.com/BabylonJS/Exporters/issues/335_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-10T13:52:22Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tGreat! So I think the quick solution for the time being is to set _qt_mesh.material.transparencyMode _eq_ 1_sm__qt_ like _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20526_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20526-vnc3r/_qt_ rel_eq__qt__qt__gt_@V!nc3r_lt_/a_gt_ and _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt_ suggested.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Sebavan","Date":"2018-10-10T14:42:50Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tyup as a workaround for now cause after it is what will happen in the exporter.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kcoley","Date":"2018-10-10T16:59:11Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32476_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/_qt_ rel_eq__qt__qt__gt_@hcmetal_lt_/a_gt__lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/?do_eq_hovercard_qt_ data-mentionid_eq__qt_20193_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/20193-sebavan/_qt_ rel_eq__qt__qt__gt_@Sebavan_lt_/a_gt_ sure thing_co_ I_t_ll look into this.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-11T01:31:08Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tAfter reading the docs_dd_ _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/resources/transparency_and_how_meshes_are_rendered_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/resources/transparency_and_how_meshes_are_rendered_lt_/a_gt_ and experimenting with the bamboo_co_ I realized there might be a dilemma here_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t1. Transparency mode set to _qt_alpha test_qt_ will result in bad anti-aliasing around the transparency borders (which is very obvious from afar)_co_ but have no z-sorting or normal-inversion problems_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t2. Transparency mode set to _qt_alpha blend_qt_ will result in good anti-aliasing around the transparency borders_co_ but have z-sorting and normal-inversion problems_co_ because the model is intersecting with itself and backfaceculling is disabled_sm_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tEven if I enable backfaceculling and double the faces of leaves with inverted normals (which might cost some performance?)_co_ the z-sorting is still problematic.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I am wondering what is the best way to deal with this kind of plant models in Babylon...\n_lt_/p_gt_\n\n_lt_p_gt_\n\tIs there a better way to break up the model somehow and set proper material types so that the idea combo of _qt_good anti-aliasing_qt_ + _qt_correct z-sorting_qt_ + _qt_no inverted normals_qt_?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOr maybe the alpha channel in the .png albedo map should be somehow premultiplied (or not) to achieve better anti-aliasing?\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThis might be leading to a different issue than the original topic of the post_co_ but I think this is a very important topic nevertheless because plants and vegetation are common in both game and arch-viz.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope we can work together on this issue and eventually make the bamboo look good_lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tCheers everyone!\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2018-10-11T15:51:29Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tWell we have a set of tools to help in this situation_dd_ _lt_a href_eq__qt_https_dd_//doc.babylonjs.com/resources/transparency_and_how_meshes_are_rendered#things-to-do-and-not-to-do_qt_ ipsnoembed_eq__qt_true_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//doc.babylonjs.com/resources/transparency_and_how_meshes_are_rendered#things-to-do-and-not-to-do_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTechnically_co_ you can separate the leaves and make them transparent with a predepth pass. This way you could get both_dd_ correct z-sorting (prepass) + good AA\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-12T08:27:40Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/?do_eq_hovercard_qt_ data-mentionid_eq__qt_4442_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/4442-deltakosh/_qt_ rel_eq__qt__qt__gt_@Deltakosh_lt_/a_gt__co_ thanks a lot for the tip.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSeperating the leaves from the stems and setting different material attributes has given me the best of two worlds.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kcoley","Date":"2018-10-18T21:54:13Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tHi _lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32476_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/_qt_ rel_eq__qt__qt__gt_@hcmetal_lt_/a_gt_.  I originally tried to author a custom attribute on the textures so you can specify which uses alpha mask or alpha blend_co_ but unfortunately_co_ 3ds Max would not allow me to do this.  So we are going to try to create a custom Babylon.js node that can be used in junction with material in the scene to give you the option to set these properties if it works.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-19T11:44:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30070_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/_qt_ rel_eq__qt__qt__gt_@kcoley_lt_/a_gt__co_ thanks! Looking forward to it.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tor now I just write some code to set the appropriate transparencyMode for each material once they are loaded into the scene.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"kcoley","Date":"2018-10-25T03:16:39Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/?do_eq_hovercard_qt_ data-mentionid_eq__qt_32476_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/32476-hcmetal/_qt_ rel_eq__qt__qt__gt_@hcmetal_lt_/a_gt_ turns out I was able to add a custom attribute to the materials to allow toggling AlphaTest during export.  I just pushed an update to the 3ds Max exporter which supports this.  Feel free to give it a try.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tTo enable the alpha test toggle_co_ you will have to set a _qt__lt_span style_eq__qt_background-color_dd_#ffffff_sm_color_dd_#032f62_sm_font-size_dd_12px_sm__qt__gt_babylonAlphaTest_lt_/span_gt__qt_ boolean custom attribute on your materials.  Setting this to true will enable alpha test mode.  You can use this script for reference_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\thttps_dd_//github.com/BabylonJS/Exporters/blob/master/3ds%20Max/MaxScripts/BabylonMaterialAttributes.ms\n_lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n_lt_p_gt_\n\tLet me know if you have questions on this.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"hcmetal","Date":"2018-10-31T23:39:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\t_lt_a contenteditable_eq__qt_false_qt_ data-ipshover_eq__qt__qt_ data-ipshover-target_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/?do_eq_hovercard_qt_ data-mentionid_eq__qt_30070_qt_ href_eq__qt_http_dd_//www.html5gamedevs.com/profile/30070-kcoley/_qt_ rel_eq__qt__qt__gt_@kcoley_lt_/a_gt__co_ just tried it out. It is working great_co_ thanks!\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]