[{"Owner":"ozRocker","Date":"2016-05-17T15:14:31Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tI_t_ve been asking a lot of questions lately.  Well here_t_s why_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_img class_eq__qt_ipsImage_qt_ src_eq__qt_http_dd_//www.punkoffice.com/webiverse/images/webiverse.jpg_qt_ alt_eq__qt_webiverse.jpg_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_a href_eq__qt_http_dd_//www.punkoffice.com/webiverse_qt_ rel_eq__qt_external nofollow_qt__gt_www.punkoffice.com/webiverse_lt_/a_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m working on a virtual world.  This runs on mobile devices and its networked_co_ so yeh_co_ you can open multiple browser windows to see for yourself.  Its just a start.  There_t_s much to be done such as flying_co_ building_co_ asset management_co_ region management_co_ basic physics_co_ etc...  I_t_m aiming to make it a collaborative workspace where people can build stuff together.  I have a lot of experience playing Second Life_co_ developing for it and also running the OpenSim server so I_t_ve used some of my knowledge from that.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tFor those who care and want the details_co_ here we go_dd_\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Client_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m using typescript for the first time...and I love it!  I can now use Visual Studio for EVERYTHING.  I just felt stupid writing a big project in javascript so I decided to grow up and learn typescript.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Server_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI_t_m using C#.  Its one of my fave languages.  So quick and easy and portable so I can build in Visual Studio then just copy the file to my Linux server and it works.  I was tossing up between nodejs and C#.  I_t_ve seen the benchmarks and for the bigger stuff C# comes out faster.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Networking_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tJust using websockets for this one.  No libraries required on client side_co_ just straight javascript.  Using Fleck on the server.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Communication_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe client sends keypresses to the server NOT position / rotation information.  This is to prevent client from cheating and changing position in browser debugging tools.  Keypresses are sent every 50 milli-seconds when the user is holding down the key.  It has to be done this way.  Its not possible to send just a DOWN and UP key event because network lag will give a variable time difference between DOWN and UP and calculate different movements to the client.  This will make _qt_client correction_qt_ go crazy and will cause the avatar to snap back every time they release a key.  Also_co_ you can_t_t send timestamps with these keypresses _t_cos the client can change them and make their character basically teleport.  I know _t_cos I worked on this problem for weeks.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Client prediction / correction_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe client will _qt_predict_qt_ the movement when user presses the keys so the avatar moves instantly.  The server will calculate movement using the same formula and send the new position / rotation the client.  If the client_t_s current position / rotation is different (due to rounding errors or cheating) it will be corrected to mirror the server.  The process is complicated and I had to read a lot of different tutorials on how to do this properly.  This is the technique that John Carmack invented when he made Quake for WAN.  This technique is never perfect though.  You either have speed or accuracy_co_ but you can_t_t have both (which is why in multiplayer games you can still get hit by a bullet even if you managed to quickly hide behind a wall).\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Logging_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe server is logging to a MySQL database.  I_t_m logging players entering and leaving_co_ their user agent_co_ their FPS every minute (minimum_co_ median_co_ maximum).    I_t_m also logging the amount of outgoing and incoming data between each player.  I really need stats so I can see if this is feasible for mobile users.  I remember Second Life really drained the bandwidth.  That_t_s ok for a home connection_co_ but not for someone using their mobile phone with a data limit.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Authentication_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAll my client code is visible.  Sockets can also be connected from anywhere and bad data sent to screw up the server.  I need to stop this (or at least make it harder to do).  I_t_m using a session key from PHP then sending that session key through the socket on initial connection to verify that its the same client.  That session key is deleted as soon as they_t_ve been verified.\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_Physics_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe only physics so far is simple moving forward and rotating.  I_t_d like to add gravity as well.  The only problem is the algorithm must be the same on client and server.  If I can_t_t find a library that exists in Javascript and also C# I_t_ll have to write my own. I_t_m prepared to do that though.  However_co_ frame rate has priority especially with mobile devices.  I will sacrifice physics to keep a smooth frame rate if I have to.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"Deltakosh","Date":"2016-05-17T16:23:02Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tLovely!!\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"jerome","Date":"2016-05-17T16:50:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tim-pres-sive !!! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-05-17T21:23:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_128753_qt_ data-ipsquote-contentid_eq__qt_22611_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1463498071_qt_ data-ipsquote-userid_eq__qt_12544_qt_ data-ipsquote-username_eq__qt_ozRocker_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t5 hours ago_co_ ozRocker said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tYou either have speed or accuracy_co_ but you can_t_t have both\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tHere you have Heisenberg_t_s uncertainty principle so you may not have Oimo physics working on a server but you do have quantum physics.?\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-18T04:47:12Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tRight now I_t_m going for accuracy so there_t_s lag.  What you see are player positions a few seconds ago (or whatever the network lag is).  Someone asked about adding weapons.  I_t_d need to add player prediction for that so what you see is where a player will most likely be at that point in time\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-05-18T08:20:23Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOut of interest what are you thinking of applying gravity to? People jumping up_sm_ leaping forward_sm_ flying and falling down? Objects being thrown_sm_ knocked off tables and dropped?\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-18T08:34:05Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_128875_qt_ data-ipsquote-contentid_eq__qt_22611_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1463559623_qt_ data-ipsquote-userid_eq__qt_14282_qt_ data-ipsquote-username_eq__qt_JohnK_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t12 minutes ago_co_ JohnK said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tOut of interest what are you thinking of applying gravity to? People jumping up_sm_ leaping forward_sm_ flying and falling down? Objects being thrown_sm_ knocked off tables and dropped?\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tobjects being pushed around and knocked off and players walking on stuff and falling off\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-05-18T08:57:57Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tOK so relatively simple linear motion as opposed  to projectile motion. Though perhaps some rotation during falling. Writing your own _t_gravity algorithm_t_  should be quite straight forward.\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-18T09:01:42Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t_lt_p_gt_\n\tI_t_ll also need them to react if they hit something_co_ so I need to incorporate bounce\n_lt_/p_gt_\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"iiceman","Date":"2016-05-18T11:46:04Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tLooks great so far_co_ I didn_t_t see any noticeable lag when trying things out. Good job! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\tWell_co_ with node.js you could probably use the cannon module _lt_a href_eq__qt_https_dd_//www.npmjs.com/package/cannon_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.npmjs.com/package/cannon_lt_/a_gt_ to get a server side equivalent to the babylon physics implementation. Writing your own physics seems like a lot of work.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-18T12:13:03Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_128898_qt_ data-ipsquote-contentid_eq__qt_22611_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1463571964_qt_ data-ipsquote-userid_eq__qt_12304_qt_ data-ipsquote-username_eq__qt_iiceman_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t16 minutes ago_co_ iiceman said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tWell_co_ with node.js you could probably use the cannon module _lt_a href_eq__qt_https_dd_//www.npmjs.com/package/cannon_qt_ rel_eq__qt_external nofollow_qt__gt_https_dd_//www.npmjs.com/package/cannon_lt_/a_gt_ to get a server side equivalent to the babylon physics implementation. Writing your own physics seems like a lot of work.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tCannon would be good.  Unfortunately I_t_m using C# on the server-side.  I might not even have physics.  It depends how much it_t_ll drop the FPS_co_ or how much data would be going back and forth between clients and server.   I_t_ve spent years in Second Life without using any physics whatsoever\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"satguru","Date":"2016-05-19T02:39:30Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNice!\n_lt_/p_gt_\n\n_lt_p_gt_\n\tBest of luck with this project _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n_lt_p_gt_\n\t \n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-19T07:53:49Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_128997_qt_ data-ipsquote-contentid_eq__qt_22611_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1463625570_qt_ data-ipsquote-userid_eq__qt_16886_qt_ data-ipsquote-username_eq__qt_satguru_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t5 hours ago_co_ satguru said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tNice!\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tBest of luck with this project _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt__lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t \n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tThanx mate! _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ Hopefully I can turn it into something useful\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-05-19T09:08:25Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tStill thinking about gravity and it is obviously not as easy as I first thought. Some of my thoughts below_co_ just ignore if not useful.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tConsidering a person moving forward and then falling of an edge and for the moment ignoring how the lack of ground below is detected and that at some point (s)he will hit the ground.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tKey presses for the forward motion are being sent every 50ms at the start of the fall key presses are now ignored and a _t__lt_em_gt_falling key_lt_/em_gt__t_ is sent every 50ms (this is how synchronisation is maintained_co_ I think?).\n_lt_/p_gt_\n\n_lt_p_gt_\n\tA count of the number of falling keys sent needs to be kept _lt_strong_gt_fkc_lt_/strong_gt__co_ a time period _lt_strong_gt_t_lt_/strong_gt__co_ for each falling key is needed (this could match the time period for key sending or could be any number that gives a realistic fall)_co_ the acceleration due to gravity _lt_strong_gt_g_lt_/strong_gt__co_ would be needed (9.8 m/sec squared in real world or again any number that works). Given that the vertical position of the person at the start of the fall is _lt_strong_gt_y_lt_/strong_gt_ then the vertical position of the person after _lt_strong_gt_fkc_lt_/strong_gt_ falling keys is given by\n_lt_/p_gt_\n\n_lt_p_gt_\n\t_lt_strong_gt_                                                                                                         y - 0.5 * g * (fkc * t)^2_lt_/strong_gt_\n_lt_/p_gt_\n\n_lt_p_gt_\n\tOK still a long way to go but hope this may be a useful start.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"ozRocker","Date":"2016-05-19T10:30:46Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_blockquote class_eq__qt_ipsQuote_qt_ data-ipsquote_eq__qt__qt_ data-ipsquote-contentapp_eq__qt_forums_qt_ data-ipsquote-contentclass_eq__qt_forums_Topic_qt_ data-ipsquote-contentcommentid_eq__qt_129023_qt_ data-ipsquote-contentid_eq__qt_22611_qt_ data-ipsquote-contenttype_eq__qt_forums_qt_ data-ipsquote-timestamp_eq__qt_1463648905_qt_ data-ipsquote-userid_eq__qt_14282_qt_ data-ipsquote-username_eq__qt_JohnK_qt__gt_\n\t_lt_div class_eq__qt_ipsQuote_citation_qt__gt_\n\t\t52 minutes ago_co_ JohnK said_dd_\n\t_lt_/div_gt_\n\n\t_lt_div class_eq__qt_ipsQuote_contents_qt__gt_\n\t\t_lt_p_gt_\n\t\t\tStill thinking about gravity and it is obviously not as easy as I first thought. Some of my thoughts below_co_ just ignore if not useful.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tConsidering a person moving forward and then falling of an edge and for the moment ignoring how the lack of ground below is detected and that at some point (s)he will hit the ground.\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tKey presses for the forward motion are being sent every 50ms at the start of the fall key presses are now ignored and a _t__lt_em_gt_falling key_lt_/em_gt__t_ is sent every 50ms (this is how synchronisation is maintained_co_ I think?).\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tA count of the number of falling keys sent needs to be kept _lt_strong_gt_fkc_lt_/strong_gt__co_ a time period _lt_strong_gt_t_lt_/strong_gt__co_ for each falling key is needed (this could match the time period for key sending or could be any number that gives a realistic fall)_co_ the acceleration due to gravity _lt_strong_gt_g_lt_/strong_gt__co_ would be needed (9.8 m/sec squared in real world or again any number that works). Given that the vertical position of the person at the start of the fall is _lt_strong_gt_y_lt_/strong_gt_ then the vertical position of the person after _lt_strong_gt_fkc_lt_/strong_gt_ falling keys is given by\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\t_lt_strong_gt_                                                                                                         y - 0.5 * g * (fkc * t)^2_lt_/strong_gt_\n\t\t_lt_/p_gt_\n\n\t\t_lt_p_gt_\n\t\t\tOK still a long way to go but hope this may be a useful start.\n\t\t_lt_/p_gt_\n\t_lt_/div_gt_\n_lt_/blockquote_gt_\n\n_lt_p_gt_\n\tAwesome! I appreciate your help with this mate _lt_img alt_eq__qt__dd_)_qt_ data-emoticon_eq__qt__qt_ height_eq__qt_20_qt_ src_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/default_smile.png_qt_ srcset_eq__qt_http_dd_//www.html5gamedevs.com/uploads/emoticons/smile@2x.png 2x_qt_ title_eq__qt__dd_)_qt_ width_eq__qt_20_qt_ /_gt_ \n_lt_/p_gt_\n\n_lt_p_gt_\n\tThe server should already know a player is falling since it has records of player and object positions.  It needs to calculate this without requiring notification from the client so we can be sure if its correct.  If its relying on the client they could tamper with the code or messages and you could have someone floating.   However_co_ if I want _qt_client prediction_qt_ I need to somehow synchronise the client results with server results.  Maybe I can have a running index on both client and server from the time the player starts falling.  In this case only the server would be sending its positions to the client with the index to match.  Another option is making it easy by bypassing client prediction and synchronising and just waiting on server results_co_ but then the player would see physics taking effect half a second later (or whatever the lag is).\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"},{"Owner":"JohnK","Date":"2016-05-19T14:09:10Z","Content":"_lt_div class_eq__qt_mages_qt__gt_\n\t\t\t\n_lt_p_gt_\n\tNot entirely sure we are looking at identical pictures_co_ your picture and mine are very close but some details may be different. Could be my lack of understanding or my lack of clarity.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tAs I understand it the client has to send data to the server or there is no project. In your case this is in the form of codes representing key presses and there is then some chance of the _t_player_t_ interfering with this code.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tSo I believe the current situation looks like this.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_every 50 ms\n  on client\n    read key pressed\n    send key code to server\n    use key code to move avatar to new predicted position\n    receive position from server\n    correct position of avatar\n\n  on server\n    read key code\n    use key code to calculate avatar position\n    send position to client_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tNow when I talked about a _t_falling key_t_ I was meaning a local computer generated code number to be interpreted by the server in order to calculate the new position of the avatar. What I was trying to do was to send the same sort of data sequence all the time to the server. So instead of sending an 89_co_ say_co_ for move forward taken from the key press you send a 500 for fall because the avatar is falling. In my mind there is the same chance of the player hacking the fall code as there is of hacking the key code.\n_lt_/p_gt_\n\n_lt_pre_gt_\n_lt_code_gt_every 50 ms\n  on client\n    read key pressed\n    if (avatar over space) {\n        if(not falling) {\n            falling _eq_ true_sm_\n            startY _eq_ avatar.position.y_sm_\n            fkc _eq_ 0_sm_\n        }\n        send falling code to server\n        fkc++_sm_ \n        avatar.position.y _eq_ startY -0.5 * g * (fkc *t)^2_sm_\n        receive position from server\n        correct position of avatar        \n    }\n   // need to deal with avatar hits ground falling set to false\n    else {\n        send key code to server\n        use key code to move avatar to new predicted position\n        receive position from server\n        correct position of avatar\n    }\n\n  on server\n    read key code\n    use key code to calculate avatar position\n    send position to client_lt_/code_gt__lt_/pre_gt_\n\n_lt_p_gt_\n\tPlease bear in mind that the pseudo-code above is just to indicate my thinking and would need plenty more though to get the logic right. Also bear in mind what I know about multi-player games could be written on a pinhead and still leave room for the fairies.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tI suppose the point I am trying to make is that sending a code to indicate falling and how the server reacts to that code by carrying out a position calculation and sending it back  is really no different than sending a key press code and the server doing and sending back a position calculation except in the level of complexity of the calculation. Also that the scope for cheating must be of the same level.\n_lt_/p_gt_\n\n_lt_p_gt_\n\tHope I haven_t_t missed the point entirely.\n_lt_/p_gt_\n\n\n\t\t\t\n\t\t_lt_/div_gt_\n\n\t\t_lt_div class_eq__qt_ipsI_qt__gt__lt_/div_gt__lt_/div_gt_"}]