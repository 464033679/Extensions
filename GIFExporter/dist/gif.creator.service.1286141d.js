parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({8:[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],5:[function(require,module,exports) {
var process = require("process");
var t=require("process"),i=this&&this.__awaiter||function(t,i,e,r){return new(e||(e=Promise))(function(n,o){function s(t){try{h(r.next(t))}catch(t){o(t)}}function a(t){try{h(r.throw(t))}catch(t){o(t)}}function h(t){t.done?n(t.value):new e(function(i){i(t.value)}).then(s,a)}h((r=r.apply(t,i||[])).next())})},e=this&&this.__generator||function(t,i){var e,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=i.call(t,s)}catch(t){o=[6,t],r=0}finally{e=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function r(t){return~~t}Object.defineProperty(exports,"__esModule",{value:!0});var n,o=100,s=256,a=s-1,h=4,c=16,u=1<<c,_=10,f=1<<_,l=10,p=u>>l,m=u<<_-l,w=s>>3,d=6,b=1<<d,g=w*b,y=30,C=10,v=1<<C,x=8,E=1<<x,G=C+x,T=1<<G,k=499,F=491,I=487,S=503,L=3*S;function B(t,i){var e,n,f,w,b;function C(t,i,r,n,o){e[i][0]-=t*(e[i][0]-r)/v,e[i][1]-=t*(e[i][1]-n)/v,e[i][2]-=t*(e[i][2]-o)/v}function x(t,i,r,n,o){for(var a,h,c=Math.abs(i-t),u=Math.min(i+t,s),_=i+1,f=i-1,l=1;_<u||f>c;)h=b[l++],_<u&&((a=e[_++])[0]-=h*(a[0]-r)/T,a[1]-=h*(a[1]-n)/T,a[2]-=h*(a[2]-o)/T),f>c&&((a=e[f--])[0]-=h*(a[0]-r)/T,a[1]-=h*(a[1]-n)/T,a[2]-=h*(a[2]-o)/T)}function G(t,i,r){var n,o,a,u,d,b=~(1<<31),g=b,y=-1,C=y;for(n=0;n<s;n++)o=e[n],(a=Math.abs(o[0]-t)+Math.abs(o[1]-i)+Math.abs(o[2]-r))<b&&(b=a,y=n),(u=a-(f[n]>>c-h))<g&&(g=u,C=n),d=w[n]>>l,w[n]-=d,f[n]+=d<<_;return w[y]+=p,f[y]-=m,C}this.buildColormap=function(){!function(){var t,i;for(e=[],n=[],f=[],w=[],b=[],t=0;t<s;t++)i=(t<<h+8)/s,e[t]=[i,i,i],w[t]=u/s,f[t]=0}(),function(){var e,n,s,a,c,u,_=t.length,f=r(30+(i-1)/3),l=r(_/(3*i)),p=r(l/o),m=v,w=g,T=w>>d;for(T<=1&&(T=0),e=0;e<T;e++)b[e]=r(m*((T*T-e*e)*E/(T*T)));_<L?(i=1,n=3):n=_%k!=0?3*k:_%F!=0?3*F:_%I!=0?3*I:3*S;var B=0;for(e=0;e<l;)if(C(m,u=G(s=(255&t[B])<<h,a=(255&t[B+1])<<h,c=(255&t[B+2])<<h),s,a,c),0!==T&&x(T,u,s,a,c),(B+=n)>=_&&(B-=_),0===p&&(p=1),++e%p==0)for(m-=m/f,(T=(w-=w/y)>>d)<=1&&(T=0),u=0;u<T;u++)b[u]=r(m*((T*T-u*u)*E/(T*T)))}(),function(){for(var t=0;t<s;t++)e[t][0]>>=h,e[t][1]>>=h,e[t][2]>>=h,e[t][3]=t}(),function(){var t,i,r,o,h,c,u=0,_=0;for(t=0;t<s;t++){for(h=t,c=(r=e[t])[1],i=t+1;i<s;i++)(o=e[i])[1]<c&&(h=i,c=o[1]);if(o=e[h],t!=h&&(i=o[0],o[0]=r[0],r[0]=i,i=o[1],o[1]=r[1],r[1]=i,i=o[2],o[2]=r[2],r[2]=i,i=o[3],o[3]=r[3],r[3]=i),c!=u){for(n[u]=_+t>>1,i=u+1;i<c;i++)n[i]=t;u=c,_=t}}for(n[u]=_+a>>1,i=u+1;i<256;i++)n[i]=a}()},this.getColormap=function(){for(var t=[],i=[],r=0;r<s;r++)i[e[r][3]]=r;for(var n=0,o=0;o<s;o++){var a=i[o];t[n++]=e[a][0],t[n++]=e[a][1],t[n++]=e[a][2]}return t},this.lookupRGB=function(t,i,r){for(var o,a,h,c=1e3,u=-1,_=n[i],f=_-1;_<s||f>=0;)_<s&&((h=(a=e[_])[1]-i)>=c?_=s:(_++,h<0&&(h=-h),(o=a[0]-t)<0&&(o=-o),(h+=o)<c&&((o=a[2]-r)<0&&(o=-o),(h+=o)<c&&(c=h,u=a[3])))),f>=0&&((h=i-(a=e[f])[1])>=c?f=-1:(f--,h<0&&(h=-h),(o=a[0]-t)<0&&(o=-o),(h+=o)<c&&((o=a[2]-r)<0&&(o=-o),(h+=o)<c&&(c=h,u=a[3]))));return u}}exports.default=B;var P=function(){function t(t){this._colorTable=[],this._GCT=[],this._distribution=51,this._colorLookup={},this._neuQuant=new B(t,20),this._neuQuant.buildColormap(),this._colorTable=this._neuQuant.getColormap()}return t.prototype.generate=function(){var t=this,i="",e=0;return this._colorTable.forEach(function(r,n,o){if(i+=t.pad(r),(n+1)%3==0&&(t._GCT.push(i),t._colorLookup[i]=e,e++,i=""),n===t._colorTable.length-1)return[t._colorLookup,t._GCT]}),[this._colorLookup,this._GCT]},t.prototype.lookupRGB=function(t){var i=parseInt(t.substr(0,2),16),e=parseInt(t.substr(2,2),16),r=parseInt(t.substr(4,2),16);return this._neuQuant.lookupRGB(i,e,r)},t.prototype.pad=function(t){return t<16?"0"+t.toString(16):t.toString(16)},t}();exports.ColorTableGenerator=P;var D=function(){function t(){this.data=[]}return t.prototype.get=function(){return this.data},t.prototype.write=function(t){this.data.push(t)},t.prototype.writeArray=function(t,i){for(var e=0;e<i;e++)this.write(t[e])},t.prototype.writeUTF=function(t){for(var i=0;i<t.length;i++)this.write(t.charCodeAt(i))},t.prototype.writeColor=function(t){for(var i=0;i<t.length;i+=2){var e=parseInt(t[i]+t[i+1],16);this.write(e)}},t.prototype.writeLittleEndian=function(t){this.write(255&t),this.write(t>>8&255)},t.prototype.reset=function(){this.data=[]},t}();exports.EncodedImage=D;var A=function(){function t(t,i,e,r){this.EOF=1,this.BITS=12,this.HSIZE=5003,this._maxbits=this.BITS,this._maxmaxcode=1<<this.BITS,this._htab=[],this._codetab=[],this._hsize=this.HSIZE,this._free_ent=0,this._clear_flg=!1,this._cur_accum=0,this._cur_bits=0,this._masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],this._accum=[],this._imgW=t,this._imgH=i,this._pixels=e,this._initCodeSize=Math.max(2,r)}return t.prototype.writeCharToPacket=function(t,i){this._accum[this._a_count++]=t,this._a_count>=254&&this.flush_char(i)},t.prototype.cl_block=function(t){this.cl_hash(this._hsize),this._free_ent=this._ClearCode+2,this._clear_flg=!0,this.output(this._ClearCode,t)},t.prototype.cl_hash=function(t){for(var i=0;i<t;++i)this._htab[i]=-1},t.prototype.compress=function(t,i){var e,r,n,o,s,a,h;for(this._g_init_bits=t,this._clear_flg=!1,this._n_bits=this._g_init_bits,this._maxcode=this.MAXCODE(this._n_bits),this._ClearCode=1<<t-1,this._EOFCode=this._ClearCode+1,this._free_ent=this._ClearCode+2,this._a_count=0,o=this.nextPixel(),h=0,e=this._hsize;e<65536;e*=2)++h;h=8-h,a=this._hsize,this.cl_hash(a),this.output(this._ClearCode,i);t:for(;(n=this.nextPixel())!=this.EOF;)if(e=(n<<this._maxbits)+o,r=n<<h^o,this._htab[r]!=e){if(this._htab[r]>=0){s=a-r,0===r&&(s=1);do{if((r-=s)<0&&(r+=a),this._htab[r]==e){o=this._codetab[r];continue t}}while(this._htab[r]>=0)}this.output(o,i),o=n,this._free_ent<this._maxmaxcode?(this._codetab[r]=this._free_ent++,this._htab[r]=e):this.cl_block(i)}else o=this._codetab[r];this.output(o,i),this.output(this._EOFCode,i)},t.prototype.encode=function(t){t.write(this._initCodeSize),this._remaining=this._imgW*this._imgH,this._curPixel=0,this.compress(this._initCodeSize+1,t),t.write(0)},t.prototype.flush_char=function(t){this._a_count>0&&(t.write(this._a_count),t.writeArray(this._accum,this._a_count),this._a_count=0)},t.prototype.MAXCODE=function(t){return(1<<t)-1},t.prototype.nextPixel=function(){return 0===this._remaining?this.EOF:(--this._remaining,255&this._pixels[this._curPixel++])},t.prototype.output=function(t,i){for(this._cur_accum&=this._masks[this._cur_bits],this._cur_bits>0?this._cur_accum|=t<<this._cur_bits:this._cur_accum=t,this._cur_bits+=this._n_bits;this._cur_bits>=8;)this.writeCharToPacket(255&this._cur_accum,i),this._cur_accum>>=8,this._cur_bits-=8;if((this._free_ent>this._maxcode||this._clear_flg)&&(this._clear_flg?(this._maxcode=this.MAXCODE(this._n_bits=this._g_init_bits),this._clear_flg=!1):(++this._n_bits,this._n_bits==this._maxbits?this._maxcode=this._maxmaxcode:this._maxcode=this.MAXCODE(this._n_bits))),t==this._EOFCode){for(;this._cur_bits>0;)this.writeCharToPacket(255&this._cur_accum,i),this._cur_accum>>=8,this._cur_bits-=8;this.flush_char(i)}},t}();exports.LZWEncoder=A;var M=function(){function t(){this.stream=new D,this.frameCount=0,console.log("Generator now running...")}return t.prototype.init=function(t,i,e){this.reset(),this.width=t,this.height=i,this.GCT=e,this.writeHeader(),this.writeLogicalScreenDescriptor(),this.writeGlobalColorTable(),this.writeApplicationExtension()},t.prototype.generateFrame=function(t){this.frameIndexedPixels=t,this.frameCount+=1,console.log("generating frame "+this.frameCount),this.writeGraphicControlExtension(),this.writeImageDescriptor(),this.writeImageData()},t.prototype.getStream=function(){return this.writeTrailer(),this.stream.get()},t.prototype.writeHeader=function(){this.stream.writeUTF("GIF89a")},t.prototype.writeLogicalScreenDescriptor=function(){this.stream.writeLittleEndian(this.width),this.stream.writeLittleEndian(this.height),this.stream.write(247),this.stream.write(0),this.stream.write(0)},t.prototype.writeGlobalColorTable=function(){var t=this,i=0;this.GCT.forEach(function(e){i+=3,t.stream.writeColor(e)});for(var e=i;e<768;e++)this.stream.write(0)},t.prototype.writeApplicationExtension=function(){this.stream.write(33),this.stream.write(255),this.stream.write(11),this.stream.writeUTF("NETSCAPE2.0"),this.stream.write(3),this.stream.write(1),this.stream.writeLittleEndian(0),this.stream.write(0)},t.prototype.writeGraphicControlExtension=function(){this.stream.write(33),this.stream.write(249),this.stream.write(4),this.stream.write(4),this.stream.writeLittleEndian(9),this.stream.write(0),this.stream.write(0)},t.prototype.writeImageDescriptor=function(){this.stream.write(44),this.stream.writeLittleEndian(0),this.stream.writeLittleEndian(0),this.stream.writeLittleEndian(this.width),this.stream.writeLittleEndian(this.height),this.stream.write(0)},t.prototype.writeImageData=function(){return i(this,void 0,Promise,function(){return e(this,function(t){return new A(this.width,this.height,this.frameIndexedPixels,8).encode(this.stream),console.log("completed frame "+this.frameCount),[2]})})},t.prototype.writeTrailer=function(){this.stream.write(59),console.log("Generator now finished."),this.frameCount=0},t.prototype.writeLocalColorTable=function(){},t.prototype.writePlainTextExtension=function(){},t.prototype.writeCommentExtension=function(){},t.prototype.reset=function(){this.stream.reset(),this.frameCount=0},t}();exports.GIFGenerator=M;var R,O=self,z=new M,H=[];function U(t,i,e){var r,n;return n=(r=(R=new P(t)).generate())[0],function(t,i,e){z.init(i,e,t)}(r[1],i,e),n}function Q(t,i,e){return r=[],n=[],t.forEach(function(t){var i=function(t){var i=t.filter(function(t,i){return(i+1)%4!=0}),e=[],r="";return i.forEach(function(t,i){r+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t),(i+1)%3==0&&(e.push(r),r="")}),{numericalRGBData:i,stringRGBData:e}}(t),e=i.numericalRGBData,o=i.stringRGBData;r.push(e),n.push(o)}),{numericalRGBFrames:r,stringRGBFrames:n};var r,n}function X(t,i){return function(t,i){var e=[];return t.forEach(function(t,i){var r=[];t.forEach(function(t){r.push(function(t){return R.lookupRGB(t)}(t))}),e.push(r)}),e}(t).forEach(function(t){z.generateFrame(t)}),z.getStream()}function W(t){H.push(new Uint8Array(t))}function Z(t){return t.filter(function(t,i){return(i+1)%5==0}).reduce(function(t,i){var e=new Uint8Array(t.length+i.length);return e.set(t),e.set(i,t.length),e},new Uint8Array([]))}onmessage=function(t){var i=t.data,e=i.job,r=i.params;switch(e){case"createGIF":var n=r.width,o=r.height,s=Q(H,n,o),a=s.numericalRGBFrames,h=X(s.stringRGBFrames,U(Z(a),n,o));O.postMessage(h);break;case"collectFrames":W(r.frame)}};
},{"process":8}]},{},[5], null)
//# sourceMappingURL=/gif.creator.service.1286141d.map